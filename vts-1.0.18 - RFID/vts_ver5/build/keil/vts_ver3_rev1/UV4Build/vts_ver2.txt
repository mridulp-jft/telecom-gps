; generated by Component: ARM Compiler 5.04 update 1 (build 49) Tool: ArmCC [5040049]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\uv4build\vts_ver2.o --asm_dir=.\UV4Build\ --list_dir=.\UV4Build\ --depend=.\uv4build\vts_ver2.d --cpu=Cortex-M0+ --apcs=interwork -O0 -I..\..\..\src\projects\KEIL_MAG -I..\..\..\src\common -I..\..\..\src\cpu -I..\..\..\src\cpu\headers\CMSIS\MKL26Z4\Include -I..\..\..\src\drivers\llwu -I..\..\..\src\drivers\lptmr -I..\..\..\src\drivers\mcg -I..\..\..\src\drivers\pmc -I..\..\..\src\drivers\rcm -I..\..\..\src\drivers\rtc -I..\..\..\src\drivers\smc -I..\..\..\src\drivers\uart -I..\..\..\src\drivers\cmp -I..\..\..\src\platforms -I..\.. -I..\..\..\src\cpu\CMSIS\Source -I..\..\..\src\cpu\CMSIS\Source\arm -IC:\Keil_v5\ARM\RV31\Inc -IC:\Users\Mridul\Desktop\vts_ver5\build\keil\vts_ver3_rev1\RTE -IC:\Keil_v5\ARM\PACK\Keil\Kinetis_KLxx_DFP\1.5.0\Device\Include -IC:\Keil_v5\ARM\CMSIS\Include -D__RTX -D__MICROLIB -DMKL26Z128xxx4 -DKEIL -DFREEDOM -DCMSIS --omf_browse=.\uv4build\vts_ver2.crf ..\..\..\src\projects\KEIL_MAG\vts_ver2.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_x
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_longlong_hex
                          REQUIRE _printf_s
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_c
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_f
                          REQUIRE _printf_fp_dec
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                  detect_motion PROC
;;;85     
;;;86     void detect_motion()
000000  b510              PUSH     {r4,lr}
;;;87     {speed=0;
000002  2000              MOVS     r0,#0
000004  49fe              LDR      r1,|L1.1024|
000006  6008              STR      r0,[r1,#0]  ; speed
;;;88     	
;;;89     			//if accelerometer works do this
;;;90     	//current status : not working under test
;;;91     //						if(	(resultx+offx>temp1x+2) || (resultx+offx<temp1x-2) ||  (resulty+offy>temp1y+2) || (resulty+offy<temp1y-2)||(resultz+offz>temp1z+2)||(resultz+offz<temp1z-2)	)
;;;92     //						{motion = 1;}
;;;93     //						else
;;;94     //						{motion = 0;}
;;;95     
;;;96     //						temp1x=resultx+offx;
;;;97     //						temp1y=resulty+offy;
;;;98     //						temp1z=resultz+offz;  
;;;99     
;;;100    			//else do this
;;;101    if(speed <  5)
000008  49fe              LDR      r1,|L1.1028|
00000a  48fd              LDR      r0,|L1.1024|
00000c  6800              LDR      r0,[r0,#0]  ; speed
00000e  f7fffffe          BL       __aeabi_cfcmple
000012  d203              BCS      |L1.28|
;;;102    {motion = 0;}
000014  2000              MOVS     r0,#0
000016  49fc              LDR      r1,|L1.1032|
000018  6008              STR      r0,[r1,#0]  ; motion
00001a  e002              B        |L1.34|
                  |L1.28|
;;;103    else 
;;;104    {motion = 1;}
00001c  2001              MOVS     r0,#1
00001e  49fa              LDR      r1,|L1.1032|
000020  6008              STR      r0,[r1,#0]  ; motion
                  |L1.34|
;;;105        //
;;;106    
;;;107    if(motion == 0)
000022  48f9              LDR      r0,|L1.1032|
000024  6800              LDR      r0,[r0,#0]  ; motion
000026  2800              CMP      r0,#0
000028  d105              BNE      |L1.54|
;;;108    	motion_samples++;
00002a  48f8              LDR      r0,|L1.1036|
00002c  6800              LDR      r0,[r0,#0]  ; motion_samples
00002e  1c40              ADDS     r0,r0,#1
000030  49f6              LDR      r1,|L1.1036|
000032  6008              STR      r0,[r1,#0]  ; motion_samples
000034  e002              B        |L1.60|
                  |L1.54|
;;;109    else
;;;110    	motion_samples = 0;
000036  2000              MOVS     r0,#0
000038  49f4              LDR      r1,|L1.1036|
00003a  6008              STR      r0,[r1,#0]  ; motion_samples
                  |L1.60|
;;;111    
;;;112    
;;;113    
;;;114    
;;;115    }
00003c  bd10              POP      {r4,pc}
;;;10     #include "gps.c"
                          ENDP

                  pause PROC
;;;19     // this delay is very important, it may cause w-r operation failure.
;;;20     static void pause(void)
00003e  2000              MOVS     r0,#0
;;;21     {
;;;22         int n;
;;;23         for(n=0; n<40; n++){}
000040  e000              B        |L1.68|
                  |L1.66|
000042  1c40              ADDS     r0,r0,#1
                  |L1.68|
000044  2828              CMP      r0,#0x28
000046  dbfc              BLT      |L1.66|
;;;24            // asm("nop");
;;;25     }
000048  4770              BX       lr
;;;26     uint32 hal_dev_mma8451_read_reg(uint8 addr)
                          ENDP

                  i2c_read_byte PROC
;;;41     }
;;;42     uint8 i2c_read_byte(I2C_MemMapPtr p)
00004a  4601              MOV      r1,r0
;;;43     {
;;;44         return p->D;
00004c  7908              LDRB     r0,[r1,#4]
;;;45     }
00004e  4770              BX       lr
;;;46     void i2c_start(I2C_MemMapPtr p)
                          ENDP

                  i2c_set_rx_mode PROC
;;;9      }
;;;10     void i2c_set_rx_mode(I2C_MemMapPtr p)
000050  7881              LDRB     r1,[r0,#2]
;;;11     {
;;;12         p->C1 &= ~I2C_C1_TX_MASK;
000052  2210              MOVS     r2,#0x10
000054  4391              BICS     r1,r1,r2
000056  7081              STRB     r1,[r0,#2]
;;;13     }
000058  4770              BX       lr
;;;14     
                          ENDP

                  i2c_set_slave_mode PROC
;;;15     void i2c_set_slave_mode(I2C_MemMapPtr p)
00005a  7881              LDRB     r1,[r0,#2]
;;;16     {
;;;17         p->C1  &= ~I2C_C1_MST_MASK;
00005c  2220              MOVS     r2,#0x20
00005e  4391              BICS     r1,r1,r2
000060  7081              STRB     r1,[r0,#2]
;;;18     }
000062  4770              BX       lr
;;;19     void i2c_set_master_mode(I2C_MemMapPtr p)
                          ENDP

                  i2c_stop PROC
;;;50     }
;;;51     void i2c_stop(I2C_MemMapPtr p)
000064  b500              PUSH     {lr}
;;;52     {
000066  4603              MOV      r3,r0
;;;53         i2c_set_slave_mode(p);
000068  4618              MOV      r0,r3
00006a  f7fffffe          BL       i2c_set_slave_mode
;;;54         i2c_set_rx_mode(p);
00006e  4618              MOV      r0,r3
000070  f7fffffe          BL       i2c_set_rx_mode
;;;55     }
000074  bd00              POP      {pc}
;;;56     void i2c_wait(I2C_MemMapPtr p)
                          ENDP

                  i2c_wait PROC
000076  49e6              LDR      r1,|L1.1040|
;;;57     {long time1out=9999;
;;;58     	
;;;59         // wait flag
;;;60         while((p->S & I2C_S_IICIF_MASK)==0    &&  (time1out >   1)){time1out--;}
000078  e000              B        |L1.124|
                  |L1.122|
00007a  1e49              SUBS     r1,r1,#1
                  |L1.124|
00007c  78c2              LDRB     r2,[r0,#3]
00007e  2302              MOVS     r3,#2
000080  401a              ANDS     r2,r2,r3
000082  2a00              CMP      r2,#0
000084  d101              BNE      |L1.138|
000086  2901              CMP      r1,#1
000088  dcf7              BGT      |L1.122|
                  |L1.138|
;;;61         // clear flag
;;;62         p->S |= I2C_S_IICIF_MASK;
00008a  78c2              LDRB     r2,[r0,#3]
00008c  2302              MOVS     r3,#2
00008e  431a              ORRS     r2,r2,r3
000090  70c2              STRB     r2,[r0,#3]
;;;63     }
000092  4770              BX       lr
;;;64     uint16 i2c_get_ack(I2C_MemMapPtr p)
                          ENDP

                  i2c_give_nack PROC
;;;25     
;;;26     void i2c_give_nack(I2C_MemMapPtr p)
000094  7881              LDRB     r1,[r0,#2]
;;;27     {
;;;28         p->C1 |= I2C_C1_TXAK_MASK;
000096  2208              MOVS     r2,#8
000098  4311              ORRS     r1,r1,r2
00009a  7081              STRB     r1,[r0,#2]
;;;29     }
00009c  4770              BX       lr
;;;30     void i2c_give_ack(I2C_MemMapPtr p)
                          ENDP

                  i2c_get_ack PROC
;;;63     }
;;;64     uint16 i2c_get_ack(I2C_MemMapPtr p)
00009e  4601              MOV      r1,r0
;;;65     {
;;;66         if((p->S & I2C_S_RXAK_MASK) == 0)
0000a0  78c8              LDRB     r0,[r1,#3]
0000a2  07c0              LSLS     r0,r0,#31
0000a4  0fc0              LSRS     r0,r0,#31
0000a6  2800              CMP      r0,#0
0000a8  d101              BNE      |L1.174|
;;;67             return TRUE;
0000aa  2001              MOVS     r0,#1
                  |L1.172|
;;;68         else
;;;69             return FALSE;
;;;70     }
0000ac  4770              BX       lr
                  |L1.174|
0000ae  2000              MOVS     r0,#0                 ;69
0000b0  e7fc              B        |L1.172|
;;;71     
                          ENDP

                  i2c_write_byte PROC
;;;37     }
;;;38     void i2c_write_byte(I2C_MemMapPtr p, uint8 data)
0000b2  7101              STRB     r1,[r0,#4]
;;;39     {
;;;40         p->D = data;
;;;41     }
0000b4  4770              BX       lr
;;;42     uint8 i2c_read_byte(I2C_MemMapPtr p)
                          ENDP

                  i2c_repeated_start PROC
;;;33     }
;;;34     void i2c_repeated_start(I2C_MemMapPtr p)
0000b6  7881              LDRB     r1,[r0,#2]
;;;35     {
;;;36         p->C1     |= 0x04;
0000b8  2204              MOVS     r2,#4
0000ba  4311              ORRS     r1,r1,r2
0000bc  7081              STRB     r1,[r0,#2]
;;;37     }
0000be  4770              BX       lr
;;;38     void i2c_write_byte(I2C_MemMapPtr p, uint8 data)
                          ENDP

                  i2c_set_tx_mode PROC
;;;4      
;;;5      void i2c_set_tx_mode(I2C_MemMapPtr p)
0000c0  7881              LDRB     r1,[r0,#2]
;;;6      {
;;;7          p->C1 |= I2C_C1_TX_MASK;
0000c2  2210              MOVS     r2,#0x10
0000c4  4311              ORRS     r1,r1,r2
0000c6  7081              STRB     r1,[r0,#2]
;;;8      
;;;9      }
0000c8  4770              BX       lr
;;;10     void i2c_set_rx_mode(I2C_MemMapPtr p)
                          ENDP

                  i2c_set_master_mode PROC
;;;18     }
;;;19     void i2c_set_master_mode(I2C_MemMapPtr p)
0000ca  7881              LDRB     r1,[r0,#2]
;;;20     {
;;;21         p->C1  |=  I2C_C1_MST_MASK;
0000cc  2220              MOVS     r2,#0x20
0000ce  4311              ORRS     r1,r1,r2
0000d0  7081              STRB     r1,[r0,#2]
;;;22     }
0000d2  4770              BX       lr
;;;23     
                          ENDP

                  i2c_start PROC
;;;45     }
;;;46     void i2c_start(I2C_MemMapPtr p)
0000d4  b500              PUSH     {lr}
;;;47     {
0000d6  4603              MOV      r3,r0
;;;48         i2c_set_master_mode(p);
0000d8  4618              MOV      r0,r3
0000da  f7fffffe          BL       i2c_set_master_mode
;;;49         i2c_set_tx_mode(p);
0000de  4618              MOV      r0,r3
0000e0  f7fffffe          BL       i2c_set_tx_mode
;;;50     }
0000e4  bd00              POP      {pc}
;;;51     void i2c_stop(I2C_MemMapPtr p)
                          ENDP

                  hal_dev_mma8451_read_reg PROC
;;;25     }
;;;26     uint32 hal_dev_mma8451_read_reg(uint8 addr)
0000e6  b570              PUSH     {r4-r6,lr}
;;;27     {
0000e8  4604              MOV      r4,r0
;;;28         uint8 result;
;;;29     
;;;30         i2c_start(I2C0_B);
0000ea  48ca              LDR      r0,|L1.1044|
0000ec  f7fffffe          BL       i2c_start
;;;31         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS | I2C_WRITE);
0000f0  213a              MOVS     r1,#0x3a
0000f2  48c8              LDR      r0,|L1.1044|
0000f4  f7fffffe          BL       i2c_write_byte
;;;32         
;;;33         i2c_wait(I2C0_B);
0000f8  48c6              LDR      r0,|L1.1044|
0000fa  f7fffffe          BL       i2c_wait
;;;34         i2c_get_ack(I2C0_B);
0000fe  48c5              LDR      r0,|L1.1044|
000100  f7fffffe          BL       i2c_get_ack
;;;35     
;;;36         i2c_write_byte(I2C0_B, addr);
000104  4621              MOV      r1,r4
000106  48c3              LDR      r0,|L1.1044|
000108  f7fffffe          BL       i2c_write_byte
;;;37         i2c_wait(I2C0_B);
00010c  48c1              LDR      r0,|L1.1044|
00010e  f7fffffe          BL       i2c_wait
;;;38         i2c_get_ack(I2C0_B);
000112  48c0              LDR      r0,|L1.1044|
000114  f7fffffe          BL       i2c_get_ack
;;;39     
;;;40         i2c_repeated_start(I2C0_B);
000118  48be              LDR      r0,|L1.1044|
00011a  f7fffffe          BL       i2c_repeated_start
;;;41         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS | I2C_READ);
00011e  213b              MOVS     r1,#0x3b
000120  48bc              LDR      r0,|L1.1044|
000122  f7fffffe          BL       i2c_write_byte
;;;42         i2c_wait(I2C0_B);
000126  48bb              LDR      r0,|L1.1044|
000128  f7fffffe          BL       i2c_wait
;;;43         i2c_get_ack(I2C0_B);
00012c  48b9              LDR      r0,|L1.1044|
00012e  f7fffffe          BL       i2c_get_ack
;;;44     
;;;45         i2c_set_rx_mode(I2C0_B);
000132  48b8              LDR      r0,|L1.1044|
000134  f7fffffe          BL       i2c_set_rx_mode
;;;46     
;;;47         i2c_give_nack(I2C0_B);
000138  48b6              LDR      r0,|L1.1044|
00013a  f7fffffe          BL       i2c_give_nack
;;;48         result = i2c_read_byte(I2C0_B);
00013e  48b5              LDR      r0,|L1.1044|
000140  f7fffffe          BL       i2c_read_byte
000144  4605              MOV      r5,r0
;;;49         i2c_wait(I2C0_B);
000146  48b3              LDR      r0,|L1.1044|
000148  f7fffffe          BL       i2c_wait
;;;50     
;;;51         i2c_stop(I2C0_B);
00014c  48b1              LDR      r0,|L1.1044|
00014e  f7fffffe          BL       i2c_stop
;;;52         result = i2c_read_byte(I2C0_B);
000152  48b0              LDR      r0,|L1.1044|
000154  f7fffffe          BL       i2c_read_byte
000158  4605              MOV      r5,r0
;;;53         pause();
00015a  f7fffffe          BL       pause
;;;54         return result;
00015e  4628              MOV      r0,r5
;;;55     }
000160  bd70              POP      {r4-r6,pc}
;;;56     void hal_dev_mma8451_write_reg(uint8 addr, uint8 data)
                          ENDP

                  detect_fall_detection PROC
;;;129    #define FALL_LIMIT  45//50
;;;130    void detect_fall_detection(void)
000162  48ad              LDR      r0,|L1.1048|
;;;131    {
;;;132       if (xy_mag<FALL_LIMIT && xz_mag < FALL_LIMIT && yz_mag < FALL_LIMIT  && !ti_fall) 
000164  6800              LDR      r0,[r0,#0]  ; xy_mag
000166  282d              CMP      r0,#0x2d
000168  d20f              BCS      |L1.394|
00016a  48ac              LDR      r0,|L1.1052|
00016c  6800              LDR      r0,[r0,#0]  ; xz_mag
00016e  282d              CMP      r0,#0x2d
000170  d20b              BCS      |L1.394|
000172  48ab              LDR      r0,|L1.1056|
000174  6800              LDR      r0,[r0,#0]  ; yz_mag
000176  282d              CMP      r0,#0x2d
000178  d207              BCS      |L1.394|
00017a  48aa              LDR      r0,|L1.1060|
00017c  8800              LDRH     r0,[r0,#0]  ; ti_fall
00017e  2800              CMP      r0,#0
000180  d103              BNE      |L1.394|
;;;133        fall_input=1;
000182  2001              MOVS     r0,#1
000184  49a8              LDR      r1,|L1.1064|
000186  7008              STRB     r0,[r1,#0]
000188  e005              B        |L1.406|
                  |L1.394|
;;;134       else 
;;;135       {
;;;136         fall_input = 0;
00018a  2000              MOVS     r0,#0
00018c  49a6              LDR      r1,|L1.1064|
00018e  7008              STRB     r0,[r1,#0]
;;;137         ti_fall = 10;
000190  200a              MOVS     r0,#0xa
000192  49a4              LDR      r1,|L1.1060|
000194  8008              STRH     r0,[r1,#0]
                  |L1.406|
;;;138        }
;;;139       
;;;140    }
000196  4770              BX       lr
;;;141    
                          ENDP

                  angle_calculation PROC
;;;73     
;;;74     void angle_calculation(void)
000198  b5f8              PUSH     {r3-r7,lr}
;;;75      {
;;;76        signed int nv, x2, y2, z2;
;;;77     
;;;78      /*  if (accel_count != 0) return;
;;;79        accel_count = 60; //60 msec
;;;80        */
;;;81        
;;;82        nv = (signed char)(resultx);
00019a  48a4              LDR      r0,|L1.1068|
00019c  7800              LDRB     r0,[r0,#0]  ; resultx
00019e  b247              SXTB     r7,r0
;;;83        X_acc = median(nv, &arr_medianas[0]);
0001a0  49a3              LDR      r1,|L1.1072|
0001a2  4638              MOV      r0,r7
0001a4  f7fffffe          BL       median
0001a8  49a2              LDR      r1,|L1.1076|
0001aa  6008              STR      r0,[r1,#0]  ; X_acc
;;;84        
;;;85        
;;;86        nv = (signed char)(resulty);
0001ac  48a2              LDR      r0,|L1.1080|
0001ae  7800              LDRB     r0,[r0,#0]  ; resulty
0001b0  b247              SXTB     r7,r0
;;;87        Y_acc = median(nv, &arr_medianas[1]);
0001b2  499f              LDR      r1,|L1.1072|
0001b4  3124              ADDS     r1,r1,#0x24
0001b6  4638              MOV      r0,r7
0001b8  f7fffffe          BL       median
0001bc  499f              LDR      r1,|L1.1084|
0001be  6008              STR      r0,[r1,#0]  ; Y_acc
;;;88        
;;;89        nv = (signed char)(resultz);  
0001c0  489f              LDR      r0,|L1.1088|
0001c2  7800              LDRB     r0,[r0,#0]  ; resultz
0001c4  b247              SXTB     r7,r0
;;;90        Z_acc = median(nv, &arr_medianas[2]);
0001c6  499a              LDR      r1,|L1.1072|
0001c8  3148              ADDS     r1,r1,#0x48
0001ca  4638              MOV      r0,r7
0001cc  f7fffffe          BL       median
0001d0  499c              LDR      r1,|L1.1092|
0001d2  6008              STR      r0,[r1,#0]  ; Z_acc
;;;91     
;;;92        x2        = X_acc*X_acc;
0001d4  4897              LDR      r0,|L1.1076|
0001d6  6800              LDR      r0,[r0,#0]  ; X_acc
0001d8  4340              MULS     r0,r0,r0
0001da  4605              MOV      r5,r0
;;;93        y2        = Y_acc*Y_acc;
0001dc  4897              LDR      r0,|L1.1084|
0001de  6800              LDR      r0,[r0,#0]  ; Y_acc
0001e0  4340              MULS     r0,r0,r0
0001e2  4606              MOV      r6,r0
;;;94     
;;;95        xy_mag   = sqrt_16(x2 + y2);
0001e4  19a8              ADDS     r0,r5,r6
0001e6  f7fffffe          BL       sqrt_16
0001ea  498b              LDR      r1,|L1.1048|
0001ec  6008              STR      r0,[r1,#0]  ; xy_mag
;;;96       
;;;97        if (Y_acc<0) cat = -Y_acc; else cat = Y_acc;
0001ee  4893              LDR      r0,|L1.1084|
0001f0  6800              LDR      r0,[r0,#0]  ; Y_acc
0001f2  2800              CMP      r0,#0
0001f4  da05              BGE      |L1.514|
0001f6  4891              LDR      r0,|L1.1084|
0001f8  6800              LDR      r0,[r0,#0]  ; Y_acc
0001fa  4240              RSBS     r0,r0,#0
0001fc  4992              LDR      r1,|L1.1096|
0001fe  6008              STR      r0,[r1,#0]  ; cat
000200  e003              B        |L1.522|
                  |L1.514|
000202  488e              LDR      r0,|L1.1084|
000204  6800              LDR      r0,[r0,#0]  ; Y_acc
000206  4990              LDR      r1,|L1.1096|
000208  6008              STR      r0,[r1,#0]  ; cat
                  |L1.522|
;;;98        
;;;99        offset = (unsigned int)(cat<<7)/(unsigned int)xy_mag;
00020a  498f              LDR      r1,|L1.1096|
00020c  6809              LDR      r1,[r1,#0]  ; cat
00020e  01c8              LSLS     r0,r1,#7
000210  4981              LDR      r1,|L1.1048|
000212  6809              LDR      r1,[r1,#0]  ; xy_mag
000214  f7fffffe          BL       __aeabi_uidivmod
000218  498c              LDR      r1,|L1.1100|
00021a  6008              STR      r0,[r1,#0]  ; offset
;;;100       if (offset>127) offset = 127;    
00021c  4608              MOV      r0,r1
00021e  6800              LDR      r0,[r0,#0]  ; offset
000220  287f              CMP      r0,#0x7f
000222  d901              BLS      |L1.552|
000224  207f              MOVS     r0,#0x7f
000226  6008              STR      r0,[r1,#0]  ; offset
                  |L1.552|
;;;101       xy_angle = asin[offset];
000228  4888              LDR      r0,|L1.1100|
00022a  6800              LDR      r0,[r0,#0]  ; offset
00022c  0080              LSLS     r0,r0,#2
00022e  4988              LDR      r1,|L1.1104|
000230  5808              LDR      r0,[r1,r0]
000232  4988              LDR      r1,|L1.1108|
000234  6008              STR      r0,[r1,#0]  ; xy_angle
;;;102       
;;;103       if (Y_acc>0)  xy_angle = -xy_angle;
000236  4881              LDR      r0,|L1.1084|
000238  6800              LDR      r0,[r0,#0]  ; Y_acc
00023a  2800              CMP      r0,#0
00023c  dd03              BLE      |L1.582|
00023e  4608              MOV      r0,r1
000240  6800              LDR      r0,[r0,#0]  ; xy_angle
000242  4240              RSBS     r0,r0,#0
000244  6008              STR      r0,[r1,#0]  ; xy_angle
                  |L1.582|
;;;104       
;;;105     
;;;106       /////////   
;;;107       
;;;108       z2        = Z_acc*Z_acc;   
000246  487f              LDR      r0,|L1.1092|
000248  6800              LDR      r0,[r0,#0]  ; Z_acc
00024a  4604              MOV      r4,r0
00024c  4344              MULS     r4,r0,r4
;;;109       xz_mag    = sqrt_16(x2 + z2);
00024e  1928              ADDS     r0,r5,r4
000250  f7fffffe          BL       sqrt_16
000254  4971              LDR      r1,|L1.1052|
000256  6008              STR      r0,[r1,#0]  ; xz_mag
;;;110       if (X_acc<0) cat = -X_acc; else cat = X_acc;
000258  4876              LDR      r0,|L1.1076|
00025a  6800              LDR      r0,[r0,#0]  ; X_acc
00025c  2800              CMP      r0,#0
00025e  da05              BGE      |L1.620|
000260  4874              LDR      r0,|L1.1076|
000262  6800              LDR      r0,[r0,#0]  ; X_acc
000264  4240              RSBS     r0,r0,#0
000266  4978              LDR      r1,|L1.1096|
000268  6008              STR      r0,[r1,#0]  ; cat
00026a  e003              B        |L1.628|
                  |L1.620|
00026c  4871              LDR      r0,|L1.1076|
00026e  6800              LDR      r0,[r0,#0]  ; X_acc
000270  4975              LDR      r1,|L1.1096|
000272  6008              STR      r0,[r1,#0]  ; cat
                  |L1.628|
;;;111       offset = (unsigned int)(cat<<7)/(unsigned int)xz_mag;
000274  4974              LDR      r1,|L1.1096|
000276  6809              LDR      r1,[r1,#0]  ; cat
000278  01c8              LSLS     r0,r1,#7
00027a  4968              LDR      r1,|L1.1052|
00027c  6809              LDR      r1,[r1,#0]  ; xz_mag
00027e  f7fffffe          BL       __aeabi_uidivmod
000282  4972              LDR      r1,|L1.1100|
000284  6008              STR      r0,[r1,#0]  ; offset
;;;112       if (offset>127) offset = 127;    
000286  4608              MOV      r0,r1
000288  6800              LDR      r0,[r0,#0]  ; offset
00028a  287f              CMP      r0,#0x7f
00028c  d901              BLS      |L1.658|
00028e  207f              MOVS     r0,#0x7f
000290  6008              STR      r0,[r1,#0]  ; offset
                  |L1.658|
;;;113       xz_angle = asin[offset];
000292  486e              LDR      r0,|L1.1100|
000294  6800              LDR      r0,[r0,#0]  ; offset
000296  0080              LSLS     r0,r0,#2
000298  496d              LDR      r1,|L1.1104|
00029a  5808              LDR      r0,[r1,r0]
00029c  496e              LDR      r1,|L1.1112|
00029e  6008              STR      r0,[r1,#0]  ; xz_angle
;;;114       
;;;115       if (X_acc>0)  xz_angle = -xz_angle;
0002a0  4864              LDR      r0,|L1.1076|
0002a2  6800              LDR      r0,[r0,#0]  ; X_acc
0002a4  2800              CMP      r0,#0
0002a6  dd03              BLE      |L1.688|
0002a8  4608              MOV      r0,r1
0002aa  6800              LDR      r0,[r0,#0]  ; xz_angle
0002ac  4240              RSBS     r0,r0,#0
0002ae  6008              STR      r0,[r1,#0]  ; xz_angle
                  |L1.688|
;;;116       
;;;117    
;;;118       yz_mag    = sqrt_16(y2 + z2);
0002b0  1930              ADDS     r0,r6,r4
0002b2  f7fffffe          BL       sqrt_16
0002b6  495a              LDR      r1,|L1.1056|
0002b8  6008              STR      r0,[r1,#0]  ; yz_mag
;;;119       if (Y_acc<0) cat = -Y_acc; else cat = Y_acc;
0002ba  4860              LDR      r0,|L1.1084|
0002bc  6800              LDR      r0,[r0,#0]  ; Y_acc
0002be  2800              CMP      r0,#0
0002c0  da05              BGE      |L1.718|
0002c2  485e              LDR      r0,|L1.1084|
0002c4  6800              LDR      r0,[r0,#0]  ; Y_acc
0002c6  4240              RSBS     r0,r0,#0
0002c8  495f              LDR      r1,|L1.1096|
0002ca  6008              STR      r0,[r1,#0]  ; cat
0002cc  e003              B        |L1.726|
                  |L1.718|
0002ce  485b              LDR      r0,|L1.1084|
0002d0  6800              LDR      r0,[r0,#0]  ; Y_acc
0002d2  495d              LDR      r1,|L1.1096|
0002d4  6008              STR      r0,[r1,#0]  ; cat
                  |L1.726|
;;;120       offset = (unsigned int)(cat<<7)/(unsigned int)yz_mag;
0002d6  495c              LDR      r1,|L1.1096|
0002d8  6809              LDR      r1,[r1,#0]  ; cat
0002da  01c8              LSLS     r0,r1,#7
0002dc  4950              LDR      r1,|L1.1056|
0002de  6809              LDR      r1,[r1,#0]  ; yz_mag
0002e0  f7fffffe          BL       __aeabi_uidivmod
0002e4  4959              LDR      r1,|L1.1100|
0002e6  6008              STR      r0,[r1,#0]  ; offset
;;;121       if (offset>127) offset = 127;    
0002e8  4608              MOV      r0,r1
0002ea  6800              LDR      r0,[r0,#0]  ; offset
0002ec  287f              CMP      r0,#0x7f
0002ee  d901              BLS      |L1.756|
0002f0  207f              MOVS     r0,#0x7f
0002f2  6008              STR      r0,[r1,#0]  ; offset
                  |L1.756|
;;;122       yz_angle = asin[offset];
0002f4  4855              LDR      r0,|L1.1100|
0002f6  6800              LDR      r0,[r0,#0]  ; offset
0002f8  0080              LSLS     r0,r0,#2
0002fa  4955              LDR      r1,|L1.1104|
0002fc  5808              LDR      r0,[r1,r0]
0002fe  4957              LDR      r1,|L1.1116|
000300  6008              STR      r0,[r1,#0]  ; yz_angle
;;;123       if (Y_acc>0)  yz_angle = -yz_angle;
000302  484e              LDR      r0,|L1.1084|
000304  6800              LDR      r0,[r0,#0]  ; Y_acc
000306  2800              CMP      r0,#0
000308  dd03              BLE      |L1.786|
00030a  4608              MOV      r0,r1
00030c  6800              LDR      r0,[r0,#0]  ; yz_angle
00030e  4240              RSBS     r0,r0,#0
000310  6008              STR      r0,[r1,#0]  ; yz_angle
                  |L1.786|
;;;124        
;;;125     }
000312  bdf8              POP      {r3-r7,pc}
;;;126    
                          ENDP

                  accel_read PROC
;;;47     /******************************************************************************/
;;;48     void accel_read(void)
000314  b570              PUSH     {r4-r6,lr}
;;;49     {
000316  b086              SUB      sp,sp,#0x18
;;;50         if((hal_dev_mma8451_read_reg(0x00)&0xf) != 0)
000318  2000              MOVS     r0,#0
00031a  f7fffffe          BL       hal_dev_mma8451_read_reg
00031e  0700              LSLS     r0,r0,#28
000320  0f00              LSRS     r0,r0,#28
000322  2800              CMP      r0,#0
000324  d06a              BEQ      |L1.1020|
;;;51         {
;;;52     accel_x = (int16_t)(((hal_dev_mma8451_read_reg(0x01) << 8) | hal_dev_mma8451_read_reg(0x02)))>> 2;		
000326  2001              MOVS     r0,#1
000328  f7fffffe          BL       hal_dev_mma8451_read_reg
00032c  0204              LSLS     r4,r0,#8
00032e  2002              MOVS     r0,#2
000330  f7fffffe          BL       hal_dev_mma8451_read_reg
000334  4304              ORRS     r4,r4,r0
000336  b220              SXTH     r0,r4
000338  1080              ASRS     r0,r0,#2
00033a  4949              LDR      r1,|L1.1120|
00033c  8008              STRH     r0,[r1,#0]
;;;53     accel_y = (int16_t)(((hal_dev_mma8451_read_reg(0x03) << 8) | hal_dev_mma8451_read_reg(0x04)))>> 2;		
00033e  2003              MOVS     r0,#3
000340  f7fffffe          BL       hal_dev_mma8451_read_reg
000344  0204              LSLS     r4,r0,#8
000346  2004              MOVS     r0,#4
000348  f7fffffe          BL       hal_dev_mma8451_read_reg
00034c  4304              ORRS     r4,r4,r0
00034e  b220              SXTH     r0,r4
000350  1080              ASRS     r0,r0,#2
000352  4944              LDR      r1,|L1.1124|
000354  8008              STRH     r0,[r1,#0]
;;;54     accel_z = (int16_t)(((hal_dev_mma8451_read_reg(0x05) << 8) | hal_dev_mma8451_read_reg(0x06)))>> 2;					
000356  2005              MOVS     r0,#5
000358  f7fffffe          BL       hal_dev_mma8451_read_reg
00035c  0204              LSLS     r4,r0,#8
00035e  2006              MOVS     r0,#6
000360  f7fffffe          BL       hal_dev_mma8451_read_reg
000364  4304              ORRS     r4,r4,r0
000366  b220              SXTH     r0,r4
000368  1080              ASRS     r0,r0,#2
00036a  493f              LDR      r1,|L1.1128|
00036c  8008              STRH     r0,[r1,#0]
;;;55     magx = (hal_dev_mma8451_read_reg(0x07) << 8) | hal_dev_mma8451_read_reg(0x08);
00036e  2007              MOVS     r0,#7
000370  f7fffffe          BL       hal_dev_mma8451_read_reg
000374  0204              LSLS     r4,r0,#8
000376  2008              MOVS     r0,#8
000378  f7fffffe          BL       hal_dev_mma8451_read_reg
00037c  4304              ORRS     r4,r4,r0
00037e  483b              LDR      r0,|L1.1132|
000380  6004              STR      r4,[r0,#0]  ; magx
;;;56     magy = (hal_dev_mma8451_read_reg(0x09) << 8) | hal_dev_mma8451_read_reg(0x0A);
000382  2009              MOVS     r0,#9
000384  f7fffffe          BL       hal_dev_mma8451_read_reg
000388  0204              LSLS     r4,r0,#8
00038a  200a              MOVS     r0,#0xa
00038c  f7fffffe          BL       hal_dev_mma8451_read_reg
000390  4304              ORRS     r4,r4,r0
000392  4837              LDR      r0,|L1.1136|
000394  6004              STR      r4,[r0,#0]  ; magy
;;;57     magz = (hal_dev_mma8451_read_reg(0x0B) << 8) | hal_dev_mma8451_read_reg(0x0C);
000396  200b              MOVS     r0,#0xb
000398  f7fffffe          BL       hal_dev_mma8451_read_reg
00039c  0204              LSLS     r4,r0,#8
00039e  200c              MOVS     r0,#0xc
0003a0  f7fffffe          BL       hal_dev_mma8451_read_reg
0003a4  4304              ORRS     r4,r4,r0
0003a6  4833              LDR      r0,|L1.1140|
0003a8  6004              STR      r4,[r0,#0]  ; magz
;;;58     temp = hal_dev_mma8451_read_reg(0x51);
0003aa  2051              MOVS     r0,#0x51
0003ac  f7fffffe          BL       hal_dev_mma8451_read_reg
0003b0  4931              LDR      r1,|L1.1144|
0003b2  6008              STR      r0,[r1,#0]  ; temp
;;;59     
;;;60             resultx   = hal_dev_mma8451_read_reg(0x01)<<8;
0003b4  2001              MOVS     r0,#1
0003b6  f7fffffe          BL       hal_dev_mma8451_read_reg
0003ba  0200              LSLS     r0,r0,#8
0003bc  b200              SXTH     r0,r0
0003be  491b              LDR      r1,|L1.1068|
0003c0  8008              STRH     r0,[r1,#0]
;;;61             resultx  |= hal_dev_mma8451_read_reg(0x02);
0003c2  2002              MOVS     r0,#2
0003c4  f7fffffe          BL       hal_dev_mma8451_read_reg
0003c8  4918              LDR      r1,|L1.1068|
0003ca  8809              LDRH     r1,[r1,#0]  ; resultx
0003cc  4308              ORRS     r0,r0,r1
0003ce  b200              SXTH     r0,r0
0003d0  4916              LDR      r1,|L1.1068|
0003d2  8008              STRH     r0,[r1,#0]
;;;62             resultx >>= 8;
0003d4  4608              MOV      r0,r1
0003d6  2100              MOVS     r1,#0
0003d8  5e41              LDRSH    r1,[r0,r1]  ; resultx
0003da  1208              ASRS     r0,r1,#8
0003dc  4913              LDR      r1,|L1.1068|
0003de  8008              STRH     r0,[r1,#0]
;;;63     
;;;64             resulty   = hal_dev_mma8451_read_reg(0x03)<<8;
0003e0  2003              MOVS     r0,#3
0003e2  f7fffffe          BL       hal_dev_mma8451_read_reg
0003e6  0200              LSLS     r0,r0,#8
0003e8  b200              SXTH     r0,r0
0003ea  4913              LDR      r1,|L1.1080|
0003ec  8008              STRH     r0,[r1,#0]
;;;65             resulty  |= hal_dev_mma8451_read_reg(0x04);
0003ee  2004              MOVS     r0,#4
0003f0  f7fffffe          BL       hal_dev_mma8451_read_reg
0003f4  4910              LDR      r1,|L1.1080|
0003f6  8809              LDRH     r1,[r1,#0]  ; resulty
0003f8  4308              ORRS     r0,r0,r1
0003fa  e03f              B        |L1.1148|
                  |L1.1020|
0003fc  e092              B        |L1.1316|
0003fe  0000              DCW      0x0000
                  |L1.1024|
                          DCD      speed
                  |L1.1028|
                          DCD      0x40a00000
                  |L1.1032|
                          DCD      motion
                  |L1.1036|
                          DCD      motion_samples
                  |L1.1040|
                          DCD      0x0000270f
                  |L1.1044|
                          DCD      0x40066000
                  |L1.1048|
                          DCD      xy_mag
                  |L1.1052|
                          DCD      xz_mag
                  |L1.1056|
                          DCD      yz_mag
                  |L1.1060|
                          DCD      ti_fall
                  |L1.1064|
                          DCD      fall_input
                  |L1.1068|
                          DCD      resultx
                  |L1.1072|
                          DCD      arr_medianas
                  |L1.1076|
                          DCD      X_acc
                  |L1.1080|
                          DCD      resulty
                  |L1.1084|
                          DCD      Y_acc
                  |L1.1088|
                          DCD      resultz
                  |L1.1092|
                          DCD      Z_acc
                  |L1.1096|
                          DCD      ||cat||
                  |L1.1100|
                          DCD      offset
                  |L1.1104|
                          DCD      asin
                  |L1.1108|
                          DCD      xy_angle
                  |L1.1112|
                          DCD      xz_angle
                  |L1.1116|
                          DCD      yz_angle
                  |L1.1120|
                          DCD      accel_x
                  |L1.1124|
                          DCD      accel_y
                  |L1.1128|
                          DCD      accel_z
                  |L1.1132|
                          DCD      magx
                  |L1.1136|
                          DCD      magy
                  |L1.1140|
                          DCD      magz
                  |L1.1144|
                          DCD      temp
                  |L1.1148|
00047c  b200              SXTH     r0,r0
00047e  49f7              LDR      r1,|L1.2140|
000480  8008              STRH     r0,[r1,#0]
;;;66             resulty >>= 8;
000482  4608              MOV      r0,r1
000484  2100              MOVS     r1,#0
000486  5e41              LDRSH    r1,[r0,r1]  ; resulty
000488  1208              ASRS     r0,r1,#8
00048a  49f4              LDR      r1,|L1.2140|
00048c  8008              STRH     r0,[r1,#0]
;;;67     
;;;68             resultz   = hal_dev_mma8451_read_reg(0x05)<<8;
00048e  2005              MOVS     r0,#5
000490  f7fffffe          BL       hal_dev_mma8451_read_reg
000494  0200              LSLS     r0,r0,#8
000496  b200              SXTH     r0,r0
000498  49f1              LDR      r1,|L1.2144|
00049a  8008              STRH     r0,[r1,#0]
;;;69             resultz  |= hal_dev_mma8451_read_reg(0x06);
00049c  2006              MOVS     r0,#6
00049e  f7fffffe          BL       hal_dev_mma8451_read_reg
0004a2  49ef              LDR      r1,|L1.2144|
0004a4  8809              LDRH     r1,[r1,#0]  ; resultz
0004a6  4308              ORRS     r0,r0,r1
0004a8  b200              SXTH     r0,r0
0004aa  49ed              LDR      r1,|L1.2144|
0004ac  8008              STRH     r0,[r1,#0]
;;;70             resultz >>= 8;
0004ae  4608              MOV      r0,r1
0004b0  2100              MOVS     r1,#0
0004b2  5e41              LDRSH    r1,[r0,r1]  ; resultz
0004b4  1208              ASRS     r0,r1,#8
0004b6  49ea              LDR      r1,|L1.2144|
0004b8  8008              STRH     r0,[r1,#0]
;;;71     
;;;72             angle_calculation(); //-900  to  900
0004ba  f7fffffe          BL       angle_calculation
;;;73             detect_fall_detection();
0004be  f7fffffe          BL       detect_fall_detection
;;;74     
;;;75     	//		hal_dev_mma8451_write_reg(A_FFMT_CFG,0xFF);		
;;;76     	//		hal_dev_mma8451_write_reg(A_FFMT_SRC,0xFF);					
;;;77     	printf("\n\t\t******************\n\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t,\t%d,\t%x,\t%x\n\t\t*******************\n",xy_angle+offxy,xz_angle+offxz,yz_angle+offyz,resultx+offx,resulty+offy,resultz+offz,hal_dev_mma8451_read_reg(A_FFMT_CFG),hal_dev_mma8451_read_reg(A_FFMT_SRC));			
0004c2  2016              MOVS     r0,#0x16
0004c4  f7fffffe          BL       hal_dev_mma8451_read_reg
0004c8  4604              MOV      r4,r0
0004ca  2015              MOVS     r0,#0x15
0004cc  f7fffffe          BL       hal_dev_mma8451_read_reg
0004d0  4605              MOV      r5,r0
0004d2  49e3              LDR      r1,|L1.2144|
0004d4  2000              MOVS     r0,#0
0004d6  5e08              LDRSH    r0,[r1,r0]  ; resultz
0004d8  49e2              LDR      r1,|L1.2148|
0004da  6809              LDR      r1,[r1,#0]  ; offz
0004dc  1840              ADDS     r0,r0,r1
0004de  4adf              LDR      r2,|L1.2140|
0004e0  2100              MOVS     r1,#0
0004e2  5e51              LDRSH    r1,[r2,r1]  ; resulty
0004e4  4ae0              LDR      r2,|L1.2152|
0004e6  6812              LDR      r2,[r2,#0]  ; offy
0004e8  1889              ADDS     r1,r1,r2
0004ea  9503              STR      r5,[sp,#0xc]
0004ec  9404              STR      r4,[sp,#0x10]
0004ee  9101              STR      r1,[sp,#4]
0004f0  9002              STR      r0,[sp,#8]
0004f2  49de              LDR      r1,|L1.2156|
0004f4  2000              MOVS     r0,#0
0004f6  5e08              LDRSH    r0,[r1,r0]  ; resultx
0004f8  49dd              LDR      r1,|L1.2160|
0004fa  6809              LDR      r1,[r1,#0]  ; offx
0004fc  1840              ADDS     r0,r0,r1
0004fe  9000              STR      r0,[sp,#0]
000500  48dc              LDR      r0,|L1.2164|
000502  6800              LDR      r0,[r0,#0]  ; yz_angle
000504  4edc              LDR      r6,|L1.2168|
000506  6836              LDR      r6,[r6,#0]  ; offyz
000508  1983              ADDS     r3,r0,r6
00050a  48dc              LDR      r0,|L1.2172|
00050c  6800              LDR      r0,[r0,#0]  ; xz_angle
00050e  4edc              LDR      r6,|L1.2176|
000510  6836              LDR      r6,[r6,#0]  ; offxz
000512  1982              ADDS     r2,r0,r6
000514  48db              LDR      r0,|L1.2180|
000516  6800              LDR      r0,[r0,#0]  ; xy_angle
000518  4edb              LDR      r6,|L1.2184|
00051a  6836              LDR      r6,[r6,#0]  ; offxy
00051c  1981              ADDS     r1,r0,r6
00051e  48db              LDR      r0,|L1.2188|
000520  f7fffffe          BL       __2printf
                  |L1.1316|
;;;78     
;;;79     
;;;80     		}
;;;81     }
000524  b006              ADD      sp,sp,#0x18
000526  bd70              POP      {r4-r6,pc}
;;;82     /******************************************************************************/
                          ENDP

                  clear PROC
;;;269    	
;;;270    void clear()
000528  49d9              LDR      r1,|L1.2192|
;;;271    {char temp;
;;;272        if (UART_S1_REG(UART1_BASE_PTR) & UART_S1_OR_MASK)
00052a  7909              LDRB     r1,[r1,#4]
00052c  2208              MOVS     r2,#8
00052e  4011              ANDS     r1,r1,r2
000530  2900              CMP      r1,#0
000532  d001              BEQ      |L1.1336|
;;;273        {
;;;274          temp = UART_D_REG(UART1_BASE_PTR);
000534  49d6              LDR      r1,|L1.2192|
000536  79c8              LDRB     r0,[r1,#7]
                  |L1.1336|
;;;275    		}
;;;276    		
;;;277    	UART_S1_REG(UART1_BASE_PTR) |= (UART_S1_OR_MASK | UART_C2_ILIE_MASK );
000538  49d5              LDR      r1,|L1.2192|
00053a  7909              LDRB     r1,[r1,#4]
00053c  2218              MOVS     r2,#0x18
00053e  4311              ORRS     r1,r1,r2
000540  4ad3              LDR      r2,|L1.2192|
000542  7111              STRB     r1,[r2,#4]
;;;278    }	
000544  4770              BX       lr
;;;279    
                          ENDP

                  send_modem PROC
;;;245    
;;;246    void send_modem(char ch[])
000546  b570              PUSH     {r4-r6,lr}
;;;247    	{	
000548  4605              MOV      r5,r0
;;;248    						unsigned char i=0;
00054a  2400              MOVS     r4,#0
;;;249    						for(i=0;i<strlen(ch);i++)
00054c  bf00              NOP      
00054e  e005              B        |L1.1372|
                  |L1.1360|
;;;250    						{
;;;251    							uart_putchar(UART1_BASE_PTR, ch[i]);//clear();
000550  5d29              LDRB     r1,[r5,r4]
000552  48cf              LDR      r0,|L1.2192|
000554  f7fffffe          BL       uart_putchar
000558  1c60              ADDS     r0,r4,#1              ;249
00055a  b2c4              UXTB     r4,r0                 ;249
                  |L1.1372|
00055c  4628              MOV      r0,r5                 ;249
00055e  f7fffffe          BL       strlen
000562  42a0              CMP      r0,r4                 ;249
000564  d8f4              BHI      |L1.1360|
;;;252    						}
;;;253    						
;;;254    	}
000566  bd70              POP      {r4-r6,pc}
;;;255    
                          ENDP

                  send_GSM PROC
;;;291    
;;;292    char * send_GSM(char *string, char *responseA, char *responseB, char *responseC, int32 timeout)
000568  b5ff              PUSH     {r0-r7,lr}
;;;293    {	int qwe;int exitflag=1;int cntr=0; long time111,timeout222;
00056a  b083              SUB      sp,sp,#0xc
00056c  4614              MOV      r4,r2
00056e  461d              MOV      r5,r3
000570  2001              MOVS     r0,#1
000572  9001              STR      r0,[sp,#4]
000574  2000              MOVS     r0,#0
000576  9000              STR      r0,[sp,#0]
;;;294    		qwe=strlen(uart_string_gsm);
000578  48c6              LDR      r0,|L1.2196|
00057a  f7fffffe          BL       strlen
00057e  9002              STR      r0,[sp,#8]
;;;295    		printf("\nsizeofbuffer-> %d, motion-> %d, motion_samples-> %d\n",qwe,motion,motion_samples);
000580  48c5              LDR      r0,|L1.2200|
000582  6803              LDR      r3,[r0,#0]  ; motion_samples
000584  48c5              LDR      r0,|L1.2204|
000586  6802              LDR      r2,[r0,#0]  ; motion
000588  a0c5              ADR      r0,|L1.2208|
00058a  9902              LDR      r1,[sp,#8]
00058c  f7fffffe          BL       __2printf
;;;296    		memset(uart_string_gsm,0,qwe);
000590  48c0              LDR      r0,|L1.2196|
000592  9902              LDR      r1,[sp,#8]
000594  f7fffffe          BL       __aeabi_memclr4
;;;297    		k2=0;									//string array counter for uart 1
000598  2000              MOVS     r0,#0
00059a  49cf              LDR      r1,|L1.2264|
00059c  6008              STR      r0,[r1,#0]  ; k2
;;;298    	  time111=timeout;						//timer counts to wait for characters in uart 1 
00059e  9e0c              LDR      r6,[sp,#0x30]
;;;299    		clear();
0005a0  f7fffffe          BL       clear
;;;300    		timeout222=2001;
0005a4  4fcd              LDR      r7,|L1.2268|
;;;301    		send_modem(string);
0005a6  9803              LDR      r0,[sp,#0xc]
0005a8  f7fffffe          BL       send_modem
;;;302    		while (!((strstr(uart_string_gsm, responseA))	|| (strstr(uart_string_gsm, responseB))	|| (strstr(uart_string_gsm, responseC))  || (time111<=1)    	))
0005ac  e01b              B        |L1.1510|
                  |L1.1454|
;;;303    		{
;;;304    			
;;;305    					time111--;
0005ae  1e76              SUBS     r6,r6,#1
;;;306    				  timeout222--;
0005b0  1e7f              SUBS     r7,r7,#1
;;;307              if(lptmr_interrupt == 1){accel_read();detect_motion();lptmr_interrupt = 0;}		
0005b2  48cb              LDR      r0,|L1.2272|
0005b4  7800              LDRB     r0,[r0,#0]  ; lptmr_interrupt
0005b6  2801              CMP      r0,#1
0005b8  d106              BNE      |L1.1480|
0005ba  f7fffffe          BL       accel_read
0005be  f7fffffe          BL       detect_motion
0005c2  2000              MOVS     r0,#0
0005c4  49c6              LDR      r1,|L1.2272|
0005c6  7008              STRB     r0,[r1,#0]
                  |L1.1480|
;;;308    					if(timeout222 % 400 == 0)
0005c8  21ff              MOVS     r1,#0xff
0005ca  3191              ADDS     r1,r1,#0x91
0005cc  4638              MOV      r0,r7
0005ce  f7fffffe          BL       __aeabi_idivmod
0005d2  2900              CMP      r1,#0
0005d4  d107              BNE      |L1.1510|
;;;309    					{uart0_putchar(UART0_BASE_PTR,'1');uart_putchar(UART1_BASE_PTR,0x1A);
0005d6  2131              MOVS     r1,#0x31
0005d8  48c2              LDR      r0,|L1.2276|
0005da  f7fffffe          BL       uart0_putchar
0005de  211a              MOVS     r1,#0x1a
0005e0  48ab              LDR      r0,|L1.2192|
0005e2  f7fffffe          BL       uart_putchar
                  |L1.1510|
0005e6  48ab              LDR      r0,|L1.2196|
0005e8  9904              LDR      r1,[sp,#0x10]         ;302
0005ea  f7fffffe          BL       strstr
0005ee  2800              CMP      r0,#0                 ;302
0005f0  d10d              BNE      |L1.1550|
0005f2  4621              MOV      r1,r4                 ;302
0005f4  48a7              LDR      r0,|L1.2196|
0005f6  f7fffffe          BL       strstr
0005fa  2800              CMP      r0,#0                 ;302
0005fc  d107              BNE      |L1.1550|
0005fe  4629              MOV      r1,r5                 ;302
000600  48a4              LDR      r0,|L1.2196|
000602  f7fffffe          BL       strstr
000606  2800              CMP      r0,#0                 ;302
000608  d101              BNE      |L1.1550|
00060a  2e01              CMP      r6,#1                 ;302
00060c  dccf              BGT      |L1.1454|
                  |L1.1550|
;;;310    					}
;;;311    			
;;;312    		}
;;;313    		clear();
00060e  f7fffffe          BL       clear
;;;314    		return uart_string_gsm;
000612  48a0              LDR      r0,|L1.2196|
;;;315    
;;;316    }
000614  b007              ADD      sp,sp,#0x1c
000616  bdf0              POP      {r4-r7,pc}
;;;317    
                          ENDP

                  log_it PROC
;;;78     
;;;79     void log_it()
000618  b538              PUSH     {r3-r5,lr}
;;;80     {
;;;81     	
;;;82     	memset(at_,0,100);
00061a  2164              MOVS     r1,#0x64
00061c  48b2              LDR      r0,|L1.2280|
00061e  f7fffffe          BL       __aeabi_memclr4
;;;83     	sprintf(at_,"\r\nAT+FSWRITE=C:\\LOG.TXT,1,%d,10\r\n",strlen(data));	
000622  48b2              LDR      r0,|L1.2284|
000624  f7fffffe          BL       strlen
000628  4604              MOV      r4,r0
00062a  4622              MOV      r2,r4
00062c  a1b0              ADR      r1,|L1.2288|
00062e  48ae              LDR      r0,|L1.2280|
000630  f7fffffe          BL       __2sprintf
;;;84     	printf("\n%s\n",send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",19999));	
000634  48b7              LDR      r0,|L1.2324|
000636  a3b8              ADR      r3,|L1.2328|
000638  a2b9              ADR      r2,|L1.2336|
00063a  a1bb              ADR      r1,|L1.2344|
00063c  9000              STR      r0,[sp,#0]
00063e  48aa              LDR      r0,|L1.2280|
000640  f7fffffe          BL       send_GSM
000644  4604              MOV      r4,r0
000646  4621              MOV      r1,r4
000648  a0b8              ADR      r0,|L1.2348|
00064a  f7fffffe          BL       __2printf
;;;85     	clear();
00064e  f7fffffe          BL       clear
;;;86     		for(k=0;k<=strlen(data);k++)
000652  2000              MOVS     r0,#0
000654  49b7              LDR      r1,|L1.2356|
000656  6008              STR      r0,[r1,#0]  ; k
000658  e014              B        |L1.1668|
                  |L1.1626|
;;;87     		{
;;;88     			uart_putchar(UART1_BASE_PTR, data[k]); uart0_putchar(UART0_BASE_PTR, data[k]);clear();
00065a  48a4              LDR      r0,|L1.2284|
00065c  4ab5              LDR      r2,|L1.2356|
00065e  6812              LDR      r2,[r2,#0]  ; k
000660  5c81              LDRB     r1,[r0,r2]
000662  488b              LDR      r0,|L1.2192|
000664  f7fffffe          BL       uart_putchar
000668  48a0              LDR      r0,|L1.2284|
00066a  4ab2              LDR      r2,|L1.2356|
00066c  6812              LDR      r2,[r2,#0]  ; k
00066e  5c81              LDRB     r1,[r0,r2]
000670  489c              LDR      r0,|L1.2276|
000672  f7fffffe          BL       uart0_putchar
000676  f7fffffe          BL       clear
00067a  48ae              LDR      r0,|L1.2356|
00067c  6800              LDR      r0,[r0,#0]            ;86  ; k
00067e  1c40              ADDS     r0,r0,#1              ;86
000680  49ac              LDR      r1,|L1.2356|
000682  6008              STR      r0,[r1,#0]            ;86  ; k
                  |L1.1668|
000684  4899              LDR      r0,|L1.2284|
000686  f7fffffe          BL       strlen
00068a  49aa              LDR      r1,|L1.2356|
00068c  6809              LDR      r1,[r1,#0]            ;86  ; k
00068e  4288              CMP      r0,r1                 ;86
000690  d2e3              BCS      |L1.1626|
;;;89     		}	
;;;90     									//memset(data,0,1000);
;;;91     									k2=0;									//string array counter for uart 1
000692  2000              MOVS     r0,#0
000694  4990              LDR      r1,|L1.2264|
000696  6008              STR      r0,[r1,#0]  ; k2
;;;92     									time=2001;						//timer counts to wait for characters in uart 1 									
000698  4890              LDR      r0,|L1.2268|
00069a  49a7              LDR      r1,|L1.2360|
00069c  6008              STR      r0,[r1,#0]  ; time
;;;93     									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  || (strstr(uart_string_gsm, "ERROR"))))
00069e  e01f              B        |L1.1760|
                  |L1.1696|
;;;94     									{
;;;95     									time--;
0006a0  48a5              LDR      r0,|L1.2360|
0006a2  6800              LDR      r0,[r0,#0]  ; time
0006a4  1e40              SUBS     r0,r0,#1
0006a6  49a4              LDR      r1,|L1.2360|
0006a8  6008              STR      r0,[r1,#0]  ; time
;;;96     									if(lptmr_interrupt == 1){accel_read();detect_motion();lptmr_interrupt = 0;}		
0006aa  488d              LDR      r0,|L1.2272|
0006ac  7800              LDRB     r0,[r0,#0]  ; lptmr_interrupt
0006ae  2801              CMP      r0,#1
0006b0  d106              BNE      |L1.1728|
0006b2  f7fffffe          BL       accel_read
0006b6  f7fffffe          BL       detect_motion
0006ba  2000              MOVS     r0,#0
0006bc  4988              LDR      r1,|L1.2272|
0006be  7008              STRB     r0,[r1,#0]
                  |L1.1728|
;;;97     			
;;;98     									if(time % 400 == 0)
0006c0  21ff              MOVS     r1,#0xff
0006c2  3191              ADDS     r1,r1,#0x91
0006c4  489c              LDR      r0,|L1.2360|
0006c6  6800              LDR      r0,[r0,#0]  ; time
0006c8  f7fffffe          BL       __aeabi_idivmod
0006cc  2900              CMP      r1,#0
0006ce  d107              BNE      |L1.1760|
;;;99     										{uart0_putchar(UART0_BASE_PTR,'1');uart_putchar(UART1_BASE_PTR,'\n');
0006d0  2131              MOVS     r1,#0x31
0006d2  4884              LDR      r0,|L1.2276|
0006d4  f7fffffe          BL       uart0_putchar
0006d8  210a              MOVS     r1,#0xa
0006da  486d              LDR      r0,|L1.2192|
0006dc  f7fffffe          BL       uart_putchar
                  |L1.1760|
0006e0  a196              ADR      r1,|L1.2364|
0006e2  486c              LDR      r0,|L1.2196|
0006e4  f7fffffe          BL       strstr
0006e8  2800              CMP      r0,#0                 ;93
0006ea  d109              BNE      |L1.1792|
0006ec  4892              LDR      r0,|L1.2360|
0006ee  6800              LDR      r0,[r0,#0]            ;93  ; time
0006f0  2801              CMP      r0,#1                 ;93
0006f2  db05              BLT      |L1.1792|
0006f4  a193              ADR      r1,|L1.2372|
0006f6  4867              LDR      r0,|L1.2196|
0006f8  f7fffffe          BL       strstr
0006fc  2800              CMP      r0,#0                 ;93
0006fe  d0cf              BEQ      |L1.1696|
                  |L1.1792|
;;;100    										}
;;;101    	
;;;102    									}
;;;103    	
;;;104    									memset(data,0,strlen(data));
000700  487a              LDR      r0,|L1.2284|
000702  f7fffffe          BL       strlen
000706  4604              MOV      r4,r0
000708  4621              MOV      r1,r4
00070a  4878              LDR      r0,|L1.2284|
00070c  f7fffffe          BL       __aeabi_memclr4
;;;105    
;;;106    }
000710  bd38              POP      {r3-r5,pc}
;;;107    
                          ENDP

                  save_ip_port PROC
;;;142    	
;;;143    void save_ip_port()
000712  b538              PUSH     {r3-r5,lr}
;;;144    {
;;;145    	
;;;146    printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
000714  488d              LDR      r0,|L1.2380|
000716  a380              ADR      r3,|L1.2328|
000718  a281              ADR      r2,|L1.2336|
00071a  a18d              ADR      r1,|L1.2384|
00071c  9000              STR      r0,[sp,#0]
00071e  a08d              ADR      r0,|L1.2388|
000720  f7fffffe          BL       send_GSM
000724  4604              MOV      r4,r0
000726  4621              MOV      r1,r4
000728  a080              ADR      r0,|L1.2348|
00072a  f7fffffe          BL       __2printf
;;;147    	
;;;148    	memset(at_,0,100);
00072e  2164              MOVS     r1,#0x64
000730  486d              LDR      r0,|L1.2280|
000732  f7fffffe          BL       __aeabi_memclr4
;;;149    	sprintf(at_,"\r\nAT+FSWRITE=C:\\IP_PORT.TXT,0,%d,10\r\n",strlen(ip)+12+strlen(port));	
000736  488f              LDR      r0,|L1.2420|
000738  f7fffffe          BL       strlen
00073c  4605              MOV      r5,r0
00073e  350c              ADDS     r5,r5,#0xc
000740  488d              LDR      r0,|L1.2424|
000742  f7fffffe          BL       strlen
000746  182c              ADDS     r4,r5,r0
000748  4622              MOV      r2,r4
00074a  a18c              ADR      r1,|L1.2428|
00074c  4866              LDR      r0,|L1.2280|
00074e  f7fffffe          BL       __2sprintf
;;;150    	printf("\n%s\n",send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",999999));	
000752  487e              LDR      r0,|L1.2380|
000754  a370              ADR      r3,|L1.2328|
000756  a272              ADR      r2,|L1.2336|
000758  a173              ADR      r1,|L1.2344|
00075a  9000              STR      r0,[sp,#0]
00075c  4862              LDR      r0,|L1.2280|
00075e  f7fffffe          BL       send_GSM
000762  4604              MOV      r4,r0
000764  4621              MOV      r1,r4
000766  a071              ADR      r0,|L1.2348|
000768  f7fffffe          BL       __2printf
;;;151    	clear();
00076c  f7fffffe          BL       clear
;;;152    	send_modem("|IP|");
000770  a08c              ADR      r0,|L1.2468|
000772  f7fffffe          BL       send_modem
;;;153    		for(k=0;k<strlen(ip);k++)
000776  2000              MOVS     r0,#0
000778  496e              LDR      r1,|L1.2356|
00077a  6008              STR      r0,[r1,#0]  ; k
00077c  e012              B        |L1.1956|
                  |L1.1918|
;;;154    		{
;;;155    			uart_putchar(UART1_BASE_PTR, ip[k]); uart0_putchar(UART0_BASE_PTR, ip[k]);//clear();
00077e  487d              LDR      r0,|L1.2420|
000780  4a6c              LDR      r2,|L1.2356|
000782  6812              LDR      r2,[r2,#0]  ; k
000784  5c81              LDRB     r1,[r0,r2]
000786  4842              LDR      r0,|L1.2192|
000788  f7fffffe          BL       uart_putchar
00078c  4879              LDR      r0,|L1.2420|
00078e  4a69              LDR      r2,|L1.2356|
000790  6812              LDR      r2,[r2,#0]  ; k
000792  5c81              LDRB     r1,[r0,r2]
000794  4853              LDR      r0,|L1.2276|
000796  f7fffffe          BL       uart0_putchar
00079a  4866              LDR      r0,|L1.2356|
00079c  6800              LDR      r0,[r0,#0]            ;153  ; k
00079e  1c40              ADDS     r0,r0,#1              ;153
0007a0  4964              LDR      r1,|L1.2356|
0007a2  6008              STR      r0,[r1,#0]            ;153  ; k
                  |L1.1956|
0007a4  4873              LDR      r0,|L1.2420|
0007a6  f7fffffe          BL       strlen
0007aa  4962              LDR      r1,|L1.2356|
0007ac  6809              LDR      r1,[r1,#0]            ;153  ; k
0007ae  4288              CMP      r0,r1                 ;153
0007b0  d8e5              BHI      |L1.1918|
;;;156    		}	
;;;157    	send_modem("|PORT|");			
0007b2  a07e              ADR      r0,|L1.2476|
0007b4  f7fffffe          BL       send_modem
;;;158    		for(k=0;k<strlen(port);k++)
0007b8  2000              MOVS     r0,#0
0007ba  495e              LDR      r1,|L1.2356|
0007bc  6008              STR      r0,[r1,#0]  ; k
0007be  e012              B        |L1.2022|
                  |L1.1984|
;;;159    		{
;;;160    			uart_putchar(UART1_BASE_PTR, port[k]); uart0_putchar(UART0_BASE_PTR, port[k]);//clear();
0007c0  486d              LDR      r0,|L1.2424|
0007c2  4a5c              LDR      r2,|L1.2356|
0007c4  6812              LDR      r2,[r2,#0]  ; k
0007c6  5c81              LDRB     r1,[r0,r2]
0007c8  4831              LDR      r0,|L1.2192|
0007ca  f7fffffe          BL       uart_putchar
0007ce  486a              LDR      r0,|L1.2424|
0007d0  4a58              LDR      r2,|L1.2356|
0007d2  6812              LDR      r2,[r2,#0]  ; k
0007d4  5c81              LDRB     r1,[r0,r2]
0007d6  4843              LDR      r0,|L1.2276|
0007d8  f7fffffe          BL       uart0_putchar
0007dc  4855              LDR      r0,|L1.2356|
0007de  6800              LDR      r0,[r0,#0]            ;158  ; k
0007e0  1c40              ADDS     r0,r0,#1              ;158
0007e2  4954              LDR      r1,|L1.2356|
0007e4  6008              STR      r0,[r1,#0]            ;158  ; k
                  |L1.2022|
0007e6  4864              LDR      r0,|L1.2424|
0007e8  f7fffffe          BL       strlen
0007ec  4951              LDR      r1,|L1.2356|
0007ee  6809              LDR      r1,[r1,#0]            ;158  ; k
0007f0  4288              CMP      r0,r1                 ;158
0007f2  d8e5              BHI      |L1.1984|
;;;161    		}	
;;;162    send_modem("|");			
0007f4  a06f              ADR      r0,|L1.2484|
0007f6  f7fffffe          BL       send_modem
;;;163    									//memset(data,0,1000);
;;;164    									k2=0;									//string array counter for uart 1
0007fa  2000              MOVS     r0,#0
0007fc  4936              LDR      r1,|L1.2264|
0007fe  6008              STR      r0,[r1,#0]  ; k2
;;;165    									time=19999;						//timer counts to wait for characters in uart 1 									
000800  4844              LDR      r0,|L1.2324|
000802  494d              LDR      r1,|L1.2360|
000804  6008              STR      r0,[r1,#0]  ; time
;;;166    									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  ||(strstr(uart_string_gsm, "ERROR"))))
000806  e014              B        |L1.2098|
                  |L1.2056|
;;;167    									{
;;;168    									time--;
000808  484b              LDR      r0,|L1.2360|
00080a  6800              LDR      r0,[r0,#0]  ; time
00080c  1e40              SUBS     r0,r0,#1
00080e  494a              LDR      r1,|L1.2360|
000810  6008              STR      r0,[r1,#0]  ; time
;;;169    									if(time % 2000 == 0)
000812  217d              MOVS     r1,#0x7d
000814  0109              LSLS     r1,r1,#4
000816  4848              LDR      r0,|L1.2360|
000818  6800              LDR      r0,[r0,#0]  ; time
00081a  f7fffffe          BL       __aeabi_idivmod
00081e  2900              CMP      r1,#0
000820  d107              BNE      |L1.2098|
;;;170    										{
;;;171    											uart0_putchar(UART0_BASE_PTR,'1');
000822  2131              MOVS     r1,#0x31
000824  482f              LDR      r0,|L1.2276|
000826  f7fffffe          BL       uart0_putchar
;;;172    											uart_putchar(UART1_BASE_PTR,'\n');
00082a  210a              MOVS     r1,#0xa
00082c  4818              LDR      r0,|L1.2192|
00082e  f7fffffe          BL       uart_putchar
                  |L1.2098|
000832  a142              ADR      r1,|L1.2364|
000834  4817              LDR      r0,|L1.2196|
000836  f7fffffe          BL       strstr
00083a  2800              CMP      r0,#0                 ;166
00083c  d109              BNE      |L1.2130|
00083e  483e              LDR      r0,|L1.2360|
000840  6800              LDR      r0,[r0,#0]            ;166  ; time
000842  2801              CMP      r0,#1                 ;166
000844  db05              BLT      |L1.2130|
000846  a13f              ADR      r1,|L1.2372|
000848  4812              LDR      r0,|L1.2196|
00084a  f7fffffe          BL       strstr
00084e  2800              CMP      r0,#0                 ;166
000850  d0da              BEQ      |L1.2056|
                  |L1.2130|
;;;173    										}
;;;174    	
;;;175    									}
;;;176    
;;;177    }	
000852  bd38              POP      {r3-r5,pc}
;;;178    	
                          ENDP

                  delay PROC
;;;67     /*************************** delay*****************************************/
;;;68      void delay(int delaytime)
000854  b510              PUSH     {r4,lr}
;;;69     {
000856  4604              MOV      r4,r0
;;;70      while(delaytime--)
000858  e0c6              B        |L1.2536|
00085a  0000              DCW      0x0000
                  |L1.2140|
                          DCD      resulty
                  |L1.2144|
                          DCD      resultz
                  |L1.2148|
                          DCD      offz
                  |L1.2152|
                          DCD      offy
                  |L1.2156|
                          DCD      resultx
                  |L1.2160|
                          DCD      offx
                  |L1.2164|
                          DCD      yz_angle
                  |L1.2168|
                          DCD      offyz
                  |L1.2172|
                          DCD      xz_angle
                  |L1.2176|
                          DCD      offxz
                  |L1.2180|
                          DCD      xy_angle
                  |L1.2184|
                          DCD      offxy
                  |L1.2188|
                          DCD      ||.conststring||
                  |L1.2192|
                          DCD      0x4006b000
                  |L1.2196|
                          DCD      uart_string_gsm
                  |L1.2200|
                          DCD      motion_samples
                  |L1.2204|
                          DCD      motion
                  |L1.2208|
0008a0  0a73697a          DCB      "\nsizeofbuffer-> %d, motion-> %d, motion_samples-> %d\n"
0008a4  656f6662
0008a8  75666665
0008ac  722d3e20
0008b0  25642c20
0008b4  6d6f7469
0008b8  6f6e2d3e
0008bc  2025642c
0008c0  206d6f74
0008c4  696f6e5f
0008c8  73616d70
0008cc  6c65732d
0008d0  3e202564
0008d4  0a      
0008d5  00                DCB      0
0008d6  00                DCB      0
0008d7  00                DCB      0
                  |L1.2264|
                          DCD      ||k2||
                  |L1.2268|
                          DCD      0x000007d1
                  |L1.2272|
                          DCD      lptmr_interrupt
                  |L1.2276|
                          DCD      0x4006a000
                  |L1.2280|
                          DCD      at_
                  |L1.2284|
                          DCD      data
                  |L1.2288|
0008f0  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\LOG.TXT,1,%d,10\r\n",0
0008f4  2b465357
0008f8  52495445
0008fc  3d433a5c
000900  4c4f472e
000904  5458542c
000908  312c2564
00090c  2c31300d
000910  0a00    
000912  00                DCB      0
000913  00                DCB      0
                  |L1.2324|
                          DCD      0x00004e1f
                  |L1.2328|
000918  4552524f          DCB      "ERROR:",0
00091c  523a00  
00091f  00                DCB      0
                  |L1.2336|
000920  4552524f          DCB      "ERROR\r\n",0
000924  520d0a00
                  |L1.2344|
000928  3e00              DCB      ">",0
00092a  00                DCB      0
00092b  00                DCB      0
                  |L1.2348|
00092c  0a25730a          DCB      "\n%s\n",0
000930  00      
000931  00                DCB      0
000932  00                DCB      0
000933  00                DCB      0
                  |L1.2356|
                          DCD      k
                  |L1.2360|
                          DCD      time
                  |L1.2364|
00093c  4f4b0d0a          DCB      "OK\r\n",0
000940  00      
000941  00                DCB      0
000942  00                DCB      0
000943  00                DCB      0
                  |L1.2372|
000944  4552524f          DCB      "ERROR",0
000948  5200    
00094a  00                DCB      0
00094b  00                DCB      0
                  |L1.2380|
                          DCD      0x000f423f
                  |L1.2384|
000950  4f4b00            DCB      "OK",0
000953  00                DCB      0
                  |L1.2388|
000954  0a41542b          DCB      "\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n",0
000958  46534352
00095c  45415445
000960  3d433a5c
000964  49505f50
000968  4f52542e
00096c  5458540d
000970  0a00    
000972  00                DCB      0
000973  00                DCB      0
                  |L1.2420|
                          DCD      ||ip||
                  |L1.2424|
                          DCD      port
                  |L1.2428|
00097c  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\IP_PORT.TXT,0,%d,10\r\n",0
000980  2b465357
000984  52495445
000988  3d433a5c
00098c  49505f50
000990  4f52542e
000994  5458542c
000998  302c2564
00099c  2c31300d
0009a0  0a00    
0009a2  00                DCB      0
0009a3  00                DCB      0
                  |L1.2468|
0009a4  7c49507c          DCB      "|IP|",0
0009a8  00      
0009a9  00                DCB      0
0009aa  00                DCB      0
0009ab  00                DCB      0
                  |L1.2476|
0009ac  7c504f52          DCB      "|PORT|",0
0009b0  547c00  
0009b3  00                DCB      0
                  |L1.2484|
0009b4  7c00              DCB      "|",0
0009b6  00                DCB      0
0009b7  00                DCB      0
                  |L1.2488|
;;;71         {for(i=200;i>0;i--)
0009b8  20c8              MOVS     r0,#0xc8
0009ba  49fe              LDR      r1,|L1.3508|
0009bc  6008              STR      r0,[r1,#0]  ; i
0009be  e00f              B        |L1.2528|
                  |L1.2496|
;;;72     			{if(lptmr_interrupt == 1){accel_read();detect_motion();lptmr_interrupt = 0;}		
0009c0  48fd              LDR      r0,|L1.3512|
0009c2  7800              LDRB     r0,[r0,#0]  ; lptmr_interrupt
0009c4  2801              CMP      r0,#1
0009c6  d106              BNE      |L1.2518|
0009c8  f7fffffe          BL       accel_read
0009cc  f7fffffe          BL       detect_motion
0009d0  2000              MOVS     r0,#0
0009d2  49f9              LDR      r1,|L1.3512|
0009d4  7008              STRB     r0,[r1,#0]
                  |L1.2518|
0009d6  48f7              LDR      r0,|L1.3508|
0009d8  6800              LDR      r0,[r0,#0]            ;71  ; i
0009da  1e40              SUBS     r0,r0,#1              ;71
0009dc  49f5              LDR      r1,|L1.3508|
0009de  6008              STR      r0,[r1,#0]            ;71  ; i
                  |L1.2528|
0009e0  48f4              LDR      r0,|L1.3508|
0009e2  6800              LDR      r0,[r0,#0]            ;71  ; i
0009e4  2800              CMP      r0,#0                 ;71
0009e6  dceb              BGT      |L1.2496|
                  |L1.2536|
0009e8  4620              MOV      r0,r4                 ;70
0009ea  1e64              SUBS     r4,r4,#1              ;70
0009ec  2800              CMP      r0,#0                 ;70
0009ee  d1e3              BNE      |L1.2488|
;;;73     			}			// about 1 ms
;;;74         }
;;;75     }
0009f0  bd10              POP      {r4,pc}
;;;76      void delay2(int delaytime)
                          ENDP

                  parse_g PROC
;;;401    
;;;402    void parse_g(char* str, int first, int sec, char f, char s , char *string)
0009f2  b5ff              PUSH     {r0-r7,lr}
;;;403    {int i=0,j=0,temp=0;
0009f4  b083              SUB      sp,sp,#0xc
0009f6  4605              MOV      r5,r0
0009f8  460f              MOV      r7,r1
0009fa  2400              MOVS     r4,#0
0009fc  2000              MOVS     r0,#0
0009fe  9002              STR      r0,[sp,#8]
000a00  2600              MOVS     r6,#0
;;;404    
;;;405    		delay(10);		
000a02  200a              MOVS     r0,#0xa
000a04  f7fffffe          BL       delay
;;;406    		memset(string,0,strlen(string));
000a08  980d              LDR      r0,[sp,#0x34]
000a0a  f7fffffe          BL       strlen
000a0e  4601              MOV      r1,r0
000a10  9001              STR      r0,[sp,#4]
000a12  980d              LDR      r0,[sp,#0x34]
000a14  f7fffffe          BL       __aeabi_memclr
;;;407    		for(i=0,temp=0;i<strlen(str);i++)
000a18  bf00              NOP      
000a1a  bf00              NOP      
000a1c  e00a              B        |L1.2612|
                  |L1.2590|
;;;408    		{
;;;409    		if(str[i]==s)
000a1e  5d29              LDRB     r1,[r5,r4]
000a20  980c              LDR      r0,[sp,#0x30]
000a22  4281              CMP      r1,r0
000a24  d101              BNE      |L1.2602|
;;;410    			{temp++;j=i;}
000a26  1c76              ADDS     r6,r6,#1
000a28  9402              STR      r4,[sp,#8]
                  |L1.2602|
;;;411    		else{}
;;;412    			
;;;413    		if(temp>=sec){i=9900;}
000a2a  9805              LDR      r0,[sp,#0x14]
000a2c  4286              CMP      r6,r0
000a2e  db00              BLT      |L1.2610|
000a30  4ce2              LDR      r4,|L1.3516|
                  |L1.2610|
000a32  1c64              ADDS     r4,r4,#1              ;407
                  |L1.2612|
000a34  4628              MOV      r0,r5                 ;407
000a36  f7fffffe          BL       strlen
000a3a  42a0              CMP      r0,r4                 ;407
000a3c  d8ef              BHI      |L1.2590|
;;;414    		else{}	
;;;415    		
;;;416    		}	
;;;417    		
;;;418    		for(i=0,temp=0;i<strlen(str);i++)
000a3e  2400              MOVS     r4,#0
000a40  2600              MOVS     r6,#0
000a42  e00a              B        |L1.2650|
                  |L1.2628|
;;;419    		{
;;;420    		if(str[i]==f)
000a44  5d29              LDRB     r1,[r5,r4]
000a46  9806              LDR      r0,[sp,#0x18]
000a48  4281              CMP      r1,r0
000a4a  d102              BNE      |L1.2642|
;;;421    			{temp++;l=i;}										
000a4c  1c76              ADDS     r6,r6,#1
000a4e  48dc              LDR      r0,|L1.3520|
000a50  6004              STR      r4,[r0,#0]  ; l
                  |L1.2642|
;;;422    		else{}
;;;423    		if(temp>=first){i=9900;}else{}
000a52  42be              CMP      r6,r7
000a54  db00              BLT      |L1.2648|
000a56  4cd9              LDR      r4,|L1.3516|
                  |L1.2648|
000a58  1c64              ADDS     r4,r4,#1              ;418
                  |L1.2650|
000a5a  4628              MOV      r0,r5                 ;418
000a5c  f7fffffe          BL       strlen
000a60  42a0              CMP      r0,r4                 ;418
000a62  d8ef              BHI      |L1.2628|
;;;424    		}	
;;;425    		for(i=0;i<(j-l-1);i++)
000a64  2400              MOVS     r4,#0
000a66  e007              B        |L1.2680|
                  |L1.2664|
;;;426    		{
;;;427    		string[i] = str[l+i+1];
000a68  48d5              LDR      r0,|L1.3520|
000a6a  6800              LDR      r0,[r0,#0]  ; l
000a6c  1900              ADDS     r0,r0,r4
000a6e  1c40              ADDS     r0,r0,#1
000a70  5c29              LDRB     r1,[r5,r0]
000a72  980d              LDR      r0,[sp,#0x34]
000a74  5501              STRB     r1,[r0,r4]
000a76  1c64              ADDS     r4,r4,#1              ;425
                  |L1.2680|
000a78  49d1              LDR      r1,|L1.3520|
000a7a  9802              LDR      r0,[sp,#8]            ;425
000a7c  6809              LDR      r1,[r1,#0]            ;425  ; l
000a7e  1a40              SUBS     r0,r0,r1              ;425
000a80  1e40              SUBS     r0,r0,#1              ;425
000a82  42a0              CMP      r0,r4                 ;425
000a84  dcf0              BGT      |L1.2664|
;;;428    		}			
;;;429    	
;;;430    
;;;431    
;;;432    }
000a86  b007              ADD      sp,sp,#0x1c
000a88  bdf0              POP      {r4-r7,pc}
;;;433    
                          ENDP

                  send_message PROC
;;;1137   			
;;;1138   	void send_message(char * data2)
000a8a  b538              PUSH     {r3-r5,lr}
;;;1139   	{
000a8c  4604              MOV      r4,r0
;;;1140   									memset(at_,0,100);
000a8e  2164              MOVS     r1,#0x64
000a90  48cc              LDR      r0,|L1.3524|
000a92  f7fffffe          BL       __aeabi_memclr4
;;;1141   									sprintf(at_, "\nAT+CMGS=\"%s\"\r\n" ,num2);
000a96  4acc              LDR      r2,|L1.3528|
000a98  a1cc              ADR      r1,|L1.3532|
000a9a  48ca              LDR      r0,|L1.3524|
000a9c  f7fffffe          BL       __2sprintf
;;;1142   									printf("\n%s\n",send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",tmeout));	
000aa0  48ce              LDR      r0,|L1.3548|
000aa2  6800              LDR      r0,[r0,#0]  ; tmeout
000aa4  4bce              LDR      r3,|L1.3552|
000aa6  461a              MOV      r2,r3
000aa8  3208              ADDS     r2,r2,#8
000aaa  a1ce              ADR      r1,|L1.3556|
000aac  9000              STR      r0,[sp,#0]
000aae  48c5              LDR      r0,|L1.3524|
000ab0  f7fffffe          BL       send_GSM
000ab4  4605              MOV      r5,r0
000ab6  4629              MOV      r1,r5
000ab8  48c9              LDR      r0,|L1.3552|
000aba  3014              ADDS     r0,r0,#0x14
000abc  f7fffffe          BL       __2printf
;;;1143   									if( strstr(uart_string_gsm, ">"))
000ac0  a1c8              ADR      r1,|L1.3556|
000ac2  48c9              LDR      r0,|L1.3560|
000ac4  f7fffffe          BL       strstr
000ac8  2800              CMP      r0,#0
000aca  d047              BEQ      |L1.2908|
;;;1144   									{
;;;1145   										//
;;;1146   										
;;;1147   											for(k=0;k<strlen(data2);k++)
000acc  2000              MOVS     r0,#0
000ace  49c7              LDR      r1,|L1.3564|
000ad0  6008              STR      r0,[r1,#0]  ; k
000ad2  e012              B        |L1.2810|
                  |L1.2772|
;;;1148   											{
;;;1149   												
;;;1150   												uart_putchar(UART1_BASE_PTR, data2[k]);
000ad4  48c5              LDR      r0,|L1.3564|
000ad6  6800              LDR      r0,[r0,#0]  ; k
000ad8  5c21              LDRB     r1,[r4,r0]
000ada  48c5              LDR      r0,|L1.3568|
000adc  f7fffffe          BL       uart_putchar
;;;1151   												uart0_putchar(UART0_BASE_PTR, data2[k]);
000ae0  48c2              LDR      r0,|L1.3564|
000ae2  6800              LDR      r0,[r0,#0]  ; k
000ae4  5c21              LDRB     r1,[r4,r0]
000ae6  48c3              LDR      r0,|L1.3572|
000ae8  f7fffffe          BL       uart0_putchar
;;;1152   												clear();
000aec  f7fffffe          BL       clear
000af0  48be              LDR      r0,|L1.3564|
000af2  6800              LDR      r0,[r0,#0]            ;1147  ; k
000af4  1c40              ADDS     r0,r0,#1              ;1147
000af6  49bd              LDR      r1,|L1.3564|
000af8  6008              STR      r0,[r1,#0]            ;1147  ; k
                  |L1.2810|
000afa  4620              MOV      r0,r4                 ;1147
000afc  f7fffffe          BL       strlen
000b00  49ba              LDR      r1,|L1.3564|
000b02  6809              LDR      r1,[r1,#0]            ;1147  ; k
000b04  4288              CMP      r0,r1                 ;1147
000b06  d8e5              BHI      |L1.2772|
;;;1153   												
;;;1154   											}		
;;;1155   											uart_putchar(UART1_BASE_PTR, 0x1A);
000b08  211a              MOVS     r1,#0x1a
000b0a  48b9              LDR      r0,|L1.3568|
000b0c  f7fffffe          BL       uart_putchar
;;;1156   											k2=0;									//string array counter for uart 1
000b10  2000              MOVS     r0,#0
000b12  49b9              LDR      r1,|L1.3576|
000b14  6008              STR      r0,[r1,#0]  ; k2
;;;1157   											timeout=19999;						//timer counts to wait for characters in uart 1 									
000b16  48b9              LDR      r0,|L1.3580|
000b18  49b9              LDR      r1,|L1.3584|
000b1a  6008              STR      r0,[r1,#0]  ; timeout
;;;1158   											while(!(strstr(uart_string_gsm,"+CMGS:")  ||  (timeout < 1)))
000b1c  e014              B        |L1.2888|
                  |L1.2846|
;;;1159   																{
;;;1160   																	timeout--;
000b1e  48b8              LDR      r0,|L1.3584|
000b20  6800              LDR      r0,[r0,#0]  ; timeout
000b22  1e40              SUBS     r0,r0,#1
000b24  49b6              LDR      r1,|L1.3584|
000b26  6008              STR      r0,[r1,#0]  ; timeout
;;;1161   																	if(timeout % 4000 == 0)
000b28  217d              MOVS     r1,#0x7d
000b2a  0149              LSLS     r1,r1,#5
000b2c  48b4              LDR      r0,|L1.3584|
000b2e  6800              LDR      r0,[r0,#0]  ; timeout
000b30  f7fffffe          BL       __aeabi_idivmod
000b34  2900              CMP      r1,#0
000b36  d107              BNE      |L1.2888|
;;;1162   																	{
;;;1163   																		uart0_putchar(UART0_BASE_PTR,'1');
000b38  2131              MOVS     r1,#0x31
000b3a  48ae              LDR      r0,|L1.3572|
000b3c  f7fffffe          BL       uart0_putchar
;;;1164   																		uart_putchar(UART1_BASE_PTR,0x1A);
000b40  211a              MOVS     r1,#0x1a
000b42  48ab              LDR      r0,|L1.3568|
000b44  f7fffffe          BL       uart_putchar
                  |L1.2888|
000b48  a1ae              ADR      r1,|L1.3588|
000b4a  48a7              LDR      r0,|L1.3560|
000b4c  f7fffffe          BL       strstr
000b50  2800              CMP      r0,#0                 ;1158
000b52  d103              BNE      |L1.2908|
000b54  48aa              LDR      r0,|L1.3584|
000b56  6800              LDR      r0,[r0,#0]            ;1158  ; timeout
000b58  2801              CMP      r0,#1                 ;1158
000b5a  dae0              BGE      |L1.2846|
                  |L1.2908|
;;;1165   																	}
;;;1166   																}
;;;1167   							
;;;1168   									}
;;;1169   		
;;;1170   									
;;;1171   	}
000b5c  bd38              POP      {r3-r5,pc}
;;;1172   
                          ENDP

                  save_interval PROC
;;;108    
;;;109    void save_interval()
000b5e  b538              PUSH     {r3-r5,lr}
;;;110    {
;;;111    	
;;;112    printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
000b60  48aa              LDR      r0,|L1.3596|
000b62  4b9f              LDR      r3,|L1.3552|
000b64  461a              MOV      r2,r3
000b66  3208              ADDS     r2,r2,#8
000b68  a1a9              ADR      r1,|L1.3600|
000b6a  9000              STR      r0,[sp,#0]
000b6c  a0a9              ADR      r0,|L1.3604|
000b6e  f7fffffe          BL       send_GSM
000b72  4604              MOV      r4,r0
000b74  4621              MOV      r1,r4
000b76  489a              LDR      r0,|L1.3552|
000b78  3014              ADDS     r0,r0,#0x14
000b7a  f7fffffe          BL       __2printf
;;;113    
;;;114    	memset(at_,0,100);
000b7e  2164              MOVS     r1,#0x64
000b80  4890              LDR      r0,|L1.3524|
000b82  f7fffffe          BL       __aeabi_memclr4
;;;115    	sprintf(at_,"\r\nAT+FSWRITE=C:\\INTERVAL.TXT,0,%d,10\r\n",strlen(interval)+11);	
000b86  48ab              LDR      r0,|L1.3636|
000b88  f7fffffe          BL       strlen
000b8c  4604              MOV      r4,r0
000b8e  340b              ADDS     r4,r4,#0xb
000b90  4622              MOV      r2,r4
000b92  a1a9              ADR      r1,|L1.3640|
000b94  488b              LDR      r0,|L1.3524|
000b96  f7fffffe          BL       __2sprintf
;;;116    	printf("\n%s\n",send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",999999));	
000b9a  489c              LDR      r0,|L1.3596|
000b9c  4b90              LDR      r3,|L1.3552|
000b9e  461a              MOV      r2,r3
000ba0  3208              ADDS     r2,r2,#8
000ba2  a190              ADR      r1,|L1.3556|
000ba4  9000              STR      r0,[sp,#0]
000ba6  4887              LDR      r0,|L1.3524|
000ba8  f7fffffe          BL       send_GSM
000bac  4604              MOV      r4,r0
000bae  4621              MOV      r1,r4
000bb0  488b              LDR      r0,|L1.3552|
000bb2  3014              ADDS     r0,r0,#0x14
000bb4  f7fffffe          BL       __2printf
;;;117    	clear();
000bb8  f7fffffe          BL       clear
;;;118    	send_modem("|INTERVAL|");
000bbc  a0a8              ADR      r0,|L1.3680|
000bbe  f7fffffe          BL       send_modem
;;;119    		for(k=0;k<strlen(interval);k++)
000bc2  2000              MOVS     r0,#0
000bc4  4989              LDR      r1,|L1.3564|
000bc6  6008              STR      r0,[r1,#0]  ; k
000bc8  e012              B        |L1.3056|
                  |L1.3018|
;;;120    		{
;;;121    			uart_putchar(UART1_BASE_PTR, interval[k]); uart0_putchar(UART0_BASE_PTR, interval[k]);//clear();
000bca  489a              LDR      r0,|L1.3636|
000bcc  4a87              LDR      r2,|L1.3564|
000bce  6812              LDR      r2,[r2,#0]  ; k
000bd0  5c81              LDRB     r1,[r0,r2]
000bd2  4887              LDR      r0,|L1.3568|
000bd4  f7fffffe          BL       uart_putchar
000bd8  4896              LDR      r0,|L1.3636|
000bda  4a84              LDR      r2,|L1.3564|
000bdc  6812              LDR      r2,[r2,#0]  ; k
000bde  5c81              LDRB     r1,[r0,r2]
000be0  4884              LDR      r0,|L1.3572|
000be2  f7fffffe          BL       uart0_putchar
000be6  4881              LDR      r0,|L1.3564|
000be8  6800              LDR      r0,[r0,#0]            ;119  ; k
000bea  1c40              ADDS     r0,r0,#1              ;119
000bec  497f              LDR      r1,|L1.3564|
000bee  6008              STR      r0,[r1,#0]            ;119  ; k
                  |L1.3056|
000bf0  4890              LDR      r0,|L1.3636|
000bf2  f7fffffe          BL       strlen
000bf6  497d              LDR      r1,|L1.3564|
000bf8  6809              LDR      r1,[r1,#0]            ;119  ; k
000bfa  4288              CMP      r0,r1                 ;119
000bfc  d8e5              BHI      |L1.3018|
;;;122    		}	
;;;123    			send_modem("|");			
000bfe  a09b              ADR      r0,|L1.3692|
000c00  f7fffffe          BL       send_modem
;;;124     
;;;125    									k2=0;									//string array counter for uart 1
000c04  2000              MOVS     r0,#0
000c06  497c              LDR      r1,|L1.3576|
000c08  6008              STR      r0,[r1,#0]  ; k2
;;;126    									time=19999;						//timer counts to wait for characters in uart 1 									
000c0a  487c              LDR      r0,|L1.3580|
000c0c  4998              LDR      r1,|L1.3696|
000c0e  6008              STR      r0,[r1,#0]  ; time
;;;127    									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  ||(strstr(uart_string_gsm, "ERROR"))))
000c10  e014              B        |L1.3132|
                  |L1.3090|
;;;128    									{
;;;129    									time--;
000c12  4897              LDR      r0,|L1.3696|
000c14  6800              LDR      r0,[r0,#0]  ; time
000c16  1e40              SUBS     r0,r0,#1
000c18  4995              LDR      r1,|L1.3696|
000c1a  6008              STR      r0,[r1,#0]  ; time
;;;130    									if(time % 2000 == 0)
000c1c  217d              MOVS     r1,#0x7d
000c1e  0109              LSLS     r1,r1,#4
000c20  4893              LDR      r0,|L1.3696|
000c22  6800              LDR      r0,[r0,#0]  ; time
000c24  f7fffffe          BL       __aeabi_idivmod
000c28  2900              CMP      r1,#0
000c2a  d107              BNE      |L1.3132|
;;;131    										{
;;;132    											uart0_putchar(UART0_BASE_PTR,'1');
000c2c  2131              MOVS     r1,#0x31
000c2e  4871              LDR      r0,|L1.3572|
000c30  f7fffffe          BL       uart0_putchar
;;;133    											uart_putchar(UART1_BASE_PTR,'\n');
000c34  210a              MOVS     r1,#0xa
000c36  486e              LDR      r0,|L1.3568|
000c38  f7fffffe          BL       uart_putchar
                  |L1.3132|
000c3c  4968              LDR      r1,|L1.3552|
000c3e  3124              ADDS     r1,r1,#0x24           ;127
000c40  4869              LDR      r0,|L1.3560|
000c42  f7fffffe          BL       strstr
000c46  2800              CMP      r0,#0                 ;127
000c48  d10a              BNE      |L1.3168|
000c4a  4889              LDR      r0,|L1.3696|
000c4c  6800              LDR      r0,[r0,#0]            ;127  ; time
000c4e  2801              CMP      r0,#1                 ;127
000c50  db06              BLT      |L1.3168|
000c52  4963              LDR      r1,|L1.3552|
000c54  312c              ADDS     r1,r1,#0x2c           ;127
000c56  4864              LDR      r0,|L1.3560|
000c58  f7fffffe          BL       strstr
000c5c  2800              CMP      r0,#0                 ;127
000c5e  d0d8              BEQ      |L1.3090|
                  |L1.3168|
;;;134    										}
;;;135    	
;;;136    									}
;;;137    
;;;138    
;;;139    }	
000c60  bd38              POP      {r3-r5,pc}
;;;140    	
                          ENDP

                  myAtoi PROC
;;;427    
;;;428    int myAtoi(char *str)
000c62  b510              PUSH     {r4,lr}
;;;429    {
000c64  4601              MOV      r1,r0
;;;430        int res = 0,iz; // Initialize result
000c66  2000              MOVS     r0,#0
;;;431    
;;;432        // Iterate through all characters of input string and update result
;;;433        for (iz = 0; str[iz] != '\0'; ++iz)
000c68  2200              MOVS     r2,#0
000c6a  e006              B        |L1.3194|
                  |L1.3180|
;;;434            res = res*10 + str[iz] - '0';
000c6c  230a              MOVS     r3,#0xa
000c6e  4343              MULS     r3,r0,r3
000c70  5c8c              LDRB     r4,[r1,r2]
000c72  191b              ADDS     r3,r3,r4
000c74  4618              MOV      r0,r3
000c76  3830              SUBS     r0,r0,#0x30
000c78  1c52              ADDS     r2,r2,#1              ;433
                  |L1.3194|
000c7a  5c8b              LDRB     r3,[r1,r2]            ;433
000c7c  2b00              CMP      r3,#0                 ;433
000c7e  d1f5              BNE      |L1.3180|
;;;435    
;;;436        // return result.
;;;437        return res;
;;;438    }
000c80  bd10              POP      {r4,pc}
;;;439    
                          ENDP

                  parse_gsm PROC
;;;368    
;;;369    void parse_gsm(char *str, int first, int sec, char *string)
000c82  b5ff              PUSH     {r0-r7,lr}
;;;370    {int i=0,j=0,temp=0;
000c84  b081              SUB      sp,sp,#4
000c86  4605              MOV      r5,r0
000c88  461f              MOV      r7,r3
000c8a  2400              MOVS     r4,#0
000c8c  2000              MOVS     r0,#0
000c8e  9000              STR      r0,[sp,#0]
000c90  2600              MOVS     r6,#0
;;;371    
;;;372    		delay(10);		
000c92  200a              MOVS     r0,#0xa
000c94  f7fffffe          BL       delay
;;;373    		memset(string,0,15);
000c98  210f              MOVS     r1,#0xf
000c9a  4638              MOV      r0,r7
000c9c  f7fffffe          BL       __aeabi_memclr
;;;374    		for(i=0,temp=0;i<100;i++)
000ca0  bf00              NOP      
000ca2  bf00              NOP      
000ca4  e00a              B        |L1.3260|
                  |L1.3238|
;;;375    		{
;;;376    		if(str[i]=='"')
000ca6  5d28              LDRB     r0,[r5,r4]
000ca8  2822              CMP      r0,#0x22
000caa  d101              BNE      |L1.3248|
;;;377    			{temp++;j=i;}
000cac  1c76              ADDS     r6,r6,#1
000cae  9400              STR      r4,[sp,#0]
                  |L1.3248|
;;;378    		else{}
;;;379    			
;;;380    		if(temp>=sec){i=900;}
000cb0  9803              LDR      r0,[sp,#0xc]
000cb2  4286              CMP      r6,r0
000cb4  db01              BLT      |L1.3258|
000cb6  24e1              MOVS     r4,#0xe1
000cb8  00a4              LSLS     r4,r4,#2
                  |L1.3258|
000cba  1c64              ADDS     r4,r4,#1              ;374
                  |L1.3260|
000cbc  2c64              CMP      r4,#0x64              ;374
000cbe  dbf2              BLT      |L1.3238|
;;;381    		else{}	
;;;382    		
;;;383    		}	
;;;384    		
;;;385    		for(i=0,temp=0;i<100;i++)
000cc0  2400              MOVS     r4,#0
000cc2  2600              MOVS     r6,#0
000cc4  e00b              B        |L1.3294|
                  |L1.3270|
;;;386    		{
;;;387    		if(str[i]=='"')
000cc6  5d28              LDRB     r0,[r5,r4]
000cc8  2822              CMP      r0,#0x22
000cca  d102              BNE      |L1.3282|
;;;388    			{temp++;l=i;}										
000ccc  1c76              ADDS     r6,r6,#1
000cce  483c              LDR      r0,|L1.3520|
000cd0  6004              STR      r4,[r0,#0]  ; l
                  |L1.3282|
;;;389    		else{}
;;;390    		if(temp>=first){i=900;}else{}
000cd2  9802              LDR      r0,[sp,#8]
000cd4  4286              CMP      r6,r0
000cd6  db01              BLT      |L1.3292|
000cd8  24e1              MOVS     r4,#0xe1
000cda  00a4              LSLS     r4,r4,#2
                  |L1.3292|
000cdc  1c64              ADDS     r4,r4,#1              ;385
                  |L1.3294|
000cde  2c64              CMP      r4,#0x64              ;385
000ce0  dbf1              BLT      |L1.3270|
;;;391    		}	
;;;392    		for(i=0;i<(j-l-1);i++)
000ce2  2400              MOVS     r4,#0
000ce4  e006              B        |L1.3316|
                  |L1.3302|
;;;393    		{
;;;394    		string[i] = str[l+i+1];
000ce6  4836              LDR      r0,|L1.3520|
000ce8  6800              LDR      r0,[r0,#0]  ; l
000cea  1900              ADDS     r0,r0,r4
000cec  1c40              ADDS     r0,r0,#1
000cee  5c28              LDRB     r0,[r5,r0]
000cf0  5538              STRB     r0,[r7,r4]
000cf2  1c64              ADDS     r4,r4,#1              ;392
                  |L1.3316|
000cf4  4932              LDR      r1,|L1.3520|
000cf6  9800              LDR      r0,[sp,#0]            ;392
000cf8  6809              LDR      r1,[r1,#0]            ;392  ; l
000cfa  1a40              SUBS     r0,r0,r1              ;392
000cfc  1e40              SUBS     r0,r0,#1              ;392
000cfe  42a0              CMP      r0,r4                 ;392
000d00  dcf1              BGT      |L1.3302|
;;;395    		}			
;;;396    	
;;;397    
;;;398    }
000d02  b005              ADD      sp,sp,#0x14
000d04  bdf0              POP      {r4-r7,pc}
;;;399    
                          ENDP

                  msg_sim800 PROC
;;;687    
;;;688    void msg_sim800() 
000d06  b51f              PUSH     {r0-r4,lr}
;;;689    {
;;;690    //ringflag=1;	
;;;691    	if(ringflag==1)
000d08  485a              LDR      r0,|L1.3700|
000d0a  7800              LDRB     r0,[r0,#0]  ; ringflag
000d0c  2801              CMP      r0,#1
000d0e  d001              BEQ      |L1.3348|
000d10  f000fe56          BL       |L1.6592|
                  |L1.3348|
;;;692    	{
;;;693    	
;;;694    					printf("\n\n\thttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,'%',longi,velocity,lati,longi);
000d14  4858              LDR      r0,|L1.3704|
000d16  4959              LDR      r1,|L1.3708|
000d18  4a59              LDR      r2,|L1.3712|
000d1a  4603              MOV      r3,r0
000d1c  9200              STR      r2,[sp,#0]
000d1e  9101              STR      r1,[sp,#4]
000d20  9002              STR      r0,[sp,#8]
000d22  2225              MOVS     r2,#0x25
000d24  a057              ADR      r0,|L1.3716|
000d26  f7fffffe          BL       __2printf
;;;695    					printf("\n%s\n",send_GSM("\r\nAT+CMGR=1\r\n", "OK\r\n", "ERROR" , "OK\r\n",tmeout));	
000d2a  482c              LDR      r0,|L1.3548|
000d2c  6800              LDR      r0,[r0,#0]  ; tmeout
000d2e  4b2c              LDR      r3,|L1.3552|
000d30  3324              ADDS     r3,r3,#0x24
000d32  461a              MOV      r2,r3
000d34  3208              ADDS     r2,r2,#8
000d36  4619              MOV      r1,r3
000d38  9000              STR      r0,[sp,#0]
000d3a  a062              ADR      r0,|L1.3780|
000d3c  f7fffffe          BL       send_GSM
000d40  4601              MOV      r1,r0
000d42  9003              STR      r0,[sp,#0xc]
000d44  4826              LDR      r0,|L1.3552|
000d46  3014              ADDS     r0,r0,#0x14
000d48  f7fffffe          BL       __2printf
;;;696    					clear();
000d4c  f7fffffe          BL       clear
;;;697    					parse_gsm(uart_string_gsm, 3, 4, num2);
000d50  4b1d              LDR      r3,|L1.3528|
000d52  2204              MOVS     r2,#4
000d54  2103              MOVS     r1,#3
000d56  4824              LDR      r0,|L1.3560|
000d58  f7fffffe          BL       parse_gsm
;;;698    			
;;;699    			
;;;700    			
;;;701    			
;;;702    			
;;;703    			
;;;704    			
;;;705    			
;;;706    					if(strstr(uart_string_gsm, "OWNER"))
000d5c  a15d              ADR      r1,|L1.3796|
000d5e  4822              LDR      r0,|L1.3560|
000d60  f7fffffe          BL       strstr
000d64  2800              CMP      r0,#0
000d66  d023              BEQ      |L1.3504|
;;;707    					{
;;;708    							if(strstr(uart_string_gsm, "LOCATION"))
000d68  a15c              ADR      r1,|L1.3804|
000d6a  481f              LDR      r0,|L1.3560|
000d6c  f7fffffe          BL       strstr
000d70  2800              CMP      r0,#0
000d72  d01e              BEQ      |L1.3506|
;;;709    							{
;;;710    								memset(data2,0,strlen(data2));
000d74  485c              LDR      r0,|L1.3816|
000d76  f7fffffe          BL       strlen
000d7a  4601              MOV      r1,r0
000d7c  9003              STR      r0,[sp,#0xc]
000d7e  485a              LDR      r0,|L1.3816|
000d80  f7fffffe          BL       __aeabi_memclr4
;;;711    								sprintf(data2,"\nCoordinates : %s N, %s E\nSpeed : %s kmph\n\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);	
000d84  483c              LDR      r0,|L1.3704|
000d86  2125              MOVS     r1,#0x25
000d88  4a3c              LDR      r2,|L1.3708|
000d8a  4b3d              LDR      r3,|L1.3712|
000d8c  9300              STR      r3,[sp,#0]
000d8e  9201              STR      r2,[sp,#4]
000d90  9102              STR      r1,[sp,#8]
000d92  9003              STR      r0,[sp,#0xc]
000d94  4603              MOV      r3,r0
000d96  4955              LDR      r1,|L1.3820|
000d98  4853              LDR      r0,|L1.3816|
000d9a  f7fffffe          BL       __2sprintf
;;;712    								send_message(data2);
000d9e  4852              LDR      r0,|L1.3816|
000da0  f7fffffe          BL       send_message
;;;713    
;;;714    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
000da4  480d              LDR      r0,|L1.3548|
000da6  6800              LDR      r0,[r0,#0]  ; tmeout
000da8  4b0d              LDR      r3,|L1.3552|
000daa  461a              MOV      r2,r3
000dac  3208              ADDS     r2,r2,#8
000dae  e09f              B        |L1.3824|
                  |L1.3504|
000db0  e39d              B        |L1.5358|
                  |L1.3506|
000db2  e0a9              B        |L1.3848|
                  |L1.3508|
                          DCD      i
                  |L1.3512|
                          DCD      lptmr_interrupt
                  |L1.3516|
                          DCD      0x000026ac
                  |L1.3520|
                          DCD      l
                  |L1.3524|
                          DCD      at_
                  |L1.3528|
                          DCD      num2
                  |L1.3532|
000dcc  0a41542b          DCB      "\nAT+CMGS=""%s""\r\n",0
000dd0  434d4753
000dd4  3d222573
000dd8  220d0a00
                  |L1.3548|
                          DCD      tmeout
                  |L1.3552|
                          DCD      ||.text||+0x918
                  |L1.3556|
000de4  3e00              DCB      ">",0
000de6  00                DCB      0
000de7  00                DCB      0
                  |L1.3560|
                          DCD      uart_string_gsm
                  |L1.3564|
                          DCD      k
                  |L1.3568|
                          DCD      0x4006b000
                  |L1.3572|
                          DCD      0x4006a000
                  |L1.3576|
                          DCD      ||k2||
                  |L1.3580|
                          DCD      0x00004e1f
                  |L1.3584|
                          DCD      timeout
                  |L1.3588|
000e04  2b434d47          DCB      "+CMGS:",0
000e08  533a00  
000e0b  00                DCB      0
                  |L1.3596|
                          DCD      0x000f423f
                  |L1.3600|
000e10  4f4b00            DCB      "OK",0
000e13  00                DCB      0
                  |L1.3604|
000e14  0a41542b          DCB      "\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n",0
000e18  46534352
000e1c  45415445
000e20  3d433a5c
000e24  494e5445
000e28  5256414c
000e2c  2e545854
000e30  0d0a00  
000e33  00                DCB      0
                  |L1.3636|
                          DCD      interval
                  |L1.3640|
000e38  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\INTERVAL.TXT,0,%d,10\r\n",0
000e3c  2b465357
000e40  52495445
000e44  3d433a5c
000e48  494e5445
000e4c  5256414c
000e50  2e545854
000e54  2c302c25
000e58  642c3130
000e5c  0d0a00  
000e5f  00                DCB      0
                  |L1.3680|
000e60  7c494e54          DCB      "|INTERVAL|",0
000e64  45525641
000e68  4c7c00  
000e6b  00                DCB      0
                  |L1.3692|
000e6c  7c00              DCB      "|",0
000e6e  00                DCB      0
000e6f  00                DCB      0
                  |L1.3696|
                          DCD      time
                  |L1.3700|
                          DCD      ringflag
                  |L1.3704|
                          DCD      longi
                  |L1.3708|
                          DCD      lati
                  |L1.3712|
                          DCD      velocity
                  |L1.3716|
000e84  0a0a0968          DCB      "\n\n\thttps://www.google.com/search?q=%s%c2C%s&ie=utf-8"
000e88  74747073
000e8c  3a2f2f77
000e90  77772e67
000e94  6f6f676c
000e98  652e636f
000e9c  6d2f7365
000ea0  61726368
000ea4  3f713d25
000ea8  73256332
000eac  43257326
000eb0  69653d75
000eb4  74662d38
000eb8  266f653d          DCB      "&oe=utf-8\n",0
000ebc  7574662d
000ec0  380a00  
000ec3  00                DCB      0
                  |L1.3780|
000ec4  0d0a4154          DCB      "\r\nAT+CMGR=1\r\n",0
000ec8  2b434d47
000ecc  523d310d
000ed0  0a00    
000ed2  00                DCB      0
000ed3  00                DCB      0
                  |L1.3796|
000ed4  4f574e45          DCB      "OWNER",0
000ed8  5200    
000eda  00                DCB      0
000edb  00                DCB      0
                  |L1.3804|
000edc  4c4f4341          DCB      "LOCATION",0
000ee0  54494f4e
000ee4  00      
000ee5  00                DCB      0
000ee6  00                DCB      0
000ee7  00                DCB      0
                  |L1.3816|
                          DCD      data2
                  |L1.3820|
                          DCD      ||.conststring||+0x54
                  |L1.3824|
000ef0  4611              MOV      r1,r2
000ef2  311c              ADDS     r1,r1,#0x1c
000ef4  9000              STR      r0,[sp,#0]
000ef6  a0fa              ADR      r0,|L1.4832|
000ef8  f7fffffe          BL       send_GSM
000efc  4601              MOV      r1,r0
000efe  9003              STR      r0,[sp,#0xc]
000f00  a0fc              ADR      r0,|L1.4852|
000f02  f7fffffe          BL       __2printf
000f06  e02e              B        |L1.3942|
                  |L1.3848|
;;;715    								
;;;716    								
;;;717    							}
;;;718    	
;;;719    							
;;;720    							
;;;721    						
;;;722    							else if(strstr(uart_string_gsm, "INTERVAL"))
000f08  a1fb              ADR      r1,|L1.4856|
000f0a  48fe              LDR      r0,|L1.4868|
000f0c  f7fffffe          BL       strstr
000f10  2800              CMP      r0,#0
000f12  d028              BEQ      |L1.3942|
;;;723    							{
;;;724    								memset(at_,0,100);
000f14  2164              MOVS     r1,#0x64
000f16  48fc              LDR      r0,|L1.4872|
000f18  f7fffffe          BL       __aeabi_memclr4
;;;725    								memset(interval,0,5);
000f1c  2105              MOVS     r1,#5
000f1e  48fb              LDR      r0,|L1.4876|
000f20  f7fffffe          BL       __aeabi_memclr
;;;726    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', interval);		
000f24  48f9              LDR      r0,|L1.4876|
000f26  210d              MOVS     r1,#0xd
000f28  2320              MOVS     r3,#0x20
000f2a  2205              MOVS     r2,#5
000f2c  9100              STR      r1,[sp,#0]
000f2e  9001              STR      r0,[sp,#4]
000f30  2103              MOVS     r1,#3
000f32  48f4              LDR      r0,|L1.4868|
000f34  f7fffffe          BL       parse_g
;;;727    								int_erval=myAtoi(interval);
000f38  48f4              LDR      r0,|L1.4876|
000f3a  f7fffffe          BL       myAtoi
000f3e  49f4              LDR      r1,|L1.4880|
000f40  6008              STR      r0,[r1,#0]  ; int_erval
;;;728    								save_interval();			
000f42  f7fffffe          BL       save_interval
;;;729    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
000f46  48f3              LDR      r0,|L1.4884|
000f48  6800              LDR      r0,[r0,#0]  ; tmeout
000f4a  4bf3              LDR      r3,|L1.4888|
000f4c  461a              MOV      r2,r3
000f4e  3208              ADDS     r2,r2,#8
000f50  4611              MOV      r1,r2
000f52  311c              ADDS     r1,r1,#0x1c
000f54  9000              STR      r0,[sp,#0]
000f56  a0e2              ADR      r0,|L1.4832|
000f58  f7fffffe          BL       send_GSM
000f5c  4601              MOV      r1,r0
000f5e  9003              STR      r0,[sp,#0xc]
000f60  a0e4              ADR      r0,|L1.4852|
000f62  f7fffffe          BL       __2printf
                  |L1.3942|
;;;730    
;;;731    								
;;;732    							}				
;;;733    
;;;734    
;;;735    
;;;736    						
;;;737    							if(strstr(uart_string_gsm, "START"))
000f66  a1ed              ADR      r1,|L1.4892|
000f68  48e6              LDR      r0,|L1.4868|
000f6a  f7fffffe          BL       strstr
000f6e  2800              CMP      r0,#0
000f70  d055              BEQ      |L1.4126|
;;;738    							{
;;;739    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
000f72  48ec              LDR      r0,|L1.4900|
000f74  4be8              LDR      r3,|L1.4888|
000f76  461a              MOV      r2,r3
000f78  3208              ADDS     r2,r2,#8
000f7a  a1eb              ADR      r1,|L1.4904|
000f7c  9000              STR      r0,[sp,#0]
000f7e  4610              MOV      r0,r2
000f80  3034              ADDS     r0,r0,#0x34
000f82  f7fffffe          BL       send_GSM
000f86  4601              MOV      r1,r0
000f88  9003              STR      r0,[sp,#0xc]
000f8a  48e3              LDR      r0,|L1.4888|
000f8c  3014              ADDS     r0,r0,#0x14
000f8e  f7fffffe          BL       __2printf
;;;740    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
000f92  48e4              LDR      r0,|L1.4900|
000f94  4be0              LDR      r3,|L1.4888|
000f96  461a              MOV      r2,r3
000f98  3208              ADDS     r2,r2,#8
000f9a  a1e3              ADR      r1,|L1.4904|
000f9c  9000              STR      r0,[sp,#0]
000f9e  a0e3              ADR      r0,|L1.4908|
000fa0  f7fffffe          BL       send_GSM
000fa4  4601              MOV      r1,r0
000fa6  9003              STR      r0,[sp,#0xc]
000fa8  48db              LDR      r0,|L1.4888|
000faa  3014              ADDS     r0,r0,#0x14
000fac  f7fffffe          BL       __2printf
;;;741    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
000fb0  48dc              LDR      r0,|L1.4900|
000fb2  4bd9              LDR      r3,|L1.4888|
000fb4  461a              MOV      r2,r3
000fb6  3208              ADDS     r2,r2,#8
000fb8  a1db              ADR      r1,|L1.4904|
000fba  9000              STR      r0,[sp,#0]
000fbc  48e2              LDR      r0,|L1.4936|
000fbe  f7fffffe          BL       send_GSM
000fc2  4601              MOV      r1,r0
000fc4  9003              STR      r0,[sp,#0xc]
000fc6  48d4              LDR      r0,|L1.4888|
000fc8  3014              ADDS     r0,r0,#0x14
000fca  f7fffffe          BL       __2printf
;;;742    								memcpy (ip, "104.236.203.4", 13);
000fce  220d              MOVS     r2,#0xd
000fd0  a1de              ADR      r1,|L1.4940|
000fd2  48e2              LDR      r0,|L1.4956|
000fd4  f7fffffe          BL       __aeabi_memcpy4
;;;743    								memcpy (port, "5555", 4);		
000fd8  48e1              LDR      r0,|L1.4960|
000fda  a1e2              ADR      r1,|L1.4964|
000fdc  6809              LDR      r1,[r1,#0]
000fde  6001              STR      r1,[r0,#0]  ; port
;;;744    								memcpy (interval, "1", 1);										
000fe0  48ca              LDR      r0,|L1.4876|
000fe2  a1e2              ADR      r1,|L1.4972|
000fe4  7809              LDRB     r1,[r1,#0]
000fe6  7001              STRB     r1,[r0,#0]
;;;745    								save_ip_port();
000fe8  f7fffffe          BL       save_ip_port
;;;746    								save_interval();	
000fec  f7fffffe          BL       save_interval
;;;747    								printf("\n\n\t,%s,%s,%s,\n",ip,port,interval);		
000ff0  4bc6              LDR      r3,|L1.4876|
000ff2  4adb              LDR      r2,|L1.4960|
000ff4  49d9              LDR      r1,|L1.4956|
000ff6  a0de              ADR      r0,|L1.4976|
000ff8  f7fffffe          BL       __2printf
;;;748    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
000ffc  48c5              LDR      r0,|L1.4884|
000ffe  6800              LDR      r0,[r0,#0]  ; tmeout
001000  4bc5              LDR      r3,|L1.4888|
001002  461a              MOV      r2,r3
001004  3208              ADDS     r2,r2,#8
001006  4611              MOV      r1,r2
001008  311c              ADDS     r1,r1,#0x1c
00100a  9000              STR      r0,[sp,#0]
00100c  a0b4              ADR      r0,|L1.4832|
00100e  f7fffffe          BL       send_GSM
001012  4601              MOV      r1,r0
001014  9003              STR      r0,[sp,#0xc]
001016  a0b7              ADR      r0,|L1.4852|
001018  f7fffffe          BL       __2printf
                  |L1.4124|
00101c  e2c8              B        |L1.5552|
                  |L1.4126|
;;;749    								
;;;750    							}
;;;751    							else if(strstr(uart_string_gsm, "OWNER1"))
00101e  a1d8              ADR      r1,|L1.4992|
001020  48b8              LDR      r0,|L1.4868|
001022  f7fffffe          BL       strstr
001026  2800              CMP      r0,#0
001028  d037              BEQ      |L1.4250|
;;;752    							{
;;;753    								memset(at_,0,100);
00102a  2164              MOVS     r1,#0x64
00102c  48b6              LDR      r0,|L1.4872|
00102e  f7fffffe          BL       __aeabi_memclr4
;;;754    								memset(num_o,0,15);
001032  210f              MOVS     r1,#0xf
001034  48d4              LDR      r0,|L1.5000|
001036  f7fffffe          BL       __aeabi_memclr
;;;755    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
00103a  48d3              LDR      r0,|L1.5000|
00103c  210d              MOVS     r1,#0xd
00103e  2320              MOVS     r3,#0x20
001040  2205              MOVS     r2,#5
001042  9100              STR      r1,[sp,#0]
001044  9001              STR      r0,[sp,#4]
001046  2103              MOVS     r1,#3
001048  48ae              LDR      r0,|L1.4868|
00104a  f7fffffe          BL       parse_g
;;;756    								sprintf(at_, "\r\nAT+CPBW=1,\"%s\",129,\"OWNER1\"\r\n" , num_o);
00104e  4ace              LDR      r2,|L1.5000|
001050  a1ce              ADR      r1,|L1.5004|
001052  48ad              LDR      r0,|L1.4872|
001054  f7fffffe          BL       __2sprintf
;;;757    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
001058  48ae              LDR      r0,|L1.4884|
00105a  6800              LDR      r0,[r0,#0]  ; tmeout
00105c  4bae              LDR      r3,|L1.4888|
00105e  461a              MOV      r2,r3
001060  3208              ADDS     r2,r2,#8
001062  4611              MOV      r1,r2
001064  311c              ADDS     r1,r1,#0x1c
001066  9000              STR      r0,[sp,#0]
001068  48a7              LDR      r0,|L1.4872|
00106a  f7fffffe          BL       send_GSM
00106e  4601              MOV      r1,r0
001070  9003              STR      r0,[sp,#0xc]
001072  a0a0              ADR      r0,|L1.4852|
001074  f7fffffe          BL       __2printf
;;;758    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
001078  48a6              LDR      r0,|L1.4884|
00107a  6800              LDR      r0,[r0,#0]  ; tmeout
00107c  4ba6              LDR      r3,|L1.4888|
00107e  461a              MOV      r2,r3
001080  3208              ADDS     r2,r2,#8
001082  4611              MOV      r1,r2
001084  311c              ADDS     r1,r1,#0x1c
001086  9000              STR      r0,[sp,#0]
001088  a095              ADR      r0,|L1.4832|
00108a  f7fffffe          BL       send_GSM
00108e  4601              MOV      r1,r0
001090  9003              STR      r0,[sp,#0xc]
001092  a098              ADR      r0,|L1.4852|
001094  f7fffffe          BL       __2printf
001098  e7c0              B        |L1.4124|
                  |L1.4250|
;;;759    															
;;;760    						
;;;761    								
;;;762    							}		
;;;763    							else if(strstr(uart_string_gsm, "OWNER2"))
00109a  a1c4              ADR      r1,|L1.5036|
00109c  4899              LDR      r0,|L1.4868|
00109e  f7fffffe          BL       strstr
0010a2  2800              CMP      r0,#0
0010a4  d037              BEQ      |L1.4374|
;;;764    							{
;;;765    								memset(at_,0,100);
0010a6  2164              MOVS     r1,#0x64
0010a8  4897              LDR      r0,|L1.4872|
0010aa  f7fffffe          BL       __aeabi_memclr4
;;;766    								memset(num_o,0,15);
0010ae  210f              MOVS     r1,#0xf
0010b0  48b5              LDR      r0,|L1.5000|
0010b2  f7fffffe          BL       __aeabi_memclr
;;;767    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
0010b6  48b4              LDR      r0,|L1.5000|
0010b8  210d              MOVS     r1,#0xd
0010ba  2320              MOVS     r3,#0x20
0010bc  2205              MOVS     r2,#5
0010be  9100              STR      r1,[sp,#0]
0010c0  9001              STR      r0,[sp,#4]
0010c2  2103              MOVS     r1,#3
0010c4  488f              LDR      r0,|L1.4868|
0010c6  f7fffffe          BL       parse_g
;;;768    								sprintf(at_, "\r\nAT+CPBW=2,\"%s\",129,\"OWNER2\"\r\n" , num_o);
0010ca  4aaf              LDR      r2,|L1.5000|
0010cc  a1b9              ADR      r1,|L1.5044|
0010ce  488e              LDR      r0,|L1.4872|
0010d0  f7fffffe          BL       __2sprintf
;;;769    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
0010d4  488f              LDR      r0,|L1.4884|
0010d6  6800              LDR      r0,[r0,#0]  ; tmeout
0010d8  4b8f              LDR      r3,|L1.4888|
0010da  461a              MOV      r2,r3
0010dc  3208              ADDS     r2,r2,#8
0010de  4611              MOV      r1,r2
0010e0  311c              ADDS     r1,r1,#0x1c
0010e2  9000              STR      r0,[sp,#0]
0010e4  4888              LDR      r0,|L1.4872|
0010e6  f7fffffe          BL       send_GSM
0010ea  4601              MOV      r1,r0
0010ec  9003              STR      r0,[sp,#0xc]
0010ee  a081              ADR      r0,|L1.4852|
0010f0  f7fffffe          BL       __2printf
;;;770    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
0010f4  4887              LDR      r0,|L1.4884|
0010f6  6800              LDR      r0,[r0,#0]  ; tmeout
0010f8  4b87              LDR      r3,|L1.4888|
0010fa  461a              MOV      r2,r3
0010fc  3208              ADDS     r2,r2,#8
0010fe  4611              MOV      r1,r2
001100  311c              ADDS     r1,r1,#0x1c
001102  9000              STR      r0,[sp,#0]
001104  a076              ADR      r0,|L1.4832|
001106  f7fffffe          BL       send_GSM
00110a  4601              MOV      r1,r0
00110c  9003              STR      r0,[sp,#0xc]
00110e  a079              ADR      r0,|L1.4852|
001110  f7fffffe          BL       __2printf
001114  e782              B        |L1.4124|
                  |L1.4374|
;;;771    															
;;;772    								
;;;773    							}									
;;;774    							else if(strstr(uart_string_gsm, "OWNER3"))
001116  a1af              ADR      r1,|L1.5076|
001118  487a              LDR      r0,|L1.4868|
00111a  f7fffffe          BL       strstr
00111e  2800              CMP      r0,#0
001120  d037              BEQ      |L1.4498|
;;;775    							{
;;;776    								memset(at_,0,100);
001122  2164              MOVS     r1,#0x64
001124  4878              LDR      r0,|L1.4872|
001126  f7fffffe          BL       __aeabi_memclr4
;;;777    								memset(num_o,0,15);
00112a  210f              MOVS     r1,#0xf
00112c  4896              LDR      r0,|L1.5000|
00112e  f7fffffe          BL       __aeabi_memclr
;;;778    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
001132  4895              LDR      r0,|L1.5000|
001134  210d              MOVS     r1,#0xd
001136  2320              MOVS     r3,#0x20
001138  2205              MOVS     r2,#5
00113a  9100              STR      r1,[sp,#0]
00113c  9001              STR      r0,[sp,#4]
00113e  2103              MOVS     r1,#3
001140  4870              LDR      r0,|L1.4868|
001142  f7fffffe          BL       parse_g
;;;779    								sprintf(at_, "\r\nAT+CPBW=3,\"%s\",129,\"OWNER3\"\r\n" , num_o);
001146  4a90              LDR      r2,|L1.5000|
001148  a1a4              ADR      r1,|L1.5084|
00114a  486f              LDR      r0,|L1.4872|
00114c  f7fffffe          BL       __2sprintf
;;;780    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
001150  4870              LDR      r0,|L1.4884|
001152  6800              LDR      r0,[r0,#0]  ; tmeout
001154  4b70              LDR      r3,|L1.4888|
001156  461a              MOV      r2,r3
001158  3208              ADDS     r2,r2,#8
00115a  4611              MOV      r1,r2
00115c  311c              ADDS     r1,r1,#0x1c
00115e  9000              STR      r0,[sp,#0]
001160  4869              LDR      r0,|L1.4872|
001162  f7fffffe          BL       send_GSM
001166  4601              MOV      r1,r0
001168  9003              STR      r0,[sp,#0xc]
00116a  a062              ADR      r0,|L1.4852|
00116c  f7fffffe          BL       __2printf
;;;781    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
001170  4868              LDR      r0,|L1.4884|
001172  6800              LDR      r0,[r0,#0]  ; tmeout
001174  4b68              LDR      r3,|L1.4888|
001176  461a              MOV      r2,r3
001178  3208              ADDS     r2,r2,#8
00117a  4611              MOV      r1,r2
00117c  311c              ADDS     r1,r1,#0x1c
00117e  9000              STR      r0,[sp,#0]
001180  a057              ADR      r0,|L1.4832|
001182  f7fffffe          BL       send_GSM
001186  4601              MOV      r1,r0
001188  9003              STR      r0,[sp,#0xc]
00118a  a05a              ADR      r0,|L1.4852|
00118c  f7fffffe          BL       __2printf
001190  e744              B        |L1.4124|
                  |L1.4498|
;;;782    															
;;;783    															
;;;784    									
;;;785    							}		
;;;786    						else if(strstr(uart_string_gsm, "DEBUG"))
001192  a19a              ADR      r1,|L1.5116|
001194  485b              LDR      r0,|L1.4868|
001196  f7fffffe          BL       strstr
00119a  2800              CMP      r0,#0
00119c  d07e              BEQ      |L1.4764|
;;;787    							{
;;;788    									memset(at_,0,100);
00119e  2164              MOVS     r1,#0x64
0011a0  4859              LDR      r0,|L1.4872|
0011a2  f7fffffe          BL       __aeabi_memclr4
;;;789    									for(k=0;k<450;k++)
0011a6  2000              MOVS     r0,#0
0011a8  4996              LDR      r1,|L1.5124|
0011aa  6008              STR      r0,[r1,#0]  ; k
0011ac  e04e              B        |L1.4684|
                  |L1.4526|
;;;790    									{
;;;791    										if(uart_string_gsm[k-1] == ' ' && uart_string_gsm[k-2] == 'G' && uart_string_gsm[k-3] == 'U'
0011ae  4895              LDR      r0,|L1.5124|
0011b0  6800              LDR      r0,[r0,#0]  ; k
0011b2  1e40              SUBS     r0,r0,#1
0011b4  4953              LDR      r1,|L1.4868|
0011b6  5c08              LDRB     r0,[r1,r0]
0011b8  2820              CMP      r0,#0x20
0011ba  d142              BNE      |L1.4674|
0011bc  4891              LDR      r0,|L1.5124|
0011be  6800              LDR      r0,[r0,#0]  ; k
0011c0  1e80              SUBS     r0,r0,#2
0011c2  5c08              LDRB     r0,[r1,r0]
0011c4  2847              CMP      r0,#0x47
0011c6  d13c              BNE      |L1.4674|
0011c8  488e              LDR      r0,|L1.5124|
0011ca  6800              LDR      r0,[r0,#0]  ; k
0011cc  1ec0              SUBS     r0,r0,#3
0011ce  5c08              LDRB     r0,[r1,r0]
0011d0  2855              CMP      r0,#0x55
0011d2  d136              BNE      |L1.4674|
;;;792    										&& uart_string_gsm[k-4] == 'B' && uart_string_gsm[k-5] == 'E' && uart_string_gsm[k-6] == 'D')
0011d4  488b              LDR      r0,|L1.5124|
0011d6  6800              LDR      r0,[r0,#0]  ; k
0011d8  1f00              SUBS     r0,r0,#4
0011da  5c08              LDRB     r0,[r1,r0]
0011dc  2842              CMP      r0,#0x42
0011de  d130              BNE      |L1.4674|
0011e0  4888              LDR      r0,|L1.5124|
0011e2  6800              LDR      r0,[r0,#0]  ; k
0011e4  1f40              SUBS     r0,r0,#5
0011e6  5c08              LDRB     r0,[r1,r0]
0011e8  2845              CMP      r0,#0x45
0011ea  d12a              BNE      |L1.4674|
0011ec  4885              LDR      r0,|L1.5124|
0011ee  6800              LDR      r0,[r0,#0]  ; k
0011f0  1f80              SUBS     r0,r0,#6
0011f2  5c08              LDRB     r0,[r1,r0]
0011f4  2844              CMP      r0,#0x44
0011f6  d124              BNE      |L1.4674|
;;;793    										{
;;;794    											for(i=0;i<100;i++)
0011f8  2000              MOVS     r0,#0
0011fa  4983              LDR      r1,|L1.5128|
0011fc  6008              STR      r0,[r1,#0]  ; i
0011fe  e011              B        |L1.4644|
                  |L1.4608|
;;;795    											{
;;;796    												at_[i]=uart_string_gsm[k];
001200  4840              LDR      r0,|L1.4868|
001202  4980              LDR      r1,|L1.5124|
001204  6809              LDR      r1,[r1,#0]  ; k
001206  5c40              LDRB     r0,[r0,r1]
001208  493f              LDR      r1,|L1.4872|
00120a  4a7f              LDR      r2,|L1.5128|
00120c  6812              LDR      r2,[r2,#0]  ; i
00120e  5488              STRB     r0,[r1,r2]
;;;797    												k++;
001210  487c              LDR      r0,|L1.5124|
001212  6800              LDR      r0,[r0,#0]  ; k
001214  1c40              ADDS     r0,r0,#1
001216  497b              LDR      r1,|L1.5124|
001218  6008              STR      r0,[r1,#0]  ; k
00121a  487b              LDR      r0,|L1.5128|
00121c  6800              LDR      r0,[r0,#0]            ;794  ; i
00121e  1c40              ADDS     r0,r0,#1              ;794
001220  4979              LDR      r1,|L1.5128|
001222  6008              STR      r0,[r1,#0]            ;794  ; i
                  |L1.4644|
001224  4878              LDR      r0,|L1.5128|
001226  6800              LDR      r0,[r0,#0]            ;794  ; i
001228  2864              CMP      r0,#0x64              ;794
00122a  dbe9              BLT      |L1.4608|
;;;798    											}	
;;;799    										at_[i+1]='\r';
00122c  210d              MOVS     r1,#0xd
00122e  4a36              LDR      r2,|L1.4872|
001230  4875              LDR      r0,|L1.5128|
001232  6800              LDR      r0,[r0,#0]  ; i
001234  1c40              ADDS     r0,r0,#1
001236  5411              STRB     r1,[r2,r0]
;;;800    										at_[i+2]='\n';	
001238  210a              MOVS     r1,#0xa
00123a  4873              LDR      r0,|L1.5128|
00123c  6800              LDR      r0,[r0,#0]  ; i
00123e  1c80              ADDS     r0,r0,#2
001240  5411              STRB     r1,[r2,r0]
                  |L1.4674|
001242  4870              LDR      r0,|L1.5124|
001244  6800              LDR      r0,[r0,#0]            ;789  ; k
001246  1c40              ADDS     r0,r0,#1              ;789
001248  496e              LDR      r1,|L1.5124|
00124a  6008              STR      r0,[r1,#0]            ;789  ; k
                  |L1.4684|
00124c  486d              LDR      r0,|L1.5124|
00124e  6800              LDR      r0,[r0,#0]            ;789  ; k
001250  21ff              MOVS     r1,#0xff              ;789
001252  31c3              ADDS     r1,r1,#0xc3           ;789
001254  4288              CMP      r0,r1                 ;789
001256  dbaa              BLT      |L1.4526|
;;;801    										}
;;;802    										else{}
;;;803    									}
;;;804    									
;;;805    									printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));		
001258  482e              LDR      r0,|L1.4884|
00125a  6800              LDR      r0,[r0,#0]  ; tmeout
00125c  4b2e              LDR      r3,|L1.4888|
00125e  461a              MOV      r2,r3
001260  3208              ADDS     r2,r2,#8
001262  4611              MOV      r1,r2
001264  311c              ADDS     r1,r1,#0x1c
001266  9000              STR      r0,[sp,#0]
001268  4827              LDR      r0,|L1.4872|
00126a  f7fffffe          BL       send_GSM
00126e  4601              MOV      r1,r0
001270  9003              STR      r0,[sp,#0xc]
001272  a020              ADR      r0,|L1.4852|
001274  f7fffffe          BL       __2printf
;;;806    										memset(data2,0,strlen(data2));
001278  4864              LDR      r0,|L1.5132|
00127a  f7fffffe          BL       strlen
00127e  4601              MOV      r1,r0
001280  9003              STR      r0,[sp,#0xc]
001282  4862              LDR      r0,|L1.5132|
001284  f7fffffe          BL       __aeabi_memclr4
;;;807    										sprintf(data2,"%s",uart_string_gsm);	
001288  4a1e              LDR      r2,|L1.4868|
00128a  a161              ADR      r1,|L1.5136|
00128c  485f              LDR      r0,|L1.5132|
00128e  f7fffffe          BL       __2sprintf
;;;808    										send_message(data2);
001292  485e              LDR      r0,|L1.5132|
001294  f7fffffe          BL       send_message
;;;809    									printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));		
001298  481e              LDR      r0,|L1.4884|
00129a  e000              B        |L1.4766|
                  |L1.4764|
00129c  e00f              B        |L1.4798|
                  |L1.4766|
00129e  6800              LDR      r0,[r0,#0]  ; tmeout
0012a0  4b1d              LDR      r3,|L1.4888|
0012a2  461a              MOV      r2,r3
0012a4  3208              ADDS     r2,r2,#8
0012a6  4611              MOV      r1,r2
0012a8  311c              ADDS     r1,r1,#0x1c
0012aa  9000              STR      r0,[sp,#0]
0012ac  a00c              ADR      r0,|L1.4832|
0012ae  f7fffffe          BL       send_GSM
0012b2  4601              MOV      r1,r0
0012b4  9003              STR      r0,[sp,#0xc]
0012b6  a00f              ADR      r0,|L1.4852|
0012b8  f7fffffe          BL       __2printf
0012bc  e37d              B        |L1.6586|
                  |L1.4798|
;;;810    									
;;;811    								
;;;812    							}
;;;813    							
;;;814    							else if(strstr(uart_string_gsm, "RESET"))
0012be  a155              ADR      r1,|L1.5140|
0012c0  4810              LDR      r0,|L1.4868|
0012c2  f7fffffe          BL       strstr
0012c6  2800              CMP      r0,#0
0012c8  d008              BEQ      |L1.4828|
;;;815    							{
;;;816    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
0012ca  4812              LDR      r0,|L1.4884|
0012cc  6800              LDR      r0,[r0,#0]  ; tmeout
0012ce  4b12              LDR      r3,|L1.4888|
0012d0  461a              MOV      r2,r3
0012d2  3208              ADDS     r2,r2,#8
0012d4  4611              MOV      r1,r2
0012d6  311c              ADDS     r1,r1,#0x1c
0012d8  9000              STR      r0,[sp,#0]
0012da  e09f              B        |L1.5148|
                  |L1.4828|
0012dc  e0b9              B        |L1.5202|
0012de  0000              DCW      0x0000
                  |L1.4832|
0012e0  0a0a2041          DCB      "\n\n AT+CMGD=1,4\r\n",0
0012e4  542b434d
0012e8  47443d31
0012ec  2c340d0a
0012f0  00      
0012f1  00                DCB      0
0012f2  00                DCB      0
0012f3  00                DCB      0
                  |L1.4852|
0012f4  25730a00          DCB      "%s\n",0
                  |L1.4856|
0012f8  494e5445          DCB      "INTERVAL",0
0012fc  5256414c
001300  00      
001301  00                DCB      0
001302  00                DCB      0
001303  00                DCB      0
                  |L1.4868|
                          DCD      uart_string_gsm
                  |L1.4872|
                          DCD      at_
                  |L1.4876|
                          DCD      interval
                  |L1.4880|
                          DCD      int_erval
                  |L1.4884|
                          DCD      tmeout
                  |L1.4888|
                          DCD      ||.text||+0x918
                  |L1.4892|
00131c  53544152          DCB      "START",0
001320  5400    
001322  00                DCB      0
001323  00                DCB      0
                  |L1.4900|
                          DCD      0x000f423f
                  |L1.4904|
001328  4f4b00            DCB      "OK",0
00132b  00                DCB      0
                  |L1.4908|
00132c  0a41542b          DCB      "\nAT+FSCREATE=C:\\LOG.TXT\r\n",0
001330  46534352
001334  45415445
001338  3d433a5c
00133c  4c4f472e
001340  5458540d
001344  0a00    
001346  00                DCB      0
001347  00                DCB      0
                  |L1.4936|
                          DCD      ||.text||+0xe14
                  |L1.4940|
00134c  3130342e          DCB      "104.236.203.4",0
001350  3233362e
001354  3230332e
001358  3400    
00135a  00                DCB      0
00135b  00                DCB      0
                  |L1.4956|
                          DCD      ||ip||
                  |L1.4960|
                          DCD      port
                  |L1.4964|
001364  35353535          DCB      "5555",0
001368  00      
001369  00                DCB      0
00136a  00                DCB      0
00136b  00                DCB      0
                  |L1.4972|
00136c  3100              DCB      "1",0
00136e  00                DCB      0
00136f  00                DCB      0
                  |L1.4976|
001370  0a0a092c          DCB      "\n\n\t,%s,%s,%s,\n",0
001374  25732c25
001378  732c2573
00137c  2c0a00  
00137f  00                DCB      0
                  |L1.4992|
001380  4f574e45          DCB      "OWNER1",0
001384  523100  
001387  00                DCB      0
                  |L1.5000|
                          DCD      num_o
                  |L1.5004|
00138c  0d0a4154          DCB      "\r\nAT+CPBW=1,""%s"",129,""OWNER1""\r\n",0
001390  2b435042
001394  573d312c
001398  22257322
00139c  2c313239
0013a0  2c224f57
0013a4  4e455231
0013a8  220d0a00
                  |L1.5036|
0013ac  4f574e45          DCB      "OWNER2",0
0013b0  523200  
0013b3  00                DCB      0
                  |L1.5044|
0013b4  0d0a4154          DCB      "\r\nAT+CPBW=2,""%s"",129,""OWNER2""\r\n",0
0013b8  2b435042
0013bc  573d322c
0013c0  22257322
0013c4  2c313239
0013c8  2c224f57
0013cc  4e455232
0013d0  220d0a00
                  |L1.5076|
0013d4  4f574e45          DCB      "OWNER3",0
0013d8  523300  
0013db  00                DCB      0
                  |L1.5084|
0013dc  0d0a4154          DCB      "\r\nAT+CPBW=3,""%s"",129,""OWNER3""\r\n",0
0013e0  2b435042
0013e4  573d332c
0013e8  22257322
0013ec  2c313239
0013f0  2c224f57
0013f4  4e455233
0013f8  220d0a00
                  |L1.5116|
0013fc  44454255          DCB      "DEBUG",0
001400  4700    
001402  00                DCB      0
001403  00                DCB      0
                  |L1.5124|
                          DCD      k
                  |L1.5128|
                          DCD      i
                  |L1.5132|
                          DCD      data2
                  |L1.5136|
001410  257300            DCB      "%s",0
001413  00                DCB      0
                  |L1.5140|
001414  52455345          DCB      "RESET",0
001418  5400    
00141a  00                DCB      0
00141b  00                DCB      0
                  |L1.5148|
00141c  48fe              LDR      r0,|L1.6168|
00141e  f7fffffe          BL       send_GSM
001422  4601              MOV      r1,r0
001424  9003              STR      r0,[sp,#0xc]
001426  48fc              LDR      r0,|L1.6168|
001428  3014              ADDS     r0,r0,#0x14
00142a  f7fffffe          BL       __2printf
;;;817    								printf("%s\n",send_GSM("\n\n AT+CFUN=1,1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
00142e  48fb              LDR      r0,|L1.6172|
001430  6800              LDR      r0,[r0,#0]  ; tmeout
001432  4bfb              LDR      r3,|L1.6176|
001434  461a              MOV      r2,r3
001436  3208              ADDS     r2,r2,#8
001438  4611              MOV      r1,r2
00143a  311c              ADDS     r1,r1,#0x1c
00143c  9000              STR      r0,[sp,#0]
00143e  a0f9              ADR      r0,|L1.6180|
001440  f7fffffe          BL       send_GSM
001444  4601              MOV      r1,r0
001446  9003              STR      r0,[sp,#0xc]
001448  48f3              LDR      r0,|L1.6168|
00144a  3014              ADDS     r0,r0,#0x14
00144c  f7fffffe          BL       __2printf
001450  e2b3              B        |L1.6586|
                  |L1.5202|
;;;818    							}
;;;819    							
;;;820    							else if(strstr(uart_string_gsm, "IP"))
001452  a1f9              ADR      r1,|L1.6200|
001454  48f9              LDR      r0,|L1.6204|
001456  f7fffffe          BL       strstr
00145a  2800              CMP      r0,#0
00145c  d035              BEQ      |L1.5322|
;;;821    							{
;;;822    								printf("\n\n\n\t%s",uart_string_gsm);
00145e  49f7              LDR      r1,|L1.6204|
001460  a0f7              ADR      r0,|L1.6208|
001462  f7fffffe          BL       __2printf
;;;823    								memset(ip,0,16);
001466  48f8              LDR      r0,|L1.6216|
001468  2100              MOVS     r1,#0
00146a  6001              STR      r1,[r0,#0]  ; ip
00146c  6041              STR      r1,[r0,#4]  ; ip
00146e  6081              STR      r1,[r0,#8]  ; ip
001470  60c1              STR      r1,[r0,#0xc]  ; ip
;;;824    								parse_g(uart_string_gsm, 3, 4, ' ', ' ', ip);
001472  2120              MOVS     r1,#0x20
001474  460b              MOV      r3,r1
001476  2204              MOVS     r2,#4
001478  9100              STR      r1,[sp,#0]
00147a  9001              STR      r0,[sp,#4]
00147c  2103              MOVS     r1,#3
00147e  48ef              LDR      r0,|L1.6204|
001480  f7fffffe          BL       parse_g
;;;825    								parse_g(uart_string_gsm, 6, 5, ' ', '\r', port);	
001484  48f1              LDR      r0,|L1.6220|
001486  210d              MOVS     r1,#0xd
001488  2320              MOVS     r3,#0x20
00148a  2205              MOVS     r2,#5
00148c  9100              STR      r1,[sp,#0]
00148e  9001              STR      r0,[sp,#4]
001490  2106              MOVS     r1,#6
001492  48ea              LDR      r0,|L1.6204|
001494  f7fffffe          BL       parse_g
;;;826    								printf("\n%s\n",port);
001498  49ec              LDR      r1,|L1.6220|
00149a  48e1              LDR      r0,|L1.6176|
00149c  3014              ADDS     r0,r0,#0x14
00149e  f7fffffe          BL       __2printf
;;;827    								save_ip_port();
0014a2  f7fffffe          BL       save_ip_port
;;;828    							
;;;829    	//							printf("\n\n\n\t%s\t||\t%s",ip,port);
;;;830    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));	
0014a6  48dd              LDR      r0,|L1.6172|
0014a8  6800              LDR      r0,[r0,#0]  ; tmeout
0014aa  4bdd              LDR      r3,|L1.6176|
0014ac  461a              MOV      r2,r3
0014ae  3208              ADDS     r2,r2,#8
0014b0  4611              MOV      r1,r2
0014b2  311c              ADDS     r1,r1,#0x1c
0014b4  9000              STR      r0,[sp,#0]
0014b6  48d8              LDR      r0,|L1.6168|
0014b8  f7fffffe          BL       send_GSM
0014bc  4601              MOV      r1,r0
0014be  9003              STR      r0,[sp,#0xc]
0014c0  48d5              LDR      r0,|L1.6168|
0014c2  3014              ADDS     r0,r0,#0x14
0014c4  f7fffffe          BL       __2printf
0014c8  e277              B        |L1.6586|
                  |L1.5322|
;;;831    
;;;832    //								while(1);
;;;833    								
;;;834    								
;;;835    							}							
;;;836    							
;;;837    												
;;;838    
;;;839    							else
;;;840    							{
;;;841    								
;;;842    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
0014ca  48d4              LDR      r0,|L1.6172|
0014cc  6800              LDR      r0,[r0,#0]  ; tmeout
0014ce  4bd4              LDR      r3,|L1.6176|
0014d0  461a              MOV      r2,r3
0014d2  3208              ADDS     r2,r2,#8
0014d4  4611              MOV      r1,r2
0014d6  311c              ADDS     r1,r1,#0x1c
0014d8  9000              STR      r0,[sp,#0]
0014da  48cf              LDR      r0,|L1.6168|
0014dc  f7fffffe          BL       send_GSM
0014e0  4601              MOV      r1,r0
0014e2  9003              STR      r0,[sp,#0xc]
0014e4  48cc              LDR      r0,|L1.6168|
0014e6  3014              ADDS     r0,r0,#0x14
0014e8  f7fffffe          BL       __2printf
0014ec  e265              B        |L1.6586|
                  |L1.5358|
;;;843    
;;;844    							}
;;;845    
;;;846    								
;;;847    					}
;;;848    					
;;;849    					else
;;;850    					{
;;;851    						
;;;852    						
;;;853    							if(strstr(uart_string_gsm, "START"))
0014ee  49ca              LDR      r1,|L1.6168|
0014f0  313c              ADDS     r1,r1,#0x3c
0014f2  48d2              LDR      r0,|L1.6204|
0014f4  f7fffffe          BL       strstr
0014f8  2800              CMP      r0,#0
0014fa  d05a              BEQ      |L1.5554|
;;;854    							{
;;;855    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
0014fc  48d4              LDR      r0,|L1.6224|
0014fe  4bc8              LDR      r3,|L1.6176|
001500  461a              MOV      r2,r3
001502  3208              ADDS     r2,r2,#8
001504  a1d3              ADR      r1,|L1.6228|
001506  9000              STR      r0,[sp,#0]
001508  4610              MOV      r0,r2
00150a  3034              ADDS     r0,r0,#0x34
00150c  f7fffffe          BL       send_GSM
001510  4601              MOV      r1,r0
001512  9003              STR      r0,[sp,#0xc]
001514  48c2              LDR      r0,|L1.6176|
001516  3014              ADDS     r0,r0,#0x14
001518  f7fffffe          BL       __2printf
;;;856    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
00151c  48cc              LDR      r0,|L1.6224|
00151e  4bc0              LDR      r3,|L1.6176|
001520  461a              MOV      r2,r3
001522  3208              ADDS     r2,r2,#8
001524  a1cb              ADR      r1,|L1.6228|
001526  9000              STR      r0,[sp,#0]
001528  48bb              LDR      r0,|L1.6168|
00152a  304c              ADDS     r0,r0,#0x4c
00152c  f7fffffe          BL       send_GSM
001530  4601              MOV      r1,r0
001532  9003              STR      r0,[sp,#0xc]
001534  48ba              LDR      r0,|L1.6176|
001536  3014              ADDS     r0,r0,#0x14
001538  f7fffffe          BL       __2printf
;;;857    								printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
00153c  48c4              LDR      r0,|L1.6224|
00153e  4bb8              LDR      r3,|L1.6176|
001540  461a              MOV      r2,r3
001542  3208              ADDS     r2,r2,#8
001544  a1c3              ADR      r1,|L1.6228|
001546  9000              STR      r0,[sp,#0]
001548  48c3              LDR      r0,|L1.6232|
00154a  f7fffffe          BL       send_GSM
00154e  4601              MOV      r1,r0
001550  9003              STR      r0,[sp,#0xc]
001552  48b3              LDR      r0,|L1.6176|
001554  3014              ADDS     r0,r0,#0x14
001556  f7fffffe          BL       __2printf
;;;858    								memcpy (ip, "104.236.203.4", 13);
00155a  220d              MOVS     r2,#0xd
00155c  49ae              LDR      r1,|L1.6168|
00155e  316c              ADDS     r1,r1,#0x6c
001560  48b9              LDR      r0,|L1.6216|
001562  f7fffffe          BL       __aeabi_memcpy4
;;;859    								memcpy (port, "5555", 4);		
001566  48b9              LDR      r0,|L1.6220|
001568  49ab              LDR      r1,|L1.6168|
00156a  3184              ADDS     r1,r1,#0x84
00156c  6809              LDR      r1,[r1,#0]
00156e  6001              STR      r1,[r0,#0]  ; port
;;;860    								memcpy (interval, "1", 1);										
001570  48ba              LDR      r0,|L1.6236|
001572  a1bb              ADR      r1,|L1.6240|
001574  7809              LDRB     r1,[r1,#0]
001576  7001              STRB     r1,[r0,#0]
;;;861    								save_ip_port();
001578  f7fffffe          BL       save_ip_port
;;;862    								save_interval();	
00157c  f7fffffe          BL       save_interval
;;;863    								printf("\n\n\t,%s,%s,%s,\n",ip,port,interval);		
001580  4bb6              LDR      r3,|L1.6236|
001582  4ab2              LDR      r2,|L1.6220|
001584  49b0              LDR      r1,|L1.6216|
001586  48a4              LDR      r0,|L1.6168|
001588  3090              ADDS     r0,r0,#0x90
00158a  f7fffffe          BL       __2printf
;;;864    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
00158e  48a3              LDR      r0,|L1.6172|
001590  6800              LDR      r0,[r0,#0]  ; tmeout
001592  4ba3              LDR      r3,|L1.6176|
001594  461a              MOV      r2,r3
001596  3208              ADDS     r2,r2,#8
001598  4611              MOV      r1,r2
00159a  311c              ADDS     r1,r1,#0x1c
00159c  9000              STR      r0,[sp,#0]
00159e  489e              LDR      r0,|L1.6168|
0015a0  f7fffffe          BL       send_GSM
0015a4  4601              MOV      r1,r0
0015a6  9003              STR      r0,[sp,#0xc]
0015a8  489b              LDR      r0,|L1.6168|
0015aa  3014              ADDS     r0,r0,#0x14
0015ac  f7fffffe          BL       __2printf
                  |L1.5552|
0015b0  e203              B        |L1.6586|
                  |L1.5554|
;;;865    								
;;;866    							}
;;;867    							else if(strstr(uart_string_gsm, "OWNER1"))
0015b2  4999              LDR      r1,|L1.6168|
0015b4  31a0              ADDS     r1,r1,#0xa0
0015b6  48a1              LDR      r0,|L1.6204|
0015b8  f7fffffe          BL       strstr
0015bc  2800              CMP      r0,#0
0015be  d03a              BEQ      |L1.5686|
;;;868    							{
;;;869    								memset(at_,0,100);
0015c0  2164              MOVS     r1,#0x64
0015c2  48a8              LDR      r0,|L1.6244|
0015c4  f7fffffe          BL       __aeabi_memclr4
;;;870    								memset(num_o,0,15);
0015c8  210f              MOVS     r1,#0xf
0015ca  48a7              LDR      r0,|L1.6248|
0015cc  f7fffffe          BL       __aeabi_memclr
;;;871    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
0015d0  48a5              LDR      r0,|L1.6248|
0015d2  210d              MOVS     r1,#0xd
0015d4  2320              MOVS     r3,#0x20
0015d6  2205              MOVS     r2,#5
0015d8  9100              STR      r1,[sp,#0]
0015da  9001              STR      r0,[sp,#4]
0015dc  2103              MOVS     r1,#3
0015de  4897              LDR      r0,|L1.6204|
0015e0  f7fffffe          BL       parse_g
;;;872    								sprintf(at_, "\r\nAT+CPBW=1,\"%s\",129,\"OWNER1\"\r\n" , num_o);
0015e4  4aa0              LDR      r2,|L1.6248|
0015e6  498c              LDR      r1,|L1.6168|
0015e8  31ac              ADDS     r1,r1,#0xac
0015ea  489e              LDR      r0,|L1.6244|
0015ec  f7fffffe          BL       __2sprintf
;;;873    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
0015f0  488a              LDR      r0,|L1.6172|
0015f2  6800              LDR      r0,[r0,#0]  ; tmeout
0015f4  4b8a              LDR      r3,|L1.6176|
0015f6  461a              MOV      r2,r3
0015f8  3208              ADDS     r2,r2,#8
0015fa  4611              MOV      r1,r2
0015fc  311c              ADDS     r1,r1,#0x1c
0015fe  9000              STR      r0,[sp,#0]
001600  4898              LDR      r0,|L1.6244|
001602  f7fffffe          BL       send_GSM
001606  4601              MOV      r1,r0
001608  9003              STR      r0,[sp,#0xc]
00160a  4883              LDR      r0,|L1.6168|
00160c  3014              ADDS     r0,r0,#0x14
00160e  f7fffffe          BL       __2printf
;;;874    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
001612  4882              LDR      r0,|L1.6172|
001614  6800              LDR      r0,[r0,#0]  ; tmeout
001616  4b82              LDR      r3,|L1.6176|
001618  461a              MOV      r2,r3
00161a  3208              ADDS     r2,r2,#8
00161c  4611              MOV      r1,r2
00161e  311c              ADDS     r1,r1,#0x1c
001620  9000              STR      r0,[sp,#0]
001622  487d              LDR      r0,|L1.6168|
001624  f7fffffe          BL       send_GSM
001628  4601              MOV      r1,r0
00162a  9003              STR      r0,[sp,#0xc]
00162c  487a              LDR      r0,|L1.6168|
00162e  3014              ADDS     r0,r0,#0x14
001630  f7fffffe          BL       __2printf
001634  e1c1              B        |L1.6586|
                  |L1.5686|
;;;875    															
;;;876    						
;;;877    								
;;;878    							}		
;;;879    							else if(strstr(uart_string_gsm, "OWNER2"))
001636  4978              LDR      r1,|L1.6168|
001638  31cc              ADDS     r1,r1,#0xcc
00163a  4880              LDR      r0,|L1.6204|
00163c  f7fffffe          BL       strstr
001640  2800              CMP      r0,#0
001642  d03a              BEQ      |L1.5818|
;;;880    							{
;;;881    								memset(at_,0,100);
001644  2164              MOVS     r1,#0x64
001646  4887              LDR      r0,|L1.6244|
001648  f7fffffe          BL       __aeabi_memclr4
;;;882    								memset(num_o,0,15);
00164c  210f              MOVS     r1,#0xf
00164e  4886              LDR      r0,|L1.6248|
001650  f7fffffe          BL       __aeabi_memclr
;;;883    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
001654  4884              LDR      r0,|L1.6248|
001656  210d              MOVS     r1,#0xd
001658  2320              MOVS     r3,#0x20
00165a  2205              MOVS     r2,#5
00165c  9100              STR      r1,[sp,#0]
00165e  9001              STR      r0,[sp,#4]
001660  2103              MOVS     r1,#3
001662  4876              LDR      r0,|L1.6204|
001664  f7fffffe          BL       parse_g
;;;884    								sprintf(at_, "\r\nAT+CPBW=2,\"%s\",129,\"OWNER2\"\r\n" , num_o);
001668  4a7f              LDR      r2,|L1.6248|
00166a  496b              LDR      r1,|L1.6168|
00166c  31d4              ADDS     r1,r1,#0xd4
00166e  487d              LDR      r0,|L1.6244|
001670  f7fffffe          BL       __2sprintf
;;;885    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
001674  4869              LDR      r0,|L1.6172|
001676  6800              LDR      r0,[r0,#0]  ; tmeout
001678  4b69              LDR      r3,|L1.6176|
00167a  461a              MOV      r2,r3
00167c  3208              ADDS     r2,r2,#8
00167e  4611              MOV      r1,r2
001680  311c              ADDS     r1,r1,#0x1c
001682  9000              STR      r0,[sp,#0]
001684  4877              LDR      r0,|L1.6244|
001686  f7fffffe          BL       send_GSM
00168a  4601              MOV      r1,r0
00168c  9003              STR      r0,[sp,#0xc]
00168e  4862              LDR      r0,|L1.6168|
001690  3014              ADDS     r0,r0,#0x14
001692  f7fffffe          BL       __2printf
;;;886    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
001696  4861              LDR      r0,|L1.6172|
001698  6800              LDR      r0,[r0,#0]  ; tmeout
00169a  4b61              LDR      r3,|L1.6176|
00169c  461a              MOV      r2,r3
00169e  3208              ADDS     r2,r2,#8
0016a0  4611              MOV      r1,r2
0016a2  311c              ADDS     r1,r1,#0x1c
0016a4  9000              STR      r0,[sp,#0]
0016a6  485c              LDR      r0,|L1.6168|
0016a8  f7fffffe          BL       send_GSM
0016ac  4601              MOV      r1,r0
0016ae  9003              STR      r0,[sp,#0xc]
0016b0  4859              LDR      r0,|L1.6168|
0016b2  3014              ADDS     r0,r0,#0x14
0016b4  f7fffffe          BL       __2printf
0016b8  e17f              B        |L1.6586|
                  |L1.5818|
;;;887    															
;;;888    								
;;;889    							}									
;;;890    							else if(strstr(uart_string_gsm, "OWNER3"))
0016ba  4957              LDR      r1,|L1.6168|
0016bc  31f4              ADDS     r1,r1,#0xf4
0016be  485f              LDR      r0,|L1.6204|
0016c0  f7fffffe          BL       strstr
0016c4  2800              CMP      r0,#0
0016c6  d03a              BEQ      |L1.5950|
;;;891    							{
;;;892    								memset(at_,0,100);
0016c8  2164              MOVS     r1,#0x64
0016ca  4866              LDR      r0,|L1.6244|
0016cc  f7fffffe          BL       __aeabi_memclr4
;;;893    								memset(num_o,0,15);
0016d0  210f              MOVS     r1,#0xf
0016d2  4865              LDR      r0,|L1.6248|
0016d4  f7fffffe          BL       __aeabi_memclr
;;;894    								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
0016d8  4863              LDR      r0,|L1.6248|
0016da  210d              MOVS     r1,#0xd
0016dc  2320              MOVS     r3,#0x20
0016de  2205              MOVS     r2,#5
0016e0  9100              STR      r1,[sp,#0]
0016e2  9001              STR      r0,[sp,#4]
0016e4  2103              MOVS     r1,#3
0016e6  4855              LDR      r0,|L1.6204|
0016e8  f7fffffe          BL       parse_g
;;;895    								sprintf(at_, "\r\nAT+CPBW=3,\"%s\",129,\"OWNER3\"\r\n" , num_o);
0016ec  4a5e              LDR      r2,|L1.6248|
0016ee  494a              LDR      r1,|L1.6168|
0016f0  31fc              ADDS     r1,r1,#0xfc
0016f2  485c              LDR      r0,|L1.6244|
0016f4  f7fffffe          BL       __2sprintf
;;;896    								printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
0016f8  4848              LDR      r0,|L1.6172|
0016fa  6800              LDR      r0,[r0,#0]  ; tmeout
0016fc  4b48              LDR      r3,|L1.6176|
0016fe  461a              MOV      r2,r3
001700  3208              ADDS     r2,r2,#8
001702  4611              MOV      r1,r2
001704  311c              ADDS     r1,r1,#0x1c
001706  9000              STR      r0,[sp,#0]
001708  4856              LDR      r0,|L1.6244|
00170a  f7fffffe          BL       send_GSM
00170e  4601              MOV      r1,r0
001710  9003              STR      r0,[sp,#0xc]
001712  4841              LDR      r0,|L1.6168|
001714  3014              ADDS     r0,r0,#0x14
001716  f7fffffe          BL       __2printf
;;;897    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
00171a  4840              LDR      r0,|L1.6172|
00171c  6800              LDR      r0,[r0,#0]  ; tmeout
00171e  4b40              LDR      r3,|L1.6176|
001720  461a              MOV      r2,r3
001722  3208              ADDS     r2,r2,#8
001724  4611              MOV      r1,r2
001726  311c              ADDS     r1,r1,#0x1c
001728  9000              STR      r0,[sp,#0]
00172a  483b              LDR      r0,|L1.6168|
00172c  f7fffffe          BL       send_GSM
001730  4601              MOV      r1,r0
001732  9003              STR      r0,[sp,#0xc]
001734  4838              LDR      r0,|L1.6168|
001736  3014              ADDS     r0,r0,#0x14
001738  f7fffffe          BL       __2printf
00173c  e13d              B        |L1.6586|
                  |L1.5950|
;;;898    															
;;;899    															
;;;900    									
;;;901    							}		
;;;902    						else if(strstr(uart_string_gsm, "DEBUG"))
00173e  494b              LDR      r1,|L1.6252|
001740  483e              LDR      r0,|L1.6204|
001742  f7fffffe          BL       strstr
001746  2800              CMP      r0,#0
001748  d064              BEQ      |L1.6164|
;;;903    							{
;;;904    									memset(at_,0,100);
00174a  2164              MOVS     r1,#0x64
00174c  4845              LDR      r0,|L1.6244|
00174e  f7fffffe          BL       __aeabi_memclr4
;;;905    									for(k=0;k<450;k++)
001752  2000              MOVS     r0,#0
001754  4946              LDR      r1,|L1.6256|
001756  6008              STR      r0,[r1,#0]  ; k
001758  e04e              B        |L1.6136|
                  |L1.5978|
;;;906    									{
;;;907    										if(uart_string_gsm[k-1] == ' ' && uart_string_gsm[k-2] == 'G' && uart_string_gsm[k-3] == 'U'
00175a  4845              LDR      r0,|L1.6256|
00175c  6800              LDR      r0,[r0,#0]  ; k
00175e  1e40              SUBS     r0,r0,#1
001760  4936              LDR      r1,|L1.6204|
001762  5c08              LDRB     r0,[r1,r0]
001764  2820              CMP      r0,#0x20
001766  d142              BNE      |L1.6126|
001768  4841              LDR      r0,|L1.6256|
00176a  6800              LDR      r0,[r0,#0]  ; k
00176c  1e80              SUBS     r0,r0,#2
00176e  5c08              LDRB     r0,[r1,r0]
001770  2847              CMP      r0,#0x47
001772  d13c              BNE      |L1.6126|
001774  483e              LDR      r0,|L1.6256|
001776  6800              LDR      r0,[r0,#0]  ; k
001778  1ec0              SUBS     r0,r0,#3
00177a  5c08              LDRB     r0,[r1,r0]
00177c  2855              CMP      r0,#0x55
00177e  d136              BNE      |L1.6126|
;;;908    										&& uart_string_gsm[k-4] == 'B' && uart_string_gsm[k-5] == 'E' && uart_string_gsm[k-6] == 'D')
001780  483b              LDR      r0,|L1.6256|
001782  6800              LDR      r0,[r0,#0]  ; k
001784  1f00              SUBS     r0,r0,#4
001786  5c08              LDRB     r0,[r1,r0]
001788  2842              CMP      r0,#0x42
00178a  d130              BNE      |L1.6126|
00178c  4838              LDR      r0,|L1.6256|
00178e  6800              LDR      r0,[r0,#0]  ; k
001790  1f40              SUBS     r0,r0,#5
001792  5c08              LDRB     r0,[r1,r0]
001794  2845              CMP      r0,#0x45
001796  d12a              BNE      |L1.6126|
001798  4835              LDR      r0,|L1.6256|
00179a  6800              LDR      r0,[r0,#0]  ; k
00179c  1f80              SUBS     r0,r0,#6
00179e  5c08              LDRB     r0,[r1,r0]
0017a0  2844              CMP      r0,#0x44
0017a2  d124              BNE      |L1.6126|
;;;909    										{
;;;910    											for(i=0;i<100;i++)
0017a4  2000              MOVS     r0,#0
0017a6  4933              LDR      r1,|L1.6260|
0017a8  6008              STR      r0,[r1,#0]  ; i
0017aa  e011              B        |L1.6096|
                  |L1.6060|
;;;911    											{
;;;912    												at_[i]=uart_string_gsm[k];
0017ac  4823              LDR      r0,|L1.6204|
0017ae  4930              LDR      r1,|L1.6256|
0017b0  6809              LDR      r1,[r1,#0]  ; k
0017b2  5c41              LDRB     r1,[r0,r1]
0017b4  482b              LDR      r0,|L1.6244|
0017b6  4a2f              LDR      r2,|L1.6260|
0017b8  6812              LDR      r2,[r2,#0]  ; i
0017ba  5481              STRB     r1,[r0,r2]
;;;913    												k++;
0017bc  482c              LDR      r0,|L1.6256|
0017be  6800              LDR      r0,[r0,#0]  ; k
0017c0  1c40              ADDS     r0,r0,#1
0017c2  492b              LDR      r1,|L1.6256|
0017c4  6008              STR      r0,[r1,#0]  ; k
0017c6  482b              LDR      r0,|L1.6260|
0017c8  6800              LDR      r0,[r0,#0]            ;910  ; i
0017ca  1c40              ADDS     r0,r0,#1              ;910
0017cc  4929              LDR      r1,|L1.6260|
0017ce  6008              STR      r0,[r1,#0]            ;910  ; i
                  |L1.6096|
0017d0  4828              LDR      r0,|L1.6260|
0017d2  6800              LDR      r0,[r0,#0]            ;910  ; i
0017d4  2864              CMP      r0,#0x64              ;910
0017d6  dbe9              BLT      |L1.6060|
;;;914    											}	
;;;915    										at_[i+1]='\r';
0017d8  210d              MOVS     r1,#0xd
0017da  4a22              LDR      r2,|L1.6244|
0017dc  4825              LDR      r0,|L1.6260|
0017de  6800              LDR      r0,[r0,#0]  ; i
0017e0  1c40              ADDS     r0,r0,#1
0017e2  5411              STRB     r1,[r2,r0]
;;;916    										at_[i+2]='\n';	
0017e4  210a              MOVS     r1,#0xa
0017e6  4823              LDR      r0,|L1.6260|
0017e8  6800              LDR      r0,[r0,#0]  ; i
0017ea  1c80              ADDS     r0,r0,#2
0017ec  5411              STRB     r1,[r2,r0]
                  |L1.6126|
0017ee  4820              LDR      r0,|L1.6256|
0017f0  6800              LDR      r0,[r0,#0]            ;905  ; k
0017f2  1c40              ADDS     r0,r0,#1              ;905
0017f4  491e              LDR      r1,|L1.6256|
0017f6  6008              STR      r0,[r1,#0]            ;905  ; k
                  |L1.6136|
0017f8  481d              LDR      r0,|L1.6256|
0017fa  6800              LDR      r0,[r0,#0]            ;905  ; k
0017fc  21ff              MOVS     r1,#0xff              ;905
0017fe  31c3              ADDS     r1,r1,#0xc3           ;905
001800  4288              CMP      r0,r1                 ;905
001802  dbaa              BLT      |L1.5978|
;;;917    										}
;;;918    										else{}
;;;919    									}
;;;920    									
;;;921    									printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));		
001804  4805              LDR      r0,|L1.6172|
001806  6800              LDR      r0,[r0,#0]  ; tmeout
001808  4b05              LDR      r3,|L1.6176|
00180a  461a              MOV      r2,r3
00180c  3208              ADDS     r2,r2,#8
00180e  4611              MOV      r1,r2
001810  311c              ADDS     r1,r1,#0x1c
001812  e031              B        |L1.6264|
                  |L1.6164|
001814  e05b              B        |L1.6350|
001816  0000              DCW      0x0000
                  |L1.6168|
                          DCD      ||.text||+0x12e0
                  |L1.6172|
                          DCD      tmeout
                  |L1.6176|
                          DCD      ||.text||+0x918
                  |L1.6180|
001824  0a0a2041          DCB      "\n\n AT+CFUN=1,1\r\n",0
001828  542b4346
00182c  554e3d31
001830  2c310d0a
001834  00      
001835  00                DCB      0
001836  00                DCB      0
001837  00                DCB      0
                  |L1.6200|
001838  495000            DCB      "IP",0
00183b  00                DCB      0
                  |L1.6204|
                          DCD      uart_string_gsm
                  |L1.6208|
001840  0a0a0a09          DCB      "\n\n\n\t%s",0
001844  257300  
001847  00                DCB      0
                  |L1.6216|
                          DCD      ||ip||
                  |L1.6220|
                          DCD      port
                  |L1.6224|
                          DCD      0x000f423f
                  |L1.6228|
001854  4f4b00            DCB      "OK",0
001857  00                DCB      0
                  |L1.6232|
                          DCD      ||.text||+0xe14
                  |L1.6236|
                          DCD      interval
                  |L1.6240|
001860  3100              DCB      "1",0
001862  00                DCB      0
001863  00                DCB      0
                  |L1.6244|
                          DCD      at_
                  |L1.6248|
                          DCD      num_o
                  |L1.6252|
                          DCD      ||.text||+0x13fc
                  |L1.6256|
                          DCD      k
                  |L1.6260|
                          DCD      i
                  |L1.6264|
001878  9000              STR      r0,[sp,#0]
00187a  48fa              LDR      r0,|L1.7268|
00187c  f7fffffe          BL       send_GSM
001880  4601              MOV      r1,r0
001882  9003              STR      r0,[sp,#0xc]
001884  48f8              LDR      r0,|L1.7272|
001886  f7fffffe          BL       __2printf
;;;922    										memset(data2,0,strlen(data2));
00188a  48f8              LDR      r0,|L1.7276|
00188c  f7fffffe          BL       strlen
001890  4601              MOV      r1,r0
001892  9003              STR      r0,[sp,#0xc]
001894  48f5              LDR      r0,|L1.7276|
001896  f7fffffe          BL       __aeabi_memclr4
;;;923    										sprintf(data2,"%s",uart_string_gsm);	
00189a  4af5              LDR      r2,|L1.7280|
00189c  a1f5              ADR      r1,|L1.7284|
00189e  48f3              LDR      r0,|L1.7276|
0018a0  f7fffffe          BL       __2sprintf
;;;924    										send_message(data2);
0018a4  48f1              LDR      r0,|L1.7276|
0018a6  f7fffffe          BL       send_message
;;;925    									printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));		
0018aa  48f3              LDR      r0,|L1.7288|
0018ac  6800              LDR      r0,[r0,#0]  ; tmeout
0018ae  4bf3              LDR      r3,|L1.7292|
0018b0  461a              MOV      r2,r3
0018b2  3208              ADDS     r2,r2,#8
0018b4  4611              MOV      r1,r2
0018b6  311c              ADDS     r1,r1,#0x1c
0018b8  9000              STR      r0,[sp,#0]
0018ba  48eb              LDR      r0,|L1.7272|
0018bc  3814              SUBS     r0,r0,#0x14
0018be  f7fffffe          BL       send_GSM
0018c2  4601              MOV      r1,r0
0018c4  9003              STR      r0,[sp,#0xc]
0018c6  48e8              LDR      r0,|L1.7272|
0018c8  f7fffffe          BL       __2printf
0018cc  e075              B        |L1.6586|
                  |L1.6350|
;;;926    									
;;;927    								
;;;928    							}
;;;929    							
;;;930    							else if(strstr(uart_string_gsm, "RESET"))
0018ce  49ec              LDR      r1,|L1.7296|
0018d0  48e7              LDR      r0,|L1.7280|
0018d2  f7fffffe          BL       strstr
0018d6  2800              CMP      r0,#0
0018d8  d021              BEQ      |L1.6430|
;;;931    							{
;;;932    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
0018da  48e7              LDR      r0,|L1.7288|
0018dc  6800              LDR      r0,[r0,#0]  ; tmeout
0018de  4be7              LDR      r3,|L1.7292|
0018e0  461a              MOV      r2,r3
0018e2  3208              ADDS     r2,r2,#8
0018e4  4611              MOV      r1,r2
0018e6  311c              ADDS     r1,r1,#0x1c
0018e8  9000              STR      r0,[sp,#0]
0018ea  48df              LDR      r0,|L1.7272|
0018ec  3814              SUBS     r0,r0,#0x14
0018ee  f7fffffe          BL       send_GSM
0018f2  4601              MOV      r1,r0
0018f4  9003              STR      r0,[sp,#0xc]
0018f6  48dc              LDR      r0,|L1.7272|
0018f8  f7fffffe          BL       __2printf
;;;933    								printf("%s\n",send_GSM("\n\n AT+CFUN=1,1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
0018fc  48de              LDR      r0,|L1.7288|
0018fe  6800              LDR      r0,[r0,#0]  ; tmeout
001900  4bde              LDR      r3,|L1.7292|
001902  461a              MOV      r2,r3
001904  3208              ADDS     r2,r2,#8
001906  4611              MOV      r1,r2
001908  311c              ADDS     r1,r1,#0x1c
00190a  9000              STR      r0,[sp,#0]
00190c  48dd              LDR      r0,|L1.7300|
00190e  f7fffffe          BL       send_GSM
001912  4601              MOV      r1,r0
001914  9003              STR      r0,[sp,#0xc]
001916  48d4              LDR      r0,|L1.7272|
001918  f7fffffe          BL       __2printf
00191c  e04d              B        |L1.6586|
                  |L1.6430|
;;;934    							}
;;;935    							
;;;936    							else if(strstr(uart_string_gsm, "IP"))
00191e  a1da              ADR      r1,|L1.7304|
001920  48d3              LDR      r0,|L1.7280|
001922  f7fffffe          BL       strstr
001926  2800              CMP      r0,#0
001928  d036              BEQ      |L1.6552|
;;;937    							{
;;;938    								printf("\n\n\n\t%s",uart_string_gsm);
00192a  49d1              LDR      r1,|L1.7280|
00192c  48d5              LDR      r0,|L1.7300|
00192e  301c              ADDS     r0,r0,#0x1c
001930  f7fffffe          BL       __2printf
;;;939    								memset(ip,0,16);
001934  48d5              LDR      r0,|L1.7308|
001936  2100              MOVS     r1,#0
001938  6001              STR      r1,[r0,#0]  ; ip
00193a  6041              STR      r1,[r0,#4]  ; ip
00193c  6081              STR      r1,[r0,#8]  ; ip
00193e  60c1              STR      r1,[r0,#0xc]  ; ip
;;;940    								parse_g(uart_string_gsm, 3, 4, ' ', ' ', ip);
001940  2120              MOVS     r1,#0x20
001942  460b              MOV      r3,r1
001944  2204              MOVS     r2,#4
001946  9100              STR      r1,[sp,#0]
001948  9001              STR      r0,[sp,#4]
00194a  2103              MOVS     r1,#3
00194c  48c8              LDR      r0,|L1.7280|
00194e  f7fffffe          BL       parse_g
;;;941    								parse_g(uart_string_gsm, 6, 5, ' ', '\r', port);	
001952  48cf              LDR      r0,|L1.7312|
001954  210d              MOVS     r1,#0xd
001956  2320              MOVS     r3,#0x20
001958  2205              MOVS     r2,#5
00195a  9100              STR      r1,[sp,#0]
00195c  9001              STR      r0,[sp,#4]
00195e  2106              MOVS     r1,#6
001960  48c3              LDR      r0,|L1.7280|
001962  f7fffffe          BL       parse_g
;;;942    								printf("\n%s\n",port);
001966  49ca              LDR      r1,|L1.7312|
001968  48c4              LDR      r0,|L1.7292|
00196a  3014              ADDS     r0,r0,#0x14
00196c  f7fffffe          BL       __2printf
;;;943    								save_ip_port();
001970  f7fffffe          BL       save_ip_port
;;;944    							
;;;945    	//							printf("\n\n\n\t%s\t||\t%s",ip,port);
;;;946    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));	
001974  48c0              LDR      r0,|L1.7288|
001976  6800              LDR      r0,[r0,#0]  ; tmeout
001978  4bc0              LDR      r3,|L1.7292|
00197a  461a              MOV      r2,r3
00197c  3208              ADDS     r2,r2,#8
00197e  4611              MOV      r1,r2
001980  311c              ADDS     r1,r1,#0x1c
001982  9000              STR      r0,[sp,#0]
001984  48b8              LDR      r0,|L1.7272|
001986  3814              SUBS     r0,r0,#0x14
001988  f7fffffe          BL       send_GSM
00198c  4601              MOV      r1,r0
00198e  9003              STR      r0,[sp,#0xc]
001990  48b5              LDR      r0,|L1.7272|
001992  f7fffffe          BL       __2printf
001996  e010              B        |L1.6586|
                  |L1.6552|
;;;947    
;;;948    //								while(1);
;;;949    								
;;;950    								}		
;;;951    
;;;952    							else
;;;953    							{
;;;954    								
;;;955    								printf("%s\n",send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));			
001998  48b7              LDR      r0,|L1.7288|
00199a  6800              LDR      r0,[r0,#0]  ; tmeout
00199c  4bb7              LDR      r3,|L1.7292|
00199e  461a              MOV      r2,r3
0019a0  3208              ADDS     r2,r2,#8
0019a2  4611              MOV      r1,r2
0019a4  311c              ADDS     r1,r1,#0x1c
0019a6  9000              STR      r0,[sp,#0]
0019a8  48af              LDR      r0,|L1.7272|
0019aa  3814              SUBS     r0,r0,#0x14
0019ac  f7fffffe          BL       send_GSM
0019b0  4601              MOV      r1,r0
0019b2  9003              STR      r0,[sp,#0xc]
0019b4  48ac              LDR      r0,|L1.7272|
0019b6  f7fffffe          BL       __2printf
                  |L1.6586|
;;;956    
;;;957    							}							
;;;958    							
;;;959    					
;;;960    					}
;;;961    		ringflag=0;	
0019ba  2000              MOVS     r0,#0
0019bc  49b5              LDR      r1,|L1.7316|
0019be  7008              STRB     r0,[r1,#0]
                  |L1.6592|
;;;962    		}
;;;963    		
;;;964    }
0019c0  bd1f              POP      {r0-r4,pc}
;;;965    
                          ENDP

                  stof PROC
;;;439    
;;;440    float stof(const char* s)
0019c2  b5fe              PUSH     {r1-r7,lr}
;;;441    {
0019c4  4604              MOV      r4,r0
;;;442      float rez = 0, fact = 1;
0019c6  2000              MOVS     r0,#0
0019c8  9002              STR      r0,[sp,#8]
0019ca  267f              MOVS     r6,#0x7f
0019cc  05f6              LSLS     r6,r6,#23
;;;443    	int d,point_seen;
;;;444      if (*s == '-'){
0019ce  7820              LDRB     r0,[r4,#0]
0019d0  282d              CMP      r0,#0x2d
0019d2  d101              BNE      |L1.6616|
;;;445        s++;
0019d4  1c64              ADDS     r4,r4,#1
;;;446        fact = -1;
0019d6  4eb0              LDR      r6,|L1.7320|
                  |L1.6616|
;;;447      };
;;;448      for (point_seen = 0; *s; s++){
0019d8  2700              MOVS     r7,#0
0019da  e021              B        |L1.6688|
                  |L1.6620|
;;;449        if (*s == '.'){
0019dc  7820              LDRB     r0,[r4,#0]
0019de  282e              CMP      r0,#0x2e
0019e0  d101              BNE      |L1.6630|
;;;450          point_seen = 1; 
0019e2  2701              MOVS     r7,#1
;;;451          continue;
0019e4  e01b              B        |L1.6686|
                  |L1.6630|
;;;452        };
;;;453        d = *s - '0';
0019e6  7820              LDRB     r0,[r4,#0]
0019e8  4605              MOV      r5,r0
0019ea  3d30              SUBS     r5,r5,#0x30
;;;454        if (d >= 0 && d <= 9){
0019ec  2d00              CMP      r5,#0
0019ee  db15              BLT      |L1.6684|
0019f0  2d09              CMP      r5,#9
0019f2  dc13              BGT      |L1.6684|
;;;455          if (point_seen) fact /= 10.0f;
0019f4  2f00              CMP      r7,#0
0019f6  d004              BEQ      |L1.6658|
0019f8  49a8              LDR      r1,|L1.7324|
0019fa  4630              MOV      r0,r6
0019fc  f7fffffe          BL       __aeabi_fdiv
001a00  4606              MOV      r6,r0
                  |L1.6658|
;;;456          rez = rez * 10.0f + (float)d;
001a02  4628              MOV      r0,r5
001a04  f7fffffe          BL       __aeabi_i2f
001a08  49a4              LDR      r1,|L1.7324|
001a0a  9001              STR      r0,[sp,#4]
001a0c  9802              LDR      r0,[sp,#8]
001a0e  f7fffffe          BL       __aeabi_fmul
001a12  9000              STR      r0,[sp,#0]
001a14  9901              LDR      r1,[sp,#4]
001a16  f7fffffe          BL       __aeabi_fadd
001a1a  9002              STR      r0,[sp,#8]
                  |L1.6684|
001a1c  bf00              NOP                            ;451
                  |L1.6686|
001a1e  1c64              ADDS     r4,r4,#1              ;448
                  |L1.6688|
001a20  7820              LDRB     r0,[r4,#0]            ;448
001a22  2800              CMP      r0,#0                 ;448
001a24  d1da              BNE      |L1.6620|
;;;457        };
;;;458      };
;;;459      return rez * fact;
001a26  4631              MOV      r1,r6
001a28  9802              LDR      r0,[sp,#8]
001a2a  f7fffffe          BL       __aeabi_fmul
;;;460    };
001a2e  bdfe              POP      {r1-r7,pc}
;;;461    
                          ENDP

                  parse PROC
;;;337    
;;;338    void parse(char* str, int first, int sec, char *string)
001a30  b5ff              PUSH     {r0-r7,lr}
;;;339    {int i=0,j=0,temp=0;
001a32  b081              SUB      sp,sp,#4
001a34  4605              MOV      r5,r0
001a36  461f              MOV      r7,r3
001a38  2400              MOVS     r4,#0
001a3a  2000              MOVS     r0,#0
001a3c  9000              STR      r0,[sp,#0]
001a3e  2600              MOVS     r6,#0
;;;340    
;;;341    		delay(10);		
001a40  200a              MOVS     r0,#0xa
001a42  f7fffffe          BL       delay
;;;342    		memset(string,0,15);
001a46  210f              MOVS     r1,#0xf
001a48  4638              MOV      r0,r7
001a4a  f7fffffe          BL       __aeabi_memclr
;;;343    		for(i=0,temp=0;i<100;i++)
001a4e  bf00              NOP      
001a50  bf00              NOP      
001a52  e00a              B        |L1.6762|
                  |L1.6740|
;;;344    		{
;;;345    		if(str[i]==',')
001a54  5d28              LDRB     r0,[r5,r4]
001a56  282c              CMP      r0,#0x2c
001a58  d101              BNE      |L1.6750|
;;;346    			{temp++;j=i;}
001a5a  1c76              ADDS     r6,r6,#1
001a5c  9400              STR      r4,[sp,#0]
                  |L1.6750|
;;;347    		else{}
;;;348    			
;;;349    		if(temp>=sec){i=900;}
001a5e  9803              LDR      r0,[sp,#0xc]
001a60  4286              CMP      r6,r0
001a62  db01              BLT      |L1.6760|
001a64  24e1              MOVS     r4,#0xe1
001a66  00a4              LSLS     r4,r4,#2
                  |L1.6760|
001a68  1c64              ADDS     r4,r4,#1              ;343
                  |L1.6762|
001a6a  2c64              CMP      r4,#0x64              ;343
001a6c  dbf2              BLT      |L1.6740|
;;;350    		else{}	
;;;351    		
;;;352    		}	
;;;353    		
;;;354    		for(i=0,temp=0;i<100;i++)
001a6e  2400              MOVS     r4,#0
001a70  2600              MOVS     r6,#0
001a72  e00b              B        |L1.6796|
                  |L1.6772|
;;;355    		{
;;;356    		if(str[i]==',')
001a74  5d28              LDRB     r0,[r5,r4]
001a76  282c              CMP      r0,#0x2c
001a78  d102              BNE      |L1.6784|
;;;357    			{temp++;l=i;}										
001a7a  1c76              ADDS     r6,r6,#1
001a7c  4888              LDR      r0,|L1.7328|
001a7e  6004              STR      r4,[r0,#0]  ; l
                  |L1.6784|
;;;358    		else{}
;;;359    		if(temp>=first){i=900;}else{}
001a80  9802              LDR      r0,[sp,#8]
001a82  4286              CMP      r6,r0
001a84  db01              BLT      |L1.6794|
001a86  24e1              MOVS     r4,#0xe1
001a88  00a4              LSLS     r4,r4,#2
                  |L1.6794|
001a8a  1c64              ADDS     r4,r4,#1              ;354
                  |L1.6796|
001a8c  2c64              CMP      r4,#0x64              ;354
001a8e  dbf1              BLT      |L1.6772|
;;;360    		}	
;;;361    		for(i=0;i<(j-l-1);i++)
001a90  2400              MOVS     r4,#0
001a92  e006              B        |L1.6818|
                  |L1.6804|
;;;362    		{
;;;363    		string[i] = str[l+i+1];
001a94  4882              LDR      r0,|L1.7328|
001a96  6800              LDR      r0,[r0,#0]  ; l
001a98  1900              ADDS     r0,r0,r4
001a9a  1c40              ADDS     r0,r0,#1
001a9c  5c28              LDRB     r0,[r5,r0]
001a9e  5538              STRB     r0,[r7,r4]
001aa0  1c64              ADDS     r4,r4,#1              ;361
                  |L1.6818|
001aa2  497f              LDR      r1,|L1.7328|
001aa4  9800              LDR      r0,[sp,#0]            ;361
001aa6  6809              LDR      r1,[r1,#0]            ;361  ; l
001aa8  1a40              SUBS     r0,r0,r1              ;361
001aaa  1e40              SUBS     r0,r0,#1              ;361
001aac  42a0              CMP      r0,r4                 ;361
001aae  dcf1              BGT      |L1.6804|
;;;364    		}			
;;;365    	
;;;366    
;;;367    }
001ab0  b005              ADD      sp,sp,#0x14
001ab2  bdf0              POP      {r4-r7,pc}
;;;368    
                          ENDP

                  clear2 PROC
;;;279    
;;;280    void clear2()
001ab4  497b              LDR      r1,|L1.7332|
;;;281    {char temp;
;;;282        if (UART_S1_REG(UART2_BASE_PTR) & UART_S1_OR_MASK)
001ab6  7909              LDRB     r1,[r1,#4]
001ab8  2208              MOVS     r2,#8
001aba  4011              ANDS     r1,r1,r2
001abc  2900              CMP      r1,#0
001abe  d001              BEQ      |L1.6852|
;;;283        {
;;;284          temp = UART_D_REG(UART2_BASE_PTR);
001ac0  4978              LDR      r1,|L1.7332|
001ac2  79c8              LDRB     r0,[r1,#7]
                  |L1.6852|
;;;285        }
;;;286    
;;;287    	UART_S1_REG(UART2_BASE_PTR) |= (UART_S1_OR_MASK | UART_C2_ILIE_MASK );
001ac4  4977              LDR      r1,|L1.7332|
001ac6  7909              LDRB     r1,[r1,#4]
001ac8  2218              MOVS     r2,#0x18
001aca  4311              ORRS     r1,r1,r2
001acc  4a75              LDR      r2,|L1.7332|
001ace  7111              STRB     r1,[r2,#4]
;;;288    }	
001ad0  4770              BX       lr
;;;289    
                          ENDP

                  get_gpsdata PROC
;;;624    
;;;625    void get_gpsdata()
001ad2  b510              PUSH     {r4,lr}
;;;626    {
;;;627    						int m;	clear2();
001ad4  f7fffffe          BL       clear2
;;;628    						memset(uart_string_gps,0,500);memset(gga,0,100);memset(rmc,0,100);			
001ad8  21ff              MOVS     r1,#0xff
001ada  31f5              ADDS     r1,r1,#0xf5
001adc  4872              LDR      r0,|L1.7336|
001ade  f7fffffe          BL       __aeabi_memclr4
001ae2  2164              MOVS     r1,#0x64
001ae4  4871              LDR      r0,|L1.7340|
001ae6  f7fffffe          BL       __aeabi_memclr4
001aea  2164              MOVS     r1,#0x64
001aec  4870              LDR      r0,|L1.7344|
001aee  f7fffffe          BL       __aeabi_memclr4
;;;629    					i=0;
001af2  2000              MOVS     r0,#0
001af4  496f              LDR      r1,|L1.7348|
001af6  6008              STR      r0,[r1,#0]  ; i
;;;630    					do
001af8  bf00              NOP      
                  |L1.6906|
;;;631    						{uart_string_gps[i]=in_char2();i++;if(i>490){i=0;};
001afa  f7fffffe          BL       in_char2
001afe  496a              LDR      r1,|L1.7336|
001b00  4a6c              LDR      r2,|L1.7348|
001b02  6812              LDR      r2,[r2,#0]  ; i
001b04  5488              STRB     r0,[r1,r2]
001b06  486b              LDR      r0,|L1.7348|
001b08  6800              LDR      r0,[r0,#0]  ; i
001b0a  1c40              ADDS     r0,r0,#1
001b0c  4969              LDR      r1,|L1.7348|
001b0e  6008              STR      r0,[r1,#0]  ; i
001b10  4608              MOV      r0,r1
001b12  6800              LDR      r0,[r0,#0]  ; i
001b14  21ff              MOVS     r1,#0xff
001b16  31eb              ADDS     r1,r1,#0xeb
001b18  4288              CMP      r0,r1
001b1a  dd02              BLE      |L1.6946|
001b1c  2000              MOVS     r0,#0
001b1e  4965              LDR      r1,|L1.7348|
001b20  6008              STR      r0,[r1,#0]  ; i
                  |L1.6946|
;;;632    						}while(!(uart_string_gps[i-4] == 'R' && uart_string_gps[i-3] == 'M' && uart_string_gps[i-2] == 'C' && uart_string_gps[i-1] == ','));
001b22  4864              LDR      r0,|L1.7348|
001b24  6800              LDR      r0,[r0,#0]  ; i
001b26  1f00              SUBS     r0,r0,#4
001b28  495f              LDR      r1,|L1.7336|
001b2a  5c08              LDRB     r0,[r1,r0]
001b2c  2852              CMP      r0,#0x52
001b2e  d1e4              BNE      |L1.6906|
001b30  4860              LDR      r0,|L1.7348|
001b32  6800              LDR      r0,[r0,#0]  ; i
001b34  1ec0              SUBS     r0,r0,#3
001b36  5c08              LDRB     r0,[r1,r0]
001b38  284d              CMP      r0,#0x4d
001b3a  d1de              BNE      |L1.6906|
001b3c  485d              LDR      r0,|L1.7348|
001b3e  6800              LDR      r0,[r0,#0]  ; i
001b40  1e80              SUBS     r0,r0,#2
001b42  5c08              LDRB     r0,[r1,r0]
001b44  2843              CMP      r0,#0x43
001b46  d1d8              BNE      |L1.6906|
001b48  485a              LDR      r0,|L1.7348|
001b4a  6800              LDR      r0,[r0,#0]  ; i
001b4c  1e40              SUBS     r0,r0,#1
001b4e  5c08              LDRB     r0,[r1,r0]
001b50  282c              CMP      r0,#0x2c
001b52  d1d2              BNE      |L1.6906|
;;;633    					m=i;	
001b54  4857              LDR      r0,|L1.7348|
001b56  6804              LDR      r4,[r0,#0]  ; i
;;;634    					i=0;//uart_string_gps[i-6] != 'G' && uart_string_gps[i-5] != 'P' &&
001b58  2000              MOVS     r0,#0
001b5a  4956              LDR      r1,|L1.7348|
001b5c  6008              STR      r0,[r1,#0]  ; i
;;;635    					do
001b5e  bf00              NOP      
                  |L1.7008|
;;;636    						{rmc[i]=in_char2();i++;
001b60  f7fffffe          BL       in_char2
001b64  4952              LDR      r1,|L1.7344|
001b66  4a53              LDR      r2,|L1.7348|
001b68  6812              LDR      r2,[r2,#0]  ; i
001b6a  5488              STRB     r0,[r1,r2]
001b6c  4851              LDR      r0,|L1.7348|
001b6e  6800              LDR      r0,[r0,#0]  ; i
001b70  1c40              ADDS     r0,r0,#1
001b72  4950              LDR      r1,|L1.7348|
001b74  6008              STR      r0,[r1,#0]  ; i
;;;637    						}while(rmc[i-1] != '*');
001b76  4608              MOV      r0,r1
001b78  6800              LDR      r0,[r0,#0]  ; i
001b7a  1e40              SUBS     r0,r0,#1
001b7c  494c              LDR      r1,|L1.7344|
001b7e  5c08              LDRB     r0,[r1,r0]
001b80  282a              CMP      r0,#0x2a
001b82  d1ed              BNE      |L1.7008|
;;;638    					
;;;639    					i=m;
001b84  484b              LDR      r0,|L1.7348|
001b86  6004              STR      r4,[r0,#0]  ; i
;;;640    					do
001b88  bf00              NOP      
                  |L1.7050|
;;;641    						{uart_string_gps[i]=in_char2();i++;if(i>490){i=0;}
001b8a  f7fffffe          BL       in_char2
001b8e  4946              LDR      r1,|L1.7336|
001b90  4a48              LDR      r2,|L1.7348|
001b92  6812              LDR      r2,[r2,#0]  ; i
001b94  5488              STRB     r0,[r1,r2]
001b96  4847              LDR      r0,|L1.7348|
001b98  6800              LDR      r0,[r0,#0]  ; i
001b9a  1c40              ADDS     r0,r0,#1
001b9c  4945              LDR      r1,|L1.7348|
001b9e  6008              STR      r0,[r1,#0]  ; i
001ba0  4608              MOV      r0,r1
001ba2  6800              LDR      r0,[r0,#0]  ; i
001ba4  21ff              MOVS     r1,#0xff
001ba6  31eb              ADDS     r1,r1,#0xeb
001ba8  4288              CMP      r0,r1
001baa  dd02              BLE      |L1.7090|
001bac  2000              MOVS     r0,#0
001bae  4941              LDR      r1,|L1.7348|
001bb0  6008              STR      r0,[r1,#0]  ; i
                  |L1.7090|
;;;642    						}while(!(uart_string_gps[i-4] == 'G' && uart_string_gps[i-3] == 'G' && uart_string_gps[i-2] == 'A' && uart_string_gps[i-1] == ','));
001bb2  4840              LDR      r0,|L1.7348|
001bb4  6800              LDR      r0,[r0,#0]  ; i
001bb6  1f00              SUBS     r0,r0,#4
001bb8  493b              LDR      r1,|L1.7336|
001bba  5c08              LDRB     r0,[r1,r0]
001bbc  2847              CMP      r0,#0x47
001bbe  d1e4              BNE      |L1.7050|
001bc0  483c              LDR      r0,|L1.7348|
001bc2  6800              LDR      r0,[r0,#0]  ; i
001bc4  1ec0              SUBS     r0,r0,#3
001bc6  5c08              LDRB     r0,[r1,r0]
001bc8  2847              CMP      r0,#0x47
001bca  d1de              BNE      |L1.7050|
001bcc  4839              LDR      r0,|L1.7348|
001bce  6800              LDR      r0,[r0,#0]  ; i
001bd0  1e80              SUBS     r0,r0,#2
001bd2  5c08              LDRB     r0,[r1,r0]
001bd4  2841              CMP      r0,#0x41
001bd6  d1d8              BNE      |L1.7050|
001bd8  4836              LDR      r0,|L1.7348|
001bda  6800              LDR      r0,[r0,#0]  ; i
001bdc  1e40              SUBS     r0,r0,#1
001bde  5c08              LDRB     r0,[r1,r0]
001be0  282c              CMP      r0,#0x2c
001be2  d1d2              BNE      |L1.7050|
;;;643    					i=0;//uart_string_gps[i-6] != 'G' && uart_string_gps[i-5] != 'P' &&
001be4  2000              MOVS     r0,#0
001be6  4933              LDR      r1,|L1.7348|
001be8  6008              STR      r0,[r1,#0]  ; i
;;;644    					do
001bea  bf00              NOP      
                  |L1.7148|
;;;645    						{gga[i]=in_char2();i++;
001bec  f7fffffe          BL       in_char2
001bf0  492e              LDR      r1,|L1.7340|
001bf2  4a30              LDR      r2,|L1.7348|
001bf4  6812              LDR      r2,[r2,#0]  ; i
001bf6  5488              STRB     r0,[r1,r2]
001bf8  482e              LDR      r0,|L1.7348|
001bfa  6800              LDR      r0,[r0,#0]  ; i
001bfc  1c40              ADDS     r0,r0,#1
001bfe  492d              LDR      r1,|L1.7348|
001c00  6008              STR      r0,[r1,#0]  ; i
;;;646    						}while(gga[i-1] != '*');
001c02  4608              MOV      r0,r1
001c04  6800              LDR      r0,[r0,#0]  ; i
001c06  1e40              SUBS     r0,r0,#1
001c08  4928              LDR      r1,|L1.7340|
001c0a  5c08              LDRB     r0,[r1,r0]
001c0c  282a              CMP      r0,#0x2a
001c0e  d1ed              BNE      |L1.7148|
;;;647    
;;;648    						
;;;649    printf("\n\t%s\n\t%s\n\t\n",gga,rmc);		
001c10  4a27              LDR      r2,|L1.7344|
001c12  a029              ADR      r0,|L1.7352|
001c14  f7fffffe          BL       __2printf
;;;650    }
001c18  bd10              POP      {r4,pc}
;;;651    
                          ENDP

                  GPS_COLLECT PROC
;;;463    
;;;464    void GPS_COLLECT()
001c1a  b5f0              PUSH     {r4-r7,lr}
;;;465    {
001c1c  b091              SUB      sp,sp,#0x44
;;;466    		char prev[6],latest[6];
;;;467    		int iz;
;;;468    		double a,b,c;int hh,mm1,mm2;
;;;469    		double a1,b1,c1;
;;;470    		double hh11, mm11,mm22;
;;;471    
;;;472    		if (int_erval<5)
001c1e  4829              LDR      r0,|L1.7364|
001c20  6800              LDR      r0,[r0,#0]  ; int_erval
001c22  2805              CMP      r0,#5
001c24  da02              BGE      |L1.7212|
;;;473    		int_erval=0;
001c26  2000              MOVS     r0,#0
001c28  4926              LDR      r1,|L1.7364|
001c2a  6008              STR      r0,[r1,#0]  ; int_erval
                  |L1.7212|
;;;474    
;;;475    		do{
001c2c  bf00              NOP      
                  |L1.7214|
;;;476    			
;;;477    		get_gpsdata();
001c2e  f7fffffe          BL       get_gpsdata
;;;478    		accel_read();detect_motion();	
001c32  f7fffffe          BL       accel_read
001c36  f7fffffe          BL       detect_motion
;;;479    		parse(rmc,2,3,lati);
001c3a  4b23              LDR      r3,|L1.7368|
001c3c  2203              MOVS     r2,#3
001c3e  2102              MOVS     r1,#2
001c40  481b              LDR      r0,|L1.7344|
001c42  f7fffffe          BL       parse
;;;480    		parse(rmc,4,5,longi);
001c46  4b21              LDR      r3,|L1.7372|
001c48  2205              MOVS     r2,#5
001c4a  2104              MOVS     r1,#4
001c4c  4818              LDR      r0,|L1.7344|
001c4e  f7fffffe          BL       parse
;;;481    		parse(rmc,6,7,velocity);	
001c52  4b1f              LDR      r3,|L1.7376|
001c54  2207              MOVS     r2,#7
001c56  2106              MOVS     r1,#6
001c58  4815              LDR      r0,|L1.7344|
001c5a  f7fffffe          BL       parse
;;;482    		for(iz=0;iz<6;iz++)
001c5e  2000              MOVS     r0,#0
001c60  900e              STR      r0,[sp,#0x38]
001c62  e03f              B        |L1.7396|
                  |L1.7268|
                          DCD      at_
                  |L1.7272|
                          DCD      ||.text||+0x12f4
                  |L1.7276|
                          DCD      data2
                  |L1.7280|
                          DCD      uart_string_gsm
                  |L1.7284|
001c74  257300            DCB      "%s",0
001c77  00                DCB      0
                  |L1.7288|
                          DCD      tmeout
                  |L1.7292|
                          DCD      ||.text||+0x918
                  |L1.7296|
                          DCD      ||.text||+0x1414
                  |L1.7300|
                          DCD      ||.text||+0x1824
                  |L1.7304|
001c88  495000            DCB      "IP",0
001c8b  00                DCB      0
                  |L1.7308|
                          DCD      ||ip||
                  |L1.7312|
                          DCD      port
                  |L1.7316|
                          DCD      ringflag
                  |L1.7320|
                          DCD      0xbf800000
                  |L1.7324|
                          DCD      0x41200000
                  |L1.7328|
                          DCD      l
                  |L1.7332|
                          DCD      0x4006c000
                  |L1.7336|
                          DCD      uart_string_gps
                  |L1.7340|
                          DCD      gga
                  |L1.7344|
                          DCD      ||rmc||
                  |L1.7348|
                          DCD      i
                  |L1.7352|
001cb8  0a092573          DCB      "\n\t%s\n\t%s\n\t\n",0
001cbc  0a092573
001cc0  0a090a00
                  |L1.7364|
                          DCD      int_erval
                  |L1.7368|
                          DCD      lati
                  |L1.7372|
                          DCD      longi
                  |L1.7376|
                          DCD      velocity
                  |L1.7380|
;;;483    			{
;;;484    				latest[iz]=gga[iz];		
001cd4  49fe              LDR      r1,|L1.8400|
001cd6  980e              LDR      r0,[sp,#0x38]
001cd8  5c09              LDRB     r1,[r1,r0]
001cda  aa0f              ADD      r2,sp,#0x3c
001cdc  5411              STRB     r1,[r2,r0]
001cde  980e              LDR      r0,[sp,#0x38]         ;482
001ce0  1c40              ADDS     r0,r0,#1              ;482
001ce2  900e              STR      r0,[sp,#0x38]         ;482
                  |L1.7396|
001ce4  980e              LDR      r0,[sp,#0x38]         ;482
001ce6  2806              CMP      r0,#6                 ;482
001ce8  dbf4              BLT      |L1.7380|
;;;485    			}
;;;486    		la=stof(latest);
001cea  a80f              ADD      r0,sp,#0x3c
001cec  f7fffffe          BL       stof
001cf0  49f8              LDR      r1,|L1.8404|
001cf2  6008              STR      r0,[r1,#0]  ; la
;;;487    		printf("\n\n\t\t,%f,\t,%f,",la,pr);
001cf4  48f8              LDR      r0,|L1.8408|
001cf6  6800              LDR      r0,[r0,#0]  ; pr
001cf8  f7fffffe          BL       __aeabi_f2d
001cfc  9107              STR      r1,[sp,#0x1c]
001cfe  9006              STR      r0,[sp,#0x18]
001d00  48f4              LDR      r0,|L1.8404|
001d02  6800              LDR      r0,[r0,#0]  ; la
001d04  f7fffffe          BL       __aeabi_f2d
001d08  9105              STR      r1,[sp,#0x14]
001d0a  9004              STR      r0,[sp,#0x10]
001d0c  9907              LDR      r1,[sp,#0x1c]
001d0e  9806              LDR      r0,[sp,#0x18]
001d10  9101              STR      r1,[sp,#4]
001d12  9000              STR      r0,[sp,#0]
001d14  a0f1              ADR      r0,|L1.8412|
001d16  9b05              LDR      r3,[sp,#0x14]
001d18  9a04              LDR      r2,[sp,#0x10]
001d1a  f7fffffe          BL       __2printf
;;;488    
;;;489    		}while((la-pr < int_erval));
001d1e  48f3              LDR      r0,|L1.8428|
001d20  6800              LDR      r0,[r0,#0]  ; int_erval
001d22  f7fffffe          BL       __aeabi_i2f
001d26  9007              STR      r0,[sp,#0x1c]
001d28  48eb              LDR      r0,|L1.8408|
001d2a  6801              LDR      r1,[r0,#0]  ; pr
001d2c  48e9              LDR      r0,|L1.8404|
001d2e  6800              LDR      r0,[r0,#0]  ; la
001d30  f7fffffe          BL       __aeabi_fsub
001d34  9006              STR      r0,[sp,#0x18]
001d36  9907              LDR      r1,[sp,#0x1c]
001d38  f7fffffe          BL       __aeabi_cfcmple
001d3c  d200              BCS      |L1.7488|
001d3e  e776              B        |L1.7214|
                  |L1.7488|
;;;490    		pr=la;
001d40  48e4              LDR      r0,|L1.8404|
001d42  6800              LDR      r0,[r0,#0]  ; la
001d44  49e4              LDR      r1,|L1.8408|
001d46  6008              STR      r0,[r1,#0]  ; pr
;;;491    
;;;492    		
;;;493    		speed = stof(velocity);
001d48  48e9              LDR      r0,|L1.8432|
001d4a  f7fffffe          BL       stof
001d4e  49e9              LDR      r1,|L1.8436|
001d50  6008              STR      r0,[r1,#0]  ; speed
;;;494    		c=stof(lati);//7523.7412
001d52  48e9              LDR      r0,|L1.8440|
001d54  f7fffffe          BL       stof
001d58  9007              STR      r0,[sp,#0x1c]
001d5a  f7fffffe          BL       __aeabi_f2d
001d5e  910d              STR      r1,[sp,#0x34]
001d60  900c              STR      r0,[sp,#0x30]
;;;495    		hh= c/100; //75
001d62  2200              MOVS     r2,#0
001d64  4be5              LDR      r3,|L1.8444|
001d66  990d              LDR      r1,[sp,#0x34]
001d68  980c              LDR      r0,[sp,#0x30]
001d6a  f7fffffe          BL       __aeabi_ddiv
001d6e  9107              STR      r1,[sp,#0x1c]
001d70  9006              STR      r0,[sp,#0x18]
001d72  f7fffffe          BL       __aeabi_d2iz
001d76  900b              STR      r0,[sp,#0x2c]
;;;496    		hh11 = c/100; //75.237412
001d78  2200              MOVS     r2,#0
001d7a  4be0              LDR      r3,|L1.8444|
001d7c  990d              LDR      r1,[sp,#0x34]
001d7e  980c              LDR      r0,[sp,#0x30]
001d80  f7fffffe          BL       __aeabi_ddiv
001d84  9109              STR      r1,[sp,#0x24]
001d86  9008              STR      r0,[sp,#0x20]
;;;497    		mm11 = hh11-hh; //.237412
001d88  980b              LDR      r0,[sp,#0x2c]
001d8a  f7fffffe          BL       __aeabi_i2d
001d8e  9107              STR      r1,[sp,#0x1c]
001d90  9006              STR      r0,[sp,#0x18]
001d92  9b09              LDR      r3,[sp,#0x24]
001d94  9a08              LDR      r2,[sp,#0x20]
001d96  f7fffffe          BL       __aeabi_drsub
001d9a  4604              MOV      r4,r0
001d9c  460d              MOV      r5,r1
;;;498    		mm11*=100;
001d9e  2200              MOVS     r2,#0
001da0  4bd6              LDR      r3,|L1.8444|
001da2  4620              MOV      r0,r4
001da4  4629              MOV      r1,r5
001da6  f7fffffe          BL       __aeabi_dmul
001daa  4604              MOV      r4,r0
001dac  460d              MOV      r5,r1
;;;499    		mm22=hh+mm11/60;	
001dae  2200              MOVS     r2,#0
001db0  4bd3              LDR      r3,|L1.8448|
001db2  4620              MOV      r0,r4
001db4  4629              MOV      r1,r5
001db6  f7fffffe          BL       __aeabi_ddiv
001dba  9107              STR      r1,[sp,#0x1c]
001dbc  9006              STR      r0,[sp,#0x18]
001dbe  980b              LDR      r0,[sp,#0x2c]
001dc0  f7fffffe          BL       __aeabi_i2d
001dc4  9105              STR      r1,[sp,#0x14]
001dc6  9004              STR      r0,[sp,#0x10]
001dc8  9b07              LDR      r3,[sp,#0x1c]
001dca  9a06              LDR      r2,[sp,#0x18]
001dcc  f7fffffe          BL       __aeabi_dadd
001dd0  4606              MOV      r6,r0
001dd2  460f              MOV      r7,r1
;;;500    		printf("\n\n\t\t,%d,%f,%f\t,%s,%d\n",hh,mm11,mm22,latest,la);
001dd4  48bf              LDR      r0,|L1.8404|
001dd6  6800              LDR      r0,[r0,#0]  ; la
001dd8  f7fffffe          BL       __aeabi_f2d
001ddc  9006              STR      r0,[sp,#0x18]
001dde  9107              STR      r1,[sp,#0x1c]
001de0  9105              STR      r1,[sp,#0x14]
001de2  9004              STR      r0,[sp,#0x10]
001de4  a80f              ADD      r0,sp,#0x3c
001de6  4622              MOV      r2,r4
001de8  462b              MOV      r3,r5
001dea  9701              STR      r7,[sp,#4]
001dec  9600              STR      r6,[sp,#0]
001dee  9002              STR      r0,[sp,#8]
001df0  a0c4              ADR      r0,|L1.8452|
001df2  990b              LDR      r1,[sp,#0x2c]
001df4  f7fffffe          BL       __2printf
;;;501    		memset(lati,0,15);
001df8  210f              MOVS     r1,#0xf
001dfa  48bf              LDR      r0,|L1.8440|
001dfc  f7fffffe          BL       __aeabi_memclr4
;;;502    		sprintf(lati,"%f",mm22);
001e00  4632              MOV      r2,r6
001e02  463b              MOV      r3,r7
001e04  a1c5              ADR      r1,|L1.8476|
001e06  48bc              LDR      r0,|L1.8440|
001e08  f7fffffe          BL       __2sprintf
;;;503    		c=stof(longi);//7523.7412
001e0c  48c4              LDR      r0,|L1.8480|
001e0e  f7fffffe          BL       stof
001e12  9007              STR      r0,[sp,#0x1c]
001e14  f7fffffe          BL       __aeabi_f2d
001e18  910d              STR      r1,[sp,#0x34]
001e1a  900c              STR      r0,[sp,#0x30]
;;;504    		hh= c/100; //75
001e1c  2200              MOVS     r2,#0
001e1e  4bb7              LDR      r3,|L1.8444|
001e20  990d              LDR      r1,[sp,#0x34]
001e22  980c              LDR      r0,[sp,#0x30]
001e24  f7fffffe          BL       __aeabi_ddiv
001e28  9107              STR      r1,[sp,#0x1c]
001e2a  9006              STR      r0,[sp,#0x18]
001e2c  f7fffffe          BL       __aeabi_d2iz
001e30  900b              STR      r0,[sp,#0x2c]
;;;505    		hh11 = c/100; //75.237412
001e32  2200              MOVS     r2,#0
001e34  4bb1              LDR      r3,|L1.8444|
001e36  990d              LDR      r1,[sp,#0x34]
001e38  980c              LDR      r0,[sp,#0x30]
001e3a  f7fffffe          BL       __aeabi_ddiv
001e3e  9109              STR      r1,[sp,#0x24]
001e40  9008              STR      r0,[sp,#0x20]
;;;506    		mm11 = hh11-hh; //.237412
001e42  980b              LDR      r0,[sp,#0x2c]
001e44  f7fffffe          BL       __aeabi_i2d
001e48  9107              STR      r1,[sp,#0x1c]
001e4a  9006              STR      r0,[sp,#0x18]
001e4c  9b09              LDR      r3,[sp,#0x24]
001e4e  9a08              LDR      r2,[sp,#0x20]
001e50  f7fffffe          BL       __aeabi_drsub
001e54  4604              MOV      r4,r0
001e56  460d              MOV      r5,r1
;;;507    		mm11*=100;
001e58  2200              MOVS     r2,#0
001e5a  4ba8              LDR      r3,|L1.8444|
001e5c  4620              MOV      r0,r4
001e5e  4629              MOV      r1,r5
001e60  f7fffffe          BL       __aeabi_dmul
001e64  4604              MOV      r4,r0
001e66  460d              MOV      r5,r1
;;;508    		mm22=hh+mm11/60;	
001e68  2200              MOVS     r2,#0
001e6a  4ba5              LDR      r3,|L1.8448|
001e6c  4620              MOV      r0,r4
001e6e  4629              MOV      r1,r5
001e70  f7fffffe          BL       __aeabi_ddiv
001e74  9107              STR      r1,[sp,#0x1c]
001e76  9006              STR      r0,[sp,#0x18]
001e78  980b              LDR      r0,[sp,#0x2c]
001e7a  f7fffffe          BL       __aeabi_i2d
001e7e  9105              STR      r1,[sp,#0x14]
001e80  9004              STR      r0,[sp,#0x10]
001e82  9b07              LDR      r3,[sp,#0x1c]
001e84  9a06              LDR      r2,[sp,#0x18]
001e86  f7fffffe          BL       __aeabi_dadd
001e8a  4606              MOV      r6,r0
001e8c  460f              MOV      r7,r1
;;;509    		printf("\n\n\t\t,%d,%f,%f\n",hh,mm11,mm22);	
001e8e  4622              MOV      r2,r4
001e90  462b              MOV      r3,r5
001e92  9701              STR      r7,[sp,#4]
001e94  9600              STR      r6,[sp,#0]
001e96  a0a3              ADR      r0,|L1.8484|
001e98  990b              LDR      r1,[sp,#0x2c]
001e9a  f7fffffe          BL       __2printf
;;;510    		memset(longi,0,15);
001e9e  210f              MOVS     r1,#0xf
001ea0  489f              LDR      r0,|L1.8480|
001ea2  f7fffffe          BL       __aeabi_memclr4
;;;511    		sprintf(longi,"%f",mm22);	
001ea6  4632              MOV      r2,r6
001ea8  463b              MOV      r3,r7
001eaa  a19c              ADR      r1,|L1.8476|
001eac  489c              LDR      r0,|L1.8480|
001eae  f7fffffe          BL       __2sprintf
;;;512    
;;;513    
;;;514    			
;;;515    			
;;;516    		strcat(data,"\n");
001eb2  a199              ADR      r1,|L1.8472|
001eb4  489f              LDR      r0,|L1.8500|
001eb6  f7fffffe          BL       strcat
;;;517    		strcat(data,imei);
001eba  499f              LDR      r1,|L1.8504|
001ebc  489d              LDR      r0,|L1.8500|
001ebe  f7fffffe          BL       strcat
;;;518    		strcat(data,", ");	
001ec2  a19e              ADR      r1,|L1.8508|
001ec4  489b              LDR      r0,|L1.8500|
001ec6  f7fffffe          BL       strcat
;;;519    		strcat(data,"$GxGGA,");	
001eca  a19d              ADR      r1,|L1.8512|
001ecc  4899              LDR      r0,|L1.8500|
001ece  f7fffffe          BL       strcat
;;;520    		strcat(data,gga);
001ed2  497f              LDR      r1,|L1.8400|
001ed4  4897              LDR      r0,|L1.8500|
001ed6  f7fffffe          BL       strcat
;;;521    		strcat(data,", $GxRMC,");	
001eda  a19b              ADR      r1,|L1.8520|
001edc  4895              LDR      r0,|L1.8500|
001ede  f7fffffe          BL       strcat
;;;522    		strcat(data,rmc);	
001ee2  499c              LDR      r1,|L1.8532|
001ee4  4893              LDR      r0,|L1.8500|
001ee6  f7fffffe          BL       strcat
;;;523    		//strcat(data,"\n");		
;;;524    		//printf("\n%s\n",data);
;;;525    
;;;526    }
001eea  b011              ADD      sp,sp,#0x44
001eec  bdf0              POP      {r4-r7,pc}
;;;527    
                          ENDP

                  tcp_initialization PROC
;;;532    
;;;533    void tcp_initialization()
001eee  b538              PUSH     {r3-r5,lr}
;;;534    {
;;;535    
;;;536    msg_sim800(); 
001ef0  f7fffffe          BL       msg_sim800
;;;537    
;;;538    	
;;;539    						printf("\n%s\n",send_GSM("\r\nAT+CFUN=0\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
001ef4  4898              LDR      r0,|L1.8536|
001ef6  6800              LDR      r0,[r0,#0]  ; tmeout
001ef8  4b98              LDR      r3,|L1.8540|
001efa  461a              MOV      r2,r3
001efc  3208              ADDS     r2,r2,#8
001efe  4611              MOV      r1,r2
001f00  311c              ADDS     r1,r1,#0x1c
001f02  9000              STR      r0,[sp,#0]
001f04  a096              ADR      r0,|L1.8544|
001f06  f7fffffe          BL       send_GSM
001f0a  4604              MOV      r4,r0
001f0c  4621              MOV      r1,r4
001f0e  4893              LDR      r0,|L1.8540|
001f10  3014              ADDS     r0,r0,#0x14
001f12  f7fffffe          BL       __2printf
;;;540    						delay(500);
001f16  20ff              MOVS     r0,#0xff
001f18  30f5              ADDS     r0,r0,#0xf5
001f1a  f7fffffe          BL       delay
;;;541    
;;;542    						printf("\n%s\n",send_GSM("\r\nAT+CFUN=1\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
001f1e  488e              LDR      r0,|L1.8536|
001f20  6800              LDR      r0,[r0,#0]  ; tmeout
001f22  4b8e              LDR      r3,|L1.8540|
001f24  461a              MOV      r2,r3
001f26  3208              ADDS     r2,r2,#8
001f28  4611              MOV      r1,r2
001f2a  311c              ADDS     r1,r1,#0x1c
001f2c  9000              STR      r0,[sp,#0]
001f2e  a090              ADR      r0,|L1.8560|
001f30  f7fffffe          BL       send_GSM
001f34  4604              MOV      r4,r0
001f36  4621              MOV      r1,r4
001f38  4888              LDR      r0,|L1.8540|
001f3a  3014              ADDS     r0,r0,#0x14
001f3c  f7fffffe          BL       __2printf
;;;543    						delay(2000);
001f40  207d              MOVS     r0,#0x7d
001f42  0100              LSLS     r0,r0,#4
001f44  f7fffffe          BL       delay
;;;544    
;;;545    msg_sim800(); 
001f48  f7fffffe          BL       msg_sim800
;;;546    
;;;547    						GPS_COLLECT();
001f4c  f7fffffe          BL       GPS_COLLECT
;;;548    						printf("\n%s\n",send_GSM("\r\nAT+CIPSHUT\r\n", "SHUT OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
001f50  4881              LDR      r0,|L1.8536|
001f52  6800              LDR      r0,[r0,#0]  ; tmeout
001f54  4b81              LDR      r3,|L1.8540|
001f56  461a              MOV      r2,r3
001f58  3208              ADDS     r2,r2,#8
001f5a  a189              ADR      r1,|L1.8576|
001f5c  9000              STR      r0,[sp,#0]
001f5e  a08b              ADR      r0,|L1.8588|
001f60  f7fffffe          BL       send_GSM
001f64  4604              MOV      r4,r0
001f66  4621              MOV      r1,r4
001f68  487c              LDR      r0,|L1.8540|
001f6a  3014              ADDS     r0,r0,#0x14
001f6c  f7fffffe          BL       __2printf
;;;549    
;;;550    msg_sim800(); 
001f70  f7fffffe          BL       msg_sim800
;;;551    
;;;552    						//delay(20);								
;;;553    						GPS_COLLECT();
001f74  f7fffffe          BL       GPS_COLLECT
;;;554    						printf("\n%s\n",send_GSM("\r\nAT+CSTT=\"www\"\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
001f78  4877              LDR      r0,|L1.8536|
001f7a  6800              LDR      r0,[r0,#0]  ; tmeout
001f7c  4b77              LDR      r3,|L1.8540|
001f7e  461a              MOV      r2,r3
001f80  3208              ADDS     r2,r2,#8
001f82  4611              MOV      r1,r2
001f84  311c              ADDS     r1,r1,#0x1c
001f86  9000              STR      r0,[sp,#0]
001f88  a084              ADR      r0,|L1.8604|
001f8a  f7fffffe          BL       send_GSM
001f8e  4604              MOV      r4,r0
001f90  4621              MOV      r1,r4
001f92  4872              LDR      r0,|L1.8540|
001f94  3014              ADDS     r0,r0,#0x14
001f96  f7fffffe          BL       __2printf
;;;555    						//delay(20);
;;;556    
;;;557    msg_sim800(); 
001f9a  f7fffffe          BL       msg_sim800
;;;558    
;;;559    						GPS_COLLECT();
001f9e  f7fffffe          BL       GPS_COLLECT
;;;560    						printf("\n%s\n",send_GSM("\r\nAT+CIICR\r\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));		
001fa2  486d              LDR      r0,|L1.8536|
001fa4  6800              LDR      r0,[r0,#0]  ; tmeout
001fa6  4b6d              LDR      r3,|L1.8540|
001fa8  461a              MOV      r2,r3
001faa  3208              ADDS     r2,r2,#8
001fac  4611              MOV      r1,r2
001fae  311c              ADDS     r1,r1,#0x1c
001fb0  9000              STR      r0,[sp,#0]
001fb2  a07f              ADR      r0,|L1.8624|
001fb4  f7fffffe          BL       send_GSM
001fb8  4604              MOV      r4,r0
001fba  4621              MOV      r1,r4
001fbc  4867              LDR      r0,|L1.8540|
001fbe  3014              ADDS     r0,r0,#0x14
001fc0  f7fffffe          BL       __2printf
;;;561    						//delay(20);
;;;562    		//				GPS_COLLECT();
;;;563    
;;;564    msg_sim800(); 
001fc4  f7fffffe          BL       msg_sim800
;;;565    
;;;566    						clear();send_modem("\nAT+CIFSR\r\r\n");clear();
001fc8  f7fffffe          BL       clear
001fcc  a07c              ADR      r0,|L1.8640|
001fce  f7fffffe          BL       send_modem
001fd2  f7fffffe          BL       clear
;;;567    						delay(20);
001fd6  2014              MOVS     r0,#0x14
001fd8  f7fffffe          BL       delay
;;;568    
;;;569    
;;;570    msg_sim800(); 
001fdc  f7fffffe          BL       msg_sim800
;;;571    
;;;572    						sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
001fe0  4b7b              LDR      r3,|L1.8656|
001fe2  4a7c              LDR      r2,|L1.8660|
001fe4  a17c              ADR      r1,|L1.8664|
001fe6  4884              LDR      r0,|L1.8696|
001fe8  f7fffffe          BL       __2sprintf
;;;573    						printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR" , "ERROR:",tmeout));	
001fec  485a              LDR      r0,|L1.8536|
001fee  6800              LDR      r0,[r0,#0]  ; tmeout
001ff0  4b5a              LDR      r3,|L1.8540|
001ff2  461a              MOV      r2,r3
001ff4  322c              ADDS     r2,r2,#0x2c
001ff6  a181              ADR      r1,|L1.8700|
001ff8  9000              STR      r0,[sp,#0]
001ffa  487f              LDR      r0,|L1.8696|
001ffc  f7fffffe          BL       send_GSM
002000  4604              MOV      r4,r0
002002  4621              MOV      r1,r4
002004  4855              LDR      r0,|L1.8540|
002006  3014              ADDS     r0,r0,#0x14
002008  f7fffffe          BL       __2printf
;;;574    						clear();
00200c  f7fffffe          BL       clear
;;;575    
;;;576    }
002010  bd38              POP      {r3-r5,pc}
;;;577    
                          ENDP

                  send_tcp PROC
;;;16     
;;;17     void send_tcp()
002012  b570              PUSH     {r4-r6,lr}
;;;18     {	int qwe,timeout;
;;;19     	
;;;20     								//sprintf(data_2,"Latitude->%s,Longitude->%s,Velocity->%skmph\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);			
;;;21     								if(strstr(uart_string_gsm,">"))	
002014  a17b              ADR      r1,|L1.8708|
002016  487c              LDR      r0,|L1.8712|
002018  f7fffffe          BL       strstr
00201c  2800              CMP      r0,#0
00201e  d055              BEQ      |L1.8396|
;;;22     								{
;;;23     									
;;;24     															clear();
002020  f7fffffe          BL       clear
;;;25     															qwe=strlen(uart_string_gsm);
002024  4878              LDR      r0,|L1.8712|
002026  f7fffffe          BL       strlen
00202a  4605              MOV      r5,r0
;;;26     															printf("\nsizeofbuffer-> %d\n",qwe);
00202c  4629              MOV      r1,r5
00202e  a077              ADR      r0,|L1.8716|
002030  f7fffffe          BL       __2printf
;;;27     															memset(uart_string_gsm,0,qwe);
002034  4629              MOV      r1,r5
002036  4874              LDR      r0,|L1.8712|
002038  f7fffffe          BL       __aeabi_memclr4
;;;28     
;;;29     									for(k=0;k<strlen(data);k++)
00203c  2000              MOVS     r0,#0
00203e  4978              LDR      r1,|L1.8736|
002040  6008              STR      r0,[r1,#0]  ; k
002042  e00d              B        |L1.8288|
                  |L1.8260|
;;;30     									{
;;;31     										uart_putchar(UART1_BASE_PTR, data[k]);clear();// uart0_putchar(UART0_BASE_PTR, data[k]);
002044  483b              LDR      r0,|L1.8500|
002046  4a76              LDR      r2,|L1.8736|
002048  6812              LDR      r2,[r2,#0]  ; k
00204a  5c81              LDRB     r1,[r0,r2]
00204c  4875              LDR      r0,|L1.8740|
00204e  f7fffffe          BL       uart_putchar
002052  f7fffffe          BL       clear
002056  4872              LDR      r0,|L1.8736|
002058  6800              LDR      r0,[r0,#0]            ;29  ; k
00205a  1c40              ADDS     r0,r0,#1              ;29
00205c  4970              LDR      r1,|L1.8736|
00205e  6008              STR      r0,[r1,#0]            ;29  ; k
                  |L1.8288|
002060  4834              LDR      r0,|L1.8500|
002062  f7fffffe          BL       strlen
002066  496e              LDR      r1,|L1.8736|
002068  6809              LDR      r1,[r1,#0]            ;29  ; k
00206a  4288              CMP      r0,r1                 ;29
00206c  d8ea              BHI      |L1.8260|
;;;32     									}		
;;;33     										uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, 0x1A);
00206e  210a              MOVS     r1,#0xa
002070  486c              LDR      r0,|L1.8740|
002072  f7fffffe          BL       uart_putchar
002076  211a              MOVS     r1,#0x1a
002078  486a              LDR      r0,|L1.8740|
00207a  f7fffffe          BL       uart_putchar
;;;34     												k2=0;									//string array counter for uart 1
00207e  2000              MOVS     r0,#0
002080  4969              LDR      r1,|L1.8744|
002082  6008              STR      r0,[r1,#0]  ; k2
;;;35     												timeout=3001;						//timer counts to wait for characters in uart 1 									
002084  4c69              LDR      r4,|L1.8748|
;;;36     												//send_modem("\r\n");//uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");
;;;37     
;;;38     													while(!(strstr(uart_string_gsm,"SEND OK\r\n")  ||  (timeout < 1))       )
002086  e01a              B        |L1.8382|
                  |L1.8328|
;;;39     															{
;;;40     																timeout--;
002088  1e64              SUBS     r4,r4,#1
;;;41     																if(lptmr_interrupt == 1){accel_read();detect_motion();lptmr_interrupt = 0;}		
00208a  4869              LDR      r0,|L1.8752|
00208c  7800              LDRB     r0,[r0,#0]  ; lptmr_interrupt
00208e  2801              CMP      r0,#1
002090  d106              BNE      |L1.8352|
002092  f7fffffe          BL       accel_read
002096  f7fffffe          BL       detect_motion
00209a  2000              MOVS     r0,#0
00209c  4964              LDR      r1,|L1.8752|
00209e  7008              STRB     r0,[r1,#0]
                  |L1.8352|
;;;42     
;;;43     																if(timeout % 400 == 0)
0020a0  21ff              MOVS     r1,#0xff
0020a2  3191              ADDS     r1,r1,#0x91
0020a4  4620              MOV      r0,r4
0020a6  f7fffffe          BL       __aeabi_idivmod
0020aa  2900              CMP      r1,#0
0020ac  d107              BNE      |L1.8382|
;;;44     																{
;;;45     																	uart0_putchar(UART0_BASE_PTR,'1');uart_putchar(UART1_BASE_PTR,0x1A);
0020ae  2131              MOVS     r1,#0x31
0020b0  4860              LDR      r0,|L1.8756|
0020b2  f7fffffe          BL       uart0_putchar
0020b6  211a              MOVS     r1,#0x1a
0020b8  485a              LDR      r0,|L1.8740|
0020ba  f7fffffe          BL       uart_putchar
                  |L1.8382|
0020be  a15e              ADR      r1,|L1.8760|
0020c0  4851              LDR      r0,|L1.8712|
0020c2  f7fffffe          BL       strstr
0020c6  2800              CMP      r0,#0                 ;38
0020c8  d101              BNE      |L1.8398|
0020ca  e0bb              B        |L1.8772|
                  |L1.8396|
0020cc  e0e1              B        |L1.8850|
                  |L1.8398|
0020ce  e0bc              B        |L1.8778|
                  |L1.8400|
                          DCD      gga
                  |L1.8404|
                          DCD      ||la||
                  |L1.8408|
                          DCD      ||pr||
                  |L1.8412|
0020dc  0a0a0909          DCB      "\n\n\t\t,%f,\t,%f,",0
0020e0  2c25662c
0020e4  092c2566
0020e8  2c00    
0020ea  00                DCB      0
0020eb  00                DCB      0
                  |L1.8428|
                          DCD      int_erval
                  |L1.8432|
                          DCD      velocity
                  |L1.8436|
                          DCD      speed
                  |L1.8440|
                          DCD      lati
                  |L1.8444|
                          DCD      0x40590000
                  |L1.8448|
                          DCD      0x404e0000
                  |L1.8452|
002104  0a0a0909          DCB      "\n\n\t\t,%d,%f,%f\t,%s,%d"
002108  2c25642c
00210c  25662c25
002110  66092c25
002114  732c2564
                  |L1.8472|
002118  0a00              DCB      "\n",0
00211a  00                DCB      0
00211b  00                DCB      0
                  |L1.8476|
00211c  256600            DCB      "%f",0
00211f  00                DCB      0
                  |L1.8480|
                          DCD      longi
                  |L1.8484|
002124  0a0a0909          DCB      "\n\n\t\t,%d,%f,%f\n",0
002128  2c25642c
00212c  25662c25
002130  660a00  
002133  00                DCB      0
                  |L1.8500|
                          DCD      data
                  |L1.8504|
                          DCD      imei
                  |L1.8508|
00213c  2c2000            DCB      ", ",0
00213f  00                DCB      0
                  |L1.8512|
002140  24477847          DCB      "$$GxGGA,",0
002144  47412c00
                  |L1.8520|
002148  2c202447          DCB      ", $$GxRMC,",0
00214c  78524d43
002150  2c00    
002152  00                DCB      0
002153  00                DCB      0
                  |L1.8532|
                          DCD      ||rmc||
                  |L1.8536|
                          DCD      tmeout
                  |L1.8540|
                          DCD      ||.text||+0x918
                  |L1.8544|
002160  0d0a4154          DCB      "\r\nAT+CFUN=0\r\n",0
002164  2b434655
002168  4e3d300d
00216c  0a00    
00216e  00                DCB      0
00216f  00                DCB      0
                  |L1.8560|
002170  0d0a4154          DCB      "\r\nAT+CFUN=1\r\n",0
002174  2b434655
002178  4e3d310d
00217c  0a00    
00217e  00                DCB      0
00217f  00                DCB      0
                  |L1.8576|
002180  53485554          DCB      "SHUT OK\r\n",0
002184  204f4b0d
002188  0a00    
00218a  00                DCB      0
00218b  00                DCB      0
                  |L1.8588|
00218c  0d0a4154          DCB      "\r\nAT+CIPSHUT\r\n",0
002190  2b434950
002194  53485554
002198  0d0a00  
00219b  00                DCB      0
                  |L1.8604|
00219c  0d0a4154          DCB      "\r\nAT+CSTT=""www""\r\n",0
0021a0  2b435354
0021a4  543d2277
0021a8  7777220d
0021ac  0a00    
0021ae  00                DCB      0
0021af  00                DCB      0
                  |L1.8624|
0021b0  0d0a4154          DCB      "\r\nAT+CIICR\r\r\n",0
0021b4  2b434949
0021b8  43520d0d
0021bc  0a00    
0021be  00                DCB      0
0021bf  00                DCB      0
                  |L1.8640|
0021c0  0a41542b          DCB      "\nAT+CIFSR\r\r\n",0
0021c4  43494653
0021c8  520d0d0a
0021cc  00      
0021cd  00                DCB      0
0021ce  00                DCB      0
0021cf  00                DCB      0
                  |L1.8656|
                          DCD      port
                  |L1.8660|
                          DCD      ||ip||
                  |L1.8664|
0021d8  0d0a4154          DCB      "\r\nAT+CIPSTART=""TCP"",""%s"",""%s""\r\n",0
0021dc  2b434950
0021e0  53544152
0021e4  543d2254
0021e8  4350222c
0021ec  22257322
0021f0  2c222573
0021f4  220d0a00
                  |L1.8696|
                          DCD      at_
                  |L1.8700|
0021fc  434f4e4e          DCB      "CONNECT",0
002200  45435400
                  |L1.8708|
002204  3e00              DCB      ">",0
002206  00                DCB      0
002207  00                DCB      0
                  |L1.8712|
                          DCD      uart_string_gsm
                  |L1.8716|
00220c  0a73697a          DCB      "\nsizeofbuffer-> %d\n",0
002210  656f6662
002214  75666665
002218  722d3e20
00221c  25640a00
                  |L1.8736|
                          DCD      k
                  |L1.8740|
                          DCD      0x4006b000
                  |L1.8744|
                          DCD      ||k2||
                  |L1.8748|
                          DCD      0x00000bb9
                  |L1.8752|
                          DCD      lptmr_interrupt
                  |L1.8756|
                          DCD      0x4006a000
                  |L1.8760|
002238  53454e44          DCB      "SEND OK\r\n",0
00223c  204f4b0d
002240  0a00    
002242  00                DCB      0
002243  00                DCB      0
                  |L1.8772|
002244  2c01              CMP      r4,#1                 ;38
002246  db00              BLT      |L1.8778|
002248  e71e              B        |L1.8328|
                  |L1.8778|
;;;46     																}
;;;47     	
;;;48     															}
;;;49     														qwe=strlen(uart_string_gsm);
00224a  48f8              LDR      r0,|L1.9772|
00224c  f7fffffe          BL       strlen
002250  4605              MOV      r5,r0
;;;50     														printf("\nsizeofbuffer-> %d\n",qwe);
002252  4629              MOV      r1,r5
002254  48f6              LDR      r0,|L1.9776|
002256  f7fffffe          BL       __2printf
;;;51     
;;;52     												if(! strstr(uart_string_gsm,"SEND OK\r\n"))
00225a  49f5              LDR      r1,|L1.9776|
00225c  312c              ADDS     r1,r1,#0x2c
00225e  48f3              LDR      r0,|L1.9772|
002260  f7fffffe          BL       strstr
002264  2800              CMP      r0,#0
002266  d101              BNE      |L1.8812|
;;;53     												{
;;;54     													
;;;55     													log_it();
002268  f7fffffe          BL       log_it
                  |L1.8812|
;;;56     							
;;;57     													
;;;58     												}
;;;59     									
;;;60     												printf("***********************************************\n\n\n%s\n***********************************************\n",uart_string_gsm);									
00226c  49ef              LDR      r1,|L1.9772|
00226e  48f1              LDR      r0,|L1.9780|
002270  f7fffffe          BL       __2printf
;;;61     
;;;62     									uart_putchar(UART1_BASE_PTR, 0x1A);clear();
002274  211a              MOVS     r1,#0x1a
002276  48f0              LDR      r0,|L1.9784|
002278  f7fffffe          BL       uart_putchar
00227c  f7fffffe          BL       clear
;;;63     									memset(data,0,strlen(data));
002280  48ee              LDR      r0,|L1.9788|
002282  f7fffffe          BL       strlen
002286  4606              MOV      r6,r0
002288  4631              MOV      r1,r6
00228a  48ec              LDR      r0,|L1.9788|
00228c  f7fffffe          BL       __aeabi_memclr4
002290  e00a              B        |L1.8872|
                  |L1.8850|
;;;64     
;;;65     								}
;;;66     						else{
;;;67     									uart_putchar(UART1_BASE_PTR, 0x1A);
002292  211a              MOVS     r1,#0x1a
002294  48e8              LDR      r0,|L1.9784|
002296  f7fffffe          BL       uart_putchar
;;;68     									printf("reinitialization ON LOOP...\n");	
00229a  a0e9              ADR      r0,|L1.9792|
00229c  f7fffffe          BL       __2printf
;;;69     									tcp_initialization();
0022a0  f7fffffe          BL       tcp_initialization
;;;70     									log_it();
0022a4  f7fffffe          BL       log_it
                  |L1.8872|
;;;71     
;;;72     								}
;;;73     		
;;;74     	uart_putchar(UART1_BASE_PTR, 0x1A);
0022a8  211a              MOVS     r1,#0x1a
0022aa  48e3              LDR      r0,|L1.9784|
0022ac  f7fffffe          BL       uart_putchar
;;;75     	
;;;76     }
0022b0  bd70              POP      {r4-r6,pc}
;;;77     	
                          ENDP

                  read_ip_port PROC
;;;183    	
;;;184    void read_ip_port()
0022b2  b51c              PUSH     {r2-r4,lr}
;;;185    {
;;;186    		memset(at_,0,100);
0022b4  2164              MOVS     r1,#0x64
0022b6  48ea              LDR      r0,|L1.9824|
0022b8  f7fffffe          BL       __aeabi_memclr4
;;;187    		sprintf(at_, "\nAT+FSREAD=C:\\IP_PORT.TXT,0,100,1\r\n");		
0022bc  a1e9              ADR      r1,|L1.9828|
0022be  48e8              LDR      r0,|L1.9824|
0022c0  f7fffffe          BL       __2sprintf
;;;188    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",19999);	
0022c4  48f0              LDR      r0,|L1.9864|
0022c6  4bf1              LDR      r3,|L1.9868|
0022c8  461a              MOV      r2,r3
0022ca  3208              ADDS     r2,r2,#8
0022cc  a1f0              ADR      r1,|L1.9872|
0022ce  9000              STR      r0,[sp,#0]
0022d0  48e3              LDR      r0,|L1.9824|
0022d2  f7fffffe          BL       send_GSM
;;;189    		parse_g(uart_string_gsm, 2,3, '|', '|',ip);
0022d6  48ef              LDR      r0,|L1.9876|
0022d8  217c              MOVS     r1,#0x7c
0022da  460b              MOV      r3,r1
0022dc  2203              MOVS     r2,#3
0022de  9100              STR      r1,[sp,#0]
0022e0  9001              STR      r0,[sp,#4]
0022e2  2102              MOVS     r1,#2
0022e4  48d1              LDR      r0,|L1.9772|
0022e6  f7fffffe          BL       parse_g
;;;190    		parse_g(uart_string_gsm, 4,5, '|', '|',port);
0022ea  48eb              LDR      r0,|L1.9880|
0022ec  217c              MOVS     r1,#0x7c
0022ee  460b              MOV      r3,r1
0022f0  2205              MOVS     r2,#5
0022f2  9100              STR      r1,[sp,#0]
0022f4  9001              STR      r0,[sp,#4]
0022f6  2104              MOVS     r1,#4
0022f8  48cc              LDR      r0,|L1.9772|
0022fa  f7fffffe          BL       parse_g
;;;191    		
;;;192    		printf ("\n\n\n\t\t\t****************************\n%s\n%s\n%s\n\n\t\t\t*****************************",uart_string_gsm,ip,port);
0022fe  4be6              LDR      r3,|L1.9880|
002300  4ae4              LDR      r2,|L1.9876|
002302  49ca              LDR      r1,|L1.9772|
002304  48e5              LDR      r0,|L1.9884|
002306  f7fffffe          BL       __2printf
;;;193    
;;;194    }		
00230a  bd1c              POP      {r2-r4,pc}
;;;195    	
                          ENDP

                  read_interval PROC
;;;196    void read_interval()
00230c  b51c              PUSH     {r2-r4,lr}
;;;197    {
;;;198    		memset(at_,0,100);
00230e  2164              MOVS     r1,#0x64
002310  48d3              LDR      r0,|L1.9824|
002312  f7fffffe          BL       __aeabi_memclr4
;;;199    		sprintf(at_, "\nAT+FSREAD=C:\\INTERVAL.TXT,0,100,1\r\n");		
002316  a1e2              ADR      r1,|L1.9888|
002318  48d1              LDR      r0,|L1.9824|
00231a  f7fffffe          BL       __2sprintf
;;;200    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",99999);	
00231e  48ea              LDR      r0,|L1.9928|
002320  4bda              LDR      r3,|L1.9868|
002322  461a              MOV      r2,r3
002324  3208              ADDS     r2,r2,#8
002326  a1da              ADR      r1,|L1.9872|
002328  9000              STR      r0,[sp,#0]
00232a  48cd              LDR      r0,|L1.9824|
00232c  f7fffffe          BL       send_GSM
;;;201    		parse_g(uart_string_gsm, 2,3, '|', '|',interval);
002330  48e6              LDR      r0,|L1.9932|
002332  217c              MOVS     r1,#0x7c
002334  460b              MOV      r3,r1
002336  2203              MOVS     r2,#3
002338  9100              STR      r1,[sp,#0]
00233a  9001              STR      r0,[sp,#4]
00233c  2102              MOVS     r1,#2
00233e  48bb              LDR      r0,|L1.9772|
002340  f7fffffe          BL       parse_g
;;;202    		int_erval=myAtoi(interval);		
002344  48e1              LDR      r0,|L1.9932|
002346  f7fffffe          BL       myAtoi
00234a  49e1              LDR      r1,|L1.9936|
00234c  6008              STR      r0,[r1,#0]  ; int_erval
;;;203    		printf ("\n\n\n\t\t\t****************************\n%s\n\n\n\t\t\t*****************************",interval);
00234e  49df              LDR      r1,|L1.9932|
002350  48e0              LDR      r0,|L1.9940|
002352  f7fffffe          BL       __2printf
;;;204    
;;;205    }		
002356  bd1c              POP      {r2-r4,pc}
;;;206    	
                          ENDP

                  read PROC
;;;216    
;;;217    void read(char * A,char * B,char * C)
002358  b570              PUSH     {r4-r6,lr}
;;;218    {k=0;l=time;
00235a  4604              MOV      r4,r0
00235c  460d              MOV      r5,r1
00235e  4616              MOV      r6,r2
002360  2000              MOVS     r0,#0
002362  49dd              LDR      r1,|L1.9944|
002364  6008              STR      r0,[r1,#0]  ; k
002366  48dd              LDR      r0,|L1.9948|
002368  6800              LDR      r0,[r0,#0]  ; time
00236a  49dd              LDR      r1,|L1.9952|
00236c  6008              STR      r0,[r1,#0]  ; l
;;;219    			do{
00236e  bf00              NOP      
                  |L1.9072|
;;;220    			if( uart_getchar_present (UART1_BASE_PTR))	
002370  48b1              LDR      r0,|L1.9784|
002372  f7fffffe          BL       uart_getchar_present
002376  2800              CMP      r0,#0
002378  d018              BEQ      |L1.9132|
;;;221    			{uart_string_gps[k]=UART_D_REG(UART1_BASE_PTR);k++;l=time;if(k>298){k=0;}}
00237a  48af              LDR      r0,|L1.9784|
00237c  79c0              LDRB     r0,[r0,#7]
00237e  49d9              LDR      r1,|L1.9956|
002380  4ad5              LDR      r2,|L1.9944|
002382  6812              LDR      r2,[r2,#0]  ; k
002384  5488              STRB     r0,[r1,r2]
002386  48d4              LDR      r0,|L1.9944|
002388  6800              LDR      r0,[r0,#0]  ; k
00238a  1c40              ADDS     r0,r0,#1
00238c  49d2              LDR      r1,|L1.9944|
00238e  6008              STR      r0,[r1,#0]  ; k
002390  48d2              LDR      r0,|L1.9948|
002392  6800              LDR      r0,[r0,#0]  ; time
002394  49d2              LDR      r1,|L1.9952|
002396  6008              STR      r0,[r1,#0]  ; l
002398  48cf              LDR      r0,|L1.9944|
00239a  6800              LDR      r0,[r0,#0]  ; k
00239c  21ff              MOVS     r1,#0xff
00239e  312b              ADDS     r1,r1,#0x2b
0023a0  4288              CMP      r0,r1
0023a2  dd09              BLE      |L1.9144|
0023a4  2000              MOVS     r0,#0
0023a6  49cc              LDR      r1,|L1.9944|
0023a8  6008              STR      r0,[r1,#0]  ; k
0023aa  e005              B        |L1.9144|
                  |L1.9132|
;;;222    				else{
;;;223    							l--;if(l==10){}
0023ac  48cc              LDR      r0,|L1.9952|
0023ae  6800              LDR      r0,[r0,#0]  ; l
0023b0  1e40              SUBS     r0,r0,#1
0023b2  49cb              LDR      r1,|L1.9952|
0023b4  6008              STR      r0,[r1,#0]  ; l
0023b6  bf00              NOP      
                  |L1.9144|
;;;224    						}
;;;225    			}while(!((strstr(uart_string_gps, "OK\r\n"))
0023b8  49b4              LDR      r1,|L1.9868|
0023ba  3124              ADDS     r1,r1,#0x24
0023bc  48c9              LDR      r0,|L1.9956|
0023be  f7fffffe          BL       strstr
0023c2  2800              CMP      r0,#0
0023c4  d110              BNE      |L1.9192|
0023c6  49b1              LDR      r1,|L1.9868|
0023c8  3108              ADDS     r1,r1,#8
0023ca  48c6              LDR      r0,|L1.9956|
0023cc  f7fffffe          BL       strstr
0023d0  2800              CMP      r0,#0
0023d2  d109              BNE      |L1.9192|
0023d4  48c2              LDR      r0,|L1.9952|
0023d6  6800              LDR      r0,[r0,#0]  ; l
0023d8  2800              CMP      r0,#0
0023da  dd05              BLE      |L1.9192|
0023dc  49ab              LDR      r1,|L1.9868|
0023de  48c1              LDR      r0,|L1.9956|
0023e0  f7fffffe          BL       strstr
0023e4  2800              CMP      r0,#0
0023e6  d0c3              BEQ      |L1.9072|
                  |L1.9192|
;;;226    							||(strstr(uart_string_gps, "ERROR\r\n"))  || (l<=0)
;;;227    				        	||(strstr(uart_string_gps, "ERROR:"))
;;;228    							));
;;;229    //		clear();
;;;230    }	
0023e8  bd70              POP      {r4-r6,pc}
;;;231    void read2(char * respA,char * respB,char * respC, int timeout)
                          ENDP

                  read2 PROC
0023ea  b5f8              PUSH     {r3-r7,lr}
;;;232    {int cntr;k=0;l=time;
0023ec  4604              MOV      r4,r0
0023ee  460e              MOV      r6,r1
0023f0  4615              MOV      r5,r2
0023f2  461f              MOV      r7,r3
0023f4  2000              MOVS     r0,#0
0023f6  49b8              LDR      r1,|L1.9944|
0023f8  6008              STR      r0,[r1,#0]  ; k
0023fa  48b8              LDR      r0,|L1.9948|
0023fc  6800              LDR      r0,[r0,#0]  ; time
0023fe  49b8              LDR      r1,|L1.9952|
002400  6008              STR      r0,[r1,#0]  ; l
;;;233    			do{
002402  bf00              NOP      
                  |L1.9220|
;;;234    			if( uart_getchar_present (UART2_BASE_PTR))	
002404  48b8              LDR      r0,|L1.9960|
002406  f7fffffe          BL       uart_getchar_present
00240a  2800              CMP      r0,#0
00240c  d018              BEQ      |L1.9280|
;;;235    			{uart_string_gps[k]=UART_D_REG(UART2_BASE_PTR);k++;l=time;if(k>298){k=0;}}
00240e  48b6              LDR      r0,|L1.9960|
002410  79c0              LDRB     r0,[r0,#7]
002412  49b4              LDR      r1,|L1.9956|
002414  4ab0              LDR      r2,|L1.9944|
002416  6812              LDR      r2,[r2,#0]  ; k
002418  5488              STRB     r0,[r1,r2]
00241a  48af              LDR      r0,|L1.9944|
00241c  6800              LDR      r0,[r0,#0]  ; k
00241e  1c40              ADDS     r0,r0,#1
002420  49ad              LDR      r1,|L1.9944|
002422  6008              STR      r0,[r1,#0]  ; k
002424  48ad              LDR      r0,|L1.9948|
002426  6800              LDR      r0,[r0,#0]  ; time
002428  49ad              LDR      r1,|L1.9952|
00242a  6008              STR      r0,[r1,#0]  ; l
00242c  48aa              LDR      r0,|L1.9944|
00242e  6800              LDR      r0,[r0,#0]  ; k
002430  21ff              MOVS     r1,#0xff
002432  312b              ADDS     r1,r1,#0x2b
002434  4288              CMP      r0,r1
002436  dd08              BLE      |L1.9290|
002438  2000              MOVS     r0,#0
00243a  49a7              LDR      r1,|L1.9944|
00243c  6008              STR      r0,[r1,#0]  ; k
00243e  e004              B        |L1.9290|
                  |L1.9280|
;;;236    				else{				
;;;237    								l--;
002440  48a7              LDR      r0,|L1.9952|
002442  6800              LDR      r0,[r0,#0]  ; l
002444  1e40              SUBS     r0,r0,#1
002446  49a6              LDR      r1,|L1.9952|
002448  6008              STR      r0,[r1,#0]  ; l
                  |L1.9290|
;;;238    						}
;;;239    			}while(!((strstr(uart_string_gps, respA))
00244a  4621              MOV      r1,r4
00244c  48a5              LDR      r0,|L1.9956|
00244e  f7fffffe          BL       strstr
002452  2800              CMP      r0,#0
002454  d10f              BNE      |L1.9334|
002456  4631              MOV      r1,r6
002458  48a2              LDR      r0,|L1.9956|
00245a  f7fffffe          BL       strstr
00245e  2800              CMP      r0,#0
002460  d109              BNE      |L1.9334|
002462  489f              LDR      r0,|L1.9952|
002464  6800              LDR      r0,[r0,#0]  ; l
002466  2800              CMP      r0,#0
002468  dd05              BLE      |L1.9334|
00246a  4629              MOV      r1,r5
00246c  489d              LDR      r0,|L1.9956|
00246e  f7fffffe          BL       strstr
002472  2800              CMP      r0,#0
002474  d0c6              BEQ      |L1.9220|
                  |L1.9334|
;;;240    							||(strstr(uart_string_gps, respB))  || (l<=0) 
;;;241    				        	||(strstr(uart_string_gps, respC))
;;;242    							));
;;;243    //		clear();
;;;244    }	
002476  bdf8              POP      {r3-r7,pc}
;;;245    
                          ENDP

                  send_modem2 PROC
;;;256    	
;;;257    void send_modem2(char ch[])
002478  b570              PUSH     {r4-r6,lr}
;;;258    	{	
00247a  4604              MOV      r4,r0
;;;259    						unsigned char i;
;;;260    						i=0;
00247c  2500              MOVS     r5,#0
;;;261    						while ((*(ch+i)) != '\0') // NULL
00247e  e005              B        |L1.9356|
                  |L1.9344|
;;;262    						{	
;;;263    						// delay(1);
;;;264    						 uart_putchar(UART2_BASE_PTR, (*(ch+i)));
002480  5d61              LDRB     r1,[r4,r5]
002482  4899              LDR      r0,|L1.9960|
002484  f7fffffe          BL       uart_putchar
;;;265    						 i++;
002488  1c68              ADDS     r0,r5,#1
00248a  b2c5              UXTB     r5,r0
                  |L1.9356|
00248c  5d60              LDRB     r0,[r4,r5]            ;261
00248e  2800              CMP      r0,#0                 ;261
002490  d1f6              BNE      |L1.9344|
;;;266    						}
;;;267    		
;;;268    	}	
002492  bd70              POP      {r4-r6,pc}
;;;269    	
                          ENDP

                  send_GPS PROC
;;;320    	
;;;321    char * send_GPS(char * string, char* responseA, char* responseB, char* responseC, int timeout)
002494  b5f8              PUSH     {r3-r7,lr}
;;;322    {
002496  4607              MOV      r7,r0
002498  460c              MOV      r4,r1
00249a  4615              MOV      r5,r2
00249c  461e              MOV      r6,r3
;;;323    int qweq = strlen(uart_string_gps);
00249e  4891              LDR      r0,|L1.9956|
0024a0  f7fffffe          BL       strlen
0024a4  9000              STR      r0,[sp,#0]
;;;324    	
;;;325    	memset(uart_string_gps,0,qweq);
0024a6  488f              LDR      r0,|L1.9956|
0024a8  9900              LDR      r1,[sp,#0]
0024aa  f7fffffe          BL       __aeabi_memclr4
;;;326    	clear2();
0024ae  f7fffffe          BL       clear2
;;;327    	send_modem2(string);
0024b2  4638              MOV      r0,r7
0024b4  f7fffffe          BL       send_modem2
;;;328    	read2(responseA,responseB,responseC,timeout);
0024b8  4632              MOV      r2,r6
0024ba  4629              MOV      r1,r5
0024bc  4620              MOV      r0,r4
0024be  9b06              LDR      r3,[sp,#0x18]
0024c0  f7fffffe          BL       read2
;;;329    	clear2();
0024c4  f7fffffe          BL       clear2
;;;330    	return uart_string_gps;
0024c8  4886              LDR      r0,|L1.9956|
;;;331    }
0024ca  bdf8              POP      {r3-r7,pc}
;;;332    	
                          ENDP

                  send_chunk PROC
;;;966    
;;;967    void send_chunk()
0024cc  b5f0              PUSH     {r4-r7,lr}
;;;968    {float fsz;
0024ce  b085              SUB      sp,sp,#0x14
;;;969     int times,qwe,timeout,k5;
;;;970    								
;;;971    	printf("\n%s\n",send_GSM("\nAT+FSFLSIZE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",19999));
0024d0  486d              LDR      r0,|L1.9864|
0024d2  4b6e              LDR      r3,|L1.9868|
0024d4  461a              MOV      r2,r3
0024d6  3208              ADDS     r2,r2,#8
0024d8  a16d              ADR      r1,|L1.9872|
0024da  9000              STR      r0,[sp,#0]
0024dc  a083              ADR      r0,|L1.9964|
0024de  f7fffffe          BL       send_GSM
0024e2  4607              MOV      r7,r0
0024e4  4639              MOV      r1,r7
0024e6  4869              LDR      r0,|L1.9868|
0024e8  3014              ADDS     r0,r0,#0x14
0024ea  f7fffffe          BL       __2printf
;;;972    	parse_g(uart_string_gsm, 1, 2, ' ', '\n', fsize);
0024ee  4886              LDR      r0,|L1.9992|
0024f0  210a              MOVS     r1,#0xa
0024f2  2320              MOVS     r3,#0x20
0024f4  2202              MOVS     r2,#2
0024f6  9100              STR      r1,[sp,#0]
0024f8  9001              STR      r0,[sp,#4]
0024fa  2101              MOVS     r1,#1
0024fc  484b              LDR      r0,|L1.9772|
0024fe  f7fffffe          BL       parse_g
;;;973    	fsz=stof(fsize);//7523.7412
002502  4881              LDR      r0,|L1.9992|
002504  f7fffffe          BL       stof
002508  9003              STR      r0,[sp,#0xc]
;;;974    	times=(fsz/1400)+1;
00250a  4980              LDR      r1,|L1.9996|
00250c  9803              LDR      r0,[sp,#0xc]
00250e  f7fffffe          BL       __aeabi_fdiv
002512  217f              MOVS     r1,#0x7f
002514  05c9              LSLS     r1,r1,#23
002516  9001              STR      r0,[sp,#4]
002518  f7fffffe          BL       __aeabi_fadd
00251c  4607              MOV      r7,r0
00251e  f7fffffe          BL       __aeabi_f2iz
002522  4606              MOV      r6,r0
;;;975    	for(k5=0;k5<times;)
002524  2400              MOVS     r4,#0
002526  e1a1              B        |L1.10348|
                  |L1.9512|
;;;976    	{
;;;977    		memset(sd_data,0,1400);
002528  21af              MOVS     r1,#0xaf
00252a  00c9              LSLS     r1,r1,#3
00252c  4878              LDR      r0,|L1.10000|
00252e  f7fffffe          BL       __aeabi_memclr
;;;978    		memset(at_,0,100);
002532  2164              MOVS     r1,#0x64
002534  484a              LDR      r0,|L1.9824|
002536  f7fffffe          BL       __aeabi_memclr4
;;;979    		sprintf(at_, "\nAT+FSREAD=C:\\LOG.TXT,1,1400,%d\r\n",(k5*1400) );		
00253a  20af              MOVS     r0,#0xaf
00253c  00c0              LSLS     r0,r0,#3
00253e  4360              MULS     r0,r4,r0
002540  4602              MOV      r2,r0
002542  a174              ADR      r1,|L1.10004|
002544  4846              LDR      r0,|L1.9824|
002546  f7fffffe          BL       __2sprintf
;;;980    		printf("\n%d,%s\n",k5,send_GSM(at_, "OK\r\n", "ERROR\r\n" , "ERROR:",19999));	
00254a  484f              LDR      r0,|L1.9864|
00254c  4b4f              LDR      r3,|L1.9868|
00254e  461a              MOV      r2,r3
002550  3208              ADDS     r2,r2,#8
002552  4611              MOV      r1,r2
002554  311c              ADDS     r1,r1,#0x1c
002556  9000              STR      r0,[sp,#0]
002558  4841              LDR      r0,|L1.9824|
00255a  f7fffffe          BL       send_GSM
00255e  4607              MOV      r7,r0
002560  463a              MOV      r2,r7
002562  4621              MOV      r1,r4
002564  a074              ADR      r0,|L1.10040|
002566  f7fffffe          BL       __2printf
;;;981    		parse_g(uart_string_gsm, 2,9, '\n', '\n' ,sd_data);
00256a  4869              LDR      r0,|L1.10000|
00256c  210a              MOVS     r1,#0xa
00256e  460b              MOV      r3,r1
002570  2209              MOVS     r2,#9
002572  9100              STR      r1,[sp,#0]
002574  9001              STR      r0,[sp,#4]
002576  2102              MOVS     r1,#2
002578  482c              LDR      r0,|L1.9772|
00257a  f7fffffe          BL       parse_g
;;;982    		printf ("\n\n\n\t\t\t****************************\n%s\n\n\n\t\t\t*****************************",sd_data);
00257e  4964              LDR      r1,|L1.10000|
002580  4854              LDR      r0,|L1.9940|
002582  f7fffffe          BL       __2printf
;;;983    		clear();
002586  f7fffffe          BL       clear
;;;984    
;;;985    			printf("\n%s\n",send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR\r\n" , "CONNECT",tmeout));		
00258a  486d              LDR      r0,|L1.10048|
00258c  6800              LDR      r0,[r0,#0]  ; tmeout
00258e  4b28              LDR      r3,|L1.9776|
002590  3b10              SUBS     r3,r3,#0x10
002592  4a3e              LDR      r2,|L1.9868|
002594  3208              ADDS     r2,r2,#8
002596  a16b              ADR      r1,|L1.10052|
002598  9000              STR      r0,[sp,#0]
00259a  a06b              ADR      r0,|L1.10056|
00259c  f7fffffe          BL       send_GSM
0025a0  4607              MOV      r7,r0
0025a2  4639              MOV      r1,r7
0025a4  4839              LDR      r0,|L1.9868|
0025a6  3014              ADDS     r0,r0,#0x14
0025a8  f7fffffe          BL       __2printf
;;;986    									if(strstr(uart_string_gsm,">"))	
0025ac  a165              ADR      r1,|L1.10052|
0025ae  481f              LDR      r0,|L1.9772|
0025b0  f7fffffe          BL       strstr
0025b4  2800              CMP      r0,#0
0025b6  d038              BEQ      |L1.9770|
;;;987    									{
;;;988    										
;;;989    																clear();
0025b8  f7fffffe          BL       clear
;;;990    																qwe=strlen(uart_string_gsm);
0025bc  481b              LDR      r0,|L1.9772|
0025be  f7fffffe          BL       strlen
0025c2  9002              STR      r0,[sp,#8]
;;;991    																printf("\nsizeofbuffer-> %d\n",qwe);
0025c4  481a              LDR      r0,|L1.9776|
0025c6  9902              LDR      r1,[sp,#8]
0025c8  f7fffffe          BL       __2printf
;;;992    																memset(uart_string_gsm,0,qwe);
0025cc  4817              LDR      r0,|L1.9772|
0025ce  9902              LDR      r1,[sp,#8]
0025d0  f7fffffe          BL       __aeabi_memclr4
;;;993    
;;;994    										for(k=0;k<strlen(sd_data);k++)
0025d4  2000              MOVS     r0,#0
0025d6  4940              LDR      r1,|L1.9944|
0025d8  6008              STR      r0,[r1,#0]  ; k
0025da  e012              B        |L1.9730|
                  |L1.9692|
;;;995    										{
;;;996    											uart_putchar(UART1_BASE_PTR, sd_data[k]); uart0_putchar(UART0_BASE_PTR, sd_data[k]);//clear();
0025dc  484c              LDR      r0,|L1.10000|
0025de  4a3e              LDR      r2,|L1.9944|
0025e0  6812              LDR      r2,[r2,#0]  ; k
0025e2  5c81              LDRB     r1,[r0,r2]
0025e4  4814              LDR      r0,|L1.9784|
0025e6  f7fffffe          BL       uart_putchar
0025ea  4849              LDR      r0,|L1.10000|
0025ec  4a3a              LDR      r2,|L1.9944|
0025ee  6812              LDR      r2,[r2,#0]  ; k
0025f0  5c81              LDRB     r1,[r0,r2]
0025f2  4859              LDR      r0,|L1.10072|
0025f4  f7fffffe          BL       uart0_putchar
0025f8  4837              LDR      r0,|L1.9944|
0025fa  6800              LDR      r0,[r0,#0]            ;994  ; k
0025fc  1c40              ADDS     r0,r0,#1              ;994
0025fe  4936              LDR      r1,|L1.9944|
002600  6008              STR      r0,[r1,#0]            ;994  ; k
                  |L1.9730|
002602  4843              LDR      r0,|L1.10000|
002604  f7fffffe          BL       strlen
002608  4933              LDR      r1,|L1.9944|
00260a  6809              LDR      r1,[r1,#0]            ;994  ; k
00260c  4288              CMP      r0,r1                 ;994
00260e  d8e5              BHI      |L1.9692|
;;;997    										}		
;;;998    						
;;;999    												uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, 0x1A);
002610  210a              MOVS     r1,#0xa
002612  4809              LDR      r0,|L1.9784|
002614  f7fffffe          BL       uart_putchar
002618  211a              MOVS     r1,#0x1a
00261a  4807              LDR      r0,|L1.9784|
00261c  f7fffffe          BL       uart_putchar
;;;1000   													k2=0;									//string array counter for uart 1
002620  2000              MOVS     r0,#0
002622  494e              LDR      r1,|L1.10076|
002624  6008              STR      r0,[r1,#0]  ; k2
;;;1001   													timeout=2001;						//timer counts to wait for characters in uart 1 									
002626  4d4e              LDR      r5,|L1.10080|
;;;1002   													//send_modem("\r\n");//uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");
;;;1003   
;;;1004   														while(!(strstr(uart_string_gsm,"SEND OK\r\n")  ||  (timeout < 1))   || (strstr(uart_string_gsm, "ERROR"))     )
002628  e0b7              B        |L1.10138|
                  |L1.9770|
00262a  e0e8              B        |L1.10238|
                  |L1.9772|
                          DCD      uart_string_gsm
                  |L1.9776|
                          DCD      ||.text||+0x220c
                  |L1.9780|
                          DCD      ||.conststring||+0xbc
                  |L1.9784|
                          DCD      0x4006b000
                  |L1.9788|
                          DCD      data
                  |L1.9792|
002640  7265696e          DCB      "reinitialization ON LOOP...\n",0
002644  69746961
002648  6c697a61
00264c  74696f6e
002650  204f4e20
002654  4c4f4f50
002658  2e2e2e0a
00265c  00      
00265d  00                DCB      0
00265e  00                DCB      0
00265f  00                DCB      0
                  |L1.9824|
                          DCD      at_
                  |L1.9828|
002664  0a41542b          DCB      "\nAT+FSREAD=C:\\IP_PORT.TXT,0,100,1\r\n",0
002668  46535245
00266c  41443d43
002670  3a5c4950
002674  5f504f52
002678  542e5458
00267c  542c302c
002680  3130302c
002684  310d0a00
                  |L1.9864|
                          DCD      0x00004e1f
                  |L1.9868|
                          DCD      ||.text||+0x918
                  |L1.9872|
002690  4f4b00            DCB      "OK",0
002693  00                DCB      0
                  |L1.9876|
                          DCD      ||ip||
                  |L1.9880|
                          DCD      port
                  |L1.9884|
                          DCD      ||.conststring||+0x124
                  |L1.9888|
0026a0  0a41542b          DCB      "\nAT+FSREAD=C:\\INTERVAL.TXT,0,100,1\r\n",0
0026a4  46535245
0026a8  41443d43
0026ac  3a5c494e
0026b0  54455256
0026b4  414c2e54
0026b8  58542c30
0026bc  2c313030
0026c0  2c310d0a
0026c4  00      
0026c5  00                DCB      0
0026c6  00                DCB      0
0026c7  00                DCB      0
                  |L1.9928|
                          DCD      0x0001869f
                  |L1.9932|
                          DCD      interval
                  |L1.9936|
                          DCD      int_erval
                  |L1.9940|
                          DCD      ||.conststring||+0x174
                  |L1.9944|
                          DCD      k
                  |L1.9948|
                          DCD      time
                  |L1.9952|
                          DCD      l
                  |L1.9956|
                          DCD      uart_string_gps
                  |L1.9960|
                          DCD      0x4006c000
                  |L1.9964|
0026ec  0a41542b          DCB      "\nAT+FSFLSIZE=C:\\LOG.TXT\r\n",0
0026f0  4653464c
0026f4  53495a45
0026f8  3d433a5c
0026fc  4c4f472e
002700  5458540d
002704  0a00    
002706  00                DCB      0
002707  00                DCB      0
                  |L1.9992|
                          DCD      fsize
                  |L1.9996|
                          DCD      0x44af0000
                  |L1.10000|
                          DCD      sd_data
                  |L1.10004|
002714  0a41542b          DCB      "\nAT+FSREAD=C:\\LOG.TXT,1,1400,%d\r\n",0
002718  46535245
00271c  41443d43
002720  3a5c4c4f
002724  472e5458
002728  542c312c
00272c  31343030
002730  2c25640d
002734  0a00    
002736  00                DCB      0
002737  00                DCB      0
                  |L1.10040|
002738  0a25642c          DCB      "\n%d,%s\n",0
00273c  25730a00
                  |L1.10048|
                          DCD      tmeout
                  |L1.10052|
002744  3e00              DCB      ">",0
002746  00                DCB      0
002747  00                DCB      0
                  |L1.10056|
002748  0d0a4154          DCB      "\r\nAT+CIPSEND\r\n",0
00274c  2b434950
002750  53454e44
002754  0d0a00  
002757  00                DCB      0
                  |L1.10072|
                          DCD      0x4006a000
                  |L1.10076|
                          DCD      ||k2||
                  |L1.10080|
                          DCD      0x000007d1
                  |L1.10084|
;;;1005   																{
;;;1006   																	timeout--;
002764  1e6d              SUBS     r5,r5,#1
;;;1007   																if(lptmr_interrupt == 1){ accel_read(); detect_motion(); lptmr_interrupt = 0;}		
002766  48fb              LDR      r0,|L1.11092|
002768  7800              LDRB     r0,[r0,#0]  ; lptmr_interrupt
00276a  2801              CMP      r0,#1
00276c  d106              BNE      |L1.10108|
00276e  f7fffffe          BL       accel_read
002772  f7fffffe          BL       detect_motion
002776  2000              MOVS     r0,#0
002778  49f6              LDR      r1,|L1.11092|
00277a  7008              STRB     r0,[r1,#0]
                  |L1.10108|
;;;1008   																	
;;;1009   																	if(timeout % 400 == 0)
00277c  21ff              MOVS     r1,#0xff
00277e  3191              ADDS     r1,r1,#0x91
002780  4628              MOV      r0,r5
002782  f7fffffe          BL       __aeabi_idivmod
002786  2900              CMP      r1,#0
002788  d107              BNE      |L1.10138|
;;;1010   																	{uart0_putchar(UART0_BASE_PTR,'1');uart_putchar(UART1_BASE_PTR,0x1A);
00278a  2131              MOVS     r1,#0x31
00278c  48f2              LDR      r0,|L1.11096|
00278e  f7fffffe          BL       uart0_putchar
002792  211a              MOVS     r1,#0x1a
002794  48f1              LDR      r0,|L1.11100|
002796  f7fffffe          BL       uart_putchar
                  |L1.10138|
00279a  49f1              LDR      r1,|L1.11104|
00279c  48f1              LDR      r0,|L1.11108|
00279e  f7fffffe          BL       strstr
0027a2  2800              CMP      r0,#0                 ;1004
0027a4  d101              BNE      |L1.10154|
0027a6  2d01              CMP      r5,#1                 ;1004
0027a8  dadc              BGE      |L1.10084|
                  |L1.10154|
0027aa  49ef              LDR      r1,|L1.11112|
0027ac  48ed              LDR      r0,|L1.11108|
0027ae  f7fffffe          BL       strstr
0027b2  2800              CMP      r0,#0                 ;1004
0027b4  d1d6              BNE      |L1.10084|
;;;1011   																	}
;;;1012   
;;;1013   																}
;;;1014   															qwe=strlen(uart_string_gsm);
0027b6  48eb              LDR      r0,|L1.11108|
0027b8  f7fffffe          BL       strlen
0027bc  9002              STR      r0,[sp,#8]
;;;1015   															printf("\nsizeofbuffer-> %d\n",qwe);
0027be  48e8              LDR      r0,|L1.11104|
0027c0  382c              SUBS     r0,r0,#0x2c
0027c2  9902              LDR      r1,[sp,#8]
0027c4  f7fffffe          BL       __2printf
;;;1016   
;;;1017   
;;;1018   										
;;;1019   													//printf("***********************************************\n\n\n%s\n***********************************************\n",uart_string_gsm);									
;;;1020   
;;;1021   										uart_putchar(UART1_BASE_PTR, 0x1A);clear();
0027c8  211a              MOVS     r1,#0x1a
0027ca  48e4              LDR      r0,|L1.11100|
0027cc  f7fffffe          BL       uart_putchar
0027d0  f7fffffe          BL       clear
;;;1022   										k5++;
0027d4  1c64              ADDS     r4,r4,#1
;;;1023   								//		memset(data,0,1000);
;;;1024   										if(k5 >= times-1)printf("\n%s\n",send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",2001));
0027d6  1e70              SUBS     r0,r6,#1
0027d8  42a0              CMP      r0,r4
0027da  dc47              BGT      |L1.10348|
0027dc  48e3              LDR      r0,|L1.11116|
0027de  4be2              LDR      r3,|L1.11112|
0027e0  3b2c              SUBS     r3,r3,#0x2c
0027e2  461a              MOV      r2,r3
0027e4  3208              ADDS     r2,r2,#8
0027e6  a1e2              ADR      r1,|L1.11120|
0027e8  9000              STR      r0,[sp,#0]
0027ea  48e2              LDR      r0,|L1.11124|
0027ec  f7fffffe          BL       send_GSM
0027f0  4607              MOV      r7,r0
0027f2  4639              MOV      r1,r7
0027f4  48dc              LDR      r0,|L1.11112|
0027f6  3818              SUBS     r0,r0,#0x18
0027f8  f7fffffe          BL       __2printf
0027fc  e036              B        |L1.10348|
                  |L1.10238|
;;;1025   
;;;1026   									}
;;;1027   							else{
;;;1028   										log_it();
0027fe  f7fffffe          BL       log_it
;;;1029   										memset(data,0,strlen(data));
002802  48dd              LDR      r0,|L1.11128|
002804  f7fffffe          BL       strlen
002808  4607              MOV      r7,r0
00280a  4639              MOV      r1,r7
00280c  48da              LDR      r0,|L1.11128|
00280e  f7fffffe          BL       __aeabi_memclr4
;;;1030   										printf("reinitialization...\n");	
002812  a0da              ADR      r0,|L1.11132|
002814  f7fffffe          BL       __2printf
;;;1031   										tcp_initialization();
002818  f7fffffe          BL       tcp_initialization
;;;1032   										log_it();
00281c  f7fffffe          BL       log_it
;;;1033   										printf("\n%s\n",send_GSM("\nAT+FSFLSIZE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",2001));
002820  48d2              LDR      r0,|L1.11116|
002822  4bd1              LDR      r3,|L1.11112|
002824  3b2c              SUBS     r3,r3,#0x2c
002826  461a              MOV      r2,r3
002828  3208              ADDS     r2,r2,#8
00282a  a1d1              ADR      r1,|L1.11120|
00282c  9000              STR      r0,[sp,#0]
00282e  48d9              LDR      r0,|L1.11156|
002830  f7fffffe          BL       send_GSM
002834  4607              MOV      r7,r0
002836  4639              MOV      r1,r7
002838  48cb              LDR      r0,|L1.11112|
00283a  3818              SUBS     r0,r0,#0x18
00283c  f7fffffe          BL       __2printf
;;;1034   										parse_g(uart_string_gsm, 1, 2, ' ', '\n', fsize);
002840  48d5              LDR      r0,|L1.11160|
002842  210a              MOVS     r1,#0xa
002844  2320              MOVS     r3,#0x20
002846  2202              MOVS     r2,#2
002848  9100              STR      r1,[sp,#0]
00284a  9001              STR      r0,[sp,#4]
00284c  2101              MOVS     r1,#1
00284e  48c5              LDR      r0,|L1.11108|
002850  f7fffffe          BL       parse_g
;;;1035   										fsz=stof(fsize);//7523.7412
002854  48d0              LDR      r0,|L1.11160|
002856  f7fffffe          BL       stof
00285a  9003              STR      r0,[sp,#0xc]
;;;1036   										times=fsz/1400;
00285c  49cf              LDR      r1,|L1.11164|
00285e  9803              LDR      r0,[sp,#0xc]
002860  f7fffffe          BL       __aeabi_fdiv
002864  4607              MOV      r7,r0
002866  f7fffffe          BL       __aeabi_f2iz
00286a  4606              MOV      r6,r0
                  |L1.10348|
00286c  42b4              CMP      r4,r6                 ;975
00286e  da00              BGE      |L1.10354|
002870  e65a              B        |L1.9512|
                  |L1.10354|
;;;1037   									}	
;;;1038   		
;;;1039   		
;;;1040   		}
;;;1041   		
;;;1042   
;;;1043   	//	sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
;;;1044   	//	printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR\r\n" , "CONNECT",tmeout));	
;;;1045   	//	printf("\n%s\n",send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR\r\n" , "CONNECT",tmeout));	
;;;1046   
;;;1047   	//		
;;;1048   		
;;;1049   		
;;;1050   	}
002872  b005              ADD      sp,sp,#0x14
002874  bdf0              POP      {r4-r7,pc}
;;;1051   			
                          ENDP

                  gsm_gps_sleep PROC
;;;436    
;;;437    void gsm_gps_sleep()
002876  b538              PUSH     {r3-r5,lr}
;;;438    {
;;;439    	
;;;440    sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
002878  4bc9              LDR      r3,|L1.11168|
00287a  4aca              LDR      r2,|L1.11172|
00287c  49b8              LDR      r1,|L1.11104|
00287e  3960              SUBS     r1,r1,#0x60
002880  48c9              LDR      r0,|L1.11176|
002882  f7fffffe          BL       __2sprintf
;;;441    printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR\r\n" , "CONNECT",tmeout));										
002886  48c9              LDR      r0,|L1.11180|
002888  6800              LDR      r0,[r0,#0]  ; tmeout
00288a  4bb5              LDR      r3,|L1.11104|
00288c  3b3c              SUBS     r3,r3,#0x3c
00288e  4ab6              LDR      r2,|L1.11112|
002890  3a24              SUBS     r2,r2,#0x24
002892  4619              MOV      r1,r3
002894  9000              STR      r0,[sp,#0]
002896  48c4              LDR      r0,|L1.11176|
002898  f7fffffe          BL       send_GSM
00289c  4604              MOV      r4,r0
00289e  4621              MOV      r1,r4
0028a0  48b1              LDR      r0,|L1.11112|
0028a2  3818              SUBS     r0,r0,#0x18
0028a4  f7fffffe          BL       __2printf
;;;442    send_chunk();
0028a8  f7fffffe          BL       send_chunk
;;;443    	//sleep modules;
;;;444    //	do{
;;;445    //				accel_read();
;;;446    //				motion_samples = 0;
;;;447    //				detect_motion();
;;;448    //				
;;;449    //	}while(motion != 1);
;;;450    //	motion_samples = 0;
;;;451    //wakeup modules;
;;;452    }
0028ac  bd38              POP      {r3-r5,pc}
;;;9      #include "accelerometer.c"
                          ENDP

                  hal_i2c_init PROC
;;;72     // -------------------------------------------------
;;;73     void hal_i2c_init(I2C_MemMapPtr p)
0028ae  49c0              LDR      r1,|L1.11184|
;;;74     {
;;;75        // SIM_SCGC4 |= SIM_SCGC4_I2C1_MASK;
;;;76     
;;;77     		SIM_SCGC4 |= SIM_SCGC4_I2C0_MASK;
0028b0  6b49              LDR      r1,[r1,#0x34]
0028b2  2240              MOVS     r2,#0x40
0028b4  4311              ORRS     r1,r1,r2
0028b6  4abe              LDR      r2,|L1.11184|
0028b8  6351              STR      r1,[r2,#0x34]
;;;78         
;;;79           // configure GPIO for I2C function
;;;80         PORTE_PCR24 = PORT_PCR_MUX(5);
0028ba  2105              MOVS     r1,#5
0028bc  0209              LSLS     r1,r1,#8
0028be  4abd              LDR      r2,|L1.11188|
0028c0  6211              STR      r1,[r2,#0x20]
;;;81         PORTE_PCR25 = PORT_PCR_MUX(5);
0028c2  6251              STR      r1,[r2,#0x24]
;;;82     
;;;83     
;;;84         
;;;85         p->F  = 0x14; // baudrate
0028c4  2114              MOVS     r1,#0x14
0028c6  7041              STRB     r1,[r0,#1]
;;;86         p->C1 = 0x80; // enable IIC
0028c8  2180              MOVS     r1,#0x80
0028ca  7081              STRB     r1,[r0,#2]
;;;87     }
0028cc  4770              BX       lr
;;;88     
                          ENDP

                  hal_dev_mma8451_init PROC
;;;10     
;;;11     void hal_dev_mma8451_init(void)
0028ce  b500              PUSH     {lr}
;;;12     {
;;;13       hal_i2c_init(I2C0_B);
0028d0  48b9              LDR      r0,|L1.11192|
0028d2  f7fffffe          BL       hal_i2c_init
;;;14     }
0028d6  bd00              POP      {pc}
;;;15     
                          ENDP

                  hal_dev_mma8451_write_reg PROC
;;;55     }
;;;56     void hal_dev_mma8451_write_reg(uint8 addr, uint8 data)
0028d8  b570              PUSH     {r4-r6,lr}
;;;57     {
0028da  4604              MOV      r4,r0
0028dc  460d              MOV      r5,r1
;;;58         i2c_start(I2C0_B);
0028de  48b6              LDR      r0,|L1.11192|
0028e0  f7fffffe          BL       i2c_start
;;;59     
;;;60         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS|I2C_WRITE);
0028e4  213a              MOVS     r1,#0x3a
0028e6  48b4              LDR      r0,|L1.11192|
0028e8  f7fffffe          BL       i2c_write_byte
;;;61         i2c_wait(I2C0_B);
0028ec  48b2              LDR      r0,|L1.11192|
0028ee  f7fffffe          BL       i2c_wait
;;;62         i2c_get_ack(I2C0_B);
0028f2  48b1              LDR      r0,|L1.11192|
0028f4  f7fffffe          BL       i2c_get_ack
;;;63     
;;;64         i2c_write_byte(I2C0_B, addr);
0028f8  4621              MOV      r1,r4
0028fa  48af              LDR      r0,|L1.11192|
0028fc  f7fffffe          BL       i2c_write_byte
;;;65         i2c_wait(I2C0_B);
002900  48ad              LDR      r0,|L1.11192|
002902  f7fffffe          BL       i2c_wait
;;;66         i2c_get_ack(I2C0_B);
002906  48ac              LDR      r0,|L1.11192|
002908  f7fffffe          BL       i2c_get_ack
;;;67     
;;;68         i2c_write_byte(I2C0_B, data);
00290c  4629              MOV      r1,r5
00290e  48aa              LDR      r0,|L1.11192|
002910  f7fffffe          BL       i2c_write_byte
;;;69         i2c_wait(I2C0_B);
002914  48a8              LDR      r0,|L1.11192|
002916  f7fffffe          BL       i2c_wait
;;;70         i2c_get_ack(I2C0_B);
00291a  48a7              LDR      r0,|L1.11192|
00291c  f7fffffe          BL       i2c_get_ack
;;;71     
;;;72         i2c_stop(I2C0_B);
002920  48a5              LDR      r0,|L1.11192|
002922  f7fffffe          BL       i2c_stop
;;;73         pause();
002926  f7fffffe          BL       pause
;;;74     }
00292a  bd70              POP      {r4-r6,pc}
;;;75     
                          ENDP

                  i2c_give_ack PROC
;;;29     }
;;;30     void i2c_give_ack(I2C_MemMapPtr p)
00292c  7881              LDRB     r1,[r0,#2]
;;;31     {
;;;32         p->C1 &= ~I2C_C1_TXAK_MASK;
00292e  2208              MOVS     r2,#8
002930  4391              BICS     r1,r1,r2
002932  7081              STRB     r1,[r0,#2]
;;;33     }
002934  4770              BX       lr
;;;34     void i2c_repeated_start(I2C_MemMapPtr p)
                          ENDP

                  hal_i2c_deinit PROC
;;;88     
;;;89     void hal_i2c_deinit(I2C_MemMapPtr p)
002936  2100              MOVS     r1,#0
;;;90     {
;;;91         p->C1 = 0x00;
002938  7081              STRB     r1,[r0,#2]
;;;92         
;;;93         SIM_SCGC4 &= ~SIM_SCGC4_I2C1_MASK;
00293a  499d              LDR      r1,|L1.11184|
00293c  6b49              LDR      r1,[r1,#0x34]
00293e  2280              MOVS     r2,#0x80
002940  4391              BICS     r1,r1,r2
002942  4a9b              LDR      r2,|L1.11184|
002944  6351              STR      r1,[r2,#0x34]
;;;94     }
002946  4770              BX       lr
;;;95     
                          ENDP

                  accel_init PROC
;;;29     
;;;30     void accel_init(void)
002948  b510              PUSH     {r4,lr}
;;;31     {
;;;32         unsigned char tmp;
;;;33         //printf("****Accelerometor init ****\n");
;;;34         //Configure MMA8451 sensor //MMA8451Q
;;;35         hal_dev_mma8451_init();      //Initialize I2C modules
00294a  f7fffffe          BL       hal_dev_mma8451_init
;;;36         tmp = hal_dev_mma8451_read_reg(FXOS8700CQ_CTRL_REG1);
00294e  202a              MOVS     r0,#0x2a
002950  f7fffffe          BL       hal_dev_mma8451_read_reg
002954  b2c4              UXTB     r4,r0
;;;37         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp&0xFE);
002956  20fe              MOVS     r0,#0xfe
002958  4020              ANDS     r0,r0,r4
00295a  4601              MOV      r1,r0
00295c  202a              MOVS     r0,#0x2a
00295e  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;38         tmp &= ~0xFE;
002962  21fe              MOVS     r1,#0xfe
002964  4620              MOV      r0,r4
002966  4388              BICS     r0,r0,r1
002968  4604              MOV      r4,r0
;;;39         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp|0x02);
00296a  2002              MOVS     r0,#2
00296c  4320              ORRS     r0,r0,r4
00296e  4601              MOV      r1,r0
002970  202a              MOVS     r0,#0x2a
002972  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;40         tmp |= 0x02;
002976  2002              MOVS     r0,#2
002978  4304              ORRS     r4,r4,r0
;;;41         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp|0x01);
00297a  2001              MOVS     r0,#1
00297c  4320              ORRS     r0,r0,r4
00297e  4601              MOV      r1,r0
002980  202a              MOVS     r0,#0x2a
002982  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;42     //		tmp = hal_dev_mma8451_read_reg(A_FFMT_CFG);
;;;43     //		hal_dev_mma8451_write_reg(A_FFMT_CFG,hal_dev_mma8451_read_reg(A_FFMT_CFG)|0x40);
;;;44     }
002986  bd10              POP      {r4,pc}
;;;45     
                          ENDP

                  RELAY_init PROC
;;;8      
;;;9      void RELAY_init(void)
002988  4889              LDR      r0,|L1.11184|
;;;10     {
;;;11     
;;;12         SIM_SCGC5 |= SIM_SCGC5_PORTA_MASK ;      //Turn on clock to PORTE & D module
00298a  6b80              LDR      r0,[r0,#0x38]
00298c  2101              MOVS     r1,#1
00298e  0249              LSLS     r1,r1,#9
002990  4308              ORRS     r0,r0,r1
002992  4987              LDR      r1,|L1.11184|
002994  6388              STR      r0,[r1,#0x38]
;;;13         PORTA_PCR1 = PORT_PCR_MUX(0x1);            //Set the PTA1 pin multiplexer to GPIO mode
002996  1588              ASRS     r0,r1,#22
002998  4988              LDR      r1,|L1.11196|
00299a  6048              STR      r0,[r1,#4]
;;;14         PORTA_PCR2 = PORT_PCR_MUX(0x1);            //Set the PTA1 pin multiplexer to GPIO mode
00299c  6088              STR      r0,[r1,#8]
;;;15     	
;;;16         GPIOA_PSOR |= IGNITION_SHIFT | FUEL_SHIFT;      //Set the initial output state to high	
00299e  4888              LDR      r0,|L1.11200|
0029a0  6840              LDR      r0,[r0,#4]
0029a2  2106              MOVS     r1,#6
0029a4  4308              ORRS     r0,r0,r1
0029a6  4986              LDR      r1,|L1.11200|
0029a8  6048              STR      r0,[r1,#4]
;;;17         GPIOA_PDDR |= IGNITION_SHIFT | FUEL_SHIFT;  //Set the pin's direction to output	
0029aa  4608              MOV      r0,r1
0029ac  6940              LDR      r0,[r0,#0x14]
0029ae  2106              MOVS     r1,#6
0029b0  4308              ORRS     r0,r0,r1
0029b2  4983              LDR      r1,|L1.11200|
0029b4  6148              STR      r0,[r1,#0x14]
;;;18     	
;;;19     IGNITION_ON;
0029b6  2002              MOVS     r0,#2
0029b8  6088              STR      r0,[r1,#8]
;;;20     FUEL_ON;
0029ba  2004              MOVS     r0,#4
0029bc  6088              STR      r0,[r1,#8]
;;;21     	
;;;22     }
0029be  4770              BX       lr
;;;23     
                          ENDP

                  LED_init PROC
;;;24     
;;;25     void LED_init(void){
0029c0  487b              LDR      r0,|L1.11184|
;;;26       
;;;27         SIM_SCGC5 |= SIM_SCGC5_PORTE_MASK | SIM_SCGC5_PORTD_MASK | SIM_SCGC5_PORTC_MASK ;      //Turn on clock to PORTE & D module
0029c2  6b80              LDR      r0,[r0,#0x38]
0029c4  2107              MOVS     r1,#7
0029c6  02c9              LSLS     r1,r1,#11
0029c8  4308              ORRS     r0,r0,r1
0029ca  4979              LDR      r1,|L1.11184|
0029cc  6388              STR      r0,[r1,#0x38]
;;;28         
;;;29         PORTE_PCR29 = PORT_PCR_MUX(0x1);            //Set the PTE29 pin multiplexer to GPIO mode
0029ce  1588              ASRS     r0,r1,#22
0029d0  4978              LDR      r1,|L1.11188|
0029d2  6348              STR      r0,[r1,#0x34]
;;;30         PORTE_PCR31 = PORT_PCR_MUX(0x1);	        //Set the PTE31 pin multiplexer to GPIO mode
0029d4  63c8              STR      r0,[r1,#0x3c]
;;;31         PORTD_PCR5 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode
0029d6  497b              LDR      r1,|L1.11204|
0029d8  6148              STR      r0,[r1,#0x14]
;;;32     	
;;;33         PORTC_PCR5 = PORT_PCR_MUX(0x1);            //Set the PTE29 pin multiplexer to GPIO mode
0029da  497b              LDR      r1,|L1.11208|
0029dc  6148              STR      r0,[r1,#0x14]
;;;34         PORTC_PCR6 = PORT_PCR_MUX(0x1);	        //Set the PTE31 pin multiplexer to GPIO mode
0029de  6188              STR      r0,[r1,#0x18]
;;;35         PORTC_PCR7 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode	
0029e0  61c8              STR      r0,[r1,#0x1c]
;;;36         PORTC_PCR8 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode	    
0029e2  6208              STR      r0,[r1,#0x20]
;;;37     	
;;;38         GPIOE_PSOR |= RED_SHIFT | GREEN_SHIFT;      //Set the initial output state to high
0029e4  4879              LDR      r0,|L1.11212|
0029e6  6840              LDR      r0,[r0,#4]
0029e8  2105              MOVS     r1,#5
0029ea  0749              LSLS     r1,r1,#29
0029ec  4308              ORRS     r0,r0,r1
0029ee  4977              LDR      r1,|L1.11212|
0029f0  6048              STR      r0,[r1,#4]
;;;39         GPIOD_PSOR |= BLUE_SHIFT;               	//Set the inital output state to high
0029f2  4876              LDR      r0,|L1.11212|
0029f4  3840              SUBS     r0,r0,#0x40
0029f6  6840              LDR      r0,[r0,#4]
0029f8  2120              MOVS     r1,#0x20
0029fa  4308              ORRS     r0,r0,r1
0029fc  4973              LDR      r1,|L1.11212|
0029fe  3940              SUBS     r1,r1,#0x40
002a00  6048              STR      r0,[r1,#4]
;;;40     		GPIOC_PSOR |= REDBAT_SHIFT | BLUEBAT_SHIFT | GREENBAT_SHIFT; 
002a02  486f              LDR      r0,|L1.11200|
002a04  3080              ADDS     r0,r0,#0x80
002a06  6840              LDR      r0,[r0,#4]
002a08  21ff              MOVS     r1,#0xff
002a0a  31c1              ADDS     r1,r1,#0xc1
002a0c  4308              ORRS     r0,r0,r1
002a0e  496c              LDR      r1,|L1.11200|
002a10  3180              ADDS     r1,r1,#0x80
002a12  6048              STR      r0,[r1,#4]
;;;41     		GPIOC_PSOR |= RESET_SHIFT;
002a14  4608              MOV      r0,r1
002a16  6840              LDR      r0,[r0,#4]
002a18  2120              MOVS     r1,#0x20
002a1a  4308              ORRS     r0,r0,r1
002a1c  4968              LDR      r1,|L1.11200|
002a1e  3180              ADDS     r1,r1,#0x80
002a20  6048              STR      r0,[r1,#4]
;;;42         
;;;43         GPIOE_PDDR |= RED_SHIFT | GREEN_SHIFT;  //Set the pin's direction to output
002a22  486a              LDR      r0,|L1.11212|
002a24  6940              LDR      r0,[r0,#0x14]
002a26  2105              MOVS     r1,#5
002a28  0749              LSLS     r1,r1,#29
002a2a  4308              ORRS     r0,r0,r1
002a2c  4967              LDR      r1,|L1.11212|
002a2e  6148              STR      r0,[r1,#0x14]
;;;44         GPIOD_PDDR |= BLUE_SHIFT;               //Set the pin's direction to output
002a30  4866              LDR      r0,|L1.11212|
002a32  3840              SUBS     r0,r0,#0x40
002a34  6940              LDR      r0,[r0,#0x14]
002a36  2120              MOVS     r1,#0x20
002a38  4308              ORRS     r0,r0,r1
002a3a  4964              LDR      r1,|L1.11212|
002a3c  3940              SUBS     r1,r1,#0x40
002a3e  6148              STR      r0,[r1,#0x14]
;;;45     		GPIOC_PDDR |= REDBAT_SHIFT | BLUEBAT_SHIFT | GREENBAT_SHIFT | RESET_SHIFT; 
002a40  485f              LDR      r0,|L1.11200|
002a42  3080              ADDS     r0,r0,#0x80
002a44  6940              LDR      r0,[r0,#0x14]
002a46  21ff              MOVS     r1,#0xff
002a48  31e1              ADDS     r1,r1,#0xe1
002a4a  4308              ORRS     r0,r0,r1
002a4c  495c              LDR      r1,|L1.11200|
002a4e  3180              ADDS     r1,r1,#0x80
002a50  6148              STR      r0,[r1,#0x14]
;;;46         
;;;47         RED_OFF;		//Turn off RED LED
002a52  0588              LSLS     r0,r1,#22
002a54  495d              LDR      r1,|L1.11212|
002a56  6048              STR      r0,[r1,#4]
;;;48         GREEN_OFF;	//Turn off GREEN LED
002a58  0080              LSLS     r0,r0,#2
002a5a  6048              STR      r0,[r1,#4]
;;;49         BLUE_OFF;		//Turn off BLUE LED
002a5c  2020              MOVS     r0,#0x20
002a5e  495b              LDR      r1,|L1.11212|
002a60  3940              SUBS     r1,r1,#0x40
002a62  6048              STR      r0,[r1,#4]
;;;50     		REDBAT_OFF;
002a64  2040              MOVS     r0,#0x40
002a66  4956              LDR      r1,|L1.11200|
002a68  3180              ADDS     r1,r1,#0x80
002a6a  6048              STR      r0,[r1,#4]
;;;51     		GREENBAT_OFF;
002a6c  2080              MOVS     r0,#0x80
002a6e  6048              STR      r0,[r1,#4]
;;;52     		BLUEBAT_OFF;
002a70  0040              LSLS     r0,r0,#1
002a72  6048              STR      r0,[r1,#4]
;;;53     		RESET_OFF;
002a74  2020              MOVS     r0,#0x20
002a76  6088              STR      r0,[r1,#8]
;;;54     		
;;;55     	
;;;56     }
002a78  4770              BX       lr
;;;57     
                          ENDP

                  SW1_init PROC
;;;63     
;;;64     void SW1_init(void){
002a7a  484d              LDR      r0,|L1.11184|
;;;65     
;;;66     #ifdef CMSIS
;;;67     	SIM_SCGC5 |= SIM_SCGC5_PORTC_MASK;	//Turn on clock to PORTC module
002a7c  6b80              LDR      r0,[r0,#0x38]
002a7e  2101              MOVS     r1,#1
002a80  02c9              LSLS     r1,r1,#11
002a82  4308              ORRS     r0,r0,r1
002a84  494a              LDR      r1,|L1.11184|
002a86  6388              STR      r0,[r1,#0x38]
;;;68     	
;;;69     	PORTC_PCR3 = PORT_PCR_IRQC(10)|PORT_PCR_PE_MASK|PORT_PCR_PS_MASK|PORT_PCR_MUX(0x1);	//Configure SW1 for GPIO w/interrupt
002a88  4851              LDR      r0,|L1.11216|
002a8a  494f              LDR      r1,|L1.11208|
002a8c  60c8              STR      r0,[r1,#0xc]
;;;70     	
;;;71     	SIM_SCGC5 |= SIM_SCGC5_PORTD_MASK;	//Turn on clock to PORTD module
002a8e  4848              LDR      r0,|L1.11184|
002a90  6b80              LDR      r0,[r0,#0x38]
002a92  2101              MOVS     r1,#1
002a94  0309              LSLS     r1,r1,#12
002a96  4308              ORRS     r0,r0,r1
002a98  4945              LDR      r1,|L1.11184|
002a9a  6388              STR      r0,[r1,#0x38]
;;;72     	
;;;73     	PORTD_PCR6 = PORT_PCR_IRQC(10)|PORT_PCR_PE_MASK|PORT_PCR_PS_MASK|PORT_PCR_MUX(0x1);	//Configure SW1 for GPIO w/interrupt
002a9c  484c              LDR      r0,|L1.11216|
002a9e  4949              LDR      r1,|L1.11204|
002aa0  6188              STR      r0,[r1,#0x18]
;;;74     	
;;;75     	
;;;76     	
;;;77     	enable_irq(PORTD_IRQn);		//PORTD & PORTC share interrupt vector
002aa2  201f              MOVS     r0,#0x1f
002aa4  2101              MOVS     r1,#1
002aa6  4081              LSLS     r1,r1,r0
002aa8  4a4a              LDR      r2,|L1.11220|
002aaa  6011              STR      r1,[r2,#0]
002aac  bf00              NOP      
;;;78     #else
;;;79             
;;;80             enable_irq(31);
;;;81             set_irq_priority(31, 1);
;;;82             
;;;83             SIM_SCGC5 |= SIM_SCGC5_PORTC_MASK;	//Turn on clock to PORTC module
;;;84             
;;;85             PORTC_PCR3 = PORT_PCR_ISF_MASK |PORT_PCR_MUX(0x1)| PORT_PCR_PS_MASK| PORT_PCR_PE_MASK| PORT_PCR_PFE_MASK| PORT_PCR_IRQC(10);
;;;86             
;;;87     #endif
;;;88     }
002aae  4770              BX       lr
;;;89     
                          ENDP

                  LED_state PROC
;;;137    
;;;138    void LED_state(void){
002ab0  b500              PUSH     {lr}
;;;139    	
;;;140    #ifdef CMSIS
;;;141    
;;;142    #endif
;;;143    			
;;;144    	switch(stateCount){
002ab2  4849              LDR      r0,|L1.11224|
002ab4  7800              LDRB     r0,[r0,#0]  ; stateCount
002ab6  0003              MOVS     r3,r0
002ab8  f7fffffe          BL       __ARM_common_switch8
002abc  063b040f          DCB      0x06,0x3b,0x04,0x0f
002ac0  1a25303b          DCB      0x1a,0x25,0x30,0x3b
;;;145    	
;;;146    #ifndef CMSIS
;;;147                case 0:     //Red
;;;148                       RED_ON;
;;;149                       GREEN_OFF;
;;;150                       BLUE_OFF;
;;;151                       break;
;;;152    #endif
;;;153                case 1:	//Yellow
;;;154    		               RED_ON;
002ac4  2001              MOVS     r0,#1
002ac6  0740              LSLS     r0,r0,#29
002ac8  4940              LDR      r1,|L1.11212|
002aca  6088              STR      r0,[r1,#8]
;;;155    		               GREEN_ON;
002acc  0080              LSLS     r0,r0,#2
002ace  6088              STR      r0,[r1,#8]
;;;156    		               BLUE_OFF;
002ad0  2020              MOVS     r0,#0x20
002ad2  493e              LDR      r1,|L1.11212|
002ad4  3940              SUBS     r1,r1,#0x40
002ad6  6048              STR      r0,[r1,#4]
;;;157    		               break;
002ad8  e039              B        |L1.11086|
;;;158    				
;;;159                case 2:	//Green
;;;160    		               RED_OFF;
002ada  2001              MOVS     r0,#1
002adc  0740              LSLS     r0,r0,#29
002ade  493b              LDR      r1,|L1.11212|
002ae0  6048              STR      r0,[r1,#4]
;;;161    		               GREEN_ON;
002ae2  0080              LSLS     r0,r0,#2
002ae4  6088              STR      r0,[r1,#8]
;;;162    		               BLUE_OFF;
002ae6  2020              MOVS     r0,#0x20
002ae8  4938              LDR      r1,|L1.11212|
002aea  3940              SUBS     r1,r1,#0x40
002aec  6048              STR      r0,[r1,#4]
;;;163    		               break;
002aee  e02e              B        |L1.11086|
;;;164    				
;;;165                case 3:	//Blue
;;;166    		               RED_OFF;
002af0  2001              MOVS     r0,#1
002af2  0740              LSLS     r0,r0,#29
002af4  4935              LDR      r1,|L1.11212|
002af6  6048              STR      r0,[r1,#4]
;;;167    		               GREEN_OFF;
002af8  0080              LSLS     r0,r0,#2
002afa  6048              STR      r0,[r1,#4]
;;;168    		               BLUE_ON;
002afc  2020              MOVS     r0,#0x20
002afe  4933              LDR      r1,|L1.11212|
002b00  3940              SUBS     r1,r1,#0x40
002b02  6088              STR      r0,[r1,#8]
;;;169    		               break;
002b04  e023              B        |L1.11086|
;;;170    				
;;;171                case 4:	//Violet
;;;172    		               RED_ON;
002b06  2001              MOVS     r0,#1
002b08  0740              LSLS     r0,r0,#29
002b0a  4930              LDR      r1,|L1.11212|
002b0c  6088              STR      r0,[r1,#8]
;;;173    		               GREEN_OFF;
002b0e  0080              LSLS     r0,r0,#2
002b10  6048              STR      r0,[r1,#4]
;;;174    		               BLUE_ON;
002b12  2020              MOVS     r0,#0x20
002b14  492d              LDR      r1,|L1.11212|
002b16  3940              SUBS     r1,r1,#0x40
002b18  6088              STR      r0,[r1,#8]
;;;175    		               break;
002b1a  e018              B        |L1.11086|
;;;176    				
;;;177                case 5:	//White
;;;178    		              RED_ON;
002b1c  2001              MOVS     r0,#1
002b1e  0740              LSLS     r0,r0,#29
002b20  492a              LDR      r1,|L1.11212|
002b22  6088              STR      r0,[r1,#8]
;;;179    		              GREEN_ON;
002b24  0080              LSLS     r0,r0,#2
002b26  6088              STR      r0,[r1,#8]
;;;180    		              BLUE_ON;
002b28  2020              MOVS     r0,#0x20
002b2a  4928              LDR      r1,|L1.11212|
002b2c  3940              SUBS     r1,r1,#0x40
002b2e  6088              STR      r0,[r1,#8]
;;;181    		              break;
002b30  e00d              B        |L1.11086|
;;;182    				
;;;183                default:	//Red
;;;184    #ifdef CMSIS
;;;185    		              RED_ON;
002b32  2001              MOVS     r0,#1
002b34  0740              LSLS     r0,r0,#29
002b36  4925              LDR      r1,|L1.11212|
002b38  6088              STR      r0,[r1,#8]
;;;186    		              GREEN_OFF;
002b3a  0080              LSLS     r0,r0,#2
002b3c  6048              STR      r0,[r1,#4]
;;;187    		              BLUE_OFF;
002b3e  2020              MOVS     r0,#0x20
002b40  4922              LDR      r1,|L1.11212|
002b42  3940              SUBS     r1,r1,#0x40
002b44  6048              STR      r0,[r1,#4]
;;;188    		              stateCount = 0;	//Reset state counter
002b46  2000              MOVS     r0,#0
002b48  4923              LDR      r1,|L1.11224|
002b4a  7008              STRB     r0,[r1,#0]
;;;189    			      break;
002b4c  bf00              NOP      
                  |L1.11086|
002b4e  bf00              NOP                            ;157
;;;190    #else
;;;191                      stateCount = 0;   //Reset state counter
;;;192    		              break;
;;;193    #endif
;;;194        }
;;;195    	
;;;196    }
002b50  bd00              POP      {pc}
002b52  0000              DCW      0x0000
                  |L1.11092|
                          DCD      lptmr_interrupt
                  |L1.11096|
                          DCD      0x4006a000
                  |L1.11100|
                          DCD      0x4006b000
                  |L1.11104|
                          DCD      ||.text||+0x2238
                  |L1.11108|
                          DCD      uart_string_gsm
                  |L1.11112|
                          DCD      ||.text||+0x944
                  |L1.11116|
                          DCD      0x000007d1
                  |L1.11120|
002b70  4f4b00            DCB      "OK",0
002b73  00                DCB      0
                  |L1.11124|
                          DCD      ||.text||+0x132c
                  |L1.11128|
                          DCD      data
                  |L1.11132|
002b7c  7265696e          DCB      "reinitialization...\n",0
002b80  69746961
002b84  6c697a61
002b88  74696f6e
002b8c  2e2e2e0a
002b90  00      
002b91  00                DCB      0
002b92  00                DCB      0
002b93  00                DCB      0
                  |L1.11156|
                          DCD      ||.text||+0x26ec
                  |L1.11160|
                          DCD      fsize
                  |L1.11164|
                          DCD      0x44af0000
                  |L1.11168|
                          DCD      port
                  |L1.11172|
                          DCD      ||ip||
                  |L1.11176|
                          DCD      at_
                  |L1.11180|
                          DCD      tmeout
                  |L1.11184|
                          DCD      0x40048000
                  |L1.11188|
                          DCD      0x4004d040
                  |L1.11192|
                          DCD      0x40066000
                  |L1.11196|
                          DCD      0x40049000
                  |L1.11200|
                          DCD      0x400ff000
                  |L1.11204|
                          DCD      0x4004c000
                  |L1.11208|
                          DCD      0x4004b000
                  |L1.11212|
                          DCD      0x400ff100
                  |L1.11216|
                          DCD      0x000a0103
                  |L1.11220|
                          DCD      0xe000e100
                  |L1.11224|
                          DCD      stateCount
                          ENDP

                  PORTD_IRQHandler PROC
;;;90     #ifdef CMSIS
;;;91     void PORTD_IRQHandler(void){
002bdc  b500              PUSH     {lr}
;;;92       
;;;93     	if(PORTC_ISFR & (1 << SW_PIN))		//Check for interrupt on PORTC Pin 3
002bde  48fe              LDR      r0,|L1.12248|
002be0  6a00              LDR      r0,[r0,#0x20]
002be2  2108              MOVS     r1,#8
002be4  4008              ANDS     r0,r0,r1
002be6  2800              CMP      r0,#0
002be8  d00f              BEQ      |L1.11274|
;;;94     	{
;;;95     		PORTC_ISFR |= (1 << SW_PIN);
002bea  48fb              LDR      r0,|L1.12248|
002bec  6a00              LDR      r0,[r0,#0x20]
002bee  4308              ORRS     r0,r0,r1
002bf0  49f9              LDR      r1,|L1.12248|
002bf2  6208              STR      r0,[r1,#0x20]
;;;96     		gu32PortStatus |= (1 << PORTC_EVENT);	//Update port status variable
002bf4  48f9              LDR      r0,|L1.12252|
002bf6  6800              LDR      r0,[r0,#0]  ; gu32PortStatus
002bf8  2101              MOVS     r1,#1
002bfa  4308              ORRS     r0,r0,r1
002bfc  49f7              LDR      r1,|L1.12252|
002bfe  6008              STR      r0,[r1,#0]  ; gu32PortStatus
;;;97     	
;;;98     /**************ISR follows******/	
;;;99      stateCount++;
002c00  48f7              LDR      r0,|L1.12256|
002c02  7800              LDRB     r0,[r0,#0]  ; stateCount
002c04  1c40              ADDS     r0,r0,#1
002c06  49f6              LDR      r1,|L1.12256|
002c08  7008              STRB     r0,[r1,#0]
                  |L1.11274|
;;;100    	}
;;;101    	
;;;102    	if(PORTD_ISFR & (1 << 6))		//Check for interrupt on PORTD Pin 6
002c0a  48f6              LDR      r0,|L1.12260|
002c0c  6a00              LDR      r0,[r0,#0x20]
002c0e  2140              MOVS     r1,#0x40
002c10  4008              ANDS     r0,r0,r1
002c12  2800              CMP      r0,#0
002c14  d00d              BEQ      |L1.11314|
;;;103    	{
;;;104    		PORTD_ISFR |= (1 << 6);
002c16  48f3              LDR      r0,|L1.12260|
002c18  6a00              LDR      r0,[r0,#0x20]
002c1a  4308              ORRS     r0,r0,r1
002c1c  49f1              LDR      r1,|L1.12260|
002c1e  6208              STR      r0,[r1,#0x20]
;;;105    		gu32PortStatus |= (1 << PORTD_EVENT);	//Update port status variable
002c20  48ee              LDR      r0,|L1.12252|
002c22  6800              LDR      r0,[r0,#0]  ; gu32PortStatus
002c24  2101              MOVS     r1,#1
002c26  4308              ORRS     r0,r0,r1
002c28  49ec              LDR      r1,|L1.12252|
002c2a  6008              STR      r0,[r1,#0]  ; gu32PortStatus
;;;106    	
;;;107    /**************ISR follows******/	
;;;108    // stateCount++;
;;;109    		
;;;110    ringflag=1;
002c2c  2001              MOVS     r0,#1
002c2e  49ee              LDR      r1,|L1.12264|
002c30  7008              STRB     r0,[r1,#0]
                  |L1.11314|
;;;111    
;;;112    	}
;;;113    	
;;;114    	LED_state();
002c32  f7fffffe          BL       LED_state
;;;115    }
002c36  bd00              POP      {pc}
;;;116    
                          ENDP

                  PORTC_action PROC
;;;117    void PORTC_action(void){
002c38  4770              BX       lr
;;;118    }
;;;119    
                          ENDP

                  systick_init PROC
;;;7      
;;;8      void systick_init(void)
002c3a  2000              MOVS     r0,#0
;;;9      {
;;;10     		SYST_CVR = 0x0;	//clear current timer value
002c3c  49eb              LDR      r1,|L1.12268|
002c3e  6188              STR      r0,[r1,#0x18]
;;;11         SYST_RVR = (8000000/200)-1;
002c40  48eb              LDR      r0,|L1.12272|
002c42  6148              STR      r0,[r1,#0x14]
;;;12         SYST_CSR = SysTick_CSR_CLKSOURCE_MASK | SysTick_CSR_ENABLE_MASK;   
002c44  2005              MOVS     r0,#5
002c46  6108              STR      r0,[r1,#0x10]
;;;13     	
;;;14     }
002c48  4770              BX       lr
;;;15     
                          ENDP

                  systick_disable PROC
;;;16     void systick_disable(void)
002c4a  48e8              LDR      r0,|L1.12268|
;;;17     {
;;;18         SYST_CSR &= ~SysTick_CSR_ENABLE_MASK;
002c4c  6900              LDR      r0,[r0,#0x10]
002c4e  0840              LSRS     r0,r0,#1
002c50  0040              LSLS     r0,r0,#1
002c52  49e6              LDR      r1,|L1.12268|
002c54  6108              STR      r0,[r1,#0x10]
;;;19     }
002c56  4770              BX       lr
;;;20     
                          ENDP

                  cal_systick_read_overhead PROC
;;;21     void cal_systick_read_overhead(void)
002c58  b570              PUSH     {r4-r6,lr}
;;;22     {
;;;23       	uint32_t cnt_start_value;
;;;24         uint32_t cnt_end_value;
;;;25     	
;;;26     	cnt_start_value = SYST_CVR;
002c5a  48e4              LDR      r0,|L1.12268|
002c5c  6985              LDR      r5,[r0,#0x18]
;;;27       
;;;28         cnt_end_value = SYST_CVR;
002c5e  6984              LDR      r4,[r0,#0x18]
;;;29     	
;;;30     	overhead = cnt_start_value - cnt_end_value;
002c60  1b28              SUBS     r0,r5,r4
002c62  49e4              LDR      r1,|L1.12276|
002c64  6008              STR      r0,[r1,#0]  ; overhead
;;;31     	
;;;32     #ifdef DEBUG_PRINT
;;;33     	printf("systick start value: 0x%x\n\r", cnt_start_value);
002c66  4629              MOV      r1,r5
002c68  a0e3              ADR      r0,|L1.12280|
002c6a  f7fffffe          BL       __2printf
;;;34     	printf("systick end value: 0x%x\n\r", cnt_end_value);
002c6e  4621              MOV      r1,r4
002c70  a0e8              ADR      r0,|L1.12308|
002c72  f7fffffe          BL       __2printf
;;;35     	printf("systick current value read overhead: 0x%x\n\r", overhead);
002c76  48df              LDR      r0,|L1.12276|
002c78  6801              LDR      r1,[r0,#0]  ; overhead
002c7a  a0ed              ADR      r0,|L1.12336|
002c7c  f7fffffe          BL       __2printf
;;;36     #endif
;;;37     
;;;38     }
002c80  bd70              POP      {r4-r6,pc}
;;;13     #include "stdlib.h"
                          ENDP

                  remove_all_chars PROC
;;;56     
;;;57     void remove_all_chars(char* str, char c, char d) {
002c82  b530              PUSH     {r4,r5,lr}
002c84  4603              MOV      r3,r0
002c86  460c              MOV      r4,r1
;;;58         char *pr = str, *pw = str;
002c88  4619              MOV      r1,r3
002c8a  4618              MOV      r0,r3
;;;59         while (*pr) {
002c8c  e015              B        |L1.11450|
                  |L1.11406|
;;;60             *pw = *pr++;
002c8e  780d              LDRB     r5,[r1,#0]
002c90  7005              STRB     r5,[r0,#0]
002c92  1c49              ADDS     r1,r1,#1
;;;61     			pw += (*pw != c && *pw != d && *pw != ' ' && *pw != '/' && *pw != ':');
002c94  7805              LDRB     r5,[r0,#0]
002c96  42a5              CMP      r5,r4
002c98  d00d              BEQ      |L1.11446|
002c9a  7805              LDRB     r5,[r0,#0]
002c9c  4295              CMP      r5,r2
002c9e  d00a              BEQ      |L1.11446|
002ca0  7805              LDRB     r5,[r0,#0]
002ca2  2d20              CMP      r5,#0x20
002ca4  d007              BEQ      |L1.11446|
002ca6  7805              LDRB     r5,[r0,#0]
002ca8  2d2f              CMP      r5,#0x2f
002caa  d004              BEQ      |L1.11446|
002cac  7805              LDRB     r5,[r0,#0]
002cae  2d3a              CMP      r5,#0x3a
002cb0  d001              BEQ      |L1.11446|
002cb2  2501              MOVS     r5,#1
002cb4  e000              B        |L1.11448|
                  |L1.11446|
002cb6  2500              MOVS     r5,#0
                  |L1.11448|
002cb8  1828              ADDS     r0,r5,r0
                  |L1.11450|
002cba  780d              LDRB     r5,[r1,#0]            ;59
002cbc  2d00              CMP      r5,#0                 ;59
002cbe  d1e6              BNE      |L1.11406|
;;;62         }
;;;63         *pw = '\0';
002cc0  7005              STRB     r5,[r0,#0]
;;;64     }
002cc2  bd30              POP      {r4,r5,pc}
;;;65     
                          ENDP

                  delay2 PROC
;;;75     }
;;;76      void delay2(int delaytime)
002cc4  e00c              B        |L1.11488|
                  |L1.11462|
;;;77     {
;;;78      while(delaytime--)
;;;79         {for(i=5000;i>0;i--);  // about 1 ms
002cc6  49e5              LDR      r1,|L1.12380|
002cc8  4ae5              LDR      r2,|L1.12384|
002cca  6011              STR      r1,[r2,#0]  ; i
002ccc  e004              B        |L1.11480|
                  |L1.11470|
002cce  49e4              LDR      r1,|L1.12384|
002cd0  6809              LDR      r1,[r1,#0]  ; i
002cd2  1e49              SUBS     r1,r1,#1
002cd4  4ae2              LDR      r2,|L1.12384|
002cd6  6011              STR      r1,[r2,#0]  ; i
                  |L1.11480|
002cd8  49e1              LDR      r1,|L1.12384|
002cda  6809              LDR      r1,[r1,#0]  ; i
002cdc  2900              CMP      r1,#0
002cde  dcf6              BGT      |L1.11470|
                  |L1.11488|
002ce0  4601              MOV      r1,r0                 ;78
002ce2  1e40              SUBS     r0,r0,#1              ;78
002ce4  2900              CMP      r1,#0                 ;78
002ce6  d1ee              BNE      |L1.11462|
;;;80         }
;;;81     }
002ce8  4770              BX       lr
;;;82                            
                          ENDP

                  get_imei PROC
;;;666    
;;;667    void get_imei()
002cea  b570              PUSH     {r4-r6,lr}
;;;668    {int c1nt,c1nt2=0;
002cec  2500              MOVS     r5,#0
;;;669    memset(imei,0,20);
002cee  2114              MOVS     r1,#0x14
002cf0  48dc              LDR      r0,|L1.12388|
002cf2  f7fffffe          BL       __aeabi_memclr4
;;;670    	clear();	
002cf6  f7fffffe          BL       clear
;;;671    	for(c1nt=0;c1nt<strlen(uart_string_gsm);c1nt++)
002cfa  2400              MOVS     r4,#0
002cfc  e035              B        |L1.11626|
                  |L1.11518|
;;;672    	{
;;;673    		if(( uart_string_gsm[c1nt] == '\n')	|| (uart_string_gsm[c1nt] == '\r')	|| (uart_string_gsm[c1nt] == 'A')	
002cfe  48da              LDR      r0,|L1.12392|
002d00  5d00              LDRB     r0,[r0,r4]
002d02  280a              CMP      r0,#0xa
002d04  d030              BEQ      |L1.11624|
002d06  48d8              LDR      r0,|L1.12392|
002d08  5d00              LDRB     r0,[r0,r4]
002d0a  280d              CMP      r0,#0xd
002d0c  d02c              BEQ      |L1.11624|
002d0e  48d6              LDR      r0,|L1.12392|
002d10  5d00              LDRB     r0,[r0,r4]
002d12  2841              CMP      r0,#0x41
002d14  d028              BEQ      |L1.11624|
;;;674    																				|| (uart_string_gsm[c1nt] == 'T')		|| (uart_string_gsm[c1nt] == '+')
002d16  48d4              LDR      r0,|L1.12392|
002d18  5d00              LDRB     r0,[r0,r4]
002d1a  2854              CMP      r0,#0x54
002d1c  d024              BEQ      |L1.11624|
002d1e  48d2              LDR      r0,|L1.12392|
002d20  5d00              LDRB     r0,[r0,r4]
002d22  282b              CMP      r0,#0x2b
002d24  d020              BEQ      |L1.11624|
;;;675    																				|| (uart_string_gsm[c1nt] == 'G')		|| (uart_string_gsm[c1nt] == 'S')
002d26  48d0              LDR      r0,|L1.12392|
002d28  5d00              LDRB     r0,[r0,r4]
002d2a  2847              CMP      r0,#0x47
002d2c  d01c              BEQ      |L1.11624|
002d2e  48ce              LDR      r0,|L1.12392|
002d30  5d00              LDRB     r0,[r0,r4]
002d32  2853              CMP      r0,#0x53
002d34  d018              BEQ      |L1.11624|
;;;676    																				|| (uart_string_gsm[c1nt] == 'N')		|| (uart_string_gsm[c1nt] == 'O')
002d36  48cc              LDR      r0,|L1.12392|
002d38  5d00              LDRB     r0,[r0,r4]
002d3a  284e              CMP      r0,#0x4e
002d3c  d014              BEQ      |L1.11624|
002d3e  48ca              LDR      r0,|L1.12392|
002d40  5d00              LDRB     r0,[r0,r4]
002d42  284f              CMP      r0,#0x4f
002d44  d010              BEQ      |L1.11624|
;;;677    																				|| (uart_string_gsm[c1nt] == 'K')		|| (uart_string_gsm[c1nt] == 'E')
002d46  48c8              LDR      r0,|L1.12392|
002d48  5d00              LDRB     r0,[r0,r4]
002d4a  284b              CMP      r0,#0x4b
002d4c  d00c              BEQ      |L1.11624|
002d4e  48c6              LDR      r0,|L1.12392|
002d50  5d00              LDRB     r0,[r0,r4]
002d52  2845              CMP      r0,#0x45
002d54  d008              BEQ      |L1.11624|
;;;678    																				|| (uart_string_gsm[c1nt] == 'R'))
002d56  48c4              LDR      r0,|L1.12392|
002d58  5d00              LDRB     r0,[r0,r4]
002d5a  2852              CMP      r0,#0x52
002d5c  d004              BEQ      |L1.11624|
;;;679    																				{}
;;;680    		
;;;681    		else
;;;682    		{	imei[c1nt2] = uart_string_gsm[c1nt]; c1nt2++;}		
002d5e  48c2              LDR      r0,|L1.12392|
002d60  5d00              LDRB     r0,[r0,r4]
002d62  49c0              LDR      r1,|L1.12388|
002d64  5548              STRB     r0,[r1,r5]
002d66  1c6d              ADDS     r5,r5,#1
                  |L1.11624|
002d68  1c64              ADDS     r4,r4,#1              ;671
                  |L1.11626|
002d6a  48bf              LDR      r0,|L1.12392|
002d6c  f7fffffe          BL       strlen
002d70  42a0              CMP      r0,r4                 ;671
002d72  d8c4              BHI      |L1.11518|
;;;683    		}
;;;684    }
002d74  bd70              POP      {r4-r6,pc}
;;;685    	
                          ENDP

                  bat_cind PROC
;;;1052   	
;;;1053   	void bat_cind()
002d76  b53e              PUSH     {r1-r5,lr}
;;;1054   	{int netwrk;char netwrk_c[1];
;;;1055   		
;;;1056   				printf("\n%s\n",send_GSM("\r\nAT+CIND?\r\n", "OK", "ERROR\r\n" , "ERROR:",999999));
002d78  48bc              LDR      r0,|L1.12396|
002d7a  4bbd              LDR      r3,|L1.12400|
002d7c  461a              MOV      r2,r3
002d7e  3208              ADDS     r2,r2,#8
002d80  a1bc              ADR      r1,|L1.12404|
002d82  9000              STR      r0,[sp,#0]
002d84  a0bc              ADR      r0,|L1.12408|
002d86  f7fffffe          BL       send_GSM
002d8a  4605              MOV      r5,r0
002d8c  4629              MOV      r1,r5
002d8e  48b8              LDR      r0,|L1.12400|
002d90  3014              ADDS     r0,r0,#0x14
002d92  f7fffffe          BL       __2printf
;;;1057   				parse_g(uart_string_gsm, 1, 2, ',', ',', netwrk_c);
002d96  a802              ADD      r0,sp,#8
002d98  212c              MOVS     r1,#0x2c
002d9a  460b              MOV      r3,r1
002d9c  2202              MOVS     r2,#2
002d9e  9100              STR      r1,[sp,#0]
002da0  9001              STR      r0,[sp,#4]
002da2  2101              MOVS     r1,#1
002da4  48b0              LDR      r0,|L1.12392|
002da6  f7fffffe          BL       parse_g
;;;1058   				netwrk = netwrk_c[0]- '0';
002daa  4668              MOV      r0,sp
002dac  7a00              LDRB     r0,[r0,#8]
002dae  4604              MOV      r4,r0
002db0  3c30              SUBS     r4,r4,#0x30
;;;1059   				printf("\n\t%d\n\t%d\n\t%d\n\t%d\n",netwrk,netwrk,netwrk,netwrk);
002db2  4623              MOV      r3,r4
002db4  4622              MOV      r2,r4
002db6  4621              MOV      r1,r4
002db8  a0b3              ADR      r0,|L1.12424|
002dba  9400              STR      r4,[sp,#0]
002dbc  f7fffffe          BL       __2printf
;;;1060   
;;;1061   		switch(netwrk)
002dc0  0023              MOVS     r3,r4
002dc2  f7fffffe          BL       __ARM_common_switch8
002dc6  064b              DCB      0x06,0x4b
002dc8  04122230          DCB      0x04,0x12,0x22,0x30
002dcc  3f4b              DCB      0x3f,0x4b
;;;1062   		{
;;;1063   			case 1:
;;;1064   				
;;;1065       RED_OFF;		//Turn off RED LED
002dce  2001              MOVS     r0,#1
002dd0  0740              LSLS     r0,r0,#29
002dd2  49b2              LDR      r1,|L1.12444|
002dd4  6048              STR      r0,[r1,#4]
;;;1066       GREEN_OFF;	//Turn off GREEN LED
002dd6  0080              LSLS     r0,r0,#2
002dd8  6048              STR      r0,[r1,#4]
;;;1067       BLUE_OFF;		//Turn off BLUE LED			
002dda  2020              MOVS     r0,#0x20
002ddc  49af              LDR      r1,|L1.12444|
002dde  3940              SUBS     r1,r1,#0x40
002de0  6048              STR      r0,[r1,#4]
;;;1068   			
;;;1069   				 RED_ON;		//Turn off RED LED
002de2  0600              LSLS     r0,r0,#24
002de4  49ad              LDR      r1,|L1.12444|
002de6  6088              STR      r0,[r1,#8]
;;;1070   					
;;;1071   			break;
002de8  e043              B        |L1.11890|
;;;1072   			
;;;1073   			case 2:
;;;1074   		
;;;1075       RED_OFF;		//Turn off RED LED
002dea  2001              MOVS     r0,#1
002dec  0740              LSLS     r0,r0,#29
002dee  49ab              LDR      r1,|L1.12444|
002df0  6048              STR      r0,[r1,#4]
;;;1076       GREEN_OFF;	//Turn off GREEN LED
002df2  0080              LSLS     r0,r0,#2
002df4  6048              STR      r0,[r1,#4]
;;;1077       BLUE_OFF;		//Turn off BLUE LED
002df6  2020              MOVS     r0,#0x20
002df8  49a8              LDR      r1,|L1.12444|
002dfa  3940              SUBS     r1,r1,#0x40
002dfc  6048              STR      r0,[r1,#4]
;;;1078   			
;;;1079   				 RED_ON;		//Turn off RED LED
002dfe  0600              LSLS     r0,r0,#24
002e00  49a6              LDR      r1,|L1.12444|
002e02  6088              STR      r0,[r1,#8]
;;;1080   				 GREEN_ON;
002e04  0080              LSLS     r0,r0,#2
002e06  6088              STR      r0,[r1,#8]
;;;1081   			
;;;1082   			break;
002e08  e033              B        |L1.11890|
;;;1083   			
;;;1084   			case 3:
;;;1085   				
;;;1086       RED_OFF;		//Turn off RED LED
002e0a  2001              MOVS     r0,#1
002e0c  0740              LSLS     r0,r0,#29
002e0e  49a3              LDR      r1,|L1.12444|
002e10  6048              STR      r0,[r1,#4]
;;;1087       GREEN_OFF;	//Turn off GREEN LED
002e12  0080              LSLS     r0,r0,#2
002e14  6048              STR      r0,[r1,#4]
;;;1088       BLUE_OFF;		//Turn off BLUE LED
002e16  2020              MOVS     r0,#0x20
002e18  49a0              LDR      r1,|L1.12444|
002e1a  3940              SUBS     r1,r1,#0x40
002e1c  6048              STR      r0,[r1,#4]
;;;1089   			
;;;1090   				 GREEN_ON;		//Turn off RED LED
002e1e  0680              LSLS     r0,r0,#26
002e20  499e              LDR      r1,|L1.12444|
002e22  6088              STR      r0,[r1,#8]
;;;1091   
;;;1092   			
;;;1093   			break;
002e24  e025              B        |L1.11890|
;;;1094   
;;;1095   			case 4:
;;;1096   				
;;;1097       RED_OFF;		//Turn off RED LED
002e26  2001              MOVS     r0,#1
002e28  0740              LSLS     r0,r0,#29
002e2a  499c              LDR      r1,|L1.12444|
002e2c  6048              STR      r0,[r1,#4]
;;;1098       GREEN_OFF;	//Turn off GREEN LED
002e2e  0080              LSLS     r0,r0,#2
002e30  6048              STR      r0,[r1,#4]
;;;1099       BLUE_OFF;		//Turn off BLUE LED
002e32  2020              MOVS     r0,#0x20
002e34  4999              LDR      r1,|L1.12444|
002e36  3940              SUBS     r1,r1,#0x40
002e38  6048              STR      r0,[r1,#4]
;;;1100   			
;;;1101   				 BLUE_ON;		//Turn off RED LED
002e3a  6088              STR      r0,[r1,#8]
;;;1102   				 GREEN_ON;
002e3c  0680              LSLS     r0,r0,#26
002e3e  4997              LDR      r1,|L1.12444|
002e40  6088              STR      r0,[r1,#8]
;;;1103   			
;;;1104   			break;
002e42  e016              B        |L1.11890|
;;;1105   			
;;;1106   			case 5:
;;;1107   				
;;;1108       RED_OFF;		//Turn off RED LED
002e44  2001              MOVS     r0,#1
002e46  0740              LSLS     r0,r0,#29
002e48  4994              LDR      r1,|L1.12444|
002e4a  6048              STR      r0,[r1,#4]
;;;1109       GREEN_OFF;	//Turn off GREEN LED
002e4c  0080              LSLS     r0,r0,#2
002e4e  6048              STR      r0,[r1,#4]
;;;1110       BLUE_OFF;		//Turn off BLUE LED
002e50  2020              MOVS     r0,#0x20
002e52  4992              LDR      r1,|L1.12444|
002e54  3940              SUBS     r1,r1,#0x40
002e56  6048              STR      r0,[r1,#4]
;;;1111   						
;;;1112   				 BLUE_ON;		//Turn off RED LED
002e58  6088              STR      r0,[r1,#8]
;;;1113   				
;;;1114   			break;
002e5a  e00a              B        |L1.11890|
;;;1115   			
;;;1116   			default:
;;;1117   			
;;;1118       RED_OFF;		//Turn off RED LED
002e5c  2001              MOVS     r0,#1
002e5e  0740              LSLS     r0,r0,#29
002e60  498e              LDR      r1,|L1.12444|
002e62  6048              STR      r0,[r1,#4]
;;;1119       GREEN_OFF;	//Turn off GREEN LED
002e64  0080              LSLS     r0,r0,#2
002e66  6048              STR      r0,[r1,#4]
;;;1120       BLUE_OFF;		//Turn off BLUE LED
002e68  2020              MOVS     r0,#0x20
002e6a  498c              LDR      r1,|L1.12444|
002e6c  3940              SUBS     r1,r1,#0x40
002e6e  6048              STR      r0,[r1,#4]
;;;1121   			
;;;1122   			break;
002e70  bf00              NOP      
                  |L1.11890|
002e72  bf00              NOP                            ;1071
;;;1123   			
;;;1124   			
;;;1125   
;;;1126   		}			
;;;1127   		
;;;1128   
;;;1129   
;;;1130   
;;;1131   
;;;1132   		
;;;1133   		
;;;1134   		
;;;1135   	}
002e74  bd3e              POP      {r1-r5,pc}
;;;1136   	
                          ENDP

                  loop PROC
;;;337    
;;;338    void loop()
002e76  b51c              PUSH     {r2-r4,lr}
;;;339    {
;;;340    				int qwe;
;;;341    	
;;;342    msg_sim800(); 
002e78  f7fffffe          BL       msg_sim800
;;;343    
;;;344    
;;;345    							bat_cind();
002e7c  f7fffffe          BL       bat_cind
;;;346    
;;;347    msg_sim800(); 
002e80  f7fffffe          BL       msg_sim800
;;;348    
;;;349    
;;;350    							GPS_COLLECT();//accel_read();detect_motion();
002e84  f7fffffe          BL       GPS_COLLECT
;;;351    
;;;352    msg_sim800(); 
002e88  f7fffffe          BL       msg_sim800
;;;353    
;;;354    
;;;355    							printf("\n%s\n",send_GSM("\r\nAT+CIPCLOSE\r\n", "CLOSE OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));		
002e8c  4884              LDR      r0,|L1.12448|
002e8e  6800              LDR      r0,[r0,#0]  ; tmeout
002e90  4b77              LDR      r3,|L1.12400|
002e92  461a              MOV      r2,r3
002e94  3208              ADDS     r2,r2,#8
002e96  a183              ADR      r1,|L1.12452|
002e98  9000              STR      r0,[sp,#0]
002e9a  a085              ADR      r0,|L1.12464|
002e9c  f7fffffe          BL       send_GSM
002ea0  4604              MOV      r4,r0
002ea2  4621              MOV      r1,r4
002ea4  4872              LDR      r0,|L1.12400|
002ea6  3014              ADDS     r0,r0,#0x14
002ea8  f7fffffe          BL       __2printf
;;;356    
;;;357    msg_sim800(); 
002eac  f7fffffe          BL       msg_sim800
;;;358    
;;;359    							GPS_COLLECT();
002eb0  f7fffffe          BL       GPS_COLLECT
;;;360    
;;;361    msg_sim800(); 
002eb4  f7fffffe          BL       msg_sim800
;;;362    
;;;363    							
;;;364    							printf("%s\n",send_GSM("\n\nAT+GSN\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
002eb8  4879              LDR      r0,|L1.12448|
002eba  6800              LDR      r0,[r0,#0]  ; tmeout
002ebc  4b6c              LDR      r3,|L1.12400|
002ebe  461a              MOV      r2,r3
002ec0  3208              ADDS     r2,r2,#8
002ec2  4611              MOV      r1,r2
002ec4  311c              ADDS     r1,r1,#0x1c
002ec6  9000              STR      r0,[sp,#0]
002ec8  a07d              ADR      r0,|L1.12480|
002eca  f7fffffe          BL       send_GSM
002ece  4604              MOV      r4,r0
002ed0  4621              MOV      r1,r4
002ed2  487e              LDR      r0,|L1.12492|
002ed4  f7fffffe          BL       __2printf
;;;365    
;;;366    							get_imei();clear();							
002ed8  f7fffffe          BL       get_imei
002edc  f7fffffe          BL       clear
;;;367    							printf("\n%s\t->\t%d\n",imei,strlen(imei));
002ee0  4860              LDR      r0,|L1.12388|
002ee2  f7fffffe          BL       strlen
002ee6  4604              MOV      r4,r0
002ee8  4622              MOV      r2,r4
002eea  495e              LDR      r1,|L1.12388|
002eec  a078              ADR      r0,|L1.12496|
002eee  f7fffffe          BL       __2printf
;;;368    							memset(at_,0,100);
002ef2  2164              MOVS     r1,#0x64
002ef4  4879              LDR      r0,|L1.12508|
002ef6  f7fffffe          BL       __aeabi_memclr4
;;;369    							sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
002efa  4b79              LDR      r3,|L1.12512|
002efc  4a79              LDR      r2,|L1.12516|
002efe  497a              LDR      r1,|L1.12520|
002f00  4876              LDR      r0,|L1.12508|
002f02  f7fffffe          BL       __2sprintf
;;;370    							
;;;371    							GPS_COLLECT();//accel_read();detect_motion();
002f06  f7fffffe          BL       GPS_COLLECT
;;;372    							
;;;373    							printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR" , "ERROR:",tmeout));										
002f0a  4865              LDR      r0,|L1.12448|
002f0c  6800              LDR      r0,[r0,#0]  ; tmeout
002f0e  4b58              LDR      r3,|L1.12400|
002f10  461a              MOV      r2,r3
002f12  322c              ADDS     r2,r2,#0x2c
002f14  4974              LDR      r1,|L1.12520|
002f16  3124              ADDS     r1,r1,#0x24
002f18  9000              STR      r0,[sp,#0]
002f1a  4870              LDR      r0,|L1.12508|
002f1c  f7fffffe          BL       send_GSM
002f20  4604              MOV      r4,r0
002f22  4621              MOV      r1,r4
002f24  4852              LDR      r0,|L1.12400|
002f26  3014              ADDS     r0,r0,#0x14
002f28  f7fffffe          BL       __2printf
;;;374    
;;;375    							GPS_COLLECT();//accel_read();detect_motion();
002f2c  f7fffffe          BL       GPS_COLLECT
;;;376    
;;;377    							printf("\n%d\n",strlen(data));
002f30  486e              LDR      r0,|L1.12524|
002f32  f7fffffe          BL       strlen
002f36  4604              MOV      r4,r0
002f38  4621              MOV      r1,r4
002f3a  a06d              ADR      r0,|L1.12528|
002f3c  f7fffffe          BL       __2printf
;;;378    							
;;;379    							printf("\n%s\n",send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR\r\n" , "CONNECT FAIL",tmeout));	
002f40  4857              LDR      r0,|L1.12448|
002f42  6800              LDR      r0,[r0,#0]  ; tmeout
002f44  a36c              ADR      r3,|L1.12536|
002f46  4a4a              LDR      r2,|L1.12400|
002f48  3208              ADDS     r2,r2,#8
002f4a  a16f              ADR      r1,|L1.12552|
002f4c  9000              STR      r0,[sp,#0]
002f4e  485f              LDR      r0,|L1.12492|
002f50  300c              ADDS     r0,r0,#0xc
002f52  f7fffffe          BL       send_GSM
002f56  4604              MOV      r4,r0
002f58  4621              MOV      r1,r4
002f5a  4845              LDR      r0,|L1.12400|
002f5c  3014              ADDS     r0,r0,#0x14
002f5e  f7fffffe          BL       __2printf
;;;380    							
;;;381    							GPS_COLLECT();//accel_read();detect_motion();	//
002f62  f7fffffe          BL       GPS_COLLECT
;;;382    							clear();		
002f66  f7fffffe          BL       clear
;;;383    							send_tcp();
002f6a  f7fffffe          BL       send_tcp
;;;384    
;;;385    msg_sim800(); 
002f6e  f7fffffe          BL       msg_sim800
;;;386    
;;;387    							
;;;388    							GPS_COLLECT();//accel_read();detect_motion();
002f72  f7fffffe          BL       GPS_COLLECT
;;;389    
;;;390    msg_sim800(); 
002f76  f7fffffe          BL       msg_sim800
;;;391    
;;;392    
;;;393    							printf("%s\n",send_GSM("\n\nAT+CMGF=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
002f7a  4849              LDR      r0,|L1.12448|
002f7c  6800              LDR      r0,[r0,#0]  ; tmeout
002f7e  4b3c              LDR      r3,|L1.12400|
002f80  461a              MOV      r2,r3
002f82  3208              ADDS     r2,r2,#8
002f84  4611              MOV      r1,r2
002f86  311c              ADDS     r1,r1,#0x1c
002f88  9000              STR      r0,[sp,#0]
002f8a  a060              ADR      r0,|L1.12556|
002f8c  f7fffffe          BL       send_GSM
002f90  4604              MOV      r4,r0
002f92  4621              MOV      r1,r4
002f94  484d              LDR      r0,|L1.12492|
002f96  f7fffffe          BL       __2printf
;;;394    
;;;395    msg_sim800(); 
002f9a  f7fffffe          BL       msg_sim800
;;;396    
;;;397    							
;;;398    							//delay(10);	
;;;399    							printf("%s\n",send_GSM("\n\nAT+CSCA?\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
002f9e  4840              LDR      r0,|L1.12448|
002fa0  6800              LDR      r0,[r0,#0]  ; tmeout
002fa2  4b33              LDR      r3,|L1.12400|
002fa4  461a              MOV      r2,r3
002fa6  3208              ADDS     r2,r2,#8
002fa8  4611              MOV      r1,r2
002faa  311c              ADDS     r1,r1,#0x1c
002fac  9000              STR      r0,[sp,#0]
002fae  a05b              ADR      r0,|L1.12572|
002fb0  f7fffffe          BL       send_GSM
002fb4  4604              MOV      r4,r0
002fb6  4621              MOV      r1,r4
002fb8  4844              LDR      r0,|L1.12492|
002fba  f7fffffe          BL       __2printf
;;;400    														memset(at_,0,100);
002fbe  2164              MOVS     r1,#0x64
002fc0  4846              LDR      r0,|L1.12508|
002fc2  f7fffffe          BL       __aeabi_memclr4
;;;401    														memset(num_o,0,15);
002fc6  210f              MOVS     r1,#0xf
002fc8  4858              LDR      r0,|L1.12588|
002fca  f7fffffe          BL       __aeabi_memclr
;;;402    														parse_g(uart_string_gsm, 1, 2, '\"', '\"', num_o);
002fce  4857              LDR      r0,|L1.12588|
002fd0  2122              MOVS     r1,#0x22
002fd2  460b              MOV      r3,r1
002fd4  2202              MOVS     r2,#2
002fd6  e0ab              B        |L1.12592|
                  |L1.12248|
                          DCD      0x4004b080
                  |L1.12252|
                          DCD      gu32PortStatus
                  |L1.12256|
                          DCD      stateCount
                  |L1.12260|
                          DCD      0x4004c080
                  |L1.12264|
                          DCD      ringflag
                  |L1.12268|
                          DCD      0xe000e000
                  |L1.12272|
                          DCD      0x00009c3f
                  |L1.12276|
                          DCD      overhead
                  |L1.12280|
002ff8  73797374          DCB      "systick start value: 0x%x\n\r",0
002ffc  69636b20
003000  73746172
003004  74207661
003008  6c75653a
00300c  20307825
003010  780a0d00
                  |L1.12308|
003014  73797374          DCB      "systick end value: 0x%x\n\r",0
003018  69636b20
00301c  656e6420
003020  76616c75
003024  653a2030
003028  7825780a
00302c  0d00    
00302e  00                DCB      0
00302f  00                DCB      0
                  |L1.12336|
003030  73797374          DCB      "systick current value read overhead: 0x%x\n\r",0
003034  69636b20
003038  63757272
00303c  656e7420
003040  76616c75
003044  65207265
003048  6164206f
00304c  76657268
003050  6561643a
003054  20307825
003058  780a0d00
                  |L1.12380|
                          DCD      0x00001388
                  |L1.12384|
                          DCD      i
                  |L1.12388|
                          DCD      imei
                  |L1.12392|
                          DCD      uart_string_gsm
                  |L1.12396|
                          DCD      0x000f423f
                  |L1.12400|
                          DCD      ||.text||+0x918
                  |L1.12404|
003074  4f4b00            DCB      "OK",0
003077  00                DCB      0
                  |L1.12408|
003078  0d0a4154          DCB      "\r\nAT+CIND?\r\n",0
00307c  2b43494e
003080  443f0d0a
003084  00      
003085  00                DCB      0
003086  00                DCB      0
003087  00                DCB      0
                  |L1.12424|
003088  0a092564          DCB      "\n\t%d\n\t%d\n\t%d\n\t%d\n",0
00308c  0a092564
003090  0a092564
003094  0a092564
003098  0a00    
00309a  00                DCB      0
00309b  00                DCB      0
                  |L1.12444|
                          DCD      0x400ff100
                  |L1.12448|
                          DCD      tmeout
                  |L1.12452|
0030a4  434c4f53          DCB      "CLOSE OK\r\n",0
0030a8  45204f4b
0030ac  0d0a00  
0030af  00                DCB      0
                  |L1.12464|
0030b0  0d0a4154          DCB      "\r\nAT+CIPCLOSE\r\n",0
0030b4  2b434950
0030b8  434c4f53
0030bc  450d0a00
                  |L1.12480|
0030c0  0a0a4154          DCB      "\n\nAT+GSN\r\n",0
0030c4  2b47534e
0030c8  0d0a00  
0030cb  00                DCB      0
                  |L1.12492|
                          DCD      ||.text||+0x273c
                  |L1.12496|
0030d0  0a257309          DCB      "\n%s\t->\t%d\n",0
0030d4  2d3e0925
0030d8  640a00  
0030db  00                DCB      0
                  |L1.12508|
                          DCD      at_
                  |L1.12512|
                          DCD      port
                  |L1.12516|
                          DCD      ||ip||
                  |L1.12520|
                          DCD      ||.text||+0x21d8
                  |L1.12524|
                          DCD      data
                  |L1.12528|
0030f0  0a25640a          DCB      "\n%d\n",0
0030f4  00      
0030f5  00                DCB      0
0030f6  00                DCB      0
0030f7  00                DCB      0
                  |L1.12536|
0030f8  434f4e4e          DCB      "CONNECT FAIL",0
0030fc  45435420
003100  4641494c
003104  00      
003105  00                DCB      0
003106  00                DCB      0
003107  00                DCB      0
                  |L1.12552|
003108  3e00              DCB      ">",0
00310a  00                DCB      0
00310b  00                DCB      0
                  |L1.12556|
00310c  0a0a4154          DCB      "\n\nAT+CMGF=1\n\n",0
003110  2b434d47
003114  463d310a
003118  0a00    
00311a  00                DCB      0
00311b  00                DCB      0
                  |L1.12572|
00311c  0a0a4154          DCB      "\n\nAT+CSCA?\r\n",0
003120  2b435343
003124  413f0d0a
003128  00      
003129  00                DCB      0
00312a  00                DCB      0
00312b  00                DCB      0
                  |L1.12588|
                          DCD      num_o
                  |L1.12592|
003130  9100              STR      r1,[sp,#0]
003132  9001              STR      r0,[sp,#4]
003134  2101              MOVS     r1,#1
003136  487f              LDR      r0,|L1.13108|
003138  f7fffffe          BL       parse_g
;;;403    														sprintf(at_, "\r\nAT+CSCA=\"%s\"\r\n", num_o);
00313c  4a7e              LDR      r2,|L1.13112|
00313e  a17f              ADR      r1,|L1.13116|
003140  4883              LDR      r0,|L1.13136|
003142  f7fffffe          BL       __2sprintf
;;;404    														printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));	
003146  4883              LDR      r0,|L1.13140|
003148  6800              LDR      r0,[r0,#0]  ; tmeout
00314a  4b83              LDR      r3,|L1.13144|
00314c  461a              MOV      r2,r3
00314e  3208              ADDS     r2,r2,#8
003150  4611              MOV      r1,r2
003152  311c              ADDS     r1,r1,#0x1c
003154  9000              STR      r0,[sp,#0]
003156  487e              LDR      r0,|L1.13136|
003158  f7fffffe          BL       send_GSM
00315c  4604              MOV      r4,r0
00315e  4621              MOV      r1,r4
003160  487e              LDR      r0,|L1.13148|
003162  f7fffffe          BL       __2printf
;;;405    														
;;;406    							//msg_sim800(); 
;;;407    
;;;408    							if(motion_samples >= 200)
003166  487e              LDR      r0,|L1.13152|
003168  6800              LDR      r0,[r0,#0]  ; motion_samples
00316a  28c8              CMP      r0,#0xc8
00316c  db02              BLT      |L1.12660|
;;;409    								{
;;;410    									//vehicle not in motion
;;;411    							//		gsm_gps_sleep();
;;;412    									motion_samples = 0;
00316e  2000              MOVS     r0,#0
003170  497b              LDR      r1,|L1.13152|
003172  6008              STR      r0,[r1,#0]  ; motion_samples
                  |L1.12660|
;;;413    									
;;;414    								}
;;;415    							
;;;416    								
;;;417    msg_sim800(); 
003174  f7fffffe          BL       msg_sim800
;;;418    
;;;419    
;;;420    								GPS_COLLECT();//accel_read();detect_motion();
003178  f7fffffe          BL       GPS_COLLECT
;;;421    
;;;422    
;;;423    msg_sim800(); 
00317c  f7fffffe          BL       msg_sim800
;;;424    
;;;425    								
;;;426    }
003180  bd1c              POP      {r2-r4,pc}
;;;427    
                          ENDP

                  auto_caliberate_accelerometer PROC
;;;652    
;;;653    void auto_caliberate_accelerometer()
003182  b510              PUSH     {r4,lr}
;;;654    {
;;;655    accel_read();
003184  f7fffffe          BL       accel_read
;;;656    offxy= -xy_angle;
003188  4876              LDR      r0,|L1.13156|
00318a  6800              LDR      r0,[r0,#0]  ; xy_angle
00318c  4240              RSBS     r0,r0,#0
00318e  4976              LDR      r1,|L1.13160|
003190  6008              STR      r0,[r1,#0]  ; offxy
;;;657    offxz= -xz_angle;
003192  4876              LDR      r0,|L1.13164|
003194  6800              LDR      r0,[r0,#0]  ; xz_angle
003196  4240              RSBS     r0,r0,#0
003198  4975              LDR      r1,|L1.13168|
00319a  6008              STR      r0,[r1,#0]  ; offxz
;;;658    offyz= -yz_angle;
00319c  4875              LDR      r0,|L1.13172|
00319e  6800              LDR      r0,[r0,#0]  ; yz_angle
0031a0  4240              RSBS     r0,r0,#0
0031a2  4975              LDR      r1,|L1.13176|
0031a4  6008              STR      r0,[r1,#0]  ; offyz
;;;659    offx=  -resultx;
0031a6  4875              LDR      r0,|L1.13180|
0031a8  2100              MOVS     r1,#0
0031aa  5e41              LDRSH    r1,[r0,r1]  ; resultx
0031ac  4248              RSBS     r0,r1,#0
0031ae  4974              LDR      r1,|L1.13184|
0031b0  6008              STR      r0,[r1,#0]  ; offx
;;;660    offy=  -resulty; 
0031b2  4874              LDR      r0,|L1.13188|
0031b4  2100              MOVS     r1,#0
0031b6  5e41              LDRSH    r1,[r0,r1]  ; resulty
0031b8  4248              RSBS     r0,r1,#0
0031ba  4973              LDR      r1,|L1.13192|
0031bc  6008              STR      r0,[r1,#0]  ; offy
;;;661    offz=  -resultz; 	
0031be  4873              LDR      r0,|L1.13196|
0031c0  2100              MOVS     r1,#0
0031c2  5e41              LDRSH    r1,[r0,r1]  ; resultz
0031c4  4248              RSBS     r0,r1,#0
0031c6  4972              LDR      r1,|L1.13200|
0031c8  6008              STR      r0,[r1,#0]  ; offz
;;;662    	
;;;663    }
0031ca  bd10              POP      {r4,pc}
;;;664    	
                          ENDP

                  tcp_initialization2 PROC
;;;578    
;;;579    void tcp_initialization2()
0031cc  b538              PUSH     {r3-r5,lr}
;;;580    {
;;;581    
;;;582    msg_sim800(); 
0031ce  f7fffffe          BL       msg_sim800
;;;583    
;;;584    								//GPS_COLLECT();
;;;585    								printf("\n%s\n",send_GSM("\r\nAT+CIPSHUT\r\n", "SHUT OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
0031d2  4860              LDR      r0,|L1.13140|
0031d4  6800              LDR      r0,[r0,#0]  ; tmeout
0031d6  4b60              LDR      r3,|L1.13144|
0031d8  461a              MOV      r2,r3
0031da  3208              ADDS     r2,r2,#8
0031dc  496d              LDR      r1,|L1.13204|
0031de  9000              STR      r0,[sp,#0]
0031e0  4608              MOV      r0,r1
0031e2  300c              ADDS     r0,r0,#0xc
0031e4  f7fffffe          BL       send_GSM
0031e8  4604              MOV      r4,r0
0031ea  4621              MOV      r1,r4
0031ec  485a              LDR      r0,|L1.13144|
0031ee  3014              ADDS     r0,r0,#0x14
0031f0  f7fffffe          BL       __2printf
;;;586    								//delay(20);		
;;;587    								GPS_COLLECT();
0031f4  f7fffffe          BL       GPS_COLLECT
;;;588    
;;;589    msg_sim800(); 
0031f8  f7fffffe          BL       msg_sim800
;;;590    
;;;591    
;;;592    								printf("\n%s\n",send_GSM("\r\nAT+CSTT=\"www\"\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));	
0031fc  4855              LDR      r0,|L1.13140|
0031fe  6800              LDR      r0,[r0,#0]  ; tmeout
003200  4b55              LDR      r3,|L1.13144|
003202  461a              MOV      r2,r3
003204  3208              ADDS     r2,r2,#8
003206  4611              MOV      r1,r2
003208  311c              ADDS     r1,r1,#0x1c
00320a  9000              STR      r0,[sp,#0]
00320c  4861              LDR      r0,|L1.13204|
00320e  301c              ADDS     r0,r0,#0x1c
003210  f7fffffe          BL       send_GSM
003214  4604              MOV      r4,r0
003216  4621              MOV      r1,r4
003218  484f              LDR      r0,|L1.13144|
00321a  3014              ADDS     r0,r0,#0x14
00321c  f7fffffe          BL       __2printf
;;;593    								//delay(20);
;;;594    								GPS_COLLECT();
003220  f7fffffe          BL       GPS_COLLECT
;;;595    
;;;596    msg_sim800(); 
003224  f7fffffe          BL       msg_sim800
;;;597    
;;;598    	
;;;599    								printf("\n%s\n",send_GSM("\r\nAT+CIICR\r\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",tmeout));		
003228  484a              LDR      r0,|L1.13140|
00322a  6800              LDR      r0,[r0,#0]  ; tmeout
00322c  4b4a              LDR      r3,|L1.13144|
00322e  461a              MOV      r2,r3
003230  3208              ADDS     r2,r2,#8
003232  4611              MOV      r1,r2
003234  311c              ADDS     r1,r1,#0x1c
003236  9000              STR      r0,[sp,#0]
003238  4856              LDR      r0,|L1.13204|
00323a  3030              ADDS     r0,r0,#0x30
00323c  f7fffffe          BL       send_GSM
003240  4604              MOV      r4,r0
003242  4621              MOV      r1,r4
003244  4844              LDR      r0,|L1.13144|
003246  3014              ADDS     r0,r0,#0x14
003248  f7fffffe          BL       __2printf
;;;600    								//delay(20);
;;;601    								GPS_COLLECT();
00324c  f7fffffe          BL       GPS_COLLECT
;;;602    
;;;603    msg_sim800(); 
003250  f7fffffe          BL       msg_sim800
;;;604    
;;;605    								
;;;606    								clear();send_modem("\nAT+CIFSR\r\r\n");clear();
003254  f7fffffe          BL       clear
003258  484e              LDR      r0,|L1.13204|
00325a  3040              ADDS     r0,r0,#0x40
00325c  f7fffffe          BL       send_modem
003260  f7fffffe          BL       clear
;;;607    								delay(20);
003264  2014              MOVS     r0,#0x14
003266  f7fffffe          BL       delay
;;;608    	
;;;609    
;;;610    msg_sim800(); 
00326a  f7fffffe          BL       msg_sim800
;;;611    
;;;612    		
;;;613    								sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
00326e  4b4a              LDR      r3,|L1.13208|
003270  4a4a              LDR      r2,|L1.13212|
003272  4948              LDR      r1,|L1.13204|
003274  3158              ADDS     r1,r1,#0x58
003276  4836              LDR      r0,|L1.13136|
003278  f7fffffe          BL       __2sprintf
;;;614    								printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR\r\n" , "ERROR:",tmeout));	
00327c  4835              LDR      r0,|L1.13140|
00327e  6800              LDR      r0,[r0,#0]  ; tmeout
003280  4b35              LDR      r3,|L1.13144|
003282  461a              MOV      r2,r3
003284  3208              ADDS     r2,r2,#8
003286  4943              LDR      r1,|L1.13204|
003288  317c              ADDS     r1,r1,#0x7c
00328a  9000              STR      r0,[sp,#0]
00328c  4830              LDR      r0,|L1.13136|
00328e  f7fffffe          BL       send_GSM
003292  4604              MOV      r4,r0
003294  4621              MOV      r1,r4
003296  4830              LDR      r0,|L1.13144|
003298  3014              ADDS     r0,r0,#0x14
00329a  f7fffffe          BL       __2printf
;;;615    								clear();
00329e  f7fffffe          BL       clear
;;;616    
;;;617    }
0032a2  bd38              POP      {r3-r5,pc}
;;;618    
                          ENDP

                  main PROC
;;;88     /********************************************************************/
;;;89     int main (void)
0032a4  483e              LDR      r0,|L1.13216|
;;;90     {
;;;91     	
;;;92     delay(3000);	
0032a6  f7fffffe          BL       delay
;;;93     	
;;;94     	start();
0032aa  f7fffffe          BL       start
;;;95     systick_init();	
0032ae  f7fffffe          BL       systick_init
;;;96     #ifdef CMSIS  // If we are conforming to CMSIS, we need to call start here
;;;97     
;;;98     #endif
;;;99     	
;;;100    
;;;101    	
;;;102    	
;;;103    	
;;;104    	LED_init();		//Initialize GPIO for LEDs
0032b2  f7fffffe          BL       LED_init
;;;105    	RELAY_init();		//Initialize GPIO for LEDs
0032b6  f7fffffe          BL       RELAY_init
;;;106    	SW1_init();		//Initialize GPIO for SW1 w/ interrupt	
0032ba  f7fffffe          BL       SW1_init
;;;107    	accel_init();
0032be  f7fffffe          BL       accel_init
;;;108    	
;;;109    //while(1)	
;;;110    {i++;
0032c2  4838              LDR      r0,|L1.13220|
0032c4  6800              LDR      r0,[r0,#0]  ; i
0032c6  1c40              ADDS     r0,r0,#1
0032c8  4936              LDR      r1,|L1.13220|
0032ca  6008              STR      r0,[r1,#0]  ; i
;;;111    printf("\n Hello World %d", i);
0032cc  4608              MOV      r0,r1
0032ce  6801              LDR      r1,[r0,#0]  ; i
0032d0  a035              ADR      r0,|L1.13224|
0032d2  f7fffffe          BL       __2printf
;;;112    //GPS_COLLECT();
;;;113    stateCount=0;
0032d6  2000              MOVS     r0,#0
0032d8  4938              LDR      r1,|L1.13244|
0032da  7008              STRB     r0,[r1,#0]
;;;114    while(1){
0032dc  e01b              B        |L1.13078|
                  |L1.13022|
;;;115    IGNITION_ON;delay(2000);
0032de  2002              MOVS     r0,#2
0032e0  4937              LDR      r1,|L1.13248|
0032e2  6088              STR      r0,[r1,#8]
0032e4  207d              MOVS     r0,#0x7d
0032e6  0100              LSLS     r0,r0,#4
0032e8  f7fffffe          BL       delay
;;;116    FUEL_ON;delay(2000);
0032ec  2004              MOVS     r0,#4
0032ee  4934              LDR      r1,|L1.13248|
0032f0  6088              STR      r0,[r1,#8]
0032f2  207d              MOVS     r0,#0x7d
0032f4  0100              LSLS     r0,r0,#4
0032f6  f7fffffe          BL       delay
;;;117    IGNITION_OFF;delay(2000);
0032fa  2002              MOVS     r0,#2
0032fc  4930              LDR      r1,|L1.13248|
0032fe  6048              STR      r0,[r1,#4]
003300  207d              MOVS     r0,#0x7d
003302  0100              LSLS     r0,r0,#4
003304  f7fffffe          BL       delay
;;;118    FUEL_OFF;delay(2000);
003308  2004              MOVS     r0,#4
00330a  492d              LDR      r1,|L1.13248|
00330c  6048              STR      r0,[r1,#4]
00330e  207d              MOVS     r0,#0x7d
003310  0100              LSLS     r0,r0,#4
003312  f7fffffe          BL       delay
                  |L1.13078|
003316  e7e2              B        |L1.13022|
;;;119    	
;;;120    	
;;;121    }
;;;122    
;;;123    }
;;;124    	
;;;125    	lptmr_init(500, 1);
;;;126    	
;;;127    
;;;128    //delay(100);
;;;129    	
;;;130    uart_putchar(UART1_BASE_PTR,0x1A);
;;;131    uart_putchar(UART1_BASE_PTR,0x1A);	
;;;132    
;;;133    //	send_modem("$PMTK225,0*2B");	send_modem("$PMTK225,0*2B");
;;;134    
;;;135    
;;;136    
;;;137    //do
;;;138    	{
;;;139    	
;;;140    		uart_putchar(UART1_BASE_PTR,0x1A);
;;;141    		uart_putchar(UART1_BASE_PTR,0xA);
;;;142    		uart_putchar(UART1_BASE_PTR,0x1A);
;;;143    		uart_putchar(UART1_BASE_PTR,0xA);
;;;144    		uart_putchar(UART1_BASE_PTR,0x1A);		
;;;145    	
;;;146    	printf("%s\n",send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));    
;;;147    		
;;;148    		printf("%s\n",send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));  	
;;;149    		//delay(10);
;;;150    
;;;151    }
;;;152    	
;;;153    //send_modem2("$PMTK225,0*2B");
;;;154    //while(!strstr(uart_string_gsm,"OK\r\n"));
;;;155    
;;;156    //bat_cind();
;;;157    //delay(1000);
;;;158    
;;;159    printf("%s\n",send_GSM("\n\nAT&W\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
;;;160    //delay(10);
;;;161    
;;;162    printf("%s\n",send_GSM("\n\nATS0=2\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout)); 	
;;;163    
;;;164    
;;;165    printf("%s\n",send_GSM("\n\nAT&F\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout)); 	
;;;166    
;;;167    
;;;168    printf("%s\n",send_GSM("\n\nAT&D\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout)); 	
;;;169    
;;;170    
;;;171    printf("%s\n",send_GSM("\n\nAT+IFC=0,0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;172    //delay(10);
;;;173    
;;;174    printf("%s\n",send_GSM("\n\nAT+GSN\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;175    get_imei();
;;;176    //delay(10);
;;;177    
;;;178    printf("%s\n",send_GSM("\n\nAT+SD2PCM=0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;179    //delay(10);	
;;;180    
;;;181    printf("%s\n",send_GSM("\n\nAT&W\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;182    //;	
;;;183    
;;;184    //printf("%s\n",send_GSM("\n\nAT+IFC=0,0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;185    
;;;186    
;;;187    printf("%s\n",send_GSM("\n\nAT+FSLS=D:\\\r\n"," ","ERROR\r\n","ERROR:",tmeout));
;;;188    
;;;189    
;;;190    printf("%s\n",send_GSM("\n\nAT+FSMEM\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;191    
;;;192    
;;;193    printf("%s\n",send_GSM("\n\nAT+FSCREATE=D:\\MRIDUL.TXT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;194    
;;;195    
;;;196    
;;;197    
;;;198    
;;;199    printf("%s\n",send_GSM("\n\nATS0=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;200    
;;;201    
;;;202    
;;;203    //delay(10);
;;;204    
;;;205    //printf("%s\n",send_GSM("\n\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));//del_msg();
;;;206    //delay(10);
;;;207    
;;;208    //printf("%s\n",send_GSM("\n\nAT+CPBW=1,\"100\",129,\"OWNER1\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;209    
;;;210    
;;;211    //printf("%s\n",send_GSM("\n\nAT+CPBW=2,\"100\",129,\"OWNER2\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;212    
;;;213    
;;;214    //printf("%s\n",send_GSM("\n\nAT+CPBW=3,\"100\",129,\"OWNER3\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;215    
;;;216    
;;;217    //printf("%s\n",send_GSM("\n\nAT+CPBW=4,\"100\",129,\"OWNER4\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;218    
;;;219    
;;;220    
;;;221    printf("%s\n",send_GSM("\n\nAT+CPBW=5,\"9873999108\",129,\"OWNER5\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;222    
;;;223    
;;;224    printf("%s\n",send_GSM("\n\nAT+CPBW=6,\"8287324005\",129,\"OWNER6\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;225    
;;;226    //printf("%s\n",send_GSM("\n\nAT+CPBW=4,\"8287324005\",129,\"OWNER2\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;227    read_interval();
;;;228    printf("%s\n",send_GSM("\n\nAT+CMGF=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;229    //delay(10);	
;;;230    
;;;231    printf("%s\n",send_GSM("\n\nAT+CSCA?\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
;;;232    							memset(at_,0,100);
;;;233    							memset(num_o,0,15);
;;;234    							parse_g(uart_string_gsm, 1, 2, '\"', '\"', num_o);
;;;235    							sprintf(at_, "\r\nAT+CSCA=\"%s\"\r\n", num_o);
;;;236    							printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;237    
;;;238    //delay(10);	
;;;239    
;;;240    
;;;241    
;;;242    
;;;243    
;;;244    
;;;245    
;;;246    read_ip_port();
;;;247    
;;;248    
;;;249    tcp_initialization2();
;;;250    
;;;251    //							GPS_COLLECT();		accel_read();detect_motion();
;;;252    
;;;253    //do{
;;;254    //printf("%s\n",send_GPS("\n\nAT+CGPSPWR=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;255    //delay(50);
;;;256    //printf("%s\n",send_GPS("\n\nAT+CGPSOUT=255\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;257    //}while(strstr(uart_string_gps,"ERROR"));
;;;258    
;;;259    //delay(50);
;;;260    
;;;261    auto_caliberate_accelerometer();
;;;262    
;;;263    
;;;264    //phonebook_read("5");parse(1,2);
;;;265    	
;;;266    
;;;267    
;;;268    while(1)
;;;269    {
;;;270    		accel_read();
;;;271    
;;;272    						
;;;273    					
;;;274    						{ // main tcp GPS_COLLECT
;;;275    
;;;276    							loop();
;;;277    
;;;278    						}
;;;279    
;;;280    		
;;;281    /******************while end**********************/		
;;;282    	} 
;;;283    /******************main end***********************/
;;;284    }
;;;285    /********************************************************************/
                          ENDP

                  HardFault_Handler PROC
;;;290    
;;;291    void HardFault_Handler()
003318  4770              BX       lr
;;;292    {
;;;293    
;;;294    
;;;295    }
;;;296    
                          ENDP

                  LPTimer_IRQHandler PROC
;;;297    
;;;298    void LPTimer_IRQHandler(void)
00331a  2001              MOVS     r0,#1
;;;299    {
;;;300      
;;;301    //  printf("\n****LPT ISR entered*****\r\n");
;;;302    	
;;;303    //stateCount++; 
;;;304    //if(stateCount>5){stateCount =0;}
;;;305    //		LED_state();
;;;306    		lptmr_interrupt = 1;
00331c  4929              LDR      r1,|L1.13252|
00331e  7008              STRB     r0,[r1,#0]
;;;307    //accel_read();
;;;308    //detect_motion();
;;;309      // enable timer
;;;310      // enable interrupts
;;;311      // clear the flag
;;;312      LPTMR0_CSR |=  LPTMR_CSR_TCF_MASK;   // write 1 to TCF to clear the LPT timer compare flag
003320  4829              LDR      r0,|L1.13256|
003322  6800              LDR      r0,[r0,#0]
003324  2180              MOVS     r1,#0x80
003326  4308              ORRS     r0,r0,r1
003328  4927              LDR      r1,|L1.13256|
00332a  6008              STR      r0,[r1,#0]
;;;313      LPTMR0_CSR = ( LPTMR_CSR_TEN_MASK | LPTMR_CSR_TIE_MASK | LPTMR_CSR_TCF_MASK  );
00332c  20c1              MOVS     r0,#0xc1
00332e  6008              STR      r0,[r1,#0]
;;;314    
;;;315    }
003330  4770              BX       lr
;;;316    
                          ENDP

003332  0000              DCW      0x0000
                  |L1.13108|
                          DCD      uart_string_gsm
                  |L1.13112|
                          DCD      num_o
                  |L1.13116|
00333c  0d0a4154          DCB      "\r\nAT+CSCA=""%s""\r\n",0
003340  2b435343
003344  413d2225
003348  73220d0a
00334c  00      
00334d  00                DCB      0
00334e  00                DCB      0
00334f  00                DCB      0
                  |L1.13136|
                          DCD      at_
                  |L1.13140|
                          DCD      tmeout
                  |L1.13144|
                          DCD      ||.text||+0x918
                  |L1.13148|
                          DCD      ||.text||+0x273c
                  |L1.13152|
                          DCD      motion_samples
                  |L1.13156|
                          DCD      xy_angle
                  |L1.13160|
                          DCD      offxy
                  |L1.13164|
                          DCD      xz_angle
                  |L1.13168|
                          DCD      offxz
                  |L1.13172|
                          DCD      yz_angle
                  |L1.13176|
                          DCD      offyz
                  |L1.13180|
                          DCD      resultx
                  |L1.13184|
                          DCD      offx
                  |L1.13188|
                          DCD      resulty
                  |L1.13192|
                          DCD      offy
                  |L1.13196|
                          DCD      resultz
                  |L1.13200|
                          DCD      offz
                  |L1.13204|
                          DCD      ||.text||+0x2180
                  |L1.13208|
                          DCD      port
                  |L1.13212|
                          DCD      ||ip||
                  |L1.13216|
                          DCD      0x00000bb8
                  |L1.13220|
                          DCD      i
                  |L1.13224|
0033a8  0a204865          DCB      "\n Hello World %d",0
0033ac  6c6c6f20
0033b0  576f726c
0033b4  64202564
0033b8  00      
0033b9  00                DCB      0
0033ba  00                DCB      0
0033bb  00                DCB      0
                  |L1.13244|
                          DCD      stateCount
                  |L1.13248|
                          DCD      0x400ff000
                  |L1.13252|
                          DCD      lptmr_interrupt
                  |L1.13256|
                          DCD      0x40040000

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  uart_string_gsm
                          %        5000
                  data
                          %        1500
                  num2
                          %        32
                  arr_medianas
                          %        108
                  string_gps
                          %        100
                  gga
                          %        100
                  ||rmc||
                          %        100
                  uart_string_gps
                          %        500
                  data2
                          %        200
                  at_
                          %        100
                  imei
                          %        20
                  lati
                          %        20
                  longi
                          %        20
                  fsize
                          %        15
                  num_o
                          %        15
                  sd_data
                          %        1400

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=2

000000  0a09092a          DCB      "\n\t\t******************\n\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t"
000004  2a2a2a2a
000008  2a2a2a2a
00000c  2a2a2a2a
000010  2a2a2a2a
000014  2a0a092c
000018  09256409
00001c  2c092564
000020  092c0925
000024  64092c09
000028  256409  
00002b  2c092564          DCB      ",\t%d\t,\t%d,\t%x,\t%x\n\t\t*******************\n",0
00002f  092c0925
000033  642c0925
000037  782c0925
00003b  780a0909
00003f  2a2a2a2a
000043  2a2a2a2a
000047  2a2a2a2a
00004b  2a2a2a2a
00004f  2a2a2a0a
000053  00      
000054  0a436f6f          DCB      "\nCoordinates : %s N, %s E\nSpeed : %s kmph\n\nhttps://"
000058  7264696e
00005c  61746573
000060  203a2025
000064  73204e2c
000068  20257320
00006c  450a5370
000070  65656420
000074  3a202573
000078  206b6d70
00007c  680a0a68
000080  74747073
000084  3a2f2f  
000087  7777772e          DCB      "www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",0
00008b  676f6f67
00008f  6c652e63
000093  6f6d2f73
000097  65617263
00009b  683f713d
00009f  25732563
0000a3  32432573
0000a7  2669653d
0000ab  7574662d
0000af  38266f65
0000b3  3d757466
0000b7  2d380a00
0000bb  00                DCB      0
0000bc  2a2a2a2a          DCB      "***********************************************\n\n\n%s"
0000c0  2a2a2a2a
0000c4  2a2a2a2a
0000c8  2a2a2a2a
0000cc  2a2a2a2a
0000d0  2a2a2a2a
0000d4  2a2a2a2a
0000d8  2a2a2a2a
0000dc  2a2a2a2a
0000e0  2a2a2a2a
0000e4  2a2a2a2a
0000e8  2a2a2a0a
0000ec  0a0a2573
0000f0  0a2a2a2a          DCB      "\n***********************************************\n",0
0000f4  2a2a2a2a
0000f8  2a2a2a2a
0000fc  2a2a2a2a
000100  2a2a2a2a
000104  2a2a2a2a
000108  2a2a2a2a
00010c  2a2a2a2a
000110  2a2a2a2a
000114  2a2a2a2a
000118  2a2a2a2a
00011c  2a2a2a2a
000120  0a00    
000122  00                DCB      0
000123  00                DCB      0
000124  0a0a0a09          DCB      "\n\n\n\t\t\t****************************\n%s\n%s\n%s\n\n"
000128  09092a2a
00012c  2a2a2a2a
000130  2a2a2a2a
000134  2a2a2a2a
000138  2a2a2a2a
00013c  2a2a2a2a
000140  2a2a2a2a
000144  2a2a0a25
000148  730a2573
00014c  0a25730a
000150  0a      
000151  0909092a          DCB      "\t\t\t*****************************",0
000155  2a2a2a2a
000159  2a2a2a2a
00015d  2a2a2a2a
000161  2a2a2a2a
000165  2a2a2a2a
000169  2a2a2a2a
00016d  2a2a2a2a
000171  00      
000172  00                DCB      0
000173  00                DCB      0
000174  0a0a0a09          DCB      "\n\n\n\t\t\t****************************\n%s\n\n\n\t\t\t"
000178  09092a2a
00017c  2a2a2a2a
000180  2a2a2a2a
000184  2a2a2a2a
000188  2a2a2a2a
00018c  2a2a2a2a
000190  2a2a2a2a
000194  2a2a0a25
000198  730a0a0a
00019c  090909  
00019f  2a2a2a2a          DCB      "*****************************",0
0001a3  2a2a2a2a
0001a7  2a2a2a2a
0001ab  2a2a2a2a
0001af  2a2a2a2a
0001b3  2a2a2a2a
0001b7  2a2a2a2a
0001bb  2a00    

                          AREA ||.data||, DATA, ALIGN=2

                  stateCount
000000  00000000          DCB      0x00,0x00,0x00,0x00
                  k
                          DCD      0x00000000
                  l
                          DCD      0x00000000
                  ||k2||
                          DCD      0x00000000
                  ||l2||
                          DCD      0x00000000
                  time
                          DCD      0x000f423f
                  pit1_isrv_count
000018  0000              DCB      0x00,0x00
                  base_time125m
00001a  0000              DCB      0x00,0x00
                  ti_task
00001c  0000              DCB      0x00,0x00
                  ti_fall
00001e  0000              DCB      0x00,0x00
                  ti_accel_sampling
000020  0000              DCB      0x00,0x00
                  ti_delay
000022  0000              DCB      0x00,0x00
                  ti_print
000024  0000              DCB      0x00,0x00
                  ti_console
000026  0000              DCB      0x00,0x00
                  ti_led
000028  0000              DCB      0x00,0x00
                  ti_tsi0
00002a  0000              DCB      0x00,0x00
                  ti_tsi1
00002c  0000              DCB      0x00,0x00
                  ti_test_adc
00002e  0000              DCB      0x00,0x00
                  adc_sample
000030  00000000          DCB      0x00,0x00,0x00,0x00
                  X_acc
                          DCD      0x00000000
                  Y_acc
                          DCD      0x00000000
                  Z_acc
                          DCD      0x00000000
                  xy_mag
                          DCD      0x00000000
                  xz_mag
                          DCD      0x00000000
                  yz_mag
                          DCD      0x00000000
                  xy_angle
                          DCD      0x00000000
                  xz_angle
                          DCD      0x00000000
                  yz_angle
                          DCD      0x00000000
                  ||cat||
                          DCD      0x00000000
                  offset
                          DCD      0x00000000
                  fall_input
000060  0000              DCB      0x00,0x00
                  accel_x
000062  0000              DCB      0x00,0x00
                  accel_y
000064  0000              DCB      0x00,0x00
                  accel_z
000066  0000              DCB      0x00,0x00
                  resultx
000068  0000              DCB      0x00,0x00
                  resulty
00006a  0000              DCB      0x00,0x00
                  resultz
00006c  0000              DCB      0x00,0x00
                  aux1
00006e  0000              DCB      0x00,0x00
                  accel_mx
                          DCD      0x00000000
                  accel_my
                          DCD      0x00000000
                  accel_mz
                          DCD      0x00000000
                  magx
                          DCD      0x00000000
                  magy
                          DCD      0x00000000
                  magz
                          DCD      0x00000000
                  temp
                          DCD      0x00000000
                  offxy
                          DCD      0x00000000
                  offxz
                          DCD      0x00000000
                  offyz
                          DCD      0x00000000
                  offx
                          DCD      0x00000000
                  offy
                          DCD      0x00000000
                  offz
                          DCD      0x00000000
                  temp1xy
                          DCD      0x00000000
                  temp1xz
                          DCD      0x00000000
                  temp1yz
                          DCD      0x00000000
                  temp1x
                          DCD      0x00000000
                  temp1y
                          DCD      0x00000000
                  temp1z
                          DCD      0x00000000
                  temp2xy
                          DCD      0x00000000
                  temp2xz
                          DCD      0x00000000
                  temp2yz
                          DCD      0x00000000
                  temp2x
                          DCD      0x00000000
                  temp2y
                          DCD      0x00000000
                  temp2z
                          DCD      0x00000000
                  motion
                          DCD      0x00000000
                  gu32PortStatus
                          DCD      0x00000000
                  cnt_start_value
                          DCD      0x00000000
                  cnt_end_value
                          DCD      0x00000000
                  overhead
                          DCD      0x00000000
                  tmeout
                          DCD      0x000493df
                  int_erval
                          DCD      0x00000005
                  speed
0000f0  00000000          DCFS     0x00000000 ; 0
                  ||ip||
0000f4  3130342e          DCB      0x31,0x30,0x34,0x2e
0000f8  3233362e          DCB      0x32,0x33,0x36,0x2e
0000fc  3230332e          DCB      0x32,0x30,0x33,0x2e
000100  34000000          DCB      0x34,0x00,0x00,0x00
                  port
000104  35353535          DCB      0x35,0x35,0x35,0x35
000108  00000000          DCB      0x00,0x00,0x00,0x00
00010c  0000              DCB      0x00,0x00
                  velocity
00010e  0000              DCB      0x00,0x00
000110  000000            DCB      0x00,0x00,0x00
                  interval
000113  00                DCB      0x00
                          DCD      0x00000000
                  timeout
                          DCD      0x00000000
                  ||pr||
00011c  00000000          DCFS     0x00000000 ; 0
                  ||la||
000120  00000000          DCFS     0x00000000 ; 0
                  ggaptr
                          DCD      0x00000000
                  rmcptr
                          DCD      0x00000000
                  i
                          DCD      0x00000000
                  motion_samples
                          DCD      0x00000000
                  notsleep
                          DCD      0x00000000
                  ||ch||
000138  00                DCB      0x00
                  ringflag
000139  00                DCB      0x00
                  lptmr_interrupt
00013a  00                DCB      0x00

                          AREA ||i.__ARM_common_switch8||, COMGROUP=__ARM_common_switch8, CODE, READONLY, ALIGN=1

                  __ARM_common_switch8 PROC
000000  b430              PUSH     {r4,r5}
000002  4674              MOV      r4,lr
000004  1e64              SUBS     r4,r4,#1
000006  7825              LDRB     r5,[r4,#0]
000008  1c64              ADDS     r4,r4,#1
00000a  42ab              CMP      r3,r5
00000c  d304              BCC      |L18.24|
                  |L18.14|
00000e  5d63              LDRB     r3,[r4,r5]
000010  005b              LSLS     r3,r3,#1
000012  18e3              ADDS     r3,r4,r3
000014  bc30              POP      {r4,r5}
000016  4718              BX       r3
                  |L18.24|
000018  461d              MOV      r5,r3
00001a  e7f8              B        |L18.14|
                          ENDP


;*** Start embedded assembler ***

#line 1 "..\\..\\..\\src\\projects\\KEIL_MAG\\vts_ver2.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___10_vts_ver2_c_8dde92bb____REV16|
#line 129 "C:\\Keil_v5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___10_vts_ver2_c_8dde92bb____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___10_vts_ver2_c_8dde92bb____REVSH|
#line 144
|__asm___10_vts_ver2_c_8dde92bb____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

                  __ARM_use_no_argv EQU 0
