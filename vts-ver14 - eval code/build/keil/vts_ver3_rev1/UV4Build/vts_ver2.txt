; generated by Component: ARM Compiler 5.06 update 1 (build 61) Tool: ArmCC [4d35ad]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\uv4build\vts_ver2.o --asm_dir=.\UV4Build\ --list_dir=.\UV4Build\ --depend=.\uv4build\vts_ver2.d --cpu=Cortex-M0+ --apcs=interwork -O0 --diag_suppress=9931 -I..\..\..\src\projects\KEIL_MAG -I..\..\..\src\common -I..\..\..\src\cpu -I..\..\..\src\cpu\headers\CMSIS\MKL26Z4\Include -I..\..\..\src\drivers\llwu -I..\..\..\src\drivers\lptmr -I..\..\..\src\drivers\mcg -I..\..\..\src\drivers\pmc -I..\..\..\src\drivers\rcm -I..\..\..\src\drivers\rtc -I..\..\..\src\drivers\smc -I..\..\..\src\drivers\uart -I..\..\..\src\drivers\cmp -I..\..\..\src\platforms -I..\.. -I..\..\..\src\cpu\CMSIS\Source -I..\..\..\src\cpu\CMSIS\Source\arm -I..\..\..\..\inc -I"D:\RecoveredHP\mridul.eecs@gmail.com\vts-ver14 - testing code\build\keil\vts_ver3_rev1\RTE" -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.0-Beta4\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Keil\Kinetis_KLxx_DFP\1.11.0\Device\Include -D__UVISION_VERSION=518 -D_RTE_ -DMKL26Z128xxx4 -DKEIL -DFREEDOM -DCMSIS --omf_browse=.\uv4build\vts_ver2.crf ..\..\..\src\projects\KEIL_MAG\vts_ver2.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_s
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_str
                          REQUIRE _printf_f
                          REQUIRE _printf_fp_dec
                          REQUIRE _printf_str
                          REQUIRE _printf_c
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_x
                          REQUIRE _printf_longlong_hex
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                  clear PROC
;;;988    	
;;;989    void clear()
000000  49fe              LDR      r1,|L1.1020|
;;;990    {
;;;991    	char temp;
;;;992      if (UART_S1_REG(UART1_BASE_PTR) & UART_S1_OR_MASK)
000002  7909              LDRB     r1,[r1,#4]
000004  2208              MOVS     r2,#8
000006  4011              ANDS     r1,r1,r2
000008  2900              CMP      r1,#0
00000a  d001              BEQ      |L1.16|
;;;993        {
;;;994          temp = UART_D_REG(UART1_BASE_PTR);
00000c  49fb              LDR      r1,|L1.1020|
00000e  79c8              LDRB     r0,[r1,#7]
                  |L1.16|
;;;995    		}
;;;996    		
;;;997    		UART_S1_REG(UART1_BASE_PTR) |= (UART_S1_OR_MASK | UART_C2_ILIE_MASK );
000010  49fa              LDR      r1,|L1.1020|
000012  7909              LDRB     r1,[r1,#4]
000014  2218              MOVS     r2,#0x18
000016  4311              ORRS     r1,r1,r2
000018  4af8              LDR      r2,|L1.1020|
00001a  7111              STRB     r1,[r2,#4]
;;;998    }	
00001c  4770              BX       lr
;;;999    
                          ENDP

                  delay PROC
;;;111    /*************************** delay*****************************************/
;;;112     void delay(int32 delaytime)
00001e  e00d              B        |L1.60|
                  |L1.32|
;;;113    {
;;;114     while(delaytime--)
;;;115        {for(i=2000;i>0;i--)
000020  217d              MOVS     r1,#0x7d
000022  0109              LSLS     r1,r1,#4
000024  4af6              LDR      r2,|L1.1024|
000026  6011              STR      r1,[r2,#0]  ; i
000028  e004              B        |L1.52|
                  |L1.42|
00002a  49f5              LDR      r1,|L1.1024|
00002c  6809              LDR      r1,[r1,#0]  ; i
00002e  1e49              SUBS     r1,r1,#1
000030  4af3              LDR      r2,|L1.1024|
000032  6011              STR      r1,[r2,#0]  ; i
                  |L1.52|
000034  49f2              LDR      r1,|L1.1024|
000036  6809              LDR      r1,[r1,#0]  ; i
000038  2900              CMP      r1,#0
00003a  dcf6              BGT      |L1.42|
                  |L1.60|
00003c  4601              MOV      r1,r0                 ;114
00003e  1e40              SUBS     r0,r0,#1              ;114
000040  2900              CMP      r1,#0                 ;114
000042  d1ed              BNE      |L1.32|
;;;116    			{	
;;;117    			}			// about 1 ms
;;;118        }
;;;119    }
000044  4770              BX       lr
;;;120     void delay2(int delaytime)
                          ENDP

                  send_modem PROC
;;;964    
;;;965    void send_modem(char ch[])
000046  b570              PUSH     {r4-r6,lr}
;;;966    	{	
000048  4605              MOV      r5,r0
;;;967    						unsigned char i=0;
00004a  2400              MOVS     r4,#0
;;;968    						for(i=0;i<strlen(ch);i++)
00004c  bf00              NOP      
00004e  e005              B        |L1.92|
                  |L1.80|
;;;969    						{
;;;970    							uart_putchar(UART1_BASE_PTR, ch[i]);//clear();
000050  5d29              LDRB     r1,[r5,r4]
000052  48ea              LDR      r0,|L1.1020|
000054  f7fffffe          BL       uart_putchar
000058  1c60              ADDS     r0,r4,#1              ;968
00005a  b2c4              UXTB     r4,r0                 ;968
                  |L1.92|
00005c  4628              MOV      r0,r5                 ;968
00005e  f7fffffe          BL       strlen
000062  42a0              CMP      r0,r4                 ;968
000064  d8f4              BHI      |L1.80|
;;;971    						}
;;;972    						
;;;973    	}
000066  bd70              POP      {r4-r6,pc}
;;;974    
                          ENDP

                  send_SD PROC
;;;33     
;;;34     void send_SD(char *string, char *responseA, char *responseB, char *responseC, int32 timeout)
000068  b5ff              PUSH     {r0-r7,lr}
;;;35     {	int qwe;int exitflag=1;int cntr=0; long time111,timeout222;
00006a  b087              SUB      sp,sp,#0x1c
00006c  4616              MOV      r6,r2
00006e  461f              MOV      r7,r3
000070  9c10              LDR      r4,[sp,#0x40]
000072  2001              MOVS     r0,#1
000074  9006              STR      r0,[sp,#0x18]
000076  2000              MOVS     r0,#0
000078  9005              STR      r0,[sp,#0x14]
;;;36     	char cond121;
;;;37     	char* cond122;
;;;38     	char* cond123;
;;;39     	char* cond124;
;;;40     		//uart_putchar(UART1_BASE_PTR,0xA);
;;;41     		//uart_putchar(UART1_BASE_PTR,0x1A);
;;;42     	clear();
00007a  f7fffffe          BL       clear
;;;43     	tout=0;
00007e  2000              MOVS     r0,#0
000080  49e0              LDR      r1,|L1.1028|
000082  6008              STR      r0,[r1,#0]  ; tout
;;;44     //	qwe=strlen(uart_string_gsm);
;;;45     		memset(uart_string_gsm,0,5000);
000084  49e0              LDR      r1,|L1.1032|
000086  48e1              LDR      r0,|L1.1036|
000088  f7fffffe          BL       __aeabi_memclr4
;;;46     		k2=0;									//string array counter for uart 1
00008c  2000              MOVS     r0,#0
00008e  49e0              LDR      r1,|L1.1040|
000090  6008              STR      r0,[r1,#0]  ; k2
;;;47     	  time111=timeout;						//timer counts to wait for characters in uart 1 
000092  9404              STR      r4,[sp,#0x10]
;;;48     		clear();
000094  f7fffffe          BL       clear
;;;49     		timeout222=2001;
000098  48de              LDR      r0,|L1.1044|
00009a  9003              STR      r0,[sp,#0xc]
;;;50     		send_modem(string);
00009c  9807              LDR      r0,[sp,#0x1c]
00009e  f7fffffe          BL       send_modem
;;;51     
;;;52     	//	uart_putchar(UART1_BASE_PTR,'\n');	uart_putchar(UART1_BASE_PTR,'\n');	
;;;53     	delay(10);
0000a2  200a              MOVS     r0,#0xa
0000a4  f7fffffe          BL       delay
;;;54     	uart_putchar(UART1_BASE_PTR,'\r');//uart_putchar(UART1_BASE_PTR,'\r');
0000a8  210d              MOVS     r1,#0xd
0000aa  48d4              LDR      r0,|L1.1020|
0000ac  f7fffffe          BL       uart_putchar
;;;55     	//uart_putchar(UART1_BASE_PTR,'\r');uart_putchar(UART1_BASE_PTR,'\n');//uart_putchar(UART1_BASE_PTR,0x1A);
;;;56     		do
0000b0  bf00              NOP      
                  |L1.178|
;;;57     		{
;;;58     			
;;;59     //					time111--;
;;;60     //				  timeout222--;
;;;61     
;;;62     			
;;;63     	cond122=strstr(uart_string_gsm, responseA);
0000b2  48d6              LDR      r0,|L1.1036|
0000b4  9908              LDR      r1,[sp,#0x20]
0000b6  f7fffffe          BL       strstr
0000ba  9001              STR      r0,[sp,#4]
;;;64     	cond123=strstr(uart_string_gsm, responseB);
0000bc  4631              MOV      r1,r6
0000be  48d3              LDR      r0,|L1.1036|
0000c0  f7fffffe          BL       strstr
0000c4  9000              STR      r0,[sp,#0]
;;;65       cond124=strstr(uart_string_gsm, responseC);
0000c6  4639              MOV      r1,r7
0000c8  48d0              LDR      r0,|L1.1036|
0000ca  f7fffffe          BL       strstr
0000ce  4605              MOV      r5,r0
;;;66     	cond121 = (cond122	|| cond123	|| cond124  || (tout > timeout))	;
0000d0  9801              LDR      r0,[sp,#4]
0000d2  2800              CMP      r0,#0
0000d4  d108              BNE      |L1.232|
0000d6  9800              LDR      r0,[sp,#0]
0000d8  2800              CMP      r0,#0
0000da  d105              BNE      |L1.232|
0000dc  2d00              CMP      r5,#0
0000de  d103              BNE      |L1.232|
0000e0  48c8              LDR      r0,|L1.1028|
0000e2  6800              LDR      r0,[r0,#0]  ; tout
0000e4  42a0              CMP      r0,r4
0000e6  dd01              BLE      |L1.236|
                  |L1.232|
0000e8  2001              MOVS     r0,#1
0000ea  e000              B        |L1.238|
                  |L1.236|
0000ec  2000              MOVS     r0,#0
                  |L1.238|
0000ee  9002              STR      r0,[sp,#8]
;;;67     			
;;;68     		}while (!cond121);
0000f0  9802              LDR      r0,[sp,#8]
0000f2  2800              CMP      r0,#0
0000f4  d0dd              BEQ      |L1.178|
;;;69     		clear();
0000f6  f7fffffe          BL       clear
;;;70     		if(tout>timeout){
0000fa  48c2              LDR      r0,|L1.1028|
0000fc  6800              LDR      r0,[r0,#0]  ; tout
0000fe  42a0              CMP      r0,r4
000100  dd17              BLE      |L1.306|
;;;71     			uart_putchar(UART1_BASE_PTR,'\r');
000102  210d              MOVS     r1,#0xd
000104  48bd              LDR      r0,|L1.1020|
000106  f7fffffe          BL       uart_putchar
;;;72     		uart_putchar(UART1_BASE_PTR,'\n');uart_putchar(UART1_BASE_PTR,0x1A);
00010a  210a              MOVS     r1,#0xa
00010c  48bb              LDR      r0,|L1.1020|
00010e  f7fffffe          BL       uart_putchar
000112  211a              MOVS     r1,#0x1a
000114  48b9              LDR      r0,|L1.1020|
000116  f7fffffe          BL       uart_putchar
;;;73     		uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,'\r');
00011a  211a              MOVS     r1,#0x1a
00011c  48b7              LDR      r0,|L1.1020|
00011e  f7fffffe          BL       uart_putchar
000122  210d              MOVS     r1,#0xd
000124  48b5              LDR      r0,|L1.1020|
000126  f7fffffe          BL       uart_putchar
;;;74     		uart_putchar(UART1_BASE_PTR,'\n');}
00012a  210a              MOVS     r1,#0xa
00012c  48b3              LDR      r0,|L1.1020|
00012e  f7fffffe          BL       uart_putchar
                  |L1.306|
;;;75     		//return;
;;;76     //		return uart_string_gsm;
;;;77     
;;;78     }
000132  b00b              ADD      sp,sp,#0x2c
000134  bdf0              POP      {r4-r7,pc}
;;;79     
                          ENDP

                  send_GSM PROC
;;;1011   
;;;1012   void send_GSM(char *string, char *responseA, char *responseB, char *responseC, int32 timeout)
000136  b5ff              PUSH     {r0-r7,lr}
;;;1013   {	int qwe;int exitflag=1;int cntr=0; long time111,timeout222;
000138  b087              SUB      sp,sp,#0x1c
00013a  4616              MOV      r6,r2
00013c  461f              MOV      r7,r3
00013e  9c10              LDR      r4,[sp,#0x40]
000140  2001              MOVS     r0,#1
000142  9006              STR      r0,[sp,#0x18]
000144  2000              MOVS     r0,#0
000146  9005              STR      r0,[sp,#0x14]
;;;1014   	char cond121;
;;;1015   	char* cond122;
;;;1016   	char* cond123;
;;;1017   	char* cond124;
;;;1018   		//uart_putchar(UART1_BASE_PTR,0xA);
;;;1019   		//uart_putchar(UART1_BASE_PTR,0x1A);
;;;1020   	clear();
000148  f7fffffe          BL       clear
;;;1021   	tout=0;
00014c  2000              MOVS     r0,#0
00014e  49ad              LDR      r1,|L1.1028|
000150  6008              STR      r0,[r1,#0]  ; tout
;;;1022   //	qwe=strlen(uart_string_gsm);
;;;1023   		memset(uart_string_gsm,0,5000);
000152  49ad              LDR      r1,|L1.1032|
000154  48ad              LDR      r0,|L1.1036|
000156  f7fffffe          BL       __aeabi_memclr4
;;;1024   		k2=0;									//string array counter for uart 1
00015a  2000              MOVS     r0,#0
00015c  49ac              LDR      r1,|L1.1040|
00015e  6008              STR      r0,[r1,#0]  ; k2
;;;1025   	  time111=timeout;						//timer counts to wait for characters in uart 1 
000160  9404              STR      r4,[sp,#0x10]
;;;1026   		clear();
000162  f7fffffe          BL       clear
;;;1027   		timeout222=2001;
000166  48ab              LDR      r0,|L1.1044|
000168  9003              STR      r0,[sp,#0xc]
;;;1028   		send_modem(string);
00016a  9807              LDR      r0,[sp,#0x1c]
00016c  f7fffffe          BL       send_modem
;;;1029   
;;;1030   		uart_putchar(UART1_BASE_PTR,'\n');	uart_putchar(UART1_BASE_PTR,'\n');	
000170  210a              MOVS     r1,#0xa
000172  48a2              LDR      r0,|L1.1020|
000174  f7fffffe          BL       uart_putchar
000178  210a              MOVS     r1,#0xa
00017a  48a0              LDR      r0,|L1.1020|
00017c  f7fffffe          BL       uart_putchar
;;;1031   	delay(10);
000180  200a              MOVS     r0,#0xa
000182  f7fffffe          BL       delay
;;;1032   //	uart_putchar(UART1_BASE_PTR,'\r');
;;;1033   	//uart_putchar(UART1_BASE_PTR,'\r');uart_putchar(UART1_BASE_PTR,'\n');//uart_putchar(UART1_BASE_PTR,0x1A);
;;;1034   		do
000186  bf00              NOP      
                  |L1.392|
;;;1035   		{
;;;1036   			
;;;1037   //					time111--;
;;;1038   //				  timeout222--;
;;;1039   
;;;1040   			
;;;1041   	cond122=strstr(uart_string_gsm, responseA);
000188  48a0              LDR      r0,|L1.1036|
00018a  9908              LDR      r1,[sp,#0x20]
00018c  f7fffffe          BL       strstr
000190  9001              STR      r0,[sp,#4]
;;;1042   	cond123=strstr(uart_string_gsm, responseB);
000192  4631              MOV      r1,r6
000194  489d              LDR      r0,|L1.1036|
000196  f7fffffe          BL       strstr
00019a  9000              STR      r0,[sp,#0]
;;;1043     cond124=strstr(uart_string_gsm, responseC);
00019c  4639              MOV      r1,r7
00019e  489b              LDR      r0,|L1.1036|
0001a0  f7fffffe          BL       strstr
0001a4  4605              MOV      r5,r0
;;;1044   	cond121 = (cond122	|| cond123	|| cond124  || (tout > timeout))	;
0001a6  9801              LDR      r0,[sp,#4]
0001a8  2800              CMP      r0,#0
0001aa  d108              BNE      |L1.446|
0001ac  9800              LDR      r0,[sp,#0]
0001ae  2800              CMP      r0,#0
0001b0  d105              BNE      |L1.446|
0001b2  2d00              CMP      r5,#0
0001b4  d103              BNE      |L1.446|
0001b6  4893              LDR      r0,|L1.1028|
0001b8  6800              LDR      r0,[r0,#0]  ; tout
0001ba  42a0              CMP      r0,r4
0001bc  dd01              BLE      |L1.450|
                  |L1.446|
0001be  2001              MOVS     r0,#1
0001c0  e000              B        |L1.452|
                  |L1.450|
0001c2  2000              MOVS     r0,#0
                  |L1.452|
0001c4  9002              STR      r0,[sp,#8]
;;;1045   			
;;;1046   		}while (!cond121);
0001c6  9802              LDR      r0,[sp,#8]
0001c8  2800              CMP      r0,#0
0001ca  d0dd              BEQ      |L1.392|
;;;1047   		clear();
0001cc  f7fffffe          BL       clear
;;;1048   		if(tout>timeout){
0001d0  488c              LDR      r0,|L1.1028|
0001d2  6800              LDR      r0,[r0,#0]  ; tout
0001d4  42a0              CMP      r0,r4
0001d6  dd17              BLE      |L1.520|
;;;1049   			uart_putchar(UART1_BASE_PTR,'\r');
0001d8  210d              MOVS     r1,#0xd
0001da  4888              LDR      r0,|L1.1020|
0001dc  f7fffffe          BL       uart_putchar
;;;1050   		uart_putchar(UART1_BASE_PTR,'\n');uart_putchar(UART1_BASE_PTR,0x1A);
0001e0  210a              MOVS     r1,#0xa
0001e2  4886              LDR      r0,|L1.1020|
0001e4  f7fffffe          BL       uart_putchar
0001e8  211a              MOVS     r1,#0x1a
0001ea  4884              LDR      r0,|L1.1020|
0001ec  f7fffffe          BL       uart_putchar
;;;1051   		uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,'\r');
0001f0  211a              MOVS     r1,#0x1a
0001f2  4882              LDR      r0,|L1.1020|
0001f4  f7fffffe          BL       uart_putchar
0001f8  210d              MOVS     r1,#0xd
0001fa  4880              LDR      r0,|L1.1020|
0001fc  f7fffffe          BL       uart_putchar
;;;1052   		uart_putchar(UART1_BASE_PTR,'\n');}
000200  210a              MOVS     r1,#0xa
000202  487e              LDR      r0,|L1.1020|
000204  f7fffffe          BL       uart_putchar
                  |L1.520|
;;;1053   		//return;
;;;1054   //		return uart_string_gsm;
;;;1055   
;;;1056   		
;;;1057   
;;;1058   
;;;1059   }
000208  b00b              ADD      sp,sp,#0x2c
00020a  bdf0              POP      {r4-r7,pc}
;;;1060   
                          ENDP

                  log_it PROC
;;;575    
;;;576    void log_it()
00020c  b538              PUSH     {r3-r5,lr}
;;;577    {char *check;
;;;578    	delay(100);
00020e  2064              MOVS     r0,#0x64
000210  f7fffffe          BL       delay
;;;579    		clear();//memset(uart_string_gsm,0,5000);
000214  f7fffffe          BL       clear
;;;580    	
;;;581    	memset(at_,0,100);
000218  2164              MOVS     r1,#0x64
00021a  487f              LDR      r0,|L1.1048|
00021c  f7fffffe          BL       __aeabi_memclr4
;;;582    sprintf(at_,"\r\nAT+FSWRITE=%s\\LOG.TXT,1,%d,10\n\n",drive,strlen(data)+1);	
000220  487e              LDR      r0,|L1.1052|
000222  f7fffffe          BL       strlen
000226  1c44              ADDS     r4,r0,#1
000228  4623              MOV      r3,r4
00022a  4a7d              LDR      r2,|L1.1056|
00022c  a17d              ADR      r1,|L1.1060|
00022e  487a              LDR      r0,|L1.1048|
000230  f7fffffe          BL       __2sprintf
;;;583    send_SD(at_, ">", "ERROR\r\n" , "ERROR",5);
000234  2005              MOVS     r0,#5
000236  a384              ADR      r3,|L1.1096|
000238  a285              ADR      r2,|L1.1104|
00023a  a187              ADR      r1,|L1.1112|
00023c  9000              STR      r0,[sp,#0]
00023e  4876              LDR      r0,|L1.1048|
000240  f7fffffe          BL       send_SD
;;;584    //uart_putchar(UART1_BASE_PTR,'\n');uart_putchar(UART1_BASE_PTR,'\n');uart_putchar(UART1_BASE_PTR,'\n');	
;;;585    //	if(strstr(uart_string_gsm,"ERROR")){
;;;586    //	sprintf(at_,"\nAT+FSCREATE=%s\\LOG.TXT\r\n",drive);
;;;587    //	send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;588    //	}
;;;589    	
;;;590    clear();	
000244  f7fffffe          BL       clear
;;;591    									k2=0;									//string array counter for uart 1
000248  2000              MOVS     r0,#0
00024a  4971              LDR      r1,|L1.1040|
00024c  6008              STR      r0,[r1,#0]  ; k2
;;;592    									tout=0;	
00024e  496d              LDR      r1,|L1.1028|
000250  6008              STR      r0,[r1,#0]  ; tout
;;;593    		for(k=0;k<strlen(data);k++)
000252  4982              LDR      r1,|L1.1116|
000254  6008              STR      r0,[r1,#0]  ; k
000256  e00b              B        |L1.624|
                  |L1.600|
;;;594    		{
;;;595    			uart_putchar(UART1_BASE_PTR, data[k]);//clear();
000258  4870              LDR      r0,|L1.1052|
00025a  4a80              LDR      r2,|L1.1116|
00025c  6812              LDR      r2,[r2,#0]  ; k
00025e  5c81              LDRB     r1,[r0,r2]
000260  4866              LDR      r0,|L1.1020|
000262  f7fffffe          BL       uart_putchar
000266  487d              LDR      r0,|L1.1116|
000268  6800              LDR      r0,[r0,#0]            ;593  ; k
00026a  1c40              ADDS     r0,r0,#1              ;593
00026c  497b              LDR      r1,|L1.1116|
00026e  6008              STR      r0,[r1,#0]            ;593  ; k
                  |L1.624|
000270  486a              LDR      r0,|L1.1052|
000272  f7fffffe          BL       strlen
000276  4979              LDR      r1,|L1.1116|
000278  6809              LDR      r1,[r1,#0]            ;593  ; k
00027a  4288              CMP      r0,r1                 ;593
00027c  d8ec              BHI      |L1.600|
;;;596    		}	
;;;597    uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	uart_putchar(UART1_BASE_PTR, '\n');	
00027e  210a              MOVS     r1,#0xa
000280  485e              LDR      r0,|L1.1020|
000282  f7fffffe          BL       uart_putchar
000286  210a              MOVS     r1,#0xa
000288  485c              LDR      r0,|L1.1020|
00028a  f7fffffe          BL       uart_putchar
00028e  210a              MOVS     r1,#0xa
000290  485a              LDR      r0,|L1.1020|
000292  f7fffffe          BL       uart_putchar
000296  210a              MOVS     r1,#0xa
000298  4858              LDR      r0,|L1.1020|
00029a  f7fffffe          BL       uart_putchar
00029e  210a              MOVS     r1,#0xa
0002a0  4856              LDR      r0,|L1.1020|
0002a2  f7fffffe          BL       uart_putchar
0002a6  210a              MOVS     r1,#0xa
0002a8  4854              LDR      r0,|L1.1020|
0002aa  f7fffffe          BL       uart_putchar
0002ae  210a              MOVS     r1,#0xa
0002b0  4852              LDR      r0,|L1.1020|
0002b2  f7fffffe          BL       uart_putchar
0002b6  210a              MOVS     r1,#0xa
0002b8  4850              LDR      r0,|L1.1020|
0002ba  f7fffffe          BL       uart_putchar
0002be  210a              MOVS     r1,#0xa
0002c0  484e              LDR      r0,|L1.1020|
0002c2  f7fffffe          BL       uart_putchar
0002c6  210a              MOVS     r1,#0xa
0002c8  484c              LDR      r0,|L1.1020|
0002ca  f7fffffe          BL       uart_putchar
0002ce  210a              MOVS     r1,#0xa
0002d0  484a              LDR      r0,|L1.1020|
0002d2  f7fffffe          BL       uart_putchar
0002d6  210a              MOVS     r1,#0xa
0002d8  4848              LDR      r0,|L1.1020|
0002da  f7fffffe          BL       uart_putchar
0002de  210a              MOVS     r1,#0xa
0002e0  4846              LDR      r0,|L1.1020|
0002e2  f7fffffe          BL       uart_putchar
0002e6  210a              MOVS     r1,#0xa
0002e8  4844              LDR      r0,|L1.1020|
0002ea  f7fffffe          BL       uart_putchar
0002ee  210a              MOVS     r1,#0xa
0002f0  4842              LDR      r0,|L1.1020|
0002f2  f7fffffe          BL       uart_putchar
0002f6  210a              MOVS     r1,#0xa
0002f8  4840              LDR      r0,|L1.1020|
0002fa  f7fffffe          BL       uart_putchar
0002fe  210a              MOVS     r1,#0xa
000300  483e              LDR      r0,|L1.1020|
000302  f7fffffe          BL       uart_putchar
000306  210a              MOVS     r1,#0xa
000308  483c              LDR      r0,|L1.1020|
00030a  f7fffffe          BL       uart_putchar
00030e  210a              MOVS     r1,#0xa
000310  483a              LDR      r0,|L1.1020|
000312  f7fffffe          BL       uart_putchar
000316  210a              MOVS     r1,#0xa
000318  4838              LDR      r0,|L1.1020|
00031a  f7fffffe          BL       uart_putchar
00031e  210a              MOVS     r1,#0xa
000320  4836              LDR      r0,|L1.1020|
000322  f7fffffe          BL       uart_putchar
000326  210a              MOVS     r1,#0xa
000328  4834              LDR      r0,|L1.1020|
00032a  f7fffffe          BL       uart_putchar
00032e  210a              MOVS     r1,#0xa
000330  4832              LDR      r0,|L1.1020|
000332  f7fffffe          BL       uart_putchar
000336  210a              MOVS     r1,#0xa
000338  4830              LDR      r0,|L1.1020|
00033a  f7fffffe          BL       uart_putchar
00033e  210a              MOVS     r1,#0xa
000340  482e              LDR      r0,|L1.1020|
000342  f7fffffe          BL       uart_putchar
000346  210a              MOVS     r1,#0xa
000348  482c              LDR      r0,|L1.1020|
00034a  f7fffffe          BL       uart_putchar
00034e  210a              MOVS     r1,#0xa
000350  482a              LDR      r0,|L1.1020|
000352  f7fffffe          BL       uart_putchar
000356  210a              MOVS     r1,#0xa
000358  4828              LDR      r0,|L1.1020|
00035a  f7fffffe          BL       uart_putchar
00035e  210a              MOVS     r1,#0xa
000360  4826              LDR      r0,|L1.1020|
000362  f7fffffe          BL       uart_putchar
000366  210a              MOVS     r1,#0xa
000368  4824              LDR      r0,|L1.1020|
00036a  f7fffffe          BL       uart_putchar
00036e  210a              MOVS     r1,#0xa
000370  4822              LDR      r0,|L1.1020|
000372  f7fffffe          BL       uart_putchar
000376  210a              MOVS     r1,#0xa
000378  4820              LDR      r0,|L1.1020|
00037a  f7fffffe          BL       uart_putchar
00037e  210a              MOVS     r1,#0xa
000380  481e              LDR      r0,|L1.1020|
000382  f7fffffe          BL       uart_putchar
000386  210a              MOVS     r1,#0xa
000388  481c              LDR      r0,|L1.1020|
00038a  f7fffffe          BL       uart_putchar
00038e  210a              MOVS     r1,#0xa
000390  481a              LDR      r0,|L1.1020|
000392  f7fffffe          BL       uart_putchar
000396  210a              MOVS     r1,#0xa
000398  4818              LDR      r0,|L1.1020|
00039a  f7fffffe          BL       uart_putchar
00039e  210a              MOVS     r1,#0xa
0003a0  4816              LDR      r0,|L1.1020|
0003a2  f7fffffe          BL       uart_putchar
0003a6  210a              MOVS     r1,#0xa
0003a8  4814              LDR      r0,|L1.1020|
0003aa  f7fffffe          BL       uart_putchar
0003ae  210a              MOVS     r1,#0xa
0003b0  4812              LDR      r0,|L1.1020|
0003b2  f7fffffe          BL       uart_putchar
0003b6  210a              MOVS     r1,#0xa
0003b8  4810              LDR      r0,|L1.1020|
0003ba  f7fffffe          BL       uart_putchar
0003be  210a              MOVS     r1,#0xa
0003c0  480e              LDR      r0,|L1.1020|
0003c2  f7fffffe          BL       uart_putchar
0003c6  210a              MOVS     r1,#0xa
0003c8  480c              LDR      r0,|L1.1020|
0003ca  f7fffffe          BL       uart_putchar
0003ce  210a              MOVS     r1,#0xa
0003d0  480a              LDR      r0,|L1.1020|
0003d2  f7fffffe          BL       uart_putchar
0003d6  210a              MOVS     r1,#0xa
0003d8  4808              LDR      r0,|L1.1020|
0003da  f7fffffe          BL       uart_putchar
0003de  210a              MOVS     r1,#0xa
0003e0  4806              LDR      r0,|L1.1020|
0003e2  f7fffffe          BL       uart_putchar
0003e6  210a              MOVS     r1,#0xa
0003e8  4804              LDR      r0,|L1.1020|
0003ea  f7fffffe          BL       uart_putchar
0003ee  210a              MOVS     r1,#0xa
0003f0  4802              LDR      r0,|L1.1020|
0003f2  f7fffffe          BL       uart_putchar
0003f6  210a              MOVS     r1,#0xa
0003f8  4800              LDR      r0,|L1.1020|
0003fa  e031              B        |L1.1120|
                  |L1.1020|
                          DCD      0x4006b000
                  |L1.1024|
                          DCD      i
                  |L1.1028|
                          DCD      tout
                  |L1.1032|
                          DCD      0x00001388
                  |L1.1036|
                          DCD      uart_string_gsm
                  |L1.1040|
                          DCD      ||k2||
                  |L1.1044|
                          DCD      0x000007d1
                  |L1.1048|
                          DCD      at_
                  |L1.1052|
                          DCD      data
                  |L1.1056|
                          DCD      drive
                  |L1.1060|
000424  0d0a4154          DCB      "\r\nAT+FSWRITE=%s\\LOG.TXT,1,%d,10\n\n",0
000428  2b465357
00042c  52495445
000430  3d25735c
000434  4c4f472e
000438  5458542c
00043c  312c2564
000440  2c31300a
000444  0a00    
000446  00                DCB      0
000447  00                DCB      0
                  |L1.1096|
000448  4552524f          DCB      "ERROR",0
00044c  5200    
00044e  00                DCB      0
00044f  00                DCB      0
                  |L1.1104|
000450  4552524f          DCB      "ERROR\r\n",0
000454  520d0a00
                  |L1.1112|
000458  3e00              DCB      ">",0
00045a  00                DCB      0
00045b  00                DCB      0
                  |L1.1116|
                          DCD      k
                  |L1.1120|
000460  f7fffffe          BL       uart_putchar
000464  210a              MOVS     r1,#0xa
000466  48fe              LDR      r0,|L1.2144|
000468  f7fffffe          BL       uart_putchar
00046c  210a              MOVS     r1,#0xa
00046e  48fc              LDR      r0,|L1.2144|
000470  f7fffffe          BL       uart_putchar
000474  210a              MOVS     r1,#0xa
000476  48fa              LDR      r0,|L1.2144|
000478  f7fffffe          BL       uart_putchar
00047c  210a              MOVS     r1,#0xa
00047e  48f8              LDR      r0,|L1.2144|
000480  f7fffffe          BL       uart_putchar
000484  210a              MOVS     r1,#0xa
000486  48f6              LDR      r0,|L1.2144|
000488  f7fffffe          BL       uart_putchar
00048c  210a              MOVS     r1,#0xa
00048e  48f4              LDR      r0,|L1.2144|
000490  f7fffffe          BL       uart_putchar
000494  210a              MOVS     r1,#0xa
000496  48f2              LDR      r0,|L1.2144|
000498  f7fffffe          BL       uart_putchar
00049c  210a              MOVS     r1,#0xa
00049e  48f0              LDR      r0,|L1.2144|
0004a0  f7fffffe          BL       uart_putchar
0004a4  210a              MOVS     r1,#0xa
0004a6  48ee              LDR      r0,|L1.2144|
0004a8  f7fffffe          BL       uart_putchar
0004ac  210a              MOVS     r1,#0xa
0004ae  48ec              LDR      r0,|L1.2144|
0004b0  f7fffffe          BL       uart_putchar
0004b4  210a              MOVS     r1,#0xa
0004b6  48ea              LDR      r0,|L1.2144|
0004b8  f7fffffe          BL       uart_putchar
0004bc  210a              MOVS     r1,#0xa
0004be  48e8              LDR      r0,|L1.2144|
0004c0  f7fffffe          BL       uart_putchar
0004c4  210a              MOVS     r1,#0xa
0004c6  48e6              LDR      r0,|L1.2144|
0004c8  f7fffffe          BL       uart_putchar
0004cc  210a              MOVS     r1,#0xa
0004ce  48e4              LDR      r0,|L1.2144|
0004d0  f7fffffe          BL       uart_putchar
0004d4  210a              MOVS     r1,#0xa
0004d6  48e2              LDR      r0,|L1.2144|
0004d8  f7fffffe          BL       uart_putchar
0004dc  210a              MOVS     r1,#0xa
0004de  48e0              LDR      r0,|L1.2144|
0004e0  f7fffffe          BL       uart_putchar
0004e4  210a              MOVS     r1,#0xa
0004e6  48de              LDR      r0,|L1.2144|
0004e8  f7fffffe          BL       uart_putchar
0004ec  210a              MOVS     r1,#0xa
0004ee  48dc              LDR      r0,|L1.2144|
0004f0  f7fffffe          BL       uart_putchar
0004f4  210a              MOVS     r1,#0xa
0004f6  48da              LDR      r0,|L1.2144|
0004f8  f7fffffe          BL       uart_putchar
0004fc  210a              MOVS     r1,#0xa
0004fe  48d8              LDR      r0,|L1.2144|
000500  f7fffffe          BL       uart_putchar
000504  210a              MOVS     r1,#0xa
000506  48d6              LDR      r0,|L1.2144|
000508  f7fffffe          BL       uart_putchar
00050c  210a              MOVS     r1,#0xa
00050e  48d4              LDR      r0,|L1.2144|
000510  f7fffffe          BL       uart_putchar
000514  210a              MOVS     r1,#0xa
000516  48d2              LDR      r0,|L1.2144|
000518  f7fffffe          BL       uart_putchar
00051c  210a              MOVS     r1,#0xa
00051e  48d0              LDR      r0,|L1.2144|
000520  f7fffffe          BL       uart_putchar
000524  210a              MOVS     r1,#0xa
000526  48ce              LDR      r0,|L1.2144|
000528  f7fffffe          BL       uart_putchar
00052c  210a              MOVS     r1,#0xa
00052e  48cc              LDR      r0,|L1.2144|
000530  f7fffffe          BL       uart_putchar
000534  210a              MOVS     r1,#0xa
000536  48ca              LDR      r0,|L1.2144|
000538  f7fffffe          BL       uart_putchar
00053c  210a              MOVS     r1,#0xa
00053e  48c8              LDR      r0,|L1.2144|
000540  f7fffffe          BL       uart_putchar
000544  210a              MOVS     r1,#0xa
000546  48c6              LDR      r0,|L1.2144|
000548  f7fffffe          BL       uart_putchar
00054c  210a              MOVS     r1,#0xa
00054e  48c4              LDR      r0,|L1.2144|
000550  f7fffffe          BL       uart_putchar
000554  210a              MOVS     r1,#0xa
000556  48c2              LDR      r0,|L1.2144|
000558  f7fffffe          BL       uart_putchar
00055c  210a              MOVS     r1,#0xa
00055e  48c0              LDR      r0,|L1.2144|
000560  f7fffffe          BL       uart_putchar
000564  210a              MOVS     r1,#0xa
000566  48be              LDR      r0,|L1.2144|
000568  f7fffffe          BL       uart_putchar
00056c  210a              MOVS     r1,#0xa
00056e  48bc              LDR      r0,|L1.2144|
000570  f7fffffe          BL       uart_putchar
000574  210a              MOVS     r1,#0xa
000576  48ba              LDR      r0,|L1.2144|
000578  f7fffffe          BL       uart_putchar
00057c  210a              MOVS     r1,#0xa
00057e  48b8              LDR      r0,|L1.2144|
000580  f7fffffe          BL       uart_putchar
000584  210a              MOVS     r1,#0xa
000586  48b6              LDR      r0,|L1.2144|
000588  f7fffffe          BL       uart_putchar
00058c  210a              MOVS     r1,#0xa
00058e  48b4              LDR      r0,|L1.2144|
000590  f7fffffe          BL       uart_putchar
000594  210a              MOVS     r1,#0xa
000596  48b2              LDR      r0,|L1.2144|
000598  f7fffffe          BL       uart_putchar
00059c  210a              MOVS     r1,#0xa
00059e  48b0              LDR      r0,|L1.2144|
0005a0  f7fffffe          BL       uart_putchar
0005a4  210a              MOVS     r1,#0xa
0005a6  48ae              LDR      r0,|L1.2144|
0005a8  f7fffffe          BL       uart_putchar
0005ac  210a              MOVS     r1,#0xa
0005ae  48ac              LDR      r0,|L1.2144|
0005b0  f7fffffe          BL       uart_putchar
0005b4  210a              MOVS     r1,#0xa
0005b6  48aa              LDR      r0,|L1.2144|
0005b8  f7fffffe          BL       uart_putchar
0005bc  210a              MOVS     r1,#0xa
0005be  48a8              LDR      r0,|L1.2144|
0005c0  f7fffffe          BL       uart_putchar
0005c4  210a              MOVS     r1,#0xa
0005c6  48a6              LDR      r0,|L1.2144|
0005c8  f7fffffe          BL       uart_putchar
0005cc  210a              MOVS     r1,#0xa
0005ce  48a4              LDR      r0,|L1.2144|
0005d0  f7fffffe          BL       uart_putchar
0005d4  210a              MOVS     r1,#0xa
0005d6  48a2              LDR      r0,|L1.2144|
0005d8  f7fffffe          BL       uart_putchar
0005dc  210a              MOVS     r1,#0xa
0005de  48a0              LDR      r0,|L1.2144|
0005e0  f7fffffe          BL       uart_putchar
0005e4  210a              MOVS     r1,#0xa
0005e6  489e              LDR      r0,|L1.2144|
0005e8  f7fffffe          BL       uart_putchar
0005ec  210a              MOVS     r1,#0xa
0005ee  489c              LDR      r0,|L1.2144|
0005f0  f7fffffe          BL       uart_putchar
0005f4  210a              MOVS     r1,#0xa
0005f6  489a              LDR      r0,|L1.2144|
0005f8  f7fffffe          BL       uart_putchar
0005fc  210a              MOVS     r1,#0xa
0005fe  4898              LDR      r0,|L1.2144|
000600  f7fffffe          BL       uart_putchar
000604  210a              MOVS     r1,#0xa
000606  4896              LDR      r0,|L1.2144|
000608  f7fffffe          BL       uart_putchar
;;;598    									//memset(data,0,1000);
;;;599    														//timer counts to wait for characters in uart 1 									
;;;600    									while(!(strstr(uart_string_gsm,"OK\r\n")  || (strstr(uart_string_gsm, "ERROR") ||  (tout > 5) )))
00060c  bf00              NOP      
                  |L1.1550|
00060e  a195              ADR      r1,|L1.2148|
000610  4896              LDR      r0,|L1.2156|
000612  f7fffffe          BL       strstr
000616  2800              CMP      r0,#0
000618  d109              BNE      |L1.1582|
00061a  4995              LDR      r1,|L1.2160|
00061c  4893              LDR      r0,|L1.2156|
00061e  f7fffffe          BL       strstr
000622  2800              CMP      r0,#0
000624  d103              BNE      |L1.1582|
000626  4893              LDR      r0,|L1.2164|
000628  6800              LDR      r0,[r0,#0]  ; tout
00062a  2805              CMP      r0,#5
00062c  ddef              BLE      |L1.1550|
                  |L1.1582|
;;;601    									{				//uart_putchar(UART1_BASE_PTR, '\n');					
;;;602    									}
;;;603    	                clear();//uart_putchar(UART1_BASE_PTR,0x1a);
00062e  f7fffffe          BL       clear
;;;604    									//clear();
;;;605    									memset(data,0,strlen(data));
000632  4891              LDR      r0,|L1.2168|
000634  f7fffffe          BL       strlen
000638  4604              MOV      r4,r0
00063a  4621              MOV      r1,r4
00063c  488e              LDR      r0,|L1.2168|
00063e  f7fffffe          BL       __aeabi_memclr4
;;;606    									clear();
000642  f7fffffe          BL       clear
;;;607    
;;;608    								
;;;609    						//		
;;;610    }
000646  bd38              POP      {r3-r5,pc}
;;;611    
                          ENDP

                  mystrstr PROC
;;;71     
;;;72     char mystrstr(char* str1, char character)
000648  b5f8              PUSH     {r3-r7,lr}
;;;73     {int sz,cn;
00064a  4605              MOV      r5,r0
00064c  460e              MOV      r6,r1
;;;74     	sz=strlen(str1);
00064e  4628              MOV      r0,r5
000650  f7fffffe          BL       strlen
000654  4607              MOV      r7,r0
;;;75     	for(cn=0;cn<=sz;cn++)
000656  2400              MOVS     r4,#0
000658  e005              B        |L1.1638|
                  |L1.1626|
;;;76     	{if(str1[cn] == character)
00065a  5d28              LDRB     r0,[r5,r4]
00065c  42b0              CMP      r0,r6
00065e  d101              BNE      |L1.1636|
;;;77     		{return 1;}
000660  2001              MOVS     r0,#1
                  |L1.1634|
;;;78     	}
;;;79     	return 0;
;;;80     }
000662  bdf8              POP      {r3-r7,pc}
                  |L1.1636|
000664  1c64              ADDS     r4,r4,#1              ;75
                  |L1.1638|
000666  42bc              CMP      r4,r7                 ;75
000668  ddf7              BLE      |L1.1626|
00066a  2000              MOVS     r0,#0                 ;79
00066c  e7f9              B        |L1.1634|
;;;81     
                          ENDP

                  save_ip_port PROC
;;;715    	
;;;716    void save_ip_port()
00066e  b538              PUSH     {r3-r5,lr}
;;;717    {
;;;718    	
;;;719    send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
000670  4882              LDR      r0,|L1.2172|
000672  6800              LDR      r0,[r0,#0]  ; tmeout
000674  a382              ADR      r3,|L1.2176|
000676  4a7e              LDR      r2,|L1.2160|
000678  3208              ADDS     r2,r2,#8
00067a  a183              ADR      r1,|L1.2184|
00067c  9000              STR      r0,[sp,#0]
00067e  a083              ADR      r0,|L1.2188|
000680  f7fffffe          BL       send_GSM
;;;720    	
;;;721    	memset(at_,0,100);
000684  2164              MOVS     r1,#0x64
000686  4889              LDR      r0,|L1.2220|
000688  f7fffffe          BL       __aeabi_memclr4
;;;722    	sprintf(at_,"\r\nAT+FSWRITE=C:\\IP_PORT.TXT,0,%d,10\r\n",strlen(ip)+12+strlen(port));	
00068c  4888              LDR      r0,|L1.2224|
00068e  f7fffffe          BL       strlen
000692  4605              MOV      r5,r0
000694  350c              ADDS     r5,r5,#0xc
000696  4887              LDR      r0,|L1.2228|
000698  f7fffffe          BL       strlen
00069c  182c              ADDS     r4,r5,r0
00069e  4622              MOV      r2,r4
0006a0  a185              ADR      r1,|L1.2232|
0006a2  4882              LDR      r0,|L1.2220|
0006a4  f7fffffe          BL       __2sprintf
;;;723    send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",10);	
0006a8  200a              MOVS     r0,#0xa
0006aa  a375              ADR      r3,|L1.2176|
0006ac  4a70              LDR      r2,|L1.2160|
0006ae  3208              ADDS     r2,r2,#8
0006b0  a18b              ADR      r1,|L1.2272|
0006b2  9000              STR      r0,[sp,#0]
0006b4  487d              LDR      r0,|L1.2220|
0006b6  f7fffffe          BL       send_GSM
;;;724    	clear();
0006ba  f7fffffe          BL       clear
;;;725    
;;;726    	
;;;727    	send_modem("|IP|");
0006be  a089              ADR      r0,|L1.2276|
0006c0  f7fffffe          BL       send_modem
;;;728    		for(k=0;k<strlen(ip);k++)
0006c4  2000              MOVS     r0,#0
0006c6  4989              LDR      r1,|L1.2284|
0006c8  6008              STR      r0,[r1,#0]  ; k
0006ca  e00b              B        |L1.1764|
                  |L1.1740|
;;;729    		{
;;;730    			uart_putchar(UART1_BASE_PTR, ip[k]);// uart0_putchar(UART0_BASE_PTR, ip[k]);//clear();
0006cc  4878              LDR      r0,|L1.2224|
0006ce  4a87              LDR      r2,|L1.2284|
0006d0  6812              LDR      r2,[r2,#0]  ; k
0006d2  5c81              LDRB     r1,[r0,r2]
0006d4  4862              LDR      r0,|L1.2144|
0006d6  f7fffffe          BL       uart_putchar
0006da  4884              LDR      r0,|L1.2284|
0006dc  6800              LDR      r0,[r0,#0]            ;728  ; k
0006de  1c40              ADDS     r0,r0,#1              ;728
0006e0  4982              LDR      r1,|L1.2284|
0006e2  6008              STR      r0,[r1,#0]            ;728  ; k
                  |L1.1764|
0006e4  4872              LDR      r0,|L1.2224|
0006e6  f7fffffe          BL       strlen
0006ea  4980              LDR      r1,|L1.2284|
0006ec  6809              LDR      r1,[r1,#0]            ;728  ; k
0006ee  4288              CMP      r0,r1                 ;728
0006f0  d8ec              BHI      |L1.1740|
;;;731    		}	
;;;732    	send_modem("|PORT|");			
0006f2  a07f              ADR      r0,|L1.2288|
0006f4  f7fffffe          BL       send_modem
;;;733    		for(k=0;k<strlen(port);k++)
0006f8  2000              MOVS     r0,#0
0006fa  497c              LDR      r1,|L1.2284|
0006fc  6008              STR      r0,[r1,#0]  ; k
0006fe  e00b              B        |L1.1816|
                  |L1.1792|
;;;734    		{
;;;735    			uart_putchar(UART1_BASE_PTR, port[k]);// uart0_putchar(UART0_BASE_PTR, port[k]);//clear();
000700  486c              LDR      r0,|L1.2228|
000702  4a7a              LDR      r2,|L1.2284|
000704  6812              LDR      r2,[r2,#0]  ; k
000706  5c81              LDRB     r1,[r0,r2]
000708  4855              LDR      r0,|L1.2144|
00070a  f7fffffe          BL       uart_putchar
00070e  4877              LDR      r0,|L1.2284|
000710  6800              LDR      r0,[r0,#0]            ;733  ; k
000712  1c40              ADDS     r0,r0,#1              ;733
000714  4975              LDR      r1,|L1.2284|
000716  6008              STR      r0,[r1,#0]            ;733  ; k
                  |L1.1816|
000718  4866              LDR      r0,|L1.2228|
00071a  f7fffffe          BL       strlen
00071e  4973              LDR      r1,|L1.2284|
000720  6809              LDR      r1,[r1,#0]            ;733  ; k
000722  4288              CMP      r0,r1                 ;733
000724  d8ec              BHI      |L1.1792|
;;;736    		}	
;;;737    send_modem("|");			
000726  a074              ADR      r0,|L1.2296|
000728  f7fffffe          BL       send_modem
;;;738    									//memset(data,0,1000);
;;;739    									k2=0;									//string array counter for uart 1
00072c  2000              MOVS     r0,#0
00072e  4973              LDR      r1,|L1.2300|
000730  6008              STR      r0,[r1,#0]  ; k2
;;;740    									time=19999;						//timer counts to wait for characters in uart 1 									
000732  4873              LDR      r0,|L1.2304|
000734  4973              LDR      r1,|L1.2308|
000736  6008              STR      r0,[r1,#0]  ; time
;;;741    									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  ||(strstr(uart_string_gsm, "ERROR"))))
000738  e014              B        |L1.1892|
                  |L1.1850|
;;;742    									{
;;;743    									time--;
00073a  4872              LDR      r0,|L1.2308|
00073c  6800              LDR      r0,[r0,#0]  ; time
00073e  1e40              SUBS     r0,r0,#1
000740  4970              LDR      r1,|L1.2308|
000742  6008              STR      r0,[r1,#0]  ; time
;;;744    									if(time % 2000 == 0)
000744  217d              MOVS     r1,#0x7d
000746  0109              LSLS     r1,r1,#4
000748  486e              LDR      r0,|L1.2308|
00074a  6800              LDR      r0,[r0,#0]  ; time
00074c  f7fffffe          BL       __aeabi_idivmod
000750  2900              CMP      r1,#0
000752  d107              BNE      |L1.1892|
;;;745    										{
;;;746    											uart0_putchar(UART0_BASE_PTR,'1');
000754  2131              MOVS     r1,#0x31
000756  486c              LDR      r0,|L1.2312|
000758  f7fffffe          BL       uart0_putchar
;;;747    											uart_putchar(UART1_BASE_PTR,'\n');
00075c  210a              MOVS     r1,#0xa
00075e  4840              LDR      r0,|L1.2144|
000760  f7fffffe          BL       uart_putchar
                  |L1.1892|
000764  a13f              ADR      r1,|L1.2148|
000766  4841              LDR      r0,|L1.2156|
000768  f7fffffe          BL       strstr
00076c  2800              CMP      r0,#0                 ;741
00076e  d109              BNE      |L1.1924|
000770  4864              LDR      r0,|L1.2308|
000772  6800              LDR      r0,[r0,#0]            ;741  ; time
000774  2801              CMP      r0,#1                 ;741
000776  db05              BLT      |L1.1924|
000778  493d              LDR      r1,|L1.2160|
00077a  483c              LDR      r0,|L1.2156|
00077c  f7fffffe          BL       strstr
000780  2800              CMP      r0,#0                 ;741
000782  d0da              BEQ      |L1.1850|
                  |L1.1924|
;;;748    										}
;;;749    	
;;;750    									}
;;;751    
;;;752    	
;;;753    }	
000784  bd38              POP      {r3-r5,pc}
;;;754    	
                          ENDP

                  parse_g PROC
;;;1185   
;;;1186   void parse_g(char* str, int first, int sec, char f, char s , char *string)
000786  b5ff              PUSH     {r0-r7,lr}
;;;1187   {int i=0,j=0,temp=0;int sz1,sz2;
000788  b083              SUB      sp,sp,#0xc
00078a  4605              MOV      r5,r0
00078c  460f              MOV      r7,r1
00078e  2400              MOVS     r4,#0
000790  2000              MOVS     r0,#0
000792  9002              STR      r0,[sp,#8]
000794  2600              MOVS     r6,#0
;;;1188   
;;;1189   		sz1=	strlen(str);
000796  4628              MOV      r0,r5
000798  f7fffffe          BL       strlen
00079c  9001              STR      r0,[sp,#4]
;;;1190   		sz2=  strlen(string);
00079e  980d              LDR      r0,[sp,#0x34]
0007a0  f7fffffe          BL       strlen
0007a4  9000              STR      r0,[sp,#0]
;;;1191   		memset(string,0,sz2);
0007a6  9900              LDR      r1,[sp,#0]
0007a8  980d              LDR      r0,[sp,#0x34]
0007aa  f7fffffe          BL       __aeabi_memclr
;;;1192   		for(i=0,temp=0;i<sz1;i++)
0007ae  bf00              NOP      
0007b0  bf00              NOP      
0007b2  e00a              B        |L1.1994|
                  |L1.1972|
;;;1193   		{
;;;1194   		if(str[i]==s)
0007b4  5d29              LDRB     r1,[r5,r4]
0007b6  980c              LDR      r0,[sp,#0x30]
0007b8  4281              CMP      r1,r0
0007ba  d101              BNE      |L1.1984|
;;;1195   			{temp++;j=i;}
0007bc  1c76              ADDS     r6,r6,#1
0007be  9402              STR      r4,[sp,#8]
                  |L1.1984|
;;;1196   		else{}
;;;1197   			
;;;1198   		if(temp>=sec){i=9900;}
0007c0  9805              LDR      r0,[sp,#0x14]
0007c2  4286              CMP      r6,r0
0007c4  db00              BLT      |L1.1992|
0007c6  4c51              LDR      r4,|L1.2316|
                  |L1.1992|
0007c8  1c64              ADDS     r4,r4,#1              ;1192
                  |L1.1994|
0007ca  9801              LDR      r0,[sp,#4]            ;1192
0007cc  4284              CMP      r4,r0                 ;1192
0007ce  dbf1              BLT      |L1.1972|
;;;1199   		else{}	
;;;1200   		
;;;1201   		}	
;;;1202   		
;;;1203   		for(i=0,temp=0;i<sz1;i++)
0007d0  2400              MOVS     r4,#0
0007d2  2600              MOVS     r6,#0
0007d4  e00a              B        |L1.2028|
                  |L1.2006|
;;;1204   		{
;;;1205   		if(str[i]==f)
0007d6  5d29              LDRB     r1,[r5,r4]
0007d8  9806              LDR      r0,[sp,#0x18]
0007da  4281              CMP      r1,r0
0007dc  d102              BNE      |L1.2020|
;;;1206   			{temp++;l=i;}										
0007de  1c76              ADDS     r6,r6,#1
0007e0  484b              LDR      r0,|L1.2320|
0007e2  6004              STR      r4,[r0,#0]  ; l
                  |L1.2020|
;;;1207   		else{}
;;;1208   		if(temp>=first){i=9900;}else{}
0007e4  42be              CMP      r6,r7
0007e6  db00              BLT      |L1.2026|
0007e8  4c48              LDR      r4,|L1.2316|
                  |L1.2026|
0007ea  1c64              ADDS     r4,r4,#1              ;1203
                  |L1.2028|
0007ec  9801              LDR      r0,[sp,#4]            ;1203
0007ee  4284              CMP      r4,r0                 ;1203
0007f0  dbf1              BLT      |L1.2006|
;;;1209   		}	
;;;1210   		for(i=0;i<(j-l-1);i++)
0007f2  2400              MOVS     r4,#0
0007f4  e007              B        |L1.2054|
                  |L1.2038|
;;;1211   		{
;;;1212   		string[i] = str[l+i+1];
0007f6  4846              LDR      r0,|L1.2320|
0007f8  6800              LDR      r0,[r0,#0]  ; l
0007fa  1900              ADDS     r0,r0,r4
0007fc  1c40              ADDS     r0,r0,#1
0007fe  5c29              LDRB     r1,[r5,r0]
000800  980d              LDR      r0,[sp,#0x34]
000802  5501              STRB     r1,[r0,r4]
000804  1c64              ADDS     r4,r4,#1              ;1210
                  |L1.2054|
000806  4942              LDR      r1,|L1.2320|
000808  9802              LDR      r0,[sp,#8]            ;1210
00080a  6809              LDR      r1,[r1,#0]            ;1210  ; l
00080c  1a40              SUBS     r0,r0,r1              ;1210
00080e  1e40              SUBS     r0,r0,#1              ;1210
000810  42a0              CMP      r0,r4                 ;1210
000812  dcf0              BGT      |L1.2038|
;;;1213   		}			
;;;1214   	
;;;1215   
;;;1216   
;;;1217   }
000814  b007              ADD      sp,sp,#0x1c
000816  bdf0              POP      {r4-r7,pc}
;;;1218   
                          ENDP

                  stof PROC
;;;914    
;;;915    float stof(const char* s)
000818  b5fe              PUSH     {r1-r7,lr}
;;;916    {
00081a  4604              MOV      r4,r0
;;;917      float rez = 0, fact = 1;
00081c  2000              MOVS     r0,#0
00081e  9002              STR      r0,[sp,#8]
000820  267f              MOVS     r6,#0x7f
000822  05f6              LSLS     r6,r6,#23
;;;918    	int d,point_seen;
;;;919      if (*s == '-'){
000824  7820              LDRB     r0,[r4,#0]
000826  282d              CMP      r0,#0x2d
000828  d101              BNE      |L1.2094|
;;;920        s++;
00082a  1c64              ADDS     r4,r4,#1
;;;921        fact = -1;
00082c  4e39              LDR      r6,|L1.2324|
                  |L1.2094|
;;;922      };
;;;923      for (point_seen = 0; *s; s++){
00082e  2700              MOVS     r7,#0
000830  e081              B        |L1.2358|
                  |L1.2098|
;;;924        if (*s == '.'){
000832  7820              LDRB     r0,[r4,#0]
000834  282e              CMP      r0,#0x2e
000836  d101              BNE      |L1.2108|
;;;925          point_seen = 1; 
000838  2701              MOVS     r7,#1
;;;926          continue;
00083a  e07b              B        |L1.2356|
                  |L1.2108|
;;;927        };
;;;928        d = *s - '0';
00083c  7820              LDRB     r0,[r4,#0]
00083e  4605              MOV      r5,r0
000840  3d30              SUBS     r5,r5,#0x30
;;;929        if (d >= 0 && d <= 9){
000842  2d00              CMP      r5,#0
000844  db75              BLT      |L1.2354|
000846  2d09              CMP      r5,#9
000848  dc73              BGT      |L1.2354|
;;;930          if (point_seen) fact /= 10.0f;
00084a  2f00              CMP      r7,#0
00084c  d004              BEQ      |L1.2136|
00084e  4932              LDR      r1,|L1.2328|
000850  4630              MOV      r0,r6
000852  f7fffffe          BL       __aeabi_fdiv
000856  4606              MOV      r6,r0
                  |L1.2136|
;;;931          rez = rez * 10.0f + (float)d;
000858  4628              MOV      r0,r5
00085a  f7fffffe          BL       __aeabi_i2f
00085e  e05e              B        |L1.2334|
                  |L1.2144|
                          DCD      0x4006b000
                  |L1.2148|
000864  4f4b0d0a          DCB      "OK\r\n",0
000868  00      
000869  00                DCB      0
00086a  00                DCB      0
00086b  00                DCB      0
                  |L1.2156|
                          DCD      uart_string_gsm
                  |L1.2160|
                          DCD      ||.text||+0x448
                  |L1.2164|
                          DCD      tout
                  |L1.2168|
                          DCD      data
                  |L1.2172|
                          DCD      tmeout
                  |L1.2176|
000880  4552524f          DCB      "ERROR:",0
000884  523a00  
000887  00                DCB      0
                  |L1.2184|
000888  4f4b00            DCB      "OK",0
00088b  00                DCB      0
                  |L1.2188|
00088c  0a41542b          DCB      "\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n",0
000890  46534352
000894  45415445
000898  3d433a5c
00089c  49505f50
0008a0  4f52542e
0008a4  5458540d
0008a8  0a00    
0008aa  00                DCB      0
0008ab  00                DCB      0
                  |L1.2220|
                          DCD      at_
                  |L1.2224|
                          DCD      ||ip||
                  |L1.2228|
                          DCD      port
                  |L1.2232|
0008b8  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\IP_PORT.TXT,0,%d,10\r\n",0
0008bc  2b465357
0008c0  52495445
0008c4  3d433a5c
0008c8  49505f50
0008cc  4f52542e
0008d0  5458542c
0008d4  302c2564
0008d8  2c31300d
0008dc  0a00    
0008de  00                DCB      0
0008df  00                DCB      0
                  |L1.2272|
0008e0  3e00              DCB      ">",0
0008e2  00                DCB      0
0008e3  00                DCB      0
                  |L1.2276|
0008e4  7c49507c          DCB      "|IP|",0
0008e8  00      
0008e9  00                DCB      0
0008ea  00                DCB      0
0008eb  00                DCB      0
                  |L1.2284|
                          DCD      k
                  |L1.2288|
0008f0  7c504f52          DCB      "|PORT|",0
0008f4  547c00  
0008f7  00                DCB      0
                  |L1.2296|
0008f8  7c00              DCB      "|",0
0008fa  00                DCB      0
0008fb  00                DCB      0
                  |L1.2300|
                          DCD      ||k2||
                  |L1.2304|
                          DCD      0x00004e1f
                  |L1.2308|
                          DCD      time
                  |L1.2312|
                          DCD      0x4006a000
                  |L1.2316|
                          DCD      0x000026ac
                  |L1.2320|
                          DCD      l
                  |L1.2324|
                          DCD      0xbf800000
                  |L1.2328|
                          DCD      0x41200000
00091c  e009              B        |L1.2354|
                  |L1.2334|
00091e  49fe              LDR      r1,|L1.3352|
000920  9001              STR      r0,[sp,#4]
000922  9802              LDR      r0,[sp,#8]
000924  f7fffffe          BL       __aeabi_fmul
000928  9000              STR      r0,[sp,#0]
00092a  9901              LDR      r1,[sp,#4]
00092c  f7fffffe          BL       __aeabi_fadd
000930  9002              STR      r0,[sp,#8]
                  |L1.2354|
000932  bf00              NOP                            ;926
                  |L1.2356|
000934  1c64              ADDS     r4,r4,#1              ;923
                  |L1.2358|
000936  7820              LDRB     r0,[r4,#0]            ;923
000938  2800              CMP      r0,#0                 ;923
00093a  d000              BEQ      |L1.2366|
00093c  e779              B        |L1.2098|
                  |L1.2366|
;;;932        };
;;;933      };
;;;934      return rez * fact;
00093e  4631              MOV      r1,r6
000940  9802              LDR      r0,[sp,#8]
000942  f7fffffe          BL       __aeabi_fmul
;;;935    };
000946  bdfe              POP      {r1-r7,pc}
;;;936    
                          ENDP

                  LED_state2 PROC
;;;208    
;;;209    void LED_state2(void)
000948  b500              PUSH     {lr}
;;;210    {
;;;211    if(sleep_flag == 1)
00094a  48f4              LDR      r0,|L1.3356|
00094c  6800              LDR      r0,[r0,#0]  ; sleep_flag
00094e  2801              CMP      r0,#1
000950  d102              BNE      |L1.2392|
;;;212    {stateCount=99;
000952  2063              MOVS     r0,#0x63
000954  49f2              LDR      r1,|L1.3360|
000956  7008              STRB     r0,[r1,#0]
                  |L1.2392|
;;;213    }	
;;;214    			
;;;215    	switch(stateCount){
000958  48f1              LDR      r0,|L1.3360|
00095a  7800              LDRB     r0,[r0,#0]  ; stateCount
00095c  0003              MOVS     r3,r0
00095e  f7fffffe          BL       __ARM_common_switch8
000962  0604              DCB      0x06,0x04
000964  0f1a2530          DCB      0x0f,0x1a,0x25,0x30
000968  3b46              DCB      0x3b,0x46
;;;216    	
;;;217    
;;;218                case 0:     //Red
;;;219                       RED_ON;
00096a  2001              MOVS     r0,#1
00096c  0740              LSLS     r0,r0,#29
00096e  49ed              LDR      r1,|L1.3364|
000970  6088              STR      r0,[r1,#8]
;;;220                       GREEN_OFF;
000972  0080              LSLS     r0,r0,#2
000974  6048              STR      r0,[r1,#4]
;;;221                       BLUE_OFF;
000976  2020              MOVS     r0,#0x20
000978  49ea              LDR      r1,|L1.3364|
00097a  3940              SUBS     r1,r1,#0x40
00097c  6048              STR      r0,[r1,#4]
;;;222                       break;
00097e  e044              B        |L1.2570|
;;;223    
;;;224                case 1:	//Yellow
;;;225    		               RED_ON;
000980  2001              MOVS     r0,#1
000982  0740              LSLS     r0,r0,#29
000984  49e7              LDR      r1,|L1.3364|
000986  6088              STR      r0,[r1,#8]
;;;226    		               GREEN_ON;
000988  0080              LSLS     r0,r0,#2
00098a  6088              STR      r0,[r1,#8]
;;;227    		               BLUE_OFF;
00098c  2020              MOVS     r0,#0x20
00098e  49e5              LDR      r1,|L1.3364|
000990  3940              SUBS     r1,r1,#0x40
000992  6048              STR      r0,[r1,#4]
;;;228    		               break;
000994  e039              B        |L1.2570|
;;;229    				
;;;230                case 2:	//Green
;;;231    		               RED_OFF;
000996  2001              MOVS     r0,#1
000998  0740              LSLS     r0,r0,#29
00099a  49e2              LDR      r1,|L1.3364|
00099c  6048              STR      r0,[r1,#4]
;;;232    		               GREEN_ON;
00099e  0080              LSLS     r0,r0,#2
0009a0  6088              STR      r0,[r1,#8]
;;;233    		               BLUE_OFF;
0009a2  2020              MOVS     r0,#0x20
0009a4  49df              LDR      r1,|L1.3364|
0009a6  3940              SUBS     r1,r1,#0x40
0009a8  6048              STR      r0,[r1,#4]
;;;234    		               break;
0009aa  e02e              B        |L1.2570|
;;;235    				
;;;236                case 3:	//Blue
;;;237    		               RED_OFF;
0009ac  2001              MOVS     r0,#1
0009ae  0740              LSLS     r0,r0,#29
0009b0  49dc              LDR      r1,|L1.3364|
0009b2  6048              STR      r0,[r1,#4]
;;;238    		               GREEN_OFF;
0009b4  0080              LSLS     r0,r0,#2
0009b6  6048              STR      r0,[r1,#4]
;;;239    		               BLUE_ON;
0009b8  2020              MOVS     r0,#0x20
0009ba  49da              LDR      r1,|L1.3364|
0009bc  3940              SUBS     r1,r1,#0x40
0009be  6088              STR      r0,[r1,#8]
;;;240    		               break;
0009c0  e023              B        |L1.2570|
;;;241    				
;;;242                case 4:	//Violet
;;;243    		               RED_ON;
0009c2  2001              MOVS     r0,#1
0009c4  0740              LSLS     r0,r0,#29
0009c6  49d7              LDR      r1,|L1.3364|
0009c8  6088              STR      r0,[r1,#8]
;;;244    		               GREEN_OFF;
0009ca  0080              LSLS     r0,r0,#2
0009cc  6048              STR      r0,[r1,#4]
;;;245    		               BLUE_ON;
0009ce  2020              MOVS     r0,#0x20
0009d0  49d4              LDR      r1,|L1.3364|
0009d2  3940              SUBS     r1,r1,#0x40
0009d4  6088              STR      r0,[r1,#8]
;;;246    		               break;
0009d6  e018              B        |L1.2570|
;;;247    				
;;;248                case 5:	//White
;;;249    		              RED_ON;
0009d8  2001              MOVS     r0,#1
0009da  0740              LSLS     r0,r0,#29
0009dc  49d1              LDR      r1,|L1.3364|
0009de  6088              STR      r0,[r1,#8]
;;;250    		              GREEN_ON;
0009e0  0080              LSLS     r0,r0,#2
0009e2  6088              STR      r0,[r1,#8]
;;;251    		              BLUE_ON;
0009e4  2020              MOVS     r0,#0x20
0009e6  49cf              LDR      r1,|L1.3364|
0009e8  3940              SUBS     r1,r1,#0x40
0009ea  6088              STR      r0,[r1,#8]
;;;252    		              break;
0009ec  e00d              B        |L1.2570|
;;;253    				
;;;254                default:	//Red
;;;255    
;;;256    		              RED_OFF;
0009ee  2001              MOVS     r0,#1
0009f0  0740              LSLS     r0,r0,#29
0009f2  49cc              LDR      r1,|L1.3364|
0009f4  6048              STR      r0,[r1,#4]
;;;257    		              GREEN_OFF;
0009f6  0080              LSLS     r0,r0,#2
0009f8  6048              STR      r0,[r1,#4]
;;;258    		              BLUE_OFF;
0009fa  2020              MOVS     r0,#0x20
0009fc  49c9              LDR      r1,|L1.3364|
0009fe  3940              SUBS     r1,r1,#0x40
000a00  6048              STR      r0,[r1,#4]
;;;259    		              stateCount = 0;	//Reset state counter
000a02  2000              MOVS     r0,#0
000a04  49c6              LDR      r1,|L1.3360|
000a06  7008              STRB     r0,[r1,#0]
;;;260    			      break;
000a08  bf00              NOP      
                  |L1.2570|
000a0a  bf00              NOP                            ;222
;;;261    
;;;262        }
;;;263    	
;;;264    }
000a0c  bd00              POP      {pc}
;;;265    
                          ENDP

                  clear2 PROC
;;;999    
;;;1000   void clear2()
000a0e  48c6              LDR      r0,|L1.3368|
;;;1001   {char temp;
;;;1002   //    if (UART_S1_REG(UART2_BASE_PTR) & UART_S1_OR_MASK)
;;;1003   //    {
;;;1004   //      temp = UART_D_REG(UART2_BASE_PTR);
;;;1005   //    }
;;;1006   
;;;1007   	UART_S1_REG(UART2_BASE_PTR) |= (UART_S1_OR_MASK | UART_C2_ILIE_MASK );
000a10  7900              LDRB     r0,[r0,#4]
000a12  2118              MOVS     r1,#0x18
000a14  4308              ORRS     r0,r0,r1
000a16  49c4              LDR      r1,|L1.3368|
000a18  7108              STRB     r0,[r1,#4]
;;;1008   }	
000a1a  4770              BX       lr
;;;1009   
                          ENDP

                  get_gpsdata PROC
;;;1242   
;;;1243   void get_gpsdata()
000a1c  b510              PUSH     {r4,lr}
;;;1244   {int32_t timeoutgps,resetval=99999,t22;
000a1e  4cc3              LDR      r4,|L1.3372|
;;;1245   						int m;	clear2();
000a20  f7fffffe          BL       clear2
;;;1246   						memset(uart_string_gps,0,3000);memset(gga,0,100);memset(rmc,0,100);			
000a24  49c2              LDR      r1,|L1.3376|
000a26  48c3              LDR      r0,|L1.3380|
000a28  f7fffffe          BL       __aeabi_memclr4
000a2c  2164              MOVS     r1,#0x64
000a2e  48c2              LDR      r0,|L1.3384|
000a30  f7fffffe          BL       __aeabi_memclr4
000a34  2164              MOVS     r1,#0x64
000a36  48c1              LDR      r0,|L1.3388|
000a38  f7fffffe          BL       __aeabi_memclr4
;;;1247   						i=0;tout2=0;
000a3c  2000              MOVS     r0,#0
000a3e  49c0              LDR      r1,|L1.3392|
000a40  6008              STR      r0,[r1,#0]  ; i
000a42  49c0              LDR      r1,|L1.3396|
000a44  6008              STR      r0,[r1,#0]  ; tout2
;;;1248   //						t22=9999999;
;;;1249   do{
000a46  bf00              NOP      
                  |L1.2632|
;;;1250   	if(UART_S1_REG(UART2_BASE_PTR) & UART_S1_RDRF_MASK)
000a48  48b7              LDR      r0,|L1.3368|
000a4a  7900              LDRB     r0,[r0,#4]
000a4c  2120              MOVS     r1,#0x20
000a4e  4008              ANDS     r0,r0,r1
000a50  2800              CMP      r0,#0
000a52  d00a              BEQ      |L1.2666|
;;;1251   	{		uart_string_gps[i]=UART_D_REG(UART2_BASE_PTR);//clear2();
000a54  48b4              LDR      r0,|L1.3368|
000a56  79c0              LDRB     r0,[r0,#7]
000a58  49b6              LDR      r1,|L1.3380|
000a5a  4ab9              LDR      r2,|L1.3392|
000a5c  6812              LDR      r2,[r2,#0]  ; i
000a5e  5488              STRB     r0,[r1,r2]
;;;1252   				i++;
000a60  48b7              LDR      r0,|L1.3392|
000a62  6800              LDR      r0,[r0,#0]  ; i
000a64  1c40              ADDS     r0,r0,#1
000a66  49b6              LDR      r1,|L1.3392|
000a68  6008              STR      r0,[r1,#0]  ; i
                  |L1.2666|
;;;1253   	}
;;;1254   	}while(!   (strstr(uart_string_gps,"RMC")       ||  (tout2>1)  )  );
000a6a  a1b7              ADR      r1,|L1.3400|
000a6c  48b1              LDR      r0,|L1.3380|
000a6e  f7fffffe          BL       strstr
000a72  2800              CMP      r0,#0
000a74  d103              BNE      |L1.2686|
000a76  48b3              LDR      r0,|L1.3396|
000a78  6800              LDR      r0,[r0,#0]  ; tout2
000a7a  2801              CMP      r0,#1
000a7c  dde4              BLE      |L1.2632|
                  |L1.2686|
;;;1255   i=0;tout2=0;
000a7e  2000              MOVS     r0,#0
000a80  49af              LDR      r1,|L1.3392|
000a82  6008              STR      r0,[r1,#0]  ; i
000a84  49af              LDR      r1,|L1.3396|
000a86  6008              STR      r0,[r1,#0]  ; tout2
;;;1256   do{
000a88  bf00              NOP      
                  |L1.2698|
;;;1257   	if(UART_S1_REG(UART2_BASE_PTR) & UART_S1_RDRF_MASK)
000a8a  48a7              LDR      r0,|L1.3368|
000a8c  7900              LDRB     r0,[r0,#4]
000a8e  2120              MOVS     r1,#0x20
000a90  4008              ANDS     r0,r0,r1
000a92  2800              CMP      r0,#0
000a94  d00a              BEQ      |L1.2732|
;;;1258   	{		rmc[i]=UART_D_REG(UART2_BASE_PTR);//clear2();
000a96  48a4              LDR      r0,|L1.3368|
000a98  79c0              LDRB     r0,[r0,#7]
000a9a  49a8              LDR      r1,|L1.3388|
000a9c  4aa8              LDR      r2,|L1.3392|
000a9e  6812              LDR      r2,[r2,#0]  ; i
000aa0  5488              STRB     r0,[r1,r2]
;;;1259   				i++;
000aa2  48a7              LDR      r0,|L1.3392|
000aa4  6800              LDR      r0,[r0,#0]  ; i
000aa6  1c40              ADDS     r0,r0,#1
000aa8  49a5              LDR      r1,|L1.3392|
000aaa  6008              STR      r0,[r1,#0]  ; i
                  |L1.2732|
;;;1260   	}
;;;1261   }while(     !( mystrstr(rmc,'*')    ||  tout2>1) );
000aac  212a              MOVS     r1,#0x2a
000aae  48a3              LDR      r0,|L1.3388|
000ab0  f7fffffe          BL       mystrstr
000ab4  2800              CMP      r0,#0
000ab6  d103              BNE      |L1.2752|
000ab8  48a2              LDR      r0,|L1.3396|
000aba  6800              LDR      r0,[r0,#0]  ; tout2
000abc  2801              CMP      r0,#1
000abe  dde4              BLE      |L1.2698|
                  |L1.2752|
;;;1262   memset(uart_string_gps,0,3000);
000ac0  499b              LDR      r1,|L1.3376|
000ac2  489c              LDR      r0,|L1.3380|
000ac4  f7fffffe          BL       __aeabi_memclr4
;;;1263   i=0;tout2=0;
000ac8  2000              MOVS     r0,#0
000aca  499d              LDR      r1,|L1.3392|
000acc  6008              STR      r0,[r1,#0]  ; i
000ace  499d              LDR      r1,|L1.3396|
000ad0  6008              STR      r0,[r1,#0]  ; tout2
;;;1264   do{
000ad2  bf00              NOP      
                  |L1.2772|
;;;1265   	if(UART_S1_REG(UART2_BASE_PTR) & UART_S1_RDRF_MASK)
000ad4  4894              LDR      r0,|L1.3368|
000ad6  7900              LDRB     r0,[r0,#4]
000ad8  2120              MOVS     r1,#0x20
000ada  4008              ANDS     r0,r0,r1
000adc  2800              CMP      r0,#0
000ade  d00a              BEQ      |L1.2806|
;;;1266   	{		uart_string_gps[i]=UART_D_REG(UART2_BASE_PTR);//clear2();
000ae0  4891              LDR      r0,|L1.3368|
000ae2  79c1              LDRB     r1,[r0,#7]
000ae4  4893              LDR      r0,|L1.3380|
000ae6  4a96              LDR      r2,|L1.3392|
000ae8  6812              LDR      r2,[r2,#0]  ; i
000aea  5481              STRB     r1,[r0,r2]
;;;1267   				i++;
000aec  4894              LDR      r0,|L1.3392|
000aee  6800              LDR      r0,[r0,#0]  ; i
000af0  1c40              ADDS     r0,r0,#1
000af2  4993              LDR      r1,|L1.3392|
000af4  6008              STR      r0,[r1,#0]  ; i
                  |L1.2806|
;;;1268   	}
;;;1269   }while(!  (strstr(uart_string_gps,"GGA")      ||  (tout2>1) )  );
000af6  a195              ADR      r1,|L1.3404|
000af8  488e              LDR      r0,|L1.3380|
000afa  f7fffffe          BL       strstr
000afe  2800              CMP      r0,#0
000b00  d103              BNE      |L1.2826|
000b02  4890              LDR      r0,|L1.3396|
000b04  6800              LDR      r0,[r0,#0]  ; tout2
000b06  2801              CMP      r0,#1
000b08  dde4              BLE      |L1.2772|
                  |L1.2826|
;;;1270   i=0;tout2=0;
000b0a  2000              MOVS     r0,#0
000b0c  498c              LDR      r1,|L1.3392|
000b0e  6008              STR      r0,[r1,#0]  ; i
000b10  498c              LDR      r1,|L1.3396|
000b12  6008              STR      r0,[r1,#0]  ; tout2
;;;1271   do{
000b14  bf00              NOP      
                  |L1.2838|
;;;1272   	if(UART_S1_REG(UART2_BASE_PTR) & UART_S1_RDRF_MASK)
000b16  4884              LDR      r0,|L1.3368|
000b18  7900              LDRB     r0,[r0,#4]
000b1a  2120              MOVS     r1,#0x20
000b1c  4008              ANDS     r0,r0,r1
000b1e  2800              CMP      r0,#0
000b20  d00a              BEQ      |L1.2872|
;;;1273   	{		gga[i]=UART_D_REG(UART2_BASE_PTR);//clear2();
000b22  4881              LDR      r0,|L1.3368|
000b24  79c1              LDRB     r1,[r0,#7]
000b26  4884              LDR      r0,|L1.3384|
000b28  4a85              LDR      r2,|L1.3392|
000b2a  6812              LDR      r2,[r2,#0]  ; i
000b2c  5481              STRB     r1,[r0,r2]
;;;1274   				i++;
000b2e  4884              LDR      r0,|L1.3392|
000b30  6800              LDR      r0,[r0,#0]  ; i
000b32  1c40              ADDS     r0,r0,#1
000b34  4982              LDR      r1,|L1.3392|
000b36  6008              STR      r0,[r1,#0]  ; i
                  |L1.2872|
;;;1275   	}
;;;1276   }while(!(mystrstr(gga,'*')  ||  (tout2>1) ));
000b38  212a              MOVS     r1,#0x2a
000b3a  487f              LDR      r0,|L1.3384|
000b3c  f7fffffe          BL       mystrstr
000b40  2800              CMP      r0,#0
000b42  d103              BNE      |L1.2892|
000b44  487f              LDR      r0,|L1.3396|
000b46  6800              LDR      r0,[r0,#0]  ; tout2
000b48  2801              CMP      r0,#1
000b4a  dde4              BLE      |L1.2838|
                  |L1.2892|
;;;1277   
;;;1278   clear2();
000b4c  f7fffffe          BL       clear2
;;;1279   
;;;1280   stateCount++; 
000b50  4873              LDR      r0,|L1.3360|
000b52  7800              LDRB     r0,[r0,#0]  ; stateCount
000b54  1c40              ADDS     r0,r0,#1
000b56  4972              LDR      r1,|L1.3360|
000b58  7008              STRB     r0,[r1,#0]
;;;1281   if(stateCount>5){stateCount =0;}
000b5a  4608              MOV      r0,r1
000b5c  7800              LDRB     r0,[r0,#0]  ; stateCount
000b5e  2805              CMP      r0,#5
000b60  dd01              BLE      |L1.2918|
000b62  2000              MOVS     r0,#0
000b64  7008              STRB     r0,[r1,#0]
                  |L1.2918|
;;;1282   LED_state2();					
000b66  f7fffffe          BL       LED_state2
;;;1283   
;;;1284   }
000b6a  bd10              POP      {r4,pc}
;;;1285   
                          ENDP

                  LED_state PROC
;;;150    
;;;151    void LED_state(void){
000b6c  b500              PUSH     {lr}
;;;152    if(sleep_flag == 1)
000b6e  486b              LDR      r0,|L1.3356|
000b70  6800              LDR      r0,[r0,#0]  ; sleep_flag
000b72  2801              CMP      r0,#1
000b74  d102              BNE      |L1.2940|
;;;153    {stateCount=99;
000b76  2063              MOVS     r0,#0x63
000b78  4969              LDR      r1,|L1.3360|
000b7a  7008              STRB     r0,[r1,#0]
                  |L1.2940|
;;;154    }	
;;;155    			
;;;156    	switch(stateCount){
000b7c  4868              LDR      r0,|L1.3360|
000b7e  7800              LDRB     r0,[r0,#0]  ; stateCount
000b80  0003              MOVS     r3,r0
000b82  f7fffffe          BL       __ARM_common_switch8
000b86  0604              DCB      0x06,0x04
000b88  0d161f28          DCB      0x0d,0x16,0x1f,0x28
000b8c  313a              DCB      0x31,0x3a
;;;157    
;;;158    		
;;;159                case 0:     //Red
;;;160                       REDBAT_ON;
000b8e  2040              MOVS     r0,#0x40
000b90  4964              LDR      r1,|L1.3364|
000b92  3980              SUBS     r1,r1,#0x80
000b94  6088              STR      r0,[r1,#8]
;;;161                       GREENBAT_OFF;
000b96  2080              MOVS     r0,#0x80
000b98  6048              STR      r0,[r1,#4]
;;;162                       BLUEBAT_OFF;
000b9a  0040              LSLS     r0,r0,#1
000b9c  6048              STR      r0,[r1,#4]
;;;163                       break;
000b9e  e038              B        |L1.3090|
;;;164    
;;;165                case 1:	//Yellow
;;;166    		               REDBAT_ON;
000ba0  2040              MOVS     r0,#0x40
000ba2  4960              LDR      r1,|L1.3364|
000ba4  3980              SUBS     r1,r1,#0x80
000ba6  6088              STR      r0,[r1,#8]
;;;167    		               GREENBAT_ON;
000ba8  2080              MOVS     r0,#0x80
000baa  6088              STR      r0,[r1,#8]
;;;168    		               BLUEBAT_OFF;
000bac  0040              LSLS     r0,r0,#1
000bae  6048              STR      r0,[r1,#4]
;;;169    		               break;
000bb0  e02f              B        |L1.3090|
;;;170    				
;;;171                case 2:	//Green
;;;172    		               REDBAT_OFF;
000bb2  2040              MOVS     r0,#0x40
000bb4  495b              LDR      r1,|L1.3364|
000bb6  3980              SUBS     r1,r1,#0x80
000bb8  6048              STR      r0,[r1,#4]
;;;173    		               GREENBAT_ON;
000bba  2080              MOVS     r0,#0x80
000bbc  6088              STR      r0,[r1,#8]
;;;174    		               BLUEBAT_OFF;
000bbe  0040              LSLS     r0,r0,#1
000bc0  6048              STR      r0,[r1,#4]
;;;175    		               break;
000bc2  e026              B        |L1.3090|
;;;176    				
;;;177                case 3:	//Blue
;;;178    		               REDBAT_OFF;
000bc4  2040              MOVS     r0,#0x40
000bc6  4957              LDR      r1,|L1.3364|
000bc8  3980              SUBS     r1,r1,#0x80
000bca  6048              STR      r0,[r1,#4]
;;;179    		               GREENBAT_OFF;
000bcc  2080              MOVS     r0,#0x80
000bce  6048              STR      r0,[r1,#4]
;;;180    		               BLUEBAT_ON;
000bd0  0040              LSLS     r0,r0,#1
000bd2  6088              STR      r0,[r1,#8]
;;;181    		               break;
000bd4  e01d              B        |L1.3090|
;;;182    				
;;;183                case 4:	//Violet
;;;184    		               REDBAT_ON;
000bd6  2040              MOVS     r0,#0x40
000bd8  4952              LDR      r1,|L1.3364|
000bda  3980              SUBS     r1,r1,#0x80
000bdc  6088              STR      r0,[r1,#8]
;;;185    		               GREENBAT_OFF;
000bde  2080              MOVS     r0,#0x80
000be0  6048              STR      r0,[r1,#4]
;;;186    		               BLUEBAT_ON;
000be2  0040              LSLS     r0,r0,#1
000be4  6088              STR      r0,[r1,#8]
;;;187    		               break;
000be6  e014              B        |L1.3090|
;;;188    				
;;;189                case 5:	//White
;;;190    		              REDBAT_ON;
000be8  2040              MOVS     r0,#0x40
000bea  494e              LDR      r1,|L1.3364|
000bec  3980              SUBS     r1,r1,#0x80
000bee  6088              STR      r0,[r1,#8]
;;;191    		              GREENBAT_ON;
000bf0  2080              MOVS     r0,#0x80
000bf2  6088              STR      r0,[r1,#8]
;;;192    		              BLUEBAT_ON;
000bf4  0040              LSLS     r0,r0,#1
000bf6  6088              STR      r0,[r1,#8]
;;;193    		              break;
000bf8  e00b              B        |L1.3090|
;;;194    				
;;;195                default:	//Red
;;;196    							
;;;197    
;;;198    		              REDBAT_OFF;
000bfa  2040              MOVS     r0,#0x40
000bfc  4949              LDR      r1,|L1.3364|
000bfe  3980              SUBS     r1,r1,#0x80
000c00  6048              STR      r0,[r1,#4]
;;;199    		              GREENBAT_OFF;
000c02  2080              MOVS     r0,#0x80
000c04  6048              STR      r0,[r1,#4]
;;;200    		              BLUEBAT_OFF;
000c06  0040              LSLS     r0,r0,#1
000c08  6048              STR      r0,[r1,#4]
;;;201    		              stateCount = 0;	//Reset state counter
000c0a  2000              MOVS     r0,#0
000c0c  4944              LDR      r1,|L1.3360|
000c0e  7008              STRB     r0,[r1,#0]
;;;202    			      break;
000c10  bf00              NOP      
                  |L1.3090|
000c12  bf00              NOP                            ;163
;;;203    
;;;204        }
;;;205    	
;;;206    }
000c14  bd00              POP      {pc}
;;;207    
                          ENDP

                  get_imei PROC
;;;1300   
;;;1301   void get_imei()
000c16  b538              PUSH     {r3-r5,lr}
;;;1302   {int i,imeiinc=0;
000c18  2500              MOVS     r5,#0
;;;1303   clear();		
000c1a  f7fffffe          BL       clear
;;;1304   clear();
000c1e  f7fffffe          BL       clear
;;;1305   clear();
000c22  f7fffffe          BL       clear
;;;1306   	
;;;1307   if((strlen(imei) < 15 )){
000c26  484a              LDR      r0,|L1.3408|
000c28  f7fffffe          BL       strlen
000c2c  280f              CMP      r0,#0xf
000c2e  d221              BCS      |L1.3188|
;;;1308   
;;;1309   
;;;1310   	
;;;1311   send_GSM("\r\n\n\nAT+GSN\r\n","OK","ERROR\r\n","ERROR",10);	
000c30  200a              MOVS     r0,#0xa
000c32  4b48              LDR      r3,|L1.3412|
000c34  461a              MOV      r2,r3
000c36  3208              ADDS     r2,r2,#8
000c38  a147              ADR      r1,|L1.3416|
000c3a  9000              STR      r0,[sp,#0]
000c3c  a047              ADR      r0,|L1.3420|
000c3e  f7fffffe          BL       send_GSM
;;;1312   
;;;1313   memset(imei,0,20);
000c42  2114              MOVS     r1,#0x14
000c44  4842              LDR      r0,|L1.3408|
000c46  f7fffffe          BL       __aeabi_memclr4
;;;1314   for(i=0;i<strlen(uart_string_gsm);i++){
000c4a  2400              MOVS     r4,#0
000c4c  e00d              B        |L1.3178|
                  |L1.3150|
;;;1315   		if((uart_string_gsm[i]>47)   &&   (uart_string_gsm[i]<58)){   //means numeric
000c4e  4847              LDR      r0,|L1.3436|
000c50  5d00              LDRB     r0,[r0,r4]
000c52  282f              CMP      r0,#0x2f
000c54  dd08              BLE      |L1.3176|
000c56  4845              LDR      r0,|L1.3436|
000c58  5d00              LDRB     r0,[r0,r4]
000c5a  283a              CMP      r0,#0x3a
000c5c  da04              BGE      |L1.3176|
;;;1316   			imei[imeiinc] = uart_string_gsm[i];
000c5e  4843              LDR      r0,|L1.3436|
000c60  5d00              LDRB     r0,[r0,r4]
000c62  493b              LDR      r1,|L1.3408|
000c64  5548              STRB     r0,[r1,r5]
;;;1317   			imeiinc++;
000c66  1c6d              ADDS     r5,r5,#1
                  |L1.3176|
000c68  1c64              ADDS     r4,r4,#1              ;1314
                  |L1.3178|
000c6a  4840              LDR      r0,|L1.3436|
000c6c  f7fffffe          BL       strlen
000c70  42a0              CMP      r0,r4                 ;1314
000c72  d8ec              BHI      |L1.3150|
                  |L1.3188|
;;;1318   		}
;;;1319   
;;;1320   }
;;;1321   	
;;;1322   	
;;;1323   	}		
;;;1324   	
;;;1325   //parse_g(uart_string_gsm,1,3,'\n','\r',imei);	
;;;1326   clear();	
000c74  f7fffffe          BL       clear
;;;1327   
;;;1328   }
000c78  bd38              POP      {r3-r5,pc}
;;;1329   	
                          ENDP

                  GPS_COLLECT PROC
;;;938    
;;;939    int GPS_COLLECT()
000c7a  b5f0              PUSH     {r4-r7,lr}
;;;940    {
000c7c  b089              SUB      sp,sp,#0x24
;;;941    char prev[8],latest[10];
;;;942    		int iz;
;;;943    		double a,b,c;int hh,mm1,mm2;
;;;944    		double a1,b1,c1;
;;;945    		double hh11, mm11,mm22;
;;;946    
;;;947    
;;;948    //		strcat(data,imei);
;;;949    //		strcat(data,", ");	
;;;950    //		strcat(data,"$GxGGA");	
;;;951    //		strcat(data,gga);
;;;952    //		strcat(data,", $GxRMC");	
;;;953    //		strcat(data,rmc);	
;;;954    //		strcat(data,"\n");		
;;;955    
;;;956    //	return 0;
;;;957    	
;;;958    get_imei();	
000c7e  f7fffffe          BL       get_imei
;;;959    	
;;;960    time52=15;	
000c82  200f              MOVS     r0,#0xf
000c84  493a              LDR      r1,|L1.3440|
000c86  6008              STR      r0,[r1,#0]  ; time52
;;;961    stateCount++; 
000c88  4825              LDR      r0,|L1.3360|
000c8a  7800              LDRB     r0,[r0,#0]  ; stateCount
000c8c  1c40              ADDS     r0,r0,#1
000c8e  4924              LDR      r1,|L1.3360|
000c90  7008              STRB     r0,[r1,#0]
;;;962    if(stateCount>5){stateCount =0;}
000c92  4608              MOV      r0,r1
000c94  7800              LDRB     r0,[r0,#0]  ; stateCount
000c96  2805              CMP      r0,#5
000c98  dd01              BLE      |L1.3230|
000c9a  2000              MOVS     r0,#0
000c9c  7008              STRB     r0,[r1,#0]
                  |L1.3230|
;;;963    LED_state();
000c9e  f7fffffe          BL       LED_state
;;;964    
;;;965    
;;;966    
;;;967    while(lpticks<int_erval);
000ca2  bf00              NOP      
                  |L1.3236|
000ca4  4833              LDR      r0,|L1.3444|
000ca6  6800              LDR      r0,[r0,#0]  ; lpticks
000ca8  4933              LDR      r1,|L1.3448|
000caa  6809              LDR      r1,[r1,#0]  ; int_erval
000cac  4288              CMP      r0,r1
000cae  dbf9              BLT      |L1.3236|
;;;968    get_gpsdata();
000cb0  f7fffffe          BL       get_gpsdata
;;;969    lpticks=0;
000cb4  2000              MOVS     r0,#0
000cb6  492f              LDR      r1,|L1.3444|
000cb8  6008              STR      r0,[r1,#0]  ; lpticks
;;;970    
;;;971    
;;;972    
;;;973    		
;;;974    		speed = stof(velocity);
000cba  4830              LDR      r0,|L1.3452|
000cbc  f7fffffe          BL       stof
000cc0  492f              LDR      r1,|L1.3456|
000cc2  6008              STR      r0,[r1,#0]  ; speed
;;;975    		c=stof(lati);//7523.7412
000cc4  482f              LDR      r0,|L1.3460|
000cc6  f7fffffe          BL       stof
000cca  9003              STR      r0,[sp,#0xc]
000ccc  f7fffffe          BL       __aeabi_f2d
000cd0  4606              MOV      r6,r0
000cd2  460f              MOV      r7,r1
;;;976    		hh= c/100; //75
000cd4  2200              MOVS     r2,#0
000cd6  4b2c              LDR      r3,|L1.3464|
000cd8  4630              MOV      r0,r6
000cda  4639              MOV      r1,r7
000cdc  f7fffffe          BL       __aeabi_ddiv
000ce0  9103              STR      r1,[sp,#0xc]
000ce2  9002              STR      r0,[sp,#8]
000ce4  f7fffffe          BL       __aeabi_d2iz
000ce8  9008              STR      r0,[sp,#0x20]
;;;977    		hh11 = c/100; //75.237412
000cea  2200              MOVS     r2,#0
000cec  4b26              LDR      r3,|L1.3464|
000cee  4630              MOV      r0,r6
000cf0  4639              MOV      r1,r7
000cf2  f7fffffe          BL       __aeabi_ddiv
000cf6  9107              STR      r1,[sp,#0x1c]
000cf8  9006              STR      r0,[sp,#0x18]
;;;978    		mm11 = hh11-hh; //.237412
000cfa  9808              LDR      r0,[sp,#0x20]
000cfc  f7fffffe          BL       __aeabi_i2d
000d00  9103              STR      r1,[sp,#0xc]
000d02  9002              STR      r0,[sp,#8]
000d04  9b07              LDR      r3,[sp,#0x1c]
000d06  9a06              LDR      r2,[sp,#0x18]
000d08  f7fffffe          BL       __aeabi_drsub
000d0c  4604              MOV      r4,r0
000d0e  460d              MOV      r5,r1
;;;979    		mm11*=100;
000d10  2200              MOVS     r2,#0
000d12  4b1d              LDR      r3,|L1.3464|
000d14  4620              MOV      r0,r4
000d16  e039              B        |L1.3468|
                  |L1.3352|
                          DCD      0x41200000
                  |L1.3356|
                          DCD      sleep_flag
                  |L1.3360|
                          DCD      stateCount
                  |L1.3364|
                          DCD      0x400ff100
                  |L1.3368|
                          DCD      0x4006c000
                  |L1.3372|
                          DCD      0x0001869f
                  |L1.3376|
                          DCD      0x00000bb8
                  |L1.3380|
                          DCD      uart_string_gps
                  |L1.3384|
                          DCD      gga
                  |L1.3388|
                          DCD      ||rmc||
                  |L1.3392|
                          DCD      i
                  |L1.3396|
                          DCD      tout2
                  |L1.3400|
000d48  524d4300          DCB      "RMC",0
                  |L1.3404|
000d4c  47474100          DCB      "GGA",0
                  |L1.3408|
                          DCD      imei
                  |L1.3412|
                          DCD      ||.text||+0x448
                  |L1.3416|
000d58  4f4b00            DCB      "OK",0
000d5b  00                DCB      0
                  |L1.3420|
000d5c  0d0a0a0a          DCB      "\r\n\n\nAT+GSN\r\n",0
000d60  41542b47
000d64  534e0d0a
000d68  00      
000d69  00                DCB      0
000d6a  00                DCB      0
000d6b  00                DCB      0
                  |L1.3436|
                          DCD      uart_string_gsm
                  |L1.3440|
                          DCD      time52
                  |L1.3444|
                          DCD      lpticks
                  |L1.3448|
                          DCD      int_erval
                  |L1.3452|
                          DCD      velocity
                  |L1.3456|
                          DCD      speed
                  |L1.3460|
                          DCD      lati
                  |L1.3464|
                          DCD      0x40590000
                  |L1.3468|
000d8c  4629              MOV      r1,r5
000d8e  f7fffffe          BL       __aeabi_dmul
000d92  4604              MOV      r4,r0
000d94  460d              MOV      r5,r1
;;;980    		mm22=hh+mm11/60;	
000d96  2200              MOVS     r2,#0
000d98  4bfe              LDR      r3,|L1.4500|
000d9a  4620              MOV      r0,r4
000d9c  4629              MOV      r1,r5
000d9e  f7fffffe          BL       __aeabi_ddiv
000da2  9103              STR      r1,[sp,#0xc]
000da4  9002              STR      r0,[sp,#8]
000da6  9808              LDR      r0,[sp,#0x20]
000da8  f7fffffe          BL       __aeabi_i2d
000dac  9101              STR      r1,[sp,#4]
000dae  9000              STR      r0,[sp,#0]
000db0  9b03              LDR      r3,[sp,#0xc]
000db2  9a02              LDR      r2,[sp,#8]
000db4  f7fffffe          BL       __aeabi_dadd
000db8  9105              STR      r1,[sp,#0x14]
000dba  9004              STR      r0,[sp,#0x10]
;;;981    		memset(lati,0,15);
000dbc  210f              MOVS     r1,#0xf
000dbe  48f6              LDR      r0,|L1.4504|
000dc0  f7fffffe          BL       __aeabi_memclr4
;;;982    		sprintf(lati,"%f",mm22);
000dc4  a1f5              ADR      r1,|L1.4508|
000dc6  48f4              LDR      r0,|L1.4504|
000dc8  9b05              LDR      r3,[sp,#0x14]
000dca  9a04              LDR      r2,[sp,#0x10]
000dcc  f7fffffe          BL       __2sprintf
;;;983    		c=stof(longi);//7523.7412
000dd0  48f3              LDR      r0,|L1.4512|
000dd2  f7fffffe          BL       stof
000dd6  9003              STR      r0,[sp,#0xc]
000dd8  f7fffffe          BL       __aeabi_f2d
000ddc  4606              MOV      r6,r0
000dde  460f              MOV      r7,r1
;;;984    		hh= c/100; //75
000de0  2200              MOVS     r2,#0
000de2  4bf0              LDR      r3,|L1.4516|
000de4  4630              MOV      r0,r6
000de6  4639              MOV      r1,r7
000de8  f7fffffe          BL       __aeabi_ddiv
000dec  9103              STR      r1,[sp,#0xc]
000dee  9002              STR      r0,[sp,#8]
000df0  f7fffffe          BL       __aeabi_d2iz
000df4  9008              STR      r0,[sp,#0x20]
;;;985    		hh11 = c/100; //75.237412
000df6  2200              MOVS     r2,#0
000df8  4bea              LDR      r3,|L1.4516|
000dfa  4630              MOV      r0,r6
000dfc  4639              MOV      r1,r7
000dfe  f7fffffe          BL       __aeabi_ddiv
000e02  9107              STR      r1,[sp,#0x1c]
000e04  9006              STR      r0,[sp,#0x18]
;;;986    		mm11 = hh11-hh; //.237412
000e06  9808              LDR      r0,[sp,#0x20]
000e08  f7fffffe          BL       __aeabi_i2d
000e0c  9103              STR      r1,[sp,#0xc]
000e0e  9002              STR      r0,[sp,#8]
000e10  9b07              LDR      r3,[sp,#0x1c]
000e12  9a06              LDR      r2,[sp,#0x18]
000e14  f7fffffe          BL       __aeabi_drsub
000e18  4604              MOV      r4,r0
000e1a  460d              MOV      r5,r1
;;;987    		mm11*=100;
000e1c  2200              MOVS     r2,#0
000e1e  4be1              LDR      r3,|L1.4516|
000e20  4620              MOV      r0,r4
000e22  4629              MOV      r1,r5
000e24  f7fffffe          BL       __aeabi_dmul
000e28  4604              MOV      r4,r0
000e2a  460d              MOV      r5,r1
;;;988    		mm22=hh+mm11/60;	
000e2c  2200              MOVS     r2,#0
000e2e  4bd9              LDR      r3,|L1.4500|
000e30  4620              MOV      r0,r4
000e32  4629              MOV      r1,r5
000e34  f7fffffe          BL       __aeabi_ddiv
000e38  9103              STR      r1,[sp,#0xc]
000e3a  9002              STR      r0,[sp,#8]
000e3c  9808              LDR      r0,[sp,#0x20]
000e3e  f7fffffe          BL       __aeabi_i2d
000e42  9101              STR      r1,[sp,#4]
000e44  9000              STR      r0,[sp,#0]
000e46  9b03              LDR      r3,[sp,#0xc]
000e48  9a02              LDR      r2,[sp,#8]
000e4a  f7fffffe          BL       __aeabi_dadd
000e4e  9105              STR      r1,[sp,#0x14]
000e50  9004              STR      r0,[sp,#0x10]
;;;989    		memset(longi,0,15);
000e52  210f              MOVS     r1,#0xf
000e54  48d2              LDR      r0,|L1.4512|
000e56  f7fffffe          BL       __aeabi_memclr4
;;;990    		sprintf(longi,"%f",mm22);	
000e5a  a1d0              ADR      r1,|L1.4508|
000e5c  48d0              LDR      r0,|L1.4512|
000e5e  9b05              LDR      r3,[sp,#0x14]
000e60  9a04              LDR      r2,[sp,#0x10]
000e62  f7fffffe          BL       __2sprintf
;;;991    
;;;992    		//strcat(data,"\n");
;;;993    		strcat(data,imei);
000e66  49d0              LDR      r1,|L1.4520|
000e68  48d0              LDR      r0,|L1.4524|
000e6a  f7fffffe          BL       strcat
;;;994    		strcat(data,", ");	
000e6e  a1d0              ADR      r1,|L1.4528|
000e70  48ce              LDR      r0,|L1.4524|
000e72  f7fffffe          BL       strcat
;;;995    		strcat(data,"$GxGGA");	
000e76  a1cf              ADR      r1,|L1.4532|
000e78  48cc              LDR      r0,|L1.4524|
000e7a  f7fffffe          BL       strcat
;;;996    		strcat(data,gga);
000e7e  49cf              LDR      r1,|L1.4540|
000e80  48ca              LDR      r0,|L1.4524|
000e82  f7fffffe          BL       strcat
;;;997    		strcat(data,", $GxRMC");	
000e86  a1ce              ADR      r1,|L1.4544|
000e88  48c8              LDR      r0,|L1.4524|
000e8a  f7fffffe          BL       strcat
;;;998    		strcat(data,rmc);	
000e8e  49cf              LDR      r1,|L1.4556|
000e90  48c6              LDR      r0,|L1.4524|
000e92  f7fffffe          BL       strcat
;;;999    
;;;1000   
;;;1001   
;;;1002   //if(speed<2)
;;;1003   //{
;;;1004   //	motion_samples++;
;;;1005   //}
;;;1006   //else
;;;1007   //{
;;;1008   //	motion_samples=0;
;;;1009   //}
;;;1010   }
000e96  b009              ADD      sp,sp,#0x24
000e98  bdf0              POP      {r4-r7,pc}
;;;1011   
                          ENDP

                  send_MSG PROC
;;;1062   
;;;1063   char * send_MSG(char *string, char *responseA, char *responseB, char *responseC, int32 timeout)
000e9a  b5ff              PUSH     {r0-r7,lr}
;;;1064   {	int qwe;int exitflag=1;int cntr=0; long time111,timeout222;
000e9c  b087              SUB      sp,sp,#0x1c
000e9e  4615              MOV      r5,r2
000ea0  461e              MOV      r6,r3
000ea2  2001              MOVS     r0,#1
000ea4  9005              STR      r0,[sp,#0x14]
000ea6  2000              MOVS     r0,#0
000ea8  9004              STR      r0,[sp,#0x10]
;;;1065   	char cond121;
;;;1066   	char* cond122;
;;;1067   	char* cond123;
;;;1068   	char* cond124;	
;;;1069   		qwe=strlen(uart_string_gsm);
000eaa  48c9              LDR      r0,|L1.4560|
000eac  f7fffffe          BL       strlen
000eb0  9006              STR      r0,[sp,#0x18]
;;;1070   
;;;1071   	
;;;1072   		memset(uart_string_gsm,0,qwe);
000eb2  48c7              LDR      r0,|L1.4560|
000eb4  9906              LDR      r1,[sp,#0x18]
000eb6  f7fffffe          BL       __aeabi_memclr4
;;;1073   		k2=0;									//string array counter for uart 1
000eba  2000              MOVS     r0,#0
000ebc  49c5              LDR      r1,|L1.4564|
000ebe  6008              STR      r0,[r1,#0]  ; k2
;;;1074   	  time111=99999;						//timer counts to wait for characters in uart 1 
000ec0  4fc5              LDR      r7,|L1.4568|
;;;1075   		clear();
000ec2  f7fffffe          BL       clear
;;;1076   		timeout222=2001;
000ec6  48c5              LDR      r0,|L1.4572|
000ec8  9003              STR      r0,[sp,#0xc]
;;;1077   		send_modem(string);
000eca  9807              LDR      r0,[sp,#0x1c]
000ecc  f7fffffe          BL       send_modem
;;;1078   		do	{
000ed0  bf00              NOP      
                  |L1.3794|
;;;1079   			
;;;1080   					time111--;
000ed2  1e7f              SUBS     r7,r7,#1
;;;1081   				  timeout222--;
000ed4  9803              LDR      r0,[sp,#0xc]
000ed6  1e40              SUBS     r0,r0,#1
000ed8  9003              STR      r0,[sp,#0xc]
;;;1082   //          if(lptmr_interrupt == 1){
;;;1083   //					//accel_read();
;;;1084   //					detect_motion();
;;;1085   //					lptmr_interrupt = 0;}		
;;;1086   //					if(timeout222 % 400 == 0)
;;;1087   //					{
;;;1088   //						//uart0_putchar(UART0_BASE_PTR,'1');uart_putchar(UART1_BASE_PTR,0x1A);
;;;1089   //					}
;;;1090   			
;;;1091   	cond122=strstr(uart_string_gsm, responseA);
000eda  48bd              LDR      r0,|L1.4560|
000edc  9908              LDR      r1,[sp,#0x20]
000ede  f7fffffe          BL       strstr
000ee2  9001              STR      r0,[sp,#4]
;;;1092   	cond123=strstr(uart_string_gsm, responseB);
000ee4  4629              MOV      r1,r5
000ee6  48ba              LDR      r0,|L1.4560|
000ee8  f7fffffe          BL       strstr
000eec  9000              STR      r0,[sp,#0]
;;;1093     cond124=strstr(uart_string_gsm, responseC);
000eee  4631              MOV      r1,r6
000ef0  48b7              LDR      r0,|L1.4560|
000ef2  f7fffffe          BL       strstr
000ef6  4604              MOV      r4,r0
;;;1094   	cond121 = (cond122	|| cond123	|| cond124  || (time111<=1))	;			
000ef8  9801              LDR      r0,[sp,#4]
000efa  2800              CMP      r0,#0
000efc  d106              BNE      |L1.3852|
000efe  9800              LDR      r0,[sp,#0]
000f00  2800              CMP      r0,#0
000f02  d103              BNE      |L1.3852|
000f04  2c00              CMP      r4,#0
000f06  d101              BNE      |L1.3852|
000f08  2f01              CMP      r7,#1
000f0a  dc01              BGT      |L1.3856|
                  |L1.3852|
000f0c  2001              MOVS     r0,#1
000f0e  e000              B        |L1.3858|
                  |L1.3856|
000f10  2000              MOVS     r0,#0
                  |L1.3858|
000f12  9002              STR      r0,[sp,#8]
;;;1095   			
;;;1096   			
;;;1097   		}while (!cond121);
000f14  9802              LDR      r0,[sp,#8]
000f16  2800              CMP      r0,#0
000f18  d0db              BEQ      |L1.3794|
;;;1098   		clear();
000f1a  f7fffffe          BL       clear
;;;1099   		return uart_string_gsm;
000f1e  48ac              LDR      r0,|L1.4560|
;;;1100   
;;;1101   }
000f20  b00b              ADD      sp,sp,#0x2c
000f22  bdf0              POP      {r4-r7,pc}
;;;1102   
                          ENDP

                  send_message PROC
;;;2052   			
;;;2053   	void send_message(char * data2)
000f24  b538              PUSH     {r3-r5,lr}
;;;2054   	{
000f26  4604              MOV      r4,r0
;;;2055   									memset(at_,0,100);
000f28  2164              MOVS     r1,#0x64
000f2a  48ad              LDR      r0,|L1.4576|
000f2c  f7fffffe          BL       __aeabi_memclr4
;;;2056   									sprintf(at_, "\nAT+CMGS=\"%s\"\r\n" ,num2);
000f30  4aac              LDR      r2,|L1.4580|
000f32  a1ad              ADR      r1,|L1.4584|
000f34  48aa              LDR      r0,|L1.4576|
000f36  f7fffffe          BL       __2sprintf
;;;2057   									send_MSG(at_, ">", "ERROR\r\n" , "ERROR:",tmeout);	
000f3a  48af              LDR      r0,|L1.4600|
000f3c  6800              LDR      r0,[r0,#0]  ; tmeout
000f3e  4baf              LDR      r3,|L1.4604|
000f40  4aaf              LDR      r2,|L1.4608|
000f42  a1b0              ADR      r1,|L1.4612|
000f44  9000              STR      r0,[sp,#0]
000f46  48a6              LDR      r0,|L1.4576|
000f48  f7fffffe          BL       send_MSG
;;;2058   									if( strstr(uart_string_gsm, ">"))
000f4c  a1ad              ADR      r1,|L1.4612|
000f4e  48a0              LDR      r0,|L1.4560|
000f50  f7fffffe          BL       strstr
000f54  2800              CMP      r0,#0
000f56  d031              BEQ      |L1.4028|
;;;2059   									{
;;;2060   										//
;;;2061   										
;;;2062   											for(k=0;k<strlen(data2);k++)
000f58  2000              MOVS     r0,#0
000f5a  49ab              LDR      r1,|L1.4616|
000f5c  6008              STR      r0,[r1,#0]  ; k
000f5e  e00c              B        |L1.3962|
                  |L1.3936|
;;;2063   											{
;;;2064   												
;;;2065   												uart_putchar(UART1_BASE_PTR, data2[k]);
000f60  48a9              LDR      r0,|L1.4616|
000f62  6800              LDR      r0,[r0,#0]  ; k
000f64  5c21              LDRB     r1,[r4,r0]
000f66  48a9              LDR      r0,|L1.4620|
000f68  f7fffffe          BL       uart_putchar
;;;2066   												//uart0_putchar(UART0_BASE_PTR, data2[k]);
;;;2067   												clear();
000f6c  f7fffffe          BL       clear
000f70  48a5              LDR      r0,|L1.4616|
000f72  6800              LDR      r0,[r0,#0]            ;2062  ; k
000f74  1c40              ADDS     r0,r0,#1              ;2062
000f76  49a4              LDR      r1,|L1.4616|
000f78  6008              STR      r0,[r1,#0]            ;2062  ; k
                  |L1.3962|
000f7a  4620              MOV      r0,r4                 ;2062
000f7c  f7fffffe          BL       strlen
000f80  49a1              LDR      r1,|L1.4616|
000f82  6809              LDR      r1,[r1,#0]            ;2062  ; k
000f84  4288              CMP      r0,r1                 ;2062
000f86  d8eb              BHI      |L1.3936|
;;;2068   												
;;;2069   											}		
;;;2070   											uart_putchar(UART1_BASE_PTR, 0x1A);
000f88  211a              MOVS     r1,#0x1a
000f8a  48a0              LDR      r0,|L1.4620|
000f8c  f7fffffe          BL       uart_putchar
;;;2071   											k2=0;									//string array counter for uart 1
000f90  2000              MOVS     r0,#0
000f92  4990              LDR      r1,|L1.4564|
000f94  6008              STR      r0,[r1,#0]  ; k2
;;;2072   											timeout=99999;						//timer counts to wait for characters in uart 1 									
000f96  4890              LDR      r0,|L1.4568|
000f98  499d              LDR      r1,|L1.4624|
000f9a  6008              STR      r0,[r1,#0]  ; timeout
;;;2073   											while(!(strstr(uart_string_gsm,"+CMGS:")  ||  (timeout < 1)))
000f9c  e004              B        |L1.4008|
                  |L1.3998|
;;;2074   																{
;;;2075   																	timeout--;
000f9e  489c              LDR      r0,|L1.4624|
000fa0  6800              LDR      r0,[r0,#0]  ; timeout
000fa2  1e40              SUBS     r0,r0,#1
000fa4  499a              LDR      r1,|L1.4624|
000fa6  6008              STR      r0,[r1,#0]  ; timeout
                  |L1.4008|
000fa8  a19a              ADR      r1,|L1.4628|
000faa  4889              LDR      r0,|L1.4560|
000fac  f7fffffe          BL       strstr
000fb0  2800              CMP      r0,#0                 ;2073
000fb2  d103              BNE      |L1.4028|
000fb4  4896              LDR      r0,|L1.4624|
000fb6  6800              LDR      r0,[r0,#0]            ;2073  ; timeout
000fb8  2801              CMP      r0,#1                 ;2073
000fba  daf0              BGE      |L1.3998|
                  |L1.4028|
;;;2076   //																	if(timeout % 4000 == 0)
;;;2077   //																	{
;;;2078   //																		uart0_putchar(UART0_BASE_PTR,'1');
;;;2079   //																		uart_putchar(UART1_BASE_PTR,0x1A);
;;;2080   //																	}
;;;2081   																}
;;;2082   							
;;;2083   									}
;;;2084   		
;;;2085   									
;;;2086   	}
000fbc  bd38              POP      {r3-r5,pc}
;;;2087   
                          ENDP

                  myAtoi PROC
;;;902    
;;;903    int myAtoi(char *str)
000fbe  b510              PUSH     {r4,lr}
;;;904    {
000fc0  4601              MOV      r1,r0
;;;905        int res = 0,iz; // Initialize result
000fc2  2000              MOVS     r0,#0
;;;906    
;;;907        // Iterate through all characters of input string and update result
;;;908        for (iz = 0; str[iz] != '\0'; ++iz)
000fc4  2200              MOVS     r2,#0
000fc6  e006              B        |L1.4054|
                  |L1.4040|
;;;909            res = res*10 + str[iz] - '0';
000fc8  230a              MOVS     r3,#0xa
000fca  4343              MULS     r3,r0,r3
000fcc  5c8c              LDRB     r4,[r1,r2]
000fce  191b              ADDS     r3,r3,r4
000fd0  4618              MOV      r0,r3
000fd2  3830              SUBS     r0,r0,#0x30
000fd4  1c52              ADDS     r2,r2,#1              ;908
                  |L1.4054|
000fd6  5c8b              LDRB     r3,[r1,r2]            ;908
000fd8  2b00              CMP      r3,#0                 ;908
000fda  d1f5              BNE      |L1.4040|
;;;910    
;;;911        // return result.
;;;912        return res;
;;;913    }
000fdc  bd10              POP      {r4,pc}
;;;914    
                          ENDP

                  save_interval PROC
;;;678    
;;;679    void save_interval()
000fde  b538              PUSH     {r3-r5,lr}
;;;680    {
;;;681    	
;;;682    send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
000fe0  4885              LDR      r0,|L1.4600|
000fe2  6800              LDR      r0,[r0,#0]  ; tmeout
000fe4  4b85              LDR      r3,|L1.4604|
000fe6  4a86              LDR      r2,|L1.4608|
000fe8  a18c              ADR      r1,|L1.4636|
000fea  9000              STR      r0,[sp,#0]
000fec  a08c              ADR      r0,|L1.4640|
000fee  f7fffffe          BL       send_GSM
;;;683    
;;;684    	memset(at_,0,100);
000ff2  2164              MOVS     r1,#0x64
000ff4  487a              LDR      r0,|L1.4576|
000ff6  f7fffffe          BL       __aeabi_memclr4
;;;685    	sprintf(at_,"\r\nAT+FSWRITE=C:\\INTERVAL.TXT,0,%d,10\r\n",strlen(interval)+11);	
000ffa  4891              LDR      r0,|L1.4672|
000ffc  f7fffffe          BL       strlen
001000  4604              MOV      r4,r0
001002  340b              ADDS     r4,r4,#0xb
001004  4622              MOV      r2,r4
001006  a18f              ADR      r1,|L1.4676|
001008  4875              LDR      r0,|L1.4576|
00100a  f7fffffe          BL       __2sprintf
;;;686    	send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",10);	
00100e  200a              MOVS     r0,#0xa
001010  4b7a              LDR      r3,|L1.4604|
001012  4a7b              LDR      r2,|L1.4608|
001014  a17b              ADR      r1,|L1.4612|
001016  9000              STR      r0,[sp,#0]
001018  4871              LDR      r0,|L1.4576|
00101a  f7fffffe          BL       send_GSM
;;;687    	//clear();
;;;688    
;;;689    	
;;;690    	send_modem("|INTERVAL|");
00101e  a093              ADR      r0,|L1.4716|
001020  f7fffffe          BL       send_modem
;;;691    		for(k=0;k<strlen(interval);k++)
001024  2000              MOVS     r0,#0
001026  4978              LDR      r1,|L1.4616|
001028  6008              STR      r0,[r1,#0]  ; k
00102a  e00b              B        |L1.4164|
                  |L1.4140|
;;;692    		{
;;;693    			uart_putchar(UART1_BASE_PTR, interval[k]);// uart0_putchar(UART0_BASE_PTR, interval[k]);//clear();
00102c  4884              LDR      r0,|L1.4672|
00102e  4a76              LDR      r2,|L1.4616|
001030  6812              LDR      r2,[r2,#0]  ; k
001032  5c81              LDRB     r1,[r0,r2]
001034  4875              LDR      r0,|L1.4620|
001036  f7fffffe          BL       uart_putchar
00103a  4873              LDR      r0,|L1.4616|
00103c  6800              LDR      r0,[r0,#0]            ;691  ; k
00103e  1c40              ADDS     r0,r0,#1              ;691
001040  4971              LDR      r1,|L1.4616|
001042  6008              STR      r0,[r1,#0]            ;691  ; k
                  |L1.4164|
001044  487e              LDR      r0,|L1.4672|
001046  f7fffffe          BL       strlen
00104a  496f              LDR      r1,|L1.4616|
00104c  6809              LDR      r1,[r1,#0]            ;691  ; k
00104e  4288              CMP      r0,r1                 ;691
001050  d8ec              BHI      |L1.4140|
;;;694    		}	
;;;695    			send_modem("|");			
001052  a089              ADR      r0,|L1.4728|
001054  f7fffffe          BL       send_modem
;;;696     
;;;697    									k2=0;									//string array counter for uart 1
001058  2000              MOVS     r0,#0
00105a  495e              LDR      r1,|L1.4564|
00105c  6008              STR      r0,[r1,#0]  ; k2
;;;698    									time=19999;						//timer counts to wait for characters in uart 1 									
00105e  4887              LDR      r0,|L1.4732|
001060  4987              LDR      r1,|L1.4736|
001062  6008              STR      r0,[r1,#0]  ; time
;;;699    									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  ||(strstr(uart_string_gsm, "ERROR"))))
001064  e010              B        |L1.4232|
                  |L1.4198|
;;;700    									{
;;;701    									time--;
001066  4886              LDR      r0,|L1.4736|
001068  6800              LDR      r0,[r0,#0]  ; time
00106a  1e40              SUBS     r0,r0,#1
00106c  4984              LDR      r1,|L1.4736|
00106e  6008              STR      r0,[r1,#0]  ; time
;;;702    									if(time % 2000 == 0)
001070  217d              MOVS     r1,#0x7d
001072  0109              LSLS     r1,r1,#4
001074  4882              LDR      r0,|L1.4736|
001076  6800              LDR      r0,[r0,#0]  ; time
001078  f7fffffe          BL       __aeabi_idivmod
00107c  2900              CMP      r1,#0
00107e  d103              BNE      |L1.4232|
;;;703    										{
;;;704    											//uart0_putchar(UART0_BASE_PTR,'1');
;;;705    											uart_putchar(UART1_BASE_PTR,'\n');
001080  210a              MOVS     r1,#0xa
001082  4862              LDR      r0,|L1.4620|
001084  f7fffffe          BL       uart_putchar
                  |L1.4232|
001088  495c              LDR      r1,|L1.4604|
00108a  391c              SUBS     r1,r1,#0x1c           ;699
00108c  4850              LDR      r0,|L1.4560|
00108e  f7fffffe          BL       strstr
001092  2800              CMP      r0,#0                 ;699
001094  d10a              BNE      |L1.4268|
001096  487a              LDR      r0,|L1.4736|
001098  6800              LDR      r0,[r0,#0]            ;699  ; time
00109a  2801              CMP      r0,#1                 ;699
00109c  db06              BLT      |L1.4268|
00109e  4958              LDR      r1,|L1.4608|
0010a0  3908              SUBS     r1,r1,#8              ;699
0010a2  484b              LDR      r0,|L1.4560|
0010a4  f7fffffe          BL       strstr
0010a8  2800              CMP      r0,#0                 ;699
0010aa  d0dc              BEQ      |L1.4198|
                  |L1.4268|
;;;706    										}
;;;707    	
;;;708    									}
;;;709    
;;;710    
;;;711    	
;;;712    }	
0010ac  bd38              POP      {r3-r5,pc}
;;;713    	
                          ENDP

                  parse_gsm PROC
;;;1152   
;;;1153   void parse_gsm(char *str, int first, int sec, char *string)
0010ae  b5ff              PUSH     {r0-r7,lr}
;;;1154   {int i=0,j=0,temp=0;
0010b0  b081              SUB      sp,sp,#4
0010b2  4605              MOV      r5,r0
0010b4  461f              MOV      r7,r3
0010b6  2400              MOVS     r4,#0
0010b8  2000              MOVS     r0,#0
0010ba  9000              STR      r0,[sp,#0]
0010bc  2600              MOVS     r6,#0
;;;1155   
;;;1156   		delay(10);		
0010be  200a              MOVS     r0,#0xa
0010c0  f7fffffe          BL       delay
;;;1157   		memset(string,0,15);
0010c4  210f              MOVS     r1,#0xf
0010c6  4638              MOV      r0,r7
0010c8  f7fffffe          BL       __aeabi_memclr
;;;1158   		for(i=0,temp=0;i<100;i++)
0010cc  bf00              NOP      
0010ce  bf00              NOP      
0010d0  e00a              B        |L1.4328|
                  |L1.4306|
;;;1159   		{
;;;1160   		if(str[i]=='"')
0010d2  5d28              LDRB     r0,[r5,r4]
0010d4  2822              CMP      r0,#0x22
0010d6  d101              BNE      |L1.4316|
;;;1161   			{temp++;j=i;}
0010d8  1c76              ADDS     r6,r6,#1
0010da  9400              STR      r4,[sp,#0]
                  |L1.4316|
;;;1162   		else{}
;;;1163   			
;;;1164   		if(temp>=sec){i=900;}
0010dc  9803              LDR      r0,[sp,#0xc]
0010de  4286              CMP      r6,r0
0010e0  db01              BLT      |L1.4326|
0010e2  24e1              MOVS     r4,#0xe1
0010e4  00a4              LSLS     r4,r4,#2
                  |L1.4326|
0010e6  1c64              ADDS     r4,r4,#1              ;1158
                  |L1.4328|
0010e8  2c64              CMP      r4,#0x64              ;1158
0010ea  dbf2              BLT      |L1.4306|
;;;1165   		else{}	
;;;1166   		
;;;1167   		}	
;;;1168   		
;;;1169   		for(i=0,temp=0;i<100;i++)
0010ec  2400              MOVS     r4,#0
0010ee  2600              MOVS     r6,#0
0010f0  e00b              B        |L1.4362|
                  |L1.4338|
;;;1170   		{
;;;1171   		if(str[i]=='"')
0010f2  5d28              LDRB     r0,[r5,r4]
0010f4  2822              CMP      r0,#0x22
0010f6  d102              BNE      |L1.4350|
;;;1172   			{temp++;l=i;}										
0010f8  1c76              ADDS     r6,r6,#1
0010fa  4862              LDR      r0,|L1.4740|
0010fc  6004              STR      r4,[r0,#0]  ; l
                  |L1.4350|
;;;1173   		else{}
;;;1174   		if(temp>=first){i=900;}else{}
0010fe  9802              LDR      r0,[sp,#8]
001100  4286              CMP      r6,r0
001102  db01              BLT      |L1.4360|
001104  24e1              MOVS     r4,#0xe1
001106  00a4              LSLS     r4,r4,#2
                  |L1.4360|
001108  1c64              ADDS     r4,r4,#1              ;1169
                  |L1.4362|
00110a  2c64              CMP      r4,#0x64              ;1169
00110c  dbf1              BLT      |L1.4338|
;;;1175   		}	
;;;1176   		for(i=0;i<(j-l-1);i++)
00110e  2400              MOVS     r4,#0
001110  e006              B        |L1.4384|
                  |L1.4370|
;;;1177   		{
;;;1178   		string[i] = str[l+i+1];
001112  485c              LDR      r0,|L1.4740|
001114  6800              LDR      r0,[r0,#0]  ; l
001116  1900              ADDS     r0,r0,r4
001118  1c40              ADDS     r0,r0,#1
00111a  5c28              LDRB     r0,[r5,r0]
00111c  5538              STRB     r0,[r7,r4]
00111e  1c64              ADDS     r4,r4,#1              ;1176
                  |L1.4384|
001120  4958              LDR      r1,|L1.4740|
001122  9800              LDR      r0,[sp,#0]            ;1176
001124  6809              LDR      r1,[r1,#0]            ;1176  ; l
001126  1a40              SUBS     r0,r0,r1              ;1176
001128  1e40              SUBS     r0,r0,#1              ;1176
00112a  42a0              CMP      r0,r4                 ;1176
00112c  dcf1              BGT      |L1.4370|
;;;1179   		}			
;;;1180   	
;;;1181   
;;;1182   }
00112e  b005              ADD      sp,sp,#0x14
001130  bdf0              POP      {r4-r7,pc}
;;;1183   
                          ENDP

                  msg_sim800 PROC
;;;1331   
;;;1332   void msg_sim800() 
001132  b5f0              PUSH     {r4-r7,lr}
;;;1333   {char* cond1;
001134  b08f              SUB      sp,sp,#0x3c
;;;1334   	char* cond2;
;;;1335   	char* cond3;
;;;1336   	char* cond4;
;;;1337   	char* cond5;
;;;1338   	char* cond6;
;;;1339   	char* cond7;
;;;1340   	char* cond8;
;;;1341   	char* cond9;
;;;1342   	char* cond10;
;;;1343   	char* cond11;
;;;1344   	char* cond12;
;;;1345   	char* cond13;
;;;1346   	char* cond14;	
;;;1347   	
;;;1348   //ringflag=1;	
;;;1349   	if(ringflag==1)
001136  4854              LDR      r0,|L1.4744|
001138  7800              LDRB     r0,[r0,#0]  ; ringflag
00113a  2801              CMP      r0,#1
00113c  d128              BNE      |L1.4496|
;;;1350   	{
;;;1351   		sleep_flag=0;
00113e  2000              MOVS     r0,#0
001140  4952              LDR      r1,|L1.4748|
001142  6008              STR      r0,[r1,#0]  ; sleep_flag
;;;1352       DTR_OFF;		// not sleep	
001144  2080              MOVS     r0,#0x80
001146  4952              LDR      r1,|L1.4752|
001148  6088              STR      r0,[r1,#8]
;;;1353   //	  HardFault_Handler();
;;;1354   delay(1000);
00114a  207d              MOVS     r0,#0x7d
00114c  00c0              LSLS     r0,r0,#3
00114e  f7fffffe          BL       delay
;;;1355   send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    
001152  4829              LDR      r0,|L1.4600|
001154  6800              LDR      r0,[r0,#0]  ; tmeout
001156  4b29              LDR      r3,|L1.4604|
001158  4a29              LDR      r2,|L1.4608|
00115a  4619              MOV      r1,r3
00115c  391c              SUBS     r1,r1,#0x1c
00115e  9000              STR      r0,[sp,#0]
001160  a04c              ADR      r0,|L1.4756|
001162  f7fffffe          BL       send_GSM
;;;1356   		
;;;1357   send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);  		
001166  4824              LDR      r0,|L1.4600|
001168  6800              LDR      r0,[r0,#0]  ; tmeout
00116a  4b24              LDR      r3,|L1.4604|
00116c  4a24              LDR      r2,|L1.4608|
00116e  4619              MOV      r1,r3
001170  391c              SUBS     r1,r1,#0x1c
001172  9000              STR      r0,[sp,#0]
001174  a049              ADR      r0,|L1.4764|
001176  f7fffffe          BL       send_GSM
;;;1358   delay(1000);		
00117a  207d              MOVS     r0,#0x7d
00117c  00c0              LSLS     r0,r0,#3
00117e  f7fffffe          BL       delay
;;;1359   		
;;;1360   		
;;;1361   //	bat_cind();
;;;1362   	send_GSM("\n\nAT+CMGF=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
001182  481d              LDR      r0,|L1.4600|
001184  6800              LDR      r0,[r0,#0]  ; tmeout
001186  4b1d              LDR      r3,|L1.4604|
001188  4a1d              LDR      r2,|L1.4608|
00118a  4619              MOV      r1,r3
00118c  391c              SUBS     r1,r1,#0x1c
00118e  e08b              B        |L1.4776|
                  |L1.4496|
001190  e3fd              B        |L1.6542|
001192  0000              DCW      0x0000
                  |L1.4500|
                          DCD      0x404e0000
                  |L1.4504|
                          DCD      lati
                  |L1.4508|
00119c  256600            DCB      "%f",0
00119f  00                DCB      0
                  |L1.4512|
                          DCD      longi
                  |L1.4516|
                          DCD      0x40590000
                  |L1.4520|
                          DCD      imei
                  |L1.4524|
                          DCD      data
                  |L1.4528|
0011b0  2c2000            DCB      ", ",0
0011b3  00                DCB      0
                  |L1.4532|
0011b4  24477847          DCB      "$$GxGGA",0
0011b8  474100  
0011bb  00                DCB      0
                  |L1.4540|
                          DCD      gga
                  |L1.4544|
0011c0  2c202447          DCB      ", $$GxRMC",0
0011c4  78524d43
0011c8  00      
0011c9  00                DCB      0
0011ca  00                DCB      0
0011cb  00                DCB      0
                  |L1.4556|
                          DCD      ||rmc||
                  |L1.4560|
                          DCD      uart_string_gsm
                  |L1.4564|
                          DCD      ||k2||
                  |L1.4568|
                          DCD      0x0001869f
                  |L1.4572|
                          DCD      0x000007d1
                  |L1.4576|
                          DCD      at_
                  |L1.4580|
                          DCD      num2
                  |L1.4584|
0011e8  0a41542b          DCB      "\nAT+CMGS=""%s""\r\n",0
0011ec  434d4753
0011f0  3d222573
0011f4  220d0a00
                  |L1.4600|
                          DCD      tmeout
                  |L1.4604|
                          DCD      ||.text||+0x880
                  |L1.4608|
                          DCD      ||.text||+0x450
                  |L1.4612|
001204  3e00              DCB      ">",0
001206  00                DCB      0
001207  00                DCB      0
                  |L1.4616|
                          DCD      k
                  |L1.4620|
                          DCD      0x4006b000
                  |L1.4624|
                          DCD      timeout
                  |L1.4628|
001214  2b434d47          DCB      "+CMGS:",0
001218  533a00  
00121b  00                DCB      0
                  |L1.4636|
00121c  4f4b00            DCB      "OK",0
00121f  00                DCB      0
                  |L1.4640|
001220  0a41542b          DCB      "\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n",0
001224  46534352
001228  45415445
00122c  3d433a5c
001230  494e5445
001234  5256414c
001238  2e545854
00123c  0d0a00  
00123f  00                DCB      0
                  |L1.4672|
                          DCD      interval
                  |L1.4676|
001244  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\INTERVAL.TXT,0,%d,10\r\n",0
001248  2b465357
00124c  52495445
001250  3d433a5c
001254  494e5445
001258  5256414c
00125c  2e545854
001260  2c302c25
001264  642c3130
001268  0d0a00  
00126b  00                DCB      0
                  |L1.4716|
00126c  7c494e54          DCB      "|INTERVAL|",0
001270  45525641
001274  4c7c00  
001277  00                DCB      0
                  |L1.4728|
001278  7c00              DCB      "|",0
00127a  00                DCB      0
00127b  00                DCB      0
                  |L1.4732|
                          DCD      0x00004e1f
                  |L1.4736|
                          DCD      time
                  |L1.4740|
                          DCD      l
                  |L1.4744|
                          DCD      ringflag
                  |L1.4748|
                          DCD      sleep_flag
                  |L1.4752|
                          DCD      0x400ff0c0
                  |L1.4756|
001294  0a0a4154          DCB      "\n\nAT\r\n",0
001298  0d0a00  
00129b  00                DCB      0
                  |L1.4764|
00129c  0a0a4154          DCB      "\n\nAT+GSV\r\n",0
0012a0  2b475356
0012a4  0d0a00  
0012a7  00                DCB      0
                  |L1.4776|
0012a8  9000              STR      r0,[sp,#0]
0012aa  a0fb              ADR      r0,|L1.5784|
0012ac  f7fffffe          BL       send_GSM
;;;1363   	send_GSM("\n\nAT+CSCA?\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
0012b0  48fd              LDR      r0,|L1.5800|
0012b2  6800              LDR      r0,[r0,#0]  ; tmeout
0012b4  4bfd              LDR      r3,|L1.5804|
0012b6  4afe              LDR      r2,|L1.5808|
0012b8  4619              MOV      r1,r3
0012ba  391c              SUBS     r1,r1,#0x1c
0012bc  9000              STR      r0,[sp,#0]
0012be  a0fd              ADR      r0,|L1.5812|
0012c0  f7fffffe          BL       send_GSM
;;;1364   //							memset(at_,0,100);
;;;1365   //							memset(num_o,0,15);
;;;1366   //							parse_g(uart_string_gsm, 1, 2, '\"', '\"', num_o);
;;;1367   //							sprintf(at_, "\r\nAT+CSCA=\"%s\"\r\n", num_o);
;;;1368   //							printf("%s\n",send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout));	
;;;1369   
;;;1370   		
;;;1371   			//		printf("\n\n\thttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,'%',longi,velocity,lati,longi);
;;;1372   					send_GSM("\r\nAT+CMGR=1\r\n", "OK\r\n", "ERROR" , "OK\r\n",tmeout);	
0012c4  48f8              LDR      r0,|L1.5800|
0012c6  6800              LDR      r0,[r0,#0]  ; tmeout
0012c8  4bf8              LDR      r3,|L1.5804|
0012ca  3b1c              SUBS     r3,r3,#0x1c
0012cc  4af8              LDR      r2,|L1.5808|
0012ce  3a08              SUBS     r2,r2,#8
0012d0  4619              MOV      r1,r3
0012d2  9000              STR      r0,[sp,#0]
0012d4  a0fb              ADR      r0,|L1.5828|
0012d6  f7fffffe          BL       send_GSM
;;;1373   					clear();
0012da  f7fffffe          BL       clear
;;;1374   					parse_gsm(uart_string_gsm, 3, 4, num2);
0012de  4bfd              LDR      r3,|L1.5844|
0012e0  2204              MOVS     r2,#4
0012e2  2103              MOVS     r1,#3
0012e4  48fc              LDR      r0,|L1.5848|
0012e6  f7fffffe          BL       parse_gsm
;;;1375   			
;;;1376   			
;;;1377   			
;;;1378   			
;;;1379   			
;;;1380   			
;;;1381   			
;;;1382   //		
;;;1383   //if(cond1)
;;;1384   //{
;;;1385   
;;;1386   						cond1=strstr(uart_string_gsm, "OWNER");	
0012ea  a1fc              ADR      r1,|L1.5852|
0012ec  48fa              LDR      r0,|L1.5848|
0012ee  f7fffffe          BL       strstr
0012f2  4605              MOV      r5,r0
;;;1387   						cond2=strstr(uart_string_gsm, "LOCATION");
0012f4  a1fb              ADR      r1,|L1.5860|
0012f6  48f8              LDR      r0,|L1.5848|
0012f8  f7fffffe          BL       strstr
0012fc  4606              MOV      r6,r0
;;;1388   						cond3=strstr(uart_string_gsm, "INTERVAL");
0012fe  a1fc              ADR      r1,|L1.5872|
001300  48f5              LDR      r0,|L1.5848|
001302  f7fffffe          BL       strstr
001306  4607              MOV      r7,r0
;;;1389   						cond4=strstr(uart_string_gsm, "START");
001308  a1fc              ADR      r1,|L1.5884|
00130a  48f3              LDR      r0,|L1.5848|
00130c  f7fffffe          BL       strstr
001310  900e              STR      r0,[sp,#0x38]
;;;1390   						cond5=strstr(uart_string_gsm, "OWNER1");
001312  a1fc              ADR      r1,|L1.5892|
001314  48f0              LDR      r0,|L1.5848|
001316  f7fffffe          BL       strstr
00131a  900d              STR      r0,[sp,#0x34]
;;;1391   						cond6=strstr(uart_string_gsm, "OWNER2");
00131c  a1fb              ADR      r1,|L1.5900|
00131e  48ee              LDR      r0,|L1.5848|
001320  f7fffffe          BL       strstr
001324  900c              STR      r0,[sp,#0x30]
;;;1392   						cond7=strstr(uart_string_gsm, "OWNER3");
001326  a1fb              ADR      r1,|L1.5908|
001328  48eb              LDR      r0,|L1.5848|
00132a  f7fffffe          BL       strstr
00132e  900b              STR      r0,[sp,#0x2c]
;;;1393   						cond8=strstr(uart_string_gsm, "DEBUG");
001330  a1fa              ADR      r1,|L1.5916|
001332  48e9              LDR      r0,|L1.5848|
001334  f7fffffe          BL       strstr
001338  900a              STR      r0,[sp,#0x28]
;;;1394   						cond9=strstr(uart_string_gsm, "RESET");
00133a  a1fa              ADR      r1,|L1.5924|
00133c  48e6              LDR      r0,|L1.5848|
00133e  f7fffffe          BL       strstr
001342  9009              STR      r0,[sp,#0x24]
;;;1395   						cond10=strstr(uart_string_gsm, "IP");
001344  a1f9              ADR      r1,|L1.5932|
001346  48e4              LDR      r0,|L1.5848|
001348  f7fffffe          BL       strstr
00134c  9008              STR      r0,[sp,#0x20]
;;;1396   						cond11=strstr(uart_string_gsm, "FUEL ON");	
00134e  a1f8              ADR      r1,|L1.5936|
001350  48e1              LDR      r0,|L1.5848|
001352  f7fffffe          BL       strstr
001356  9007              STR      r0,[sp,#0x1c]
;;;1397   						cond12=strstr(uart_string_gsm, "FUEL OFF");	
001358  a1f7              ADR      r1,|L1.5944|
00135a  48df              LDR      r0,|L1.5848|
00135c  f7fffffe          BL       strstr
001360  9006              STR      r0,[sp,#0x18]
;;;1398   						cond13=strstr(uart_string_gsm, "IGNITION ON");	
001362  a1f8              ADR      r1,|L1.5956|
001364  48dc              LDR      r0,|L1.5848|
001366  f7fffffe          BL       strstr
00136a  9005              STR      r0,[sp,#0x14]
;;;1399   						cond14=strstr(uart_string_gsm, "IGNITION OFF");	
00136c  a1f8              ADR      r1,|L1.5968|
00136e  48da              LDR      r0,|L1.5848|
001370  f7fffffe          BL       strstr
001374  4604              MOV      r4,r0
;;;1400   					//	memset(uart_string_gsm,0,5000);
;;;1401   							if(cond1 && cond2)
001376  2d00              CMP      r5,#0
001378  d024              BEQ      |L1.5060|
00137a  2e00              CMP      r6,#0
00137c  d022              BEQ      |L1.5060|
;;;1402   							{
;;;1403   								memset(data2,0,strlen(data2));
00137e  48f8              LDR      r0,|L1.5984|
001380  f7fffffe          BL       strlen
001384  4601              MOV      r1,r0
001386  9004              STR      r0,[sp,#0x10]
001388  48f5              LDR      r0,|L1.5984|
00138a  f7fffffe          BL       __aeabi_memclr4
;;;1404   								sprintf(data2,"\nCoordinates : %s N, %s E\nSpeed : %s kmph\n\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);	
00138e  48f5              LDR      r0,|L1.5988|
001390  2125              MOVS     r1,#0x25
001392  4af5              LDR      r2,|L1.5992|
001394  4bf5              LDR      r3,|L1.5996|
001396  9300              STR      r3,[sp,#0]
001398  9201              STR      r2,[sp,#4]
00139a  9102              STR      r1,[sp,#8]
00139c  9003              STR      r0,[sp,#0xc]
00139e  4603              MOV      r3,r0
0013a0  49f3              LDR      r1,|L1.6000|
0013a2  48ef              LDR      r0,|L1.5984|
0013a4  f7fffffe          BL       __2sprintf
;;;1405   								//if(strstr(data2, "0.000000 N, 0.000000 E"))
;;;1406   								//{send_message("Sorry, No GPS Fix available at the moment\n");}
;;;1407   							//	else
;;;1408   								{send_message(data2);}
0013a8  48ed              LDR      r0,|L1.5984|
0013aa  f7fffffe          BL       send_message
;;;1409   
;;;1410   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
0013ae  48be              LDR      r0,|L1.5800|
0013b0  6800              LDR      r0,[r0,#0]  ; tmeout
0013b2  4bbe              LDR      r3,|L1.5804|
0013b4  4abe              LDR      r2,|L1.5808|
0013b6  4619              MOV      r1,r3
0013b8  391c              SUBS     r1,r1,#0x1c
0013ba  9000              STR      r0,[sp,#0]
0013bc  a0ed              ADR      r0,|L1.6004|
0013be  f7fffffe          BL       send_GSM
0013c2  e30a              B        |L1.6618|
                  |L1.5060|
;;;1411   								
;;;1412   								
;;;1413   							}
;;;1414   	
;;;1415   							else if(cond3)
0013c4  2f00              CMP      r7,#0
0013c6  d023              BEQ      |L1.5136|
;;;1416   							{
;;;1417   								memset(at_,0,100);
0013c8  2164              MOVS     r1,#0x64
0013ca  48ee              LDR      r0,|L1.6020|
0013cc  f7fffffe          BL       __aeabi_memclr4
;;;1418   								memset(interval,0,5);
0013d0  2105              MOVS     r1,#5
0013d2  48ed              LDR      r0,|L1.6024|
0013d4  f7fffffe          BL       __aeabi_memclr
;;;1419   								parse_g(uart_string_gsm, 3, 5, ' ', '\r', interval);		
0013d8  48eb              LDR      r0,|L1.6024|
0013da  210d              MOVS     r1,#0xd
0013dc  2320              MOVS     r3,#0x20
0013de  2205              MOVS     r2,#5
0013e0  9100              STR      r1,[sp,#0]
0013e2  9001              STR      r0,[sp,#4]
0013e4  2103              MOVS     r1,#3
0013e6  48bc              LDR      r0,|L1.5848|
0013e8  f7fffffe          BL       parse_g
;;;1420   								int_erval=myAtoi(interval);
0013ec  48e6              LDR      r0,|L1.6024|
0013ee  f7fffffe          BL       myAtoi
0013f2  49e6              LDR      r1,|L1.6028|
0013f4  6008              STR      r0,[r1,#0]  ; int_erval
;;;1421   								save_interval();			
0013f6  f7fffffe          BL       save_interval
;;;1422   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
0013fa  48ab              LDR      r0,|L1.5800|
0013fc  6800              LDR      r0,[r0,#0]  ; tmeout
0013fe  4bab              LDR      r3,|L1.5804|
001400  4aab              LDR      r2,|L1.5808|
001402  4619              MOV      r1,r3
001404  391c              SUBS     r1,r1,#0x1c
001406  9000              STR      r0,[sp,#0]
001408  a0da              ADR      r0,|L1.6004|
00140a  f7fffffe          BL       send_GSM
00140e  e2e4              B        |L1.6618|
                  |L1.5136|
;;;1423   
;;;1424   								
;;;1425   							}				
;;;1426   
;;;1427   			
;;;1428   							else if(cond4)
001410  980e              LDR      r0,[sp,#0x38]
001412  2800              CMP      r0,#0
001414  d052              BEQ      |L1.5308|
;;;1429   							{
;;;1430   								send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
001416  48a4              LDR      r0,|L1.5800|
001418  6800              LDR      r0,[r0,#0]  ; tmeout
00141a  4ba4              LDR      r3,|L1.5804|
00141c  4aa4              LDR      r2,|L1.5808|
00141e  a1dc              ADR      r1,|L1.6032|
001420  9000              STR      r0,[sp,#0]
001422  4618              MOV      r0,r3
001424  300c              ADDS     r0,r0,#0xc
001426  f7fffffe          BL       send_GSM
;;;1431   								send_GSM("\nAT+FSCREATE=D:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
00142a  489f              LDR      r0,|L1.5800|
00142c  6800              LDR      r0,[r0,#0]  ; tmeout
00142e  4b9f              LDR      r3,|L1.5804|
001430  4a9f              LDR      r2,|L1.5808|
001432  a1d7              ADR      r1,|L1.6032|
001434  9000              STR      r0,[sp,#0]
001436  a0d7              ADR      r0,|L1.6036|
001438  f7fffffe          BL       send_GSM
;;;1432   								send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
00143c  489a              LDR      r0,|L1.5800|
00143e  6800              LDR      r0,[r0,#0]  ; tmeout
001440  4b9a              LDR      r3,|L1.5804|
001442  4a9b              LDR      r2,|L1.5808|
001444  a1d2              ADR      r1,|L1.6032|
001446  9000              STR      r0,[sp,#0]
001448  a0d9              ADR      r0,|L1.6064|
00144a  f7fffffe          BL       send_GSM
;;;1433   								send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
00144e  4896              LDR      r0,|L1.5800|
001450  6800              LDR      r0,[r0,#0]  ; tmeout
001452  4b96              LDR      r3,|L1.5804|
001454  4a96              LDR      r2,|L1.5808|
001456  a1ce              ADR      r1,|L1.6032|
001458  9000              STR      r0,[sp,#0]
00145a  48dc              LDR      r0,|L1.6092|
00145c  f7fffffe          BL       send_GSM
;;;1434   								memcpy (ip, "104.236.203.4", 13);
001460  220d              MOVS     r2,#0xd
001462  a1db              ADR      r1,|L1.6096|
001464  48de              LDR      r0,|L1.6112|
001466  f7fffffe          BL       __aeabi_memcpy
;;;1435   								memcpy (port, "5555", 4);		
00146a  48de              LDR      r0,|L1.6116|
00146c  a1de              ADR      r1,|L1.6120|
00146e  880a              LDRH     r2,[r1,#0]
001470  8002              STRH     r2,[r0,#0]
001472  8849              LDRH     r1,[r1,#2]
001474  8041              STRH     r1,[r0,#2]
;;;1436   								memcpy (interval, "1", 1);										
001476  48c4              LDR      r0,|L1.6024|
001478  a1dd              ADR      r1,|L1.6128|
00147a  7809              LDRB     r1,[r1,#0]
00147c  7001              STRB     r1,[r0,#0]
;;;1437   								save_ip_port();
00147e  f7fffffe          BL       save_ip_port
;;;1438   								save_interval();	
001482  f7fffffe          BL       save_interval
;;;1439   								int_erval=myAtoi(interval);		
001486  48c0              LDR      r0,|L1.6024|
001488  f7fffffe          BL       myAtoi
00148c  49bf              LDR      r1,|L1.6028|
00148e  6008              STR      r0,[r1,#0]  ; int_erval
;;;1440   
;;;1441   			//					printf("\n\n\t,%s,%s,%s,\n",ip,port,interval);		
;;;1442   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
001490  4885              LDR      r0,|L1.5800|
001492  6800              LDR      r0,[r0,#0]  ; tmeout
001494  4b85              LDR      r3,|L1.5804|
001496  4a86              LDR      r2,|L1.5808|
001498  4619              MOV      r1,r3
00149a  391c              SUBS     r1,r1,#0x1c
00149c  9000              STR      r0,[sp,#0]
00149e  a0b5              ADR      r0,|L1.6004|
0014a0  f7fffffe          BL       send_GSM
;;;1443   								
;;;1444   								
;;;1445   								parse_g(uart_string_gsm, 3, 4, ' ', ' ', apn);
0014a4  48d3              LDR      r0,|L1.6132|
0014a6  6800              LDR      r0,[r0,#0]  ; apn
0014a8  2120              MOVS     r1,#0x20
0014aa  460b              MOV      r3,r1
0014ac  2204              MOVS     r2,#4
0014ae  9100              STR      r1,[sp,#0]
0014b0  9001              STR      r0,[sp,#4]
0014b2  2103              MOVS     r1,#3
0014b4  4888              LDR      r0,|L1.5848|
0014b6  f7fffffe          BL       parse_g
0014ba  e28e              B        |L1.6618|
                  |L1.5308|
;;;1446   
;;;1447   								
;;;1448   								
;;;1449   							}
;;;1450   							else if(cond5)
0014bc  980d              LDR      r0,[sp,#0x34]
0014be  2800              CMP      r0,#0
0014c0  d02b              BEQ      |L1.5402|
;;;1451   							{
;;;1452   								memset(at_,0,100);
0014c2  2164              MOVS     r1,#0x64
0014c4  48af              LDR      r0,|L1.6020|
0014c6  f7fffffe          BL       __aeabi_memclr4
;;;1453   								memset(num_o,0,15);
0014ca  210f              MOVS     r1,#0xf
0014cc  48ca              LDR      r0,|L1.6136|
0014ce  f7fffffe          BL       __aeabi_memclr
;;;1454   								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
0014d2  48c9              LDR      r0,|L1.6136|
0014d4  210d              MOVS     r1,#0xd
0014d6  2320              MOVS     r3,#0x20
0014d8  2205              MOVS     r2,#5
0014da  9100              STR      r1,[sp,#0]
0014dc  9001              STR      r0,[sp,#4]
0014de  2103              MOVS     r1,#3
0014e0  487d              LDR      r0,|L1.5848|
0014e2  f7fffffe          BL       parse_g
;;;1455   								sprintf(at_, "\r\nAT+CPBW=1,\"%s\",129,\"OWNER1\"\r\n" , num_o);
0014e6  4ac4              LDR      r2,|L1.6136|
0014e8  a1c4              ADR      r1,|L1.6140|
0014ea  48a6              LDR      r0,|L1.6020|
0014ec  f7fffffe          BL       __2sprintf
;;;1456   								send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout);
0014f0  486d              LDR      r0,|L1.5800|
0014f2  6800              LDR      r0,[r0,#0]  ; tmeout
0014f4  4b6d              LDR      r3,|L1.5804|
0014f6  4a6e              LDR      r2,|L1.5808|
0014f8  4619              MOV      r1,r3
0014fa  391c              SUBS     r1,r1,#0x1c
0014fc  9000              STR      r0,[sp,#0]
0014fe  48a1              LDR      r0,|L1.6020|
001500  f7fffffe          BL       send_GSM
;;;1457   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
001504  4868              LDR      r0,|L1.5800|
001506  6800              LDR      r0,[r0,#0]  ; tmeout
001508  4b68              LDR      r3,|L1.5804|
00150a  4a69              LDR      r2,|L1.5808|
00150c  4619              MOV      r1,r3
00150e  391c              SUBS     r1,r1,#0x1c
001510  9000              STR      r0,[sp,#0]
001512  a098              ADR      r0,|L1.6004|
001514  f7fffffe          BL       send_GSM
001518  e25f              B        |L1.6618|
                  |L1.5402|
;;;1458   															
;;;1459   						
;;;1460   								
;;;1461   							}		
;;;1462   							else if(cond6)
00151a  980c              LDR      r0,[sp,#0x30]
00151c  2800              CMP      r0,#0
00151e  d02b              BEQ      |L1.5496|
;;;1463   							{
;;;1464   								memset(at_,0,100);
001520  2164              MOVS     r1,#0x64
001522  4898              LDR      r0,|L1.6020|
001524  f7fffffe          BL       __aeabi_memclr4
;;;1465   								memset(num_o,0,15);
001528  210f              MOVS     r1,#0xf
00152a  48b3              LDR      r0,|L1.6136|
00152c  f7fffffe          BL       __aeabi_memclr
;;;1466   								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
001530  48b1              LDR      r0,|L1.6136|
001532  210d              MOVS     r1,#0xd
001534  2320              MOVS     r3,#0x20
001536  2205              MOVS     r2,#5
001538  9100              STR      r1,[sp,#0]
00153a  9001              STR      r0,[sp,#4]
00153c  2103              MOVS     r1,#3
00153e  4866              LDR      r0,|L1.5848|
001540  f7fffffe          BL       parse_g
;;;1467   								sprintf(at_, "\r\nAT+CPBW=2,\"%s\",129,\"OWNER2\"\r\n" , num_o);
001544  4aac              LDR      r2,|L1.6136|
001546  a1b5              ADR      r1,|L1.6172|
001548  488e              LDR      r0,|L1.6020|
00154a  f7fffffe          BL       __2sprintf
;;;1468   								send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout);
00154e  4856              LDR      r0,|L1.5800|
001550  6800              LDR      r0,[r0,#0]  ; tmeout
001552  4b56              LDR      r3,|L1.5804|
001554  4a56              LDR      r2,|L1.5808|
001556  4619              MOV      r1,r3
001558  391c              SUBS     r1,r1,#0x1c
00155a  9000              STR      r0,[sp,#0]
00155c  4889              LDR      r0,|L1.6020|
00155e  f7fffffe          BL       send_GSM
;;;1469   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
001562  4851              LDR      r0,|L1.5800|
001564  6800              LDR      r0,[r0,#0]  ; tmeout
001566  4b51              LDR      r3,|L1.5804|
001568  4a51              LDR      r2,|L1.5808|
00156a  4619              MOV      r1,r3
00156c  391c              SUBS     r1,r1,#0x1c
00156e  9000              STR      r0,[sp,#0]
001570  a080              ADR      r0,|L1.6004|
001572  f7fffffe          BL       send_GSM
001576  e230              B        |L1.6618|
                  |L1.5496|
;;;1470   								
;;;1471   															
;;;1472   								
;;;1473   							}									
;;;1474   							else if(cond7)
001578  980b              LDR      r0,[sp,#0x2c]
00157a  2800              CMP      r0,#0
00157c  d02b              BEQ      |L1.5590|
;;;1475   							{
;;;1476   								memset(at_,0,100);
00157e  2164              MOVS     r1,#0x64
001580  4880              LDR      r0,|L1.6020|
001582  f7fffffe          BL       __aeabi_memclr4
;;;1477   								memset(num_o,0,15);
001586  210f              MOVS     r1,#0xf
001588  489b              LDR      r0,|L1.6136|
00158a  f7fffffe          BL       __aeabi_memclr
;;;1478   								parse_g(uart_string_gsm, 3, 5, ' ', '\r', num_o);
00158e  489a              LDR      r0,|L1.6136|
001590  210d              MOVS     r1,#0xd
001592  2320              MOVS     r3,#0x20
001594  2205              MOVS     r2,#5
001596  9100              STR      r1,[sp,#0]
001598  9001              STR      r0,[sp,#4]
00159a  2103              MOVS     r1,#3
00159c  484e              LDR      r0,|L1.5848|
00159e  f7fffffe          BL       parse_g
;;;1479   								sprintf(at_, "\r\nAT+CPBW=3,\"%s\",129,\"OWNER3\"\r\n" , num_o);
0015a2  4a95              LDR      r2,|L1.6136|
0015a4  a1a5              ADR      r1,|L1.6204|
0015a6  4877              LDR      r0,|L1.6020|
0015a8  f7fffffe          BL       __2sprintf
;;;1480   								send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout);
0015ac  483e              LDR      r0,|L1.5800|
0015ae  6800              LDR      r0,[r0,#0]  ; tmeout
0015b0  4b3e              LDR      r3,|L1.5804|
0015b2  4a3f              LDR      r2,|L1.5808|
0015b4  4619              MOV      r1,r3
0015b6  391c              SUBS     r1,r1,#0x1c
0015b8  9000              STR      r0,[sp,#0]
0015ba  4872              LDR      r0,|L1.6020|
0015bc  f7fffffe          BL       send_GSM
;;;1481   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
0015c0  4839              LDR      r0,|L1.5800|
0015c2  6800              LDR      r0,[r0,#0]  ; tmeout
0015c4  4b39              LDR      r3,|L1.5804|
0015c6  4a3a              LDR      r2,|L1.5808|
0015c8  4619              MOV      r1,r3
0015ca  391c              SUBS     r1,r1,#0x1c
0015cc  9000              STR      r0,[sp,#0]
0015ce  a069              ADR      r0,|L1.6004|
0015d0  f7fffffe          BL       send_GSM
0015d4  e201              B        |L1.6618|
                  |L1.5590|
;;;1482   															
;;;1483   															
;;;1484   									
;;;1485   							}		
;;;1486   						else if(cond8)
0015d6  980a              LDR      r0,[sp,#0x28]
0015d8  2800              CMP      r0,#0
0015da  d05b              BEQ      |L1.5780|
;;;1487   							{
;;;1488   								
;;;1489   									memset(at_,0,100);
0015dc  2164              MOVS     r1,#0x64
0015de  4869              LDR      r0,|L1.6020|
0015e0  f7fffffe          BL       __aeabi_memclr4
;;;1490   									for(k=0;k<450;k++)
0015e4  2000              MOVS     r0,#0
0015e6  499d              LDR      r1,|L1.6236|
0015e8  6008              STR      r0,[r1,#0]  ; k
0015ea  e04e              B        |L1.5770|
                  |L1.5612|
;;;1491   									{
;;;1492   										if(uart_string_gsm[k-1] == ' ' && uart_string_gsm[k-2] == 'G' && uart_string_gsm[k-3] == 'U'
0015ec  489b              LDR      r0,|L1.6236|
0015ee  6800              LDR      r0,[r0,#0]  ; k
0015f0  1e40              SUBS     r0,r0,#1
0015f2  4939              LDR      r1,|L1.5848|
0015f4  5c08              LDRB     r0,[r1,r0]
0015f6  2820              CMP      r0,#0x20
0015f8  d142              BNE      |L1.5760|
0015fa  4898              LDR      r0,|L1.6236|
0015fc  6800              LDR      r0,[r0,#0]  ; k
0015fe  1e80              SUBS     r0,r0,#2
001600  5c08              LDRB     r0,[r1,r0]
001602  2847              CMP      r0,#0x47
001604  d13c              BNE      |L1.5760|
001606  4895              LDR      r0,|L1.6236|
001608  6800              LDR      r0,[r0,#0]  ; k
00160a  1ec0              SUBS     r0,r0,#3
00160c  5c08              LDRB     r0,[r1,r0]
00160e  2855              CMP      r0,#0x55
001610  d136              BNE      |L1.5760|
;;;1493   										&& uart_string_gsm[k-4] == 'B' && uart_string_gsm[k-5] == 'E' && uart_string_gsm[k-6] == 'D')
001612  4892              LDR      r0,|L1.6236|
001614  6800              LDR      r0,[r0,#0]  ; k
001616  1f00              SUBS     r0,r0,#4
001618  5c08              LDRB     r0,[r1,r0]
00161a  2842              CMP      r0,#0x42
00161c  d130              BNE      |L1.5760|
00161e  488f              LDR      r0,|L1.6236|
001620  6800              LDR      r0,[r0,#0]  ; k
001622  1f40              SUBS     r0,r0,#5
001624  5c08              LDRB     r0,[r1,r0]
001626  2845              CMP      r0,#0x45
001628  d12a              BNE      |L1.5760|
00162a  488c              LDR      r0,|L1.6236|
00162c  6800              LDR      r0,[r0,#0]  ; k
00162e  1f80              SUBS     r0,r0,#6
001630  5c08              LDRB     r0,[r1,r0]
001632  2844              CMP      r0,#0x44
001634  d124              BNE      |L1.5760|
;;;1494   										{
;;;1495   											for(i=0;i<100;i++)
001636  2000              MOVS     r0,#0
001638  4989              LDR      r1,|L1.6240|
00163a  6008              STR      r0,[r1,#0]  ; i
00163c  e011              B        |L1.5730|
                  |L1.5694|
;;;1496   											{
;;;1497   												at_[i]=uart_string_gsm[k];
00163e  4826              LDR      r0,|L1.5848|
001640  4986              LDR      r1,|L1.6236|
001642  6809              LDR      r1,[r1,#0]  ; k
001644  5c40              LDRB     r0,[r0,r1]
001646  494f              LDR      r1,|L1.6020|
001648  4a85              LDR      r2,|L1.6240|
00164a  6812              LDR      r2,[r2,#0]  ; i
00164c  5488              STRB     r0,[r1,r2]
;;;1498   												k++;
00164e  4883              LDR      r0,|L1.6236|
001650  6800              LDR      r0,[r0,#0]  ; k
001652  1c40              ADDS     r0,r0,#1
001654  4981              LDR      r1,|L1.6236|
001656  6008              STR      r0,[r1,#0]  ; k
001658  4881              LDR      r0,|L1.6240|
00165a  6800              LDR      r0,[r0,#0]            ;1495  ; i
00165c  1c40              ADDS     r0,r0,#1              ;1495
00165e  4980              LDR      r1,|L1.6240|
001660  6008              STR      r0,[r1,#0]            ;1495  ; i
                  |L1.5730|
001662  487f              LDR      r0,|L1.6240|
001664  6800              LDR      r0,[r0,#0]            ;1495  ; i
001666  2864              CMP      r0,#0x64              ;1495
001668  dbe9              BLT      |L1.5694|
;;;1499   											}	
;;;1500   										at_[i+1]='\r';
00166a  210d              MOVS     r1,#0xd
00166c  4a45              LDR      r2,|L1.6020|
00166e  487c              LDR      r0,|L1.6240|
001670  6800              LDR      r0,[r0,#0]  ; i
001672  1c40              ADDS     r0,r0,#1
001674  5411              STRB     r1,[r2,r0]
;;;1501   										at_[i+2]='\n';	
001676  210a              MOVS     r1,#0xa
001678  4879              LDR      r0,|L1.6240|
00167a  6800              LDR      r0,[r0,#0]  ; i
00167c  1c80              ADDS     r0,r0,#2
00167e  5411              STRB     r1,[r2,r0]
                  |L1.5760|
001680  4876              LDR      r0,|L1.6236|
001682  6800              LDR      r0,[r0,#0]            ;1490  ; k
001684  1c40              ADDS     r0,r0,#1              ;1490
001686  4975              LDR      r1,|L1.6236|
001688  6008              STR      r0,[r1,#0]            ;1490  ; k
                  |L1.5770|
00168a  4874              LDR      r0,|L1.6236|
00168c  6800              LDR      r0,[r0,#0]            ;1490  ; k
00168e  21ff              MOVS     r1,#0xff              ;1490
001690  31c3              ADDS     r1,r1,#0xc3           ;1490
001692  e0e7              B        |L1.6244|
                  |L1.5780|
001694  e10e              B        |L1.6324|
001696  0000              DCW      0x0000
                  |L1.5784|
001698  0a0a4154          DCB      "\n\nAT+CMGF=1\n\n",0
00169c  2b434d47
0016a0  463d310a
0016a4  0a00    
0016a6  00                DCB      0
0016a7  00                DCB      0
                  |L1.5800|
                          DCD      tmeout
                  |L1.5804|
                          DCD      ||.text||+0x880
                  |L1.5808|
                          DCD      ||.text||+0x450
                  |L1.5812|
0016b4  0a0a4154          DCB      "\n\nAT+CSCA?\r\n",0
0016b8  2b435343
0016bc  413f0d0a
0016c0  00      
0016c1  00                DCB      0
0016c2  00                DCB      0
0016c3  00                DCB      0
                  |L1.5828|
0016c4  0d0a4154          DCB      "\r\nAT+CMGR=1\r\n",0
0016c8  2b434d47
0016cc  523d310d
0016d0  0a00    
0016d2  00                DCB      0
0016d3  00                DCB      0
                  |L1.5844|
                          DCD      num2
                  |L1.5848|
                          DCD      uart_string_gsm
                  |L1.5852|
0016dc  4f574e45          DCB      "OWNER",0
0016e0  5200    
0016e2  00                DCB      0
0016e3  00                DCB      0
                  |L1.5860|
0016e4  4c4f4341          DCB      "LOCATION",0
0016e8  54494f4e
0016ec  00      
0016ed  00                DCB      0
0016ee  00                DCB      0
0016ef  00                DCB      0
                  |L1.5872|
0016f0  494e5445          DCB      "INTERVAL",0
0016f4  5256414c
0016f8  00      
0016f9  00                DCB      0
0016fa  00                DCB      0
0016fb  00                DCB      0
                  |L1.5884|
0016fc  53544152          DCB      "START",0
001700  5400    
001702  00                DCB      0
001703  00                DCB      0
                  |L1.5892|
001704  4f574e45          DCB      "OWNER1",0
001708  523100  
00170b  00                DCB      0
                  |L1.5900|
00170c  4f574e45          DCB      "OWNER2",0
001710  523200  
001713  00                DCB      0
                  |L1.5908|
001714  4f574e45          DCB      "OWNER3",0
001718  523300  
00171b  00                DCB      0
                  |L1.5916|
00171c  44454255          DCB      "DEBUG",0
001720  4700    
001722  00                DCB      0
001723  00                DCB      0
                  |L1.5924|
001724  52455345          DCB      "RESET",0
001728  5400    
00172a  00                DCB      0
00172b  00                DCB      0
                  |L1.5932|
00172c  495000            DCB      "IP",0
00172f  00                DCB      0
                  |L1.5936|
001730  4655454c          DCB      "FUEL ON",0
001734  204f4e00
                  |L1.5944|
001738  4655454c          DCB      "FUEL OFF",0
00173c  204f4646
001740  00      
001741  00                DCB      0
001742  00                DCB      0
001743  00                DCB      0
                  |L1.5956|
001744  49474e49          DCB      "IGNITION ON",0
001748  54494f4e
00174c  204f4e00
                  |L1.5968|
001750  49474e49          DCB      "IGNITION OFF",0
001754  54494f4e
001758  204f4646
00175c  00      
00175d  00                DCB      0
00175e  00                DCB      0
00175f  00                DCB      0
                  |L1.5984|
                          DCD      data2
                  |L1.5988|
                          DCD      longi
                  |L1.5992|
                          DCD      lati
                  |L1.5996|
                          DCD      velocity
                  |L1.6000|
                          DCD      ||.conststring||+0x8
                  |L1.6004|
001774  0d0a4154          DCB      "\r\nAT+CMGD=1,4\r\n",0
001778  2b434d47
00177c  443d312c
001780  340d0a00
                  |L1.6020|
                          DCD      at_
                  |L1.6024|
                          DCD      interval
                  |L1.6028|
                          DCD      int_erval
                  |L1.6032|
001790  4f4b00            DCB      "OK",0
001793  00                DCB      0
                  |L1.6036|
001794  0a41542b          DCB      "\nAT+FSCREATE=D:\\LOG.TXT\r\n",0
001798  46534352
00179c  45415445
0017a0  3d443a5c
0017a4  4c4f472e
0017a8  5458540d
0017ac  0a00    
0017ae  00                DCB      0
0017af  00                DCB      0
                  |L1.6064|
0017b0  0a41542b          DCB      "\nAT+FSCREATE=C:\\LOG.TXT\r\n",0
0017b4  46534352
0017b8  45415445
0017bc  3d433a5c
0017c0  4c4f472e
0017c4  5458540d
0017c8  0a00    
0017ca  00                DCB      0
0017cb  00                DCB      0
                  |L1.6092|
                          DCD      ||.text||+0x1220
                  |L1.6096|
0017d0  3130342e          DCB      "104.236.203.4",0
0017d4  3233362e
0017d8  3230332e
0017dc  3400    
0017de  00                DCB      0
0017df  00                DCB      0
                  |L1.6112|
                          DCD      ||ip||
                  |L1.6116|
                          DCD      port
                  |L1.6120|
0017e8  35353535          DCB      "5555",0
0017ec  00      
0017ed  00                DCB      0
0017ee  00                DCB      0
0017ef  00                DCB      0
                  |L1.6128|
0017f0  3100              DCB      "1",0
0017f2  00                DCB      0
0017f3  00                DCB      0
                  |L1.6132|
                          DCD      apn
                  |L1.6136|
                          DCD      num_o
                  |L1.6140|
0017fc  0d0a4154          DCB      "\r\nAT+CPBW=1,""%s"",129,""OWNER1""\r\n",0
001800  2b435042
001804  573d312c
001808  22257322
00180c  2c313239
001810  2c224f57
001814  4e455231
001818  220d0a00
                  |L1.6172|
00181c  0d0a4154          DCB      "\r\nAT+CPBW=2,""%s"",129,""OWNER2""\r\n",0
001820  2b435042
001824  573d322c
001828  22257322
00182c  2c313239
001830  2c224f57
001834  4e455232
001838  220d0a00
                  |L1.6204|
00183c  0d0a4154          DCB      "\r\nAT+CPBW=3,""%s"",129,""OWNER3""\r\n",0
001840  2b435042
001844  573d332c
001848  22257322
00184c  2c313239
001850  2c224f57
001854  4e455233
001858  220d0a00
                  |L1.6236|
                          DCD      k
                  |L1.6240|
                          DCD      i
                  |L1.6244|
001864  4288              CMP      r0,r1                 ;1490
001866  da00              BGE      |L1.6250|
001868  e6c0              B        |L1.5612|
                  |L1.6250|
;;;1502   										}
;;;1503   										else{}
;;;1504   									}
;;;1505   									
;;;1506   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
00186a  48fe              LDR      r0,|L1.7268|
00186c  6800              LDR      r0,[r0,#0]  ; tmeout
00186e  4bfe              LDR      r3,|L1.7272|
001870  4afe              LDR      r2,|L1.7276|
001872  4619              MOV      r1,r3
001874  391c              SUBS     r1,r1,#0x1c
001876  9000              STR      r0,[sp,#0]
001878  48fd              LDR      r0,|L1.7280|
00187a  f7fffffe          BL       send_GSM
;;;1507   									  send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout);		
00187e  48f9              LDR      r0,|L1.7268|
001880  6800              LDR      r0,[r0,#0]  ; tmeout
001882  4bf9              LDR      r3,|L1.7272|
001884  4af9              LDR      r2,|L1.7276|
001886  4619              MOV      r1,r3
001888  391c              SUBS     r1,r1,#0x1c
00188a  9000              STR      r0,[sp,#0]
00188c  48f9              LDR      r0,|L1.7284|
00188e  f7fffffe          BL       send_GSM
;;;1508   										memset(data2,0,strlen(data2));
001892  48f9              LDR      r0,|L1.7288|
001894  f7fffffe          BL       strlen
001898  4601              MOV      r1,r0
00189a  9004              STR      r0,[sp,#0x10]
00189c  48f6              LDR      r0,|L1.7288|
00189e  f7fffffe          BL       __aeabi_memclr4
;;;1509   										sprintf(data2,"%s",uart_string_gsm);	
0018a2  4af6              LDR      r2,|L1.7292|
0018a4  a1f6              ADR      r1,|L1.7296|
0018a6  48f4              LDR      r0,|L1.7288|
0018a8  f7fffffe          BL       __2sprintf
;;;1510   										send_message(data2);
0018ac  48f2              LDR      r0,|L1.7288|
0018ae  f7fffffe          BL       send_message
0018b2  e092              B        |L1.6618|
                  |L1.6324|
;;;1511   										
;;;1512   									
;;;1513   								
;;;1514   							}
;;;1515   							
;;;1516   							else if(cond9)
0018b4  9809              LDR      r0,[sp,#0x24]
0018b6  2800              CMP      r0,#0
0018b8  d02c              BEQ      |L1.6420|
;;;1517   							{
;;;1518   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
0018ba  48ea              LDR      r0,|L1.7268|
0018bc  6800              LDR      r0,[r0,#0]  ; tmeout
0018be  4bea              LDR      r3,|L1.7272|
0018c0  4aea              LDR      r2,|L1.7276|
0018c2  4619              MOV      r1,r3
0018c4  391c              SUBS     r1,r1,#0x1c
0018c6  9000              STR      r0,[sp,#0]
0018c8  48e9              LDR      r0,|L1.7280|
0018ca  f7fffffe          BL       send_GSM
;;;1519   
;;;1520   strcat(data,"\n");	
0018ce  a1ed              ADR      r1,|L1.7300|
0018d0  48ed              LDR      r0,|L1.7304|
0018d2  f7fffffe          BL       strcat
;;;1521   GPS_COLLECT();
0018d6  f7fffffe          BL       GPS_COLLECT
;;;1522   strcat(data,"CH\n");	
0018da  a1ec              ADR      r1,|L1.7308|
0018dc  48ea              LDR      r0,|L1.7304|
0018de  f7fffffe          BL       strcat
;;;1523   
;;;1524   log_it();								
0018e2  f7fffffe          BL       log_it
;;;1525   		RESET_OFF;delay(10);
0018e6  2020              MOVS     r0,#0x20
0018e8  49e9              LDR      r1,|L1.7312|
0018ea  6088              STR      r0,[r1,#8]
0018ec  200a              MOVS     r0,#0xa
0018ee  f7fffffe          BL       delay
;;;1526   		RESET_ON;delay(10);
0018f2  2020              MOVS     r0,#0x20
0018f4  49e6              LDR      r1,|L1.7312|
0018f6  6048              STR      r0,[r1,#4]
0018f8  200a              MOVS     r0,#0xa
0018fa  f7fffffe          BL       delay
;;;1527   								send_GSM("\n\n AT+CFUN=1,1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);			
0018fe  48d9              LDR      r0,|L1.7268|
001900  6800              LDR      r0,[r0,#0]  ; tmeout
001902  4bd9              LDR      r3,|L1.7272|
001904  4ad9              LDR      r2,|L1.7276|
001906  4619              MOV      r1,r3
001908  391c              SUBS     r1,r1,#0x1c
00190a  9000              STR      r0,[sp,#0]
00190c  a0e1              ADR      r0,|L1.7316|
00190e  f7fffffe          BL       send_GSM
001912  e062              B        |L1.6618|
                  |L1.6420|
;;;1528   							}
;;;1529   							
;;;1530   							else if(cond10)
001914  9808              LDR      r0,[sp,#0x20]
001916  2800              CMP      r0,#0
001918  d024              BEQ      |L1.6500|
;;;1531   							{
;;;1532   						//		printf("\n\n\n\t%s",uart_string_gsm);
;;;1533   								memset(ip,0,16);
00191a  2110              MOVS     r1,#0x10
00191c  48e2              LDR      r0,|L1.7336|
00191e  f7fffffe          BL       __aeabi_memclr
;;;1534   								parse_g(uart_string_gsm, 3, 4, ' ', ' ', ip);
001922  48e1              LDR      r0,|L1.7336|
001924  2120              MOVS     r1,#0x20
001926  460b              MOV      r3,r1
001928  2204              MOVS     r2,#4
00192a  9100              STR      r1,[sp,#0]
00192c  9001              STR      r0,[sp,#4]
00192e  2103              MOVS     r1,#3
001930  48d2              LDR      r0,|L1.7292|
001932  f7fffffe          BL       parse_g
;;;1535   								parse_g(uart_string_gsm, 6, 5, ' ', '\r', port);	
001936  48dd              LDR      r0,|L1.7340|
001938  210d              MOVS     r1,#0xd
00193a  2320              MOVS     r3,#0x20
00193c  2205              MOVS     r2,#5
00193e  9100              STR      r1,[sp,#0]
001940  9001              STR      r0,[sp,#4]
001942  2106              MOVS     r1,#6
001944  48cd              LDR      r0,|L1.7292|
001946  f7fffffe          BL       parse_g
;;;1536   			//					printf("\n%s\n",port);
;;;1537   								save_ip_port();
00194a  f7fffffe          BL       save_ip_port
;;;1538   							
;;;1539   	//							printf("\n\n\n\t%s\t||\t%s",ip,port);
;;;1540   								send_GSM("\r\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
00194e  48c5              LDR      r0,|L1.7268|
001950  6800              LDR      r0,[r0,#0]  ; tmeout
001952  4bc5              LDR      r3,|L1.7272|
001954  4ac5              LDR      r2,|L1.7276|
001956  4619              MOV      r1,r3
001958  391c              SUBS     r1,r1,#0x1c
00195a  9000              STR      r0,[sp,#0]
00195c  48c4              LDR      r0,|L1.7280|
00195e  f7fffffe          BL       send_GSM
001962  e03a              B        |L1.6618|
                  |L1.6500|
;;;1541   
;;;1542   //								while(1);
;;;1543   								
;;;1544   								
;;;1545   							}
;;;1546   							else if(cond13)
001964  9805              LDR      r0,[sp,#0x14]
001966  2800              CMP      r0,#0
001968  d016              BEQ      |L1.6552|
;;;1547   							{
;;;1548   								
;;;1549   								IGNITION_ON;
00196a  2002              MOVS     r0,#2
00196c  49c8              LDR      r1,|L1.7312|
00196e  3980              SUBS     r1,r1,#0x80
001970  6088              STR      r0,[r1,#8]
;;;1550   								clear();
001972  f7fffffe          BL       clear
;;;1551   								delay(1000);
001976  207d              MOVS     r0,#0x7d
001978  00c0              LSLS     r0,r0,#3
00197a  f7fffffe          BL       delay
;;;1552   								send_GSM("\r\r\nAT+CMGD=1,4\r\n\n\n\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
00197e  48b9              LDR      r0,|L1.7268|
001980  6800              LDR      r0,[r0,#0]  ; tmeout
001982  4bb9              LDR      r3,|L1.7272|
001984  4ab9              LDR      r2,|L1.7276|
001986  4619              MOV      r1,r3
001988  391c              SUBS     r1,r1,#0x1c
00198a  9000              STR      r0,[sp,#0]
00198c  e000              B        |L1.6544|
                  |L1.6542|
00198e  e037              B        |L1.6656|
                  |L1.6544|
001990  a0c7              ADR      r0,|L1.7344|
001992  f7fffffe          BL       send_GSM
001996  e020              B        |L1.6618|
                  |L1.6552|
;;;1553   								
;;;1554   							}
;;;1555   							else if(cond14)
001998  2c00              CMP      r4,#0
00199a  d014              BEQ      |L1.6598|
;;;1556   							{
;;;1557   								
;;;1558   								IGNITION_OFF;
00199c  2002              MOVS     r0,#2
00199e  49bc              LDR      r1,|L1.7312|
0019a0  3980              SUBS     r1,r1,#0x80
0019a2  6048              STR      r0,[r1,#4]
;;;1559   								clear();
0019a4  f7fffffe          BL       clear
;;;1560   								delay(1000);
0019a8  207d              MOVS     r0,#0x7d
0019aa  00c0              LSLS     r0,r0,#3
0019ac  f7fffffe          BL       delay
;;;1561   								
;;;1562   								send_GSM("\r\r\nAT+CMGD=1,4\r\n\n\n\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
0019b0  48ac              LDR      r0,|L1.7268|
0019b2  6800              LDR      r0,[r0,#0]  ; tmeout
0019b4  4bac              LDR      r3,|L1.7272|
0019b6  4aad              LDR      r2,|L1.7276|
0019b8  4619              MOV      r1,r3
0019ba  391c              SUBS     r1,r1,#0x1c
0019bc  9000              STR      r0,[sp,#0]
0019be  a0bc              ADR      r0,|L1.7344|
0019c0  f7fffffe          BL       send_GSM
0019c4  e009              B        |L1.6618|
                  |L1.6598|
;;;1563   								
;;;1564   							}
;;;1565   							
;;;1566   												
;;;1567   
;;;1568   							else
;;;1569   							{
;;;1570   								
;;;1571   								send_GSM("\r\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);			
0019c6  48a7              LDR      r0,|L1.7268|
0019c8  6800              LDR      r0,[r0,#0]  ; tmeout
0019ca  4ba7              LDR      r3,|L1.7272|
0019cc  4aa7              LDR      r2,|L1.7276|
0019ce  4619              MOV      r1,r3
0019d0  391c              SUBS     r1,r1,#0x1c
0019d2  9000              STR      r0,[sp,#0]
0019d4  a0bc              ADR      r0,|L1.7368|
0019d6  f7fffffe          BL       send_GSM
                  |L1.6618|
;;;1572   
;;;1573   							}
;;;1574   
;;;1575   
;;;1576   		ringflag=0;
0019da  2000              MOVS     r0,#0
0019dc  49bf              LDR      r1,|L1.7388|
0019de  7008              STRB     r0,[r1,#0]
;;;1577   clear();							
0019e0  f7fffffe          BL       clear
;;;1578   send_GSM("\r\n AT+CMGD=1,4\r\n\r\n","OK","ERROR","ERROR:",tmeout);		
0019e4  489f              LDR      r0,|L1.7268|
0019e6  6800              LDR      r0,[r0,#0]  ; tmeout
0019e8  4b9f              LDR      r3,|L1.7272|
0019ea  4aa0              LDR      r2,|L1.7276|
0019ec  3a08              SUBS     r2,r2,#8
0019ee  a1bc              ADR      r1,|L1.7392|
0019f0  9000              STR      r0,[sp,#0]
0019f2  a0bc              ADR      r0,|L1.7396|
0019f4  f7fffffe          BL       send_GSM
;;;1579   delay(1000);					
0019f8  207d              MOVS     r0,#0x7d
0019fa  00c0              LSLS     r0,r0,#3
0019fc  f7fffffe          BL       delay
                  |L1.6656|
;;;1580   		}
;;;1581   		
;;;1582   }
001a00  b00f              ADD      sp,sp,#0x3c
001a02  bdf0              POP      {r4-r7,pc}
;;;1583   int count_char(char ch,char* string)
                          ENDP

                  GPS_COLLECT2 PROC
;;;1016   
;;;1017   int GPS_COLLECT2()
001a04  b5f0              PUSH     {r4-r7,lr}
;;;1018   {
001a06  b089              SUB      sp,sp,#0x24
;;;1019   char prev[8],latest[10];
;;;1020   		int iz;
;;;1021   		double a,b,c;int hh,mm1,mm2;
;;;1022   		double a1,b1,c1;
;;;1023   		double hh11, mm11,mm22;
;;;1024   
;;;1025   
;;;1026   //		strcat(data,imei);
;;;1027   //		strcat(data,", ");	
;;;1028   //		strcat(data,"$GxGGA");	
;;;1029   //		strcat(data,gga);
;;;1030   //		strcat(data,", $GxRMC");	
;;;1031   //		strcat(data,rmc);	
;;;1032   //		strcat(data,"\n");		
;;;1033   
;;;1034   //	return 0;
;;;1035   	
;;;1036   //get_imei();	
;;;1037   	
;;;1038   time52=15;	
001a08  200f              MOVS     r0,#0xf
001a0a  49bb              LDR      r1,|L1.7416|
001a0c  6008              STR      r0,[r1,#0]  ; time52
;;;1039   stateCount++; 
001a0e  48bb              LDR      r0,|L1.7420|
001a10  7800              LDRB     r0,[r0,#0]  ; stateCount
001a12  1c40              ADDS     r0,r0,#1
001a14  49b9              LDR      r1,|L1.7420|
001a16  7008              STRB     r0,[r1,#0]
;;;1040   if(stateCount>5){stateCount =0;}
001a18  4608              MOV      r0,r1
001a1a  7800              LDRB     r0,[r0,#0]  ; stateCount
001a1c  2805              CMP      r0,#5
001a1e  dd01              BLE      |L1.6692|
001a20  2000              MOVS     r0,#0
001a22  7008              STRB     r0,[r1,#0]
                  |L1.6692|
;;;1041   LED_state();
001a24  f7fffffe          BL       LED_state
;;;1042   
;;;1043   
;;;1044   
;;;1045   while(lpticks<int_erval);
001a28  bf00              NOP      
                  |L1.6698|
001a2a  48b5              LDR      r0,|L1.7424|
001a2c  6800              LDR      r0,[r0,#0]  ; lpticks
001a2e  49b5              LDR      r1,|L1.7428|
001a30  6809              LDR      r1,[r1,#0]  ; int_erval
001a32  4288              CMP      r0,r1
001a34  dbf9              BLT      |L1.6698|
;;;1046   get_gpsdata();
001a36  f7fffffe          BL       get_gpsdata
;;;1047   lpticks=0;
001a3a  2000              MOVS     r0,#0
001a3c  49b0              LDR      r1,|L1.7424|
001a3e  6008              STR      r0,[r1,#0]  ; lpticks
;;;1048   
;;;1049   
;;;1050   
;;;1051   		
;;;1052   		speed = stof(velocity);
001a40  48b1              LDR      r0,|L1.7432|
001a42  f7fffffe          BL       stof
001a46  49b1              LDR      r1,|L1.7436|
001a48  6008              STR      r0,[r1,#0]  ; speed
;;;1053   		c=stof(lati);//7523.7412
001a4a  48b1              LDR      r0,|L1.7440|
001a4c  f7fffffe          BL       stof
001a50  9003              STR      r0,[sp,#0xc]
001a52  f7fffffe          BL       __aeabi_f2d
001a56  4606              MOV      r6,r0
001a58  460f              MOV      r7,r1
;;;1054   		hh= c/100; //75
001a5a  2200              MOVS     r2,#0
001a5c  4bad              LDR      r3,|L1.7444|
001a5e  4630              MOV      r0,r6
001a60  4639              MOV      r1,r7
001a62  f7fffffe          BL       __aeabi_ddiv
001a66  9103              STR      r1,[sp,#0xc]
001a68  9002              STR      r0,[sp,#8]
001a6a  f7fffffe          BL       __aeabi_d2iz
001a6e  9008              STR      r0,[sp,#0x20]
;;;1055   		hh11 = c/100; //75.237412
001a70  2200              MOVS     r2,#0
001a72  4ba8              LDR      r3,|L1.7444|
001a74  4630              MOV      r0,r6
001a76  4639              MOV      r1,r7
001a78  f7fffffe          BL       __aeabi_ddiv
001a7c  9107              STR      r1,[sp,#0x1c]
001a7e  9006              STR      r0,[sp,#0x18]
;;;1056   		mm11 = hh11-hh; //.237412
001a80  9808              LDR      r0,[sp,#0x20]
001a82  f7fffffe          BL       __aeabi_i2d
001a86  9103              STR      r1,[sp,#0xc]
001a88  9002              STR      r0,[sp,#8]
001a8a  9b07              LDR      r3,[sp,#0x1c]
001a8c  9a06              LDR      r2,[sp,#0x18]
001a8e  f7fffffe          BL       __aeabi_drsub
001a92  4604              MOV      r4,r0
001a94  460d              MOV      r5,r1
;;;1057   		mm11*=100;
001a96  2200              MOVS     r2,#0
001a98  4b9e              LDR      r3,|L1.7444|
001a9a  4620              MOV      r0,r4
001a9c  4629              MOV      r1,r5
001a9e  f7fffffe          BL       __aeabi_dmul
001aa2  4604              MOV      r4,r0
001aa4  460d              MOV      r5,r1
;;;1058   		mm22=hh+mm11/60;	
001aa6  2200              MOVS     r2,#0
001aa8  4b9b              LDR      r3,|L1.7448|
001aaa  4620              MOV      r0,r4
001aac  4629              MOV      r1,r5
001aae  f7fffffe          BL       __aeabi_ddiv
001ab2  9103              STR      r1,[sp,#0xc]
001ab4  9002              STR      r0,[sp,#8]
001ab6  9808              LDR      r0,[sp,#0x20]
001ab8  f7fffffe          BL       __aeabi_i2d
001abc  9101              STR      r1,[sp,#4]
001abe  9000              STR      r0,[sp,#0]
001ac0  9b03              LDR      r3,[sp,#0xc]
001ac2  9a02              LDR      r2,[sp,#8]
001ac4  f7fffffe          BL       __aeabi_dadd
001ac8  9105              STR      r1,[sp,#0x14]
001aca  9004              STR      r0,[sp,#0x10]
;;;1059   		memset(lati,0,15);
001acc  210f              MOVS     r1,#0xf
001ace  4890              LDR      r0,|L1.7440|
001ad0  f7fffffe          BL       __aeabi_memclr4
;;;1060   		sprintf(lati,"%f",mm22);
001ad4  a191              ADR      r1,|L1.7452|
001ad6  488e              LDR      r0,|L1.7440|
001ad8  9b05              LDR      r3,[sp,#0x14]
001ada  9a04              LDR      r2,[sp,#0x10]
001adc  f7fffffe          BL       __2sprintf
;;;1061   		c=stof(longi);//7523.7412
001ae0  488f              LDR      r0,|L1.7456|
001ae2  f7fffffe          BL       stof
001ae6  9003              STR      r0,[sp,#0xc]
001ae8  f7fffffe          BL       __aeabi_f2d
001aec  4606              MOV      r6,r0
001aee  460f              MOV      r7,r1
;;;1062   		hh= c/100; //75
001af0  2200              MOVS     r2,#0
001af2  4b88              LDR      r3,|L1.7444|
001af4  4630              MOV      r0,r6
001af6  4639              MOV      r1,r7
001af8  f7fffffe          BL       __aeabi_ddiv
001afc  9103              STR      r1,[sp,#0xc]
001afe  9002              STR      r0,[sp,#8]
001b00  f7fffffe          BL       __aeabi_d2iz
001b04  9008              STR      r0,[sp,#0x20]
;;;1063   		hh11 = c/100; //75.237412
001b06  2200              MOVS     r2,#0
001b08  4b82              LDR      r3,|L1.7444|
001b0a  4630              MOV      r0,r6
001b0c  4639              MOV      r1,r7
001b0e  f7fffffe          BL       __aeabi_ddiv
001b12  9107              STR      r1,[sp,#0x1c]
001b14  9006              STR      r0,[sp,#0x18]
;;;1064   		mm11 = hh11-hh; //.237412
001b16  9808              LDR      r0,[sp,#0x20]
001b18  f7fffffe          BL       __aeabi_i2d
001b1c  9103              STR      r1,[sp,#0xc]
001b1e  9002              STR      r0,[sp,#8]
001b20  9b07              LDR      r3,[sp,#0x1c]
001b22  9a06              LDR      r2,[sp,#0x18]
001b24  f7fffffe          BL       __aeabi_drsub
001b28  4604              MOV      r4,r0
001b2a  460d              MOV      r5,r1
;;;1065   		mm11*=100;
001b2c  2200              MOVS     r2,#0
001b2e  4b79              LDR      r3,|L1.7444|
001b30  4620              MOV      r0,r4
001b32  4629              MOV      r1,r5
001b34  f7fffffe          BL       __aeabi_dmul
001b38  4604              MOV      r4,r0
001b3a  460d              MOV      r5,r1
;;;1066   		mm22=hh+mm11/60;	
001b3c  2200              MOVS     r2,#0
001b3e  4b76              LDR      r3,|L1.7448|
001b40  4620              MOV      r0,r4
001b42  4629              MOV      r1,r5
001b44  f7fffffe          BL       __aeabi_ddiv
001b48  9103              STR      r1,[sp,#0xc]
001b4a  9002              STR      r0,[sp,#8]
001b4c  9808              LDR      r0,[sp,#0x20]
001b4e  f7fffffe          BL       __aeabi_i2d
001b52  9101              STR      r1,[sp,#4]
001b54  9000              STR      r0,[sp,#0]
001b56  9b03              LDR      r3,[sp,#0xc]
001b58  9a02              LDR      r2,[sp,#8]
001b5a  f7fffffe          BL       __aeabi_dadd
001b5e  9105              STR      r1,[sp,#0x14]
001b60  9004              STR      r0,[sp,#0x10]
;;;1067   		memset(longi,0,15);
001b62  210f              MOVS     r1,#0xf
001b64  486e              LDR      r0,|L1.7456|
001b66  f7fffffe          BL       __aeabi_memclr4
;;;1068   		sprintf(longi,"%f",mm22);	
001b6a  a16c              ADR      r1,|L1.7452|
001b6c  486c              LDR      r0,|L1.7456|
001b6e  9b05              LDR      r3,[sp,#0x14]
001b70  9a04              LDR      r2,[sp,#0x10]
001b72  f7fffffe          BL       __2sprintf
;;;1069   
;;;1070   		//strcat(data,"\n");
;;;1071   		strcat(data,imei);
001b76  496b              LDR      r1,|L1.7460|
001b78  4843              LDR      r0,|L1.7304|
001b7a  f7fffffe          BL       strcat
;;;1072   		strcat(data,", ");	
001b7e  a16a              ADR      r1,|L1.7464|
001b80  4841              LDR      r0,|L1.7304|
001b82  f7fffffe          BL       strcat
;;;1073   		strcat(data,"$GxGGA");	
001b86  4969              LDR      r1,|L1.7468|
001b88  483f              LDR      r0,|L1.7304|
001b8a  f7fffffe          BL       strcat
;;;1074   		strcat(data,gga);
001b8e  4968              LDR      r1,|L1.7472|
001b90  483d              LDR      r0,|L1.7304|
001b92  f7fffffe          BL       strcat
;;;1075   		strcat(data,", $GxRMC");	
001b96  4965              LDR      r1,|L1.7468|
001b98  310c              ADDS     r1,r1,#0xc
001b9a  483b              LDR      r0,|L1.7304|
001b9c  f7fffffe          BL       strcat
;;;1076   		strcat(data,rmc);	
001ba0  4964              LDR      r1,|L1.7476|
001ba2  4839              LDR      r0,|L1.7304|
001ba4  f7fffffe          BL       strcat
;;;1077   
;;;1078   
;;;1079   
;;;1080   //if(speed<2)
;;;1081   //{
;;;1082   //	motion_samples++;
;;;1083   //}
;;;1084   //else
;;;1085   //{
;;;1086   //	motion_samples=0;
;;;1087   //}
;;;1088   }
001ba8  b009              ADD      sp,sp,#0x24
001baa  bdf0              POP      {r4-r7,pc}
;;;1089   
                          ENDP

                  tcp_initialization PROC
;;;1102   
;;;1103   int tcp_initialization()
001bac  b538              PUSH     {r3-r5,lr}
;;;1104   {char *cond; char * cond2;char * cond200;
;;;1105   get_imei();	
001bae  f7fffffe          BL       get_imei
;;;1106   msg_sim800(); 
001bb2  f7fffffe          BL       msg_sim800
;;;1107   //clear();
;;;1108   
;;;1109   	
;;;1110   	send_GSM("\r\nAT+CFUN=0\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",5);	
001bb6  2005              MOVS     r0,#5
001bb8  4b2c              LDR      r3,|L1.7276|
001bba  3b08              SUBS     r3,r3,#8
001bbc  4a2b              LDR      r2,|L1.7276|
001bbe  a148              ADR      r1,|L1.7392|
001bc0  9000              STR      r0,[sp,#0]
001bc2  a05d              ADR      r0,|L1.7480|
001bc4  f7fffffe          BL       send_GSM
;;;1111   	cond2=(strstr(uart_string_gsm, "OK"));
001bc8  a145              ADR      r1,|L1.7392|
001bca  482c              LDR      r0,|L1.7292|
001bcc  f7fffffe          BL       strstr
001bd0  4604              MOV      r4,r0
;;;1112   	cond200=(strstr(uart_string_gsm, "ERROR"));
001bd2  4926              LDR      r1,|L1.7276|
001bd4  3908              SUBS     r1,r1,#8
001bd6  4829              LDR      r0,|L1.7292|
001bd8  f7fffffe          BL       strstr
001bdc  4605              MOV      r5,r0
;;;1113   //if((!(cond2|| cond200 ))  && sleep_flag != 1)
;;;1114   //HardFault_Handler();
;;;1115   
;;;1116   delay(100);
001bde  2064              MOVS     r0,#0x64
001be0  f7fffffe          BL       delay
;;;1117   	
;;;1118   //get_imei();	
;;;1119   
;;;1120   send_GSM("\r\nAT+CFUN=1\r\n", "OK", "NOT INSERTED\r\nOK" , "ERROR", 4);	
001be4  2004              MOVS     r0,#4
001be6  4b21              LDR      r3,|L1.7276|
001be8  3b08              SUBS     r3,r3,#8
001bea  a257              ADR      r2,|L1.7496|
001bec  a13c              ADR      r1,|L1.7392|
001bee  9000              STR      r0,[sp,#0]
001bf0  a05a              ADR      r0,|L1.7516|
001bf2  f7fffffe          BL       send_GSM
;;;1121   //GPS_COLLECT();
;;;1122   //strcat(data,"CH\n");	
;;;1123   	
;;;1124   GPS_COLLECT2();
001bf6  f7fffffe          BL       GPS_COLLECT2
;;;1125   strcat(data,"CH\n");		
001bfa  a124              ADR      r1,|L1.7308|
001bfc  4822              LDR      r0,|L1.7304|
001bfe  f7fffffe          BL       strcat
;;;1126   
;;;1127   	
;;;1128   GPS_COLLECT2();
001c02  f7fffffe          BL       GPS_COLLECT2
;;;1129   strcat(data,"CH\n");	
001c06  a121              ADR      r1,|L1.7308|
001c08  481f              LDR      r0,|L1.7304|
001c0a  f7fffffe          BL       strcat
;;;1130   
;;;1131   
;;;1132   
;;;1133   GPS_COLLECT2();
001c0e  f7fffffe          BL       GPS_COLLECT2
;;;1134   strcat(data,"CH\n");	
001c12  a11e              ADR      r1,|L1.7308|
001c14  481c              LDR      r0,|L1.7304|
001c16  f7fffffe          BL       strcat
;;;1135   
;;;1136   	//send_GSM("\r\nAT+CIPSHUT\r\n", "SHUT OK\r\n", "ERROR\r\n" , "ERROR:",tmeout);	
;;;1137   
;;;1138   //msg_sim800(); 
;;;1139   
;;;1140   
;;;1141   	
;;;1142   send_GSM("\r\nAT+CIPSHUT\r\n", "OK", "ERROR\r\n" , "ERROR:",4);	
001c1a  2004              MOVS     r0,#4
001c1c  4b12              LDR      r3,|L1.7272|
001c1e  4a13              LDR      r2,|L1.7276|
001c20  a12f              ADR      r1,|L1.7392|
001c22  9000              STR      r0,[sp,#0]
001c24  a051              ADR      r0,|L1.7532|
001c26  f7fffffe          BL       send_GSM
;;;1143   GPS_COLLECT2();
001c2a  f7fffffe          BL       GPS_COLLECT2
;;;1144   strcat(data,"CH\n");	
001c2e  a117              ADR      r1,|L1.7308|
001c30  4815              LDR      r0,|L1.7304|
001c32  f7fffffe          BL       strcat
;;;1145   
;;;1146   						send_GSM("\r\nAT+CSTT=\"www\"\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);	
001c36  480b              LDR      r0,|L1.7268|
001c38  6800              LDR      r0,[r0,#0]  ; tmeout
001c3a  4b0b              LDR      r3,|L1.7272|
001c3c  4a0b              LDR      r2,|L1.7276|
001c3e  a128              ADR      r1,|L1.7392|
001c40  9000              STR      r0,[sp,#0]
001c42  a04e              ADR      r0,|L1.7548|
001c44  f7fffffe          BL       send_GSM
;;;1147   						//delay(20);
;;;1148   
;;;1149   msg_sim800(); 
001c48  f7fffffe          BL       msg_sim800
;;;1150   
;;;1151   						
;;;1152   						send_GSM("\r\nAT+CIICR\r\r\n", "OK", "ERROR\r\n" , "DEACT",5);		
001c4c  2005              MOVS     r0,#5
001c4e  a350              ADR      r3,|L1.7568|
001c50  4a06              LDR      r2,|L1.7276|
001c52  a123              ADR      r1,|L1.7392|
001c54  9000              STR      r0,[sp,#0]
001c56  a050              ADR      r0,|L1.7576|
001c58  f7fffffe          BL       send_GSM
;;;1153   
;;;1154   
;;;1155   
;;;1156   
;;;1157   GPS_COLLECT2();
001c5c  f7fffffe          BL       GPS_COLLECT2
;;;1158   strcat(data,"CH\n");	
001c60  a10a              ADR      r1,|L1.7308|
001c62  e0a1              B        |L1.7592|
                  |L1.7268|
                          DCD      tmeout
                  |L1.7272|
                          DCD      ||.text||+0x880
                  |L1.7276|
                          DCD      ||.text||+0x450
                  |L1.7280|
                          DCD      ||.text||+0x1774
                  |L1.7284|
                          DCD      at_
                  |L1.7288|
                          DCD      data2
                  |L1.7292|
                          DCD      uart_string_gsm
                  |L1.7296|
001c80  257300            DCB      "%s",0
001c83  00                DCB      0
                  |L1.7300|
001c84  0a00              DCB      "\n",0
001c86  00                DCB      0
001c87  00                DCB      0
                  |L1.7304|
                          DCD      data
                  |L1.7308|
001c8c  43480a00          DCB      "CH\n",0
                  |L1.7312|
                          DCD      0x400ff080
                  |L1.7316|
001c94  0a0a2041          DCB      "\n\n AT+CFUN=1,1\r\n",0
001c98  542b4346
001c9c  554e3d31
001ca0  2c310d0a
001ca4  00      
001ca5  00                DCB      0
001ca6  00                DCB      0
001ca7  00                DCB      0
                  |L1.7336|
                          DCD      ||ip||
                  |L1.7340|
                          DCD      port
                  |L1.7344|
001cb0  0d0d0a41          DCB      "\r\r\nAT+CMGD=1,4\r\n\n\n\n\n",0
001cb4  542b434d
001cb8  47443d31
001cbc  2c340d0a
001cc0  0a0a0a0a
001cc4  00      
001cc5  00                DCB      0
001cc6  00                DCB      0
001cc7  00                DCB      0
                  |L1.7368|
001cc8  0d0a2041          DCB      "\r\n AT+CMGD=1,4\r\n",0
001ccc  542b434d
001cd0  47443d31
001cd4  2c340d0a
001cd8  00      
001cd9  00                DCB      0
001cda  00                DCB      0
001cdb  00                DCB      0
                  |L1.7388|
                          DCD      ringflag
                  |L1.7392|
001ce0  4f4b00            DCB      "OK",0
001ce3  00                DCB      0
                  |L1.7396|
001ce4  0d0a2041          DCB      "\r\n AT+CMGD=1,4\r\n\r\n",0
001ce8  542b434d
001cec  47443d31
001cf0  2c340d0a
001cf4  0d0a00  
001cf7  00                DCB      0
                  |L1.7416|
                          DCD      time52
                  |L1.7420|
                          DCD      stateCount
                  |L1.7424|
                          DCD      lpticks
                  |L1.7428|
                          DCD      int_erval
                  |L1.7432|
                          DCD      velocity
                  |L1.7436|
                          DCD      speed
                  |L1.7440|
                          DCD      lati
                  |L1.7444|
                          DCD      0x40590000
                  |L1.7448|
                          DCD      0x404e0000
                  |L1.7452|
001d1c  256600            DCB      "%f",0
001d1f  00                DCB      0
                  |L1.7456|
                          DCD      longi
                  |L1.7460|
                          DCD      imei
                  |L1.7464|
001d28  2c2000            DCB      ", ",0
001d2b  00                DCB      0
                  |L1.7468|
                          DCD      ||.text||+0x11b4
                  |L1.7472|
                          DCD      gga
                  |L1.7476|
                          DCD      ||rmc||
                  |L1.7480|
001d38  0d0a4154          DCB      "\r\nAT+CFUN=0\r\r\n\n",0
001d3c  2b434655
001d40  4e3d300d
001d44  0d0a0a00
                  |L1.7496|
001d48  4e4f5420          DCB      "NOT INSERTED\r\nOK",0
001d4c  494e5345
001d50  52544544
001d54  0d0a4f4b
001d58  00      
001d59  00                DCB      0
001d5a  00                DCB      0
001d5b  00                DCB      0
                  |L1.7516|
001d5c  0d0a4154          DCB      "\r\nAT+CFUN=1\r\n",0
001d60  2b434655
001d64  4e3d310d
001d68  0a00    
001d6a  00                DCB      0
001d6b  00                DCB      0
                  |L1.7532|
001d6c  0d0a4154          DCB      "\r\nAT+CIPSHUT\r\n",0
001d70  2b434950
001d74  53485554
001d78  0d0a00  
001d7b  00                DCB      0
                  |L1.7548|
001d7c  0d0a4154          DCB      "\r\nAT+CSTT=""www""\r\n",0
001d80  2b435354
001d84  543d2277
001d88  7777220d
001d8c  0a00    
001d8e  00                DCB      0
001d8f  00                DCB      0
                  |L1.7568|
001d90  44454143          DCB      "DEACT",0
001d94  5400    
001d96  00                DCB      0
001d97  00                DCB      0
                  |L1.7576|
001d98  0d0a4154          DCB      "\r\nAT+CIICR\r\r\n",0
001d9c  2b434949
001da0  43520d0d
001da4  0a00    
001da6  00                DCB      0
001da7  00                DCB      0
                  |L1.7592|
001da8  48f4              LDR      r0,|L1.8572|
001daa  f7fffffe          BL       strcat
;;;1159   
;;;1160   
;;;1161   msg_sim800(); 
001dae  f7fffffe          BL       msg_sim800
;;;1162   	GPS_COLLECT2();
001db2  f7fffffe          BL       GPS_COLLECT2
;;;1163     strcat(data,"CH\n");	
001db6  49f2              LDR      r1,|L1.8576|
001db8  48f0              LDR      r0,|L1.8572|
001dba  f7fffffe          BL       strcat
;;;1164   						clear();send_modem("\nAT+CIFSR\r\r\n");clear();
001dbe  f7fffffe          BL       clear
001dc2  a0f0              ADR      r0,|L1.8580|
001dc4  f7fffffe          BL       send_modem
001dc8  f7fffffe          BL       clear
;;;1165   						delay(20);
001dcc  2014              MOVS     r0,#0x14
001dce  f7fffffe          BL       delay
;;;1166   
;;;1167   
;;;1168   msg_sim800(); 
001dd2  f7fffffe          BL       msg_sim800
;;;1169   
;;;1170   						sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
001dd6  4bef              LDR      r3,|L1.8596|
001dd8  4aef              LDR      r2,|L1.8600|
001dda  a1f0              ADR      r1,|L1.8604|
001ddc  48f7              LDR      r0,|L1.8636|
001dde  f7fffffe          BL       __2sprintf
;;;1171   						send_GSM( at_ , "CONNECT", "ERROR" , "ERROR:",tmeout);	
001de2  48f7              LDR      r0,|L1.8640|
001de4  6800              LDR      r0,[r0,#0]  ; tmeout
001de6  4bf7              LDR      r3,|L1.8644|
001de8  4af7              LDR      r2,|L1.8648|
001dea  a1f8              ADR      r1,|L1.8652|
001dec  9000              STR      r0,[sp,#0]
001dee  48f3              LDR      r0,|L1.8636|
001df0  f7fffffe          BL       send_GSM
;;;1172   						clear();
001df4  f7fffffe          BL       clear
;;;1173   						
;;;1174   						
;;;1175   						send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT FAIL",tmeout);		
001df8  48f1              LDR      r0,|L1.8640|
001dfa  6800              LDR      r0,[r0,#0]  ; tmeout
001dfc  a3f5              ADR      r3,|L1.8660|
001dfe  4af2              LDR      r2,|L1.8648|
001e00  a1f8              ADR      r1,|L1.8676|
001e02  9000              STR      r0,[sp,#0]
001e04  a0f8              ADR      r0,|L1.8680|
001e06  f7fffffe          BL       send_GSM
;;;1176   //GPS_COLLECT();
;;;1177   //strcat(data,"CH\n");	
;;;1178   
;;;1179   		
;;;1180   return 0;
001e0a  2000              MOVS     r0,#0
;;;1181   }
001e0c  bd38              POP      {r3-r5,pc}
;;;1182   
                          ENDP

                  remove_all_chars PROC
;;;100    
;;;101    void remove_all_chars(char* str, char c, char d) {
001e0e  b530              PUSH     {r4,r5,lr}
001e10  4603              MOV      r3,r0
001e12  460c              MOV      r4,r1
;;;102        char *pr = str, *pw = str;
001e14  4619              MOV      r1,r3
001e16  4618              MOV      r0,r3
;;;103        while (*pr) {
001e18  e015              B        |L1.7750|
                  |L1.7706|
;;;104            *pw = *pr++;
001e1a  780d              LDRB     r5,[r1,#0]
001e1c  7005              STRB     r5,[r0,#0]
001e1e  1c49              ADDS     r1,r1,#1
;;;105    			pw += (*pw != c && *pw != d && *pw != ' ' && *pw != '/' && *pw != ':');
001e20  7805              LDRB     r5,[r0,#0]
001e22  42a5              CMP      r5,r4
001e24  d00d              BEQ      |L1.7746|
001e26  7805              LDRB     r5,[r0,#0]
001e28  4295              CMP      r5,r2
001e2a  d00a              BEQ      |L1.7746|
001e2c  7805              LDRB     r5,[r0,#0]
001e2e  2d20              CMP      r5,#0x20
001e30  d007              BEQ      |L1.7746|
001e32  7805              LDRB     r5,[r0,#0]
001e34  2d2f              CMP      r5,#0x2f
001e36  d004              BEQ      |L1.7746|
001e38  7805              LDRB     r5,[r0,#0]
001e3a  2d3a              CMP      r5,#0x3a
001e3c  d001              BEQ      |L1.7746|
001e3e  2501              MOVS     r5,#1
001e40  e000              B        |L1.7748|
                  |L1.7746|
001e42  2500              MOVS     r5,#0
                  |L1.7748|
001e44  1828              ADDS     r0,r5,r0
                  |L1.7750|
001e46  780d              LDRB     r5,[r1,#0]            ;103
001e48  2d00              CMP      r5,#0                 ;103
001e4a  d1e6              BNE      |L1.7706|
;;;106        }
;;;107        *pw = '\0';
001e4c  7005              STRB     r5,[r0,#0]
;;;108    }
001e4e  bd30              POP      {r4,r5,pc}
;;;109    
                          ENDP

                  cursor_val PROC
;;;1601   
;;;1602   int cursor_val(char * stringsd, int cur){
001e50  b5f8              PUSH     {r3-r7,lr}
001e52  4605              MOV      r5,r0
001e54  460e              MOV      r6,r1
;;;1603   int curinc,curcounter=0,cur2;
001e56  2700              MOVS     r7,#0
;;;1604   for(curinc=0;curinc<strlen(stringsd);curinc++){
001e58  2400              MOVS     r4,#0
001e5a  e007              B        |L1.7788|
                  |L1.7772|
;;;1605   		
;;;1606   		if(stringsd[curinc] == '\n'     &&    curcounter < cur   ){ //&& curcounter<=cur	){
001e5c  5d28              LDRB     r0,[r5,r4]
001e5e  280a              CMP      r0,#0xa
001e60  d103              BNE      |L1.7786|
001e62  42b7              CMP      r7,r6
001e64  da01              BGE      |L1.7786|
;;;1607   			++curcounter;     cur2=curinc;
001e66  1c7f              ADDS     r7,r7,#1
001e68  9400              STR      r4,[sp,#0]
                  |L1.7786|
001e6a  1c64              ADDS     r4,r4,#1              ;1604
                  |L1.7788|
001e6c  4628              MOV      r0,r5                 ;1604
001e6e  f7fffffe          BL       strlen
001e72  42a0              CMP      r0,r4                 ;1604
001e74  d8f2              BHI      |L1.7772|
;;;1608   		}
;;;1609   
;;;1610   		
;;;1611   
;;;1612   }
;;;1613   	
;;;1614   	
;;;1615   	return cur2;
001e76  9800              LDR      r0,[sp,#0]
;;;1616   
;;;1617   }
001e78  bdf8              POP      {r3-r7,pc}
;;;1618   
                          ENDP

                  count_char PROC
;;;1582   }
;;;1583   int count_char(char ch,char* string)
001e7a  b5f8              PUSH     {r3-r7,lr}
;;;1584   {
001e7c  4606              MOV      r6,r0
001e7e  460c              MOV      r4,r1
;;;1585   int ass;int count=0;
001e80  2700              MOVS     r7,#0
;;;1586   	//remove_all_chars(string,'\0','\0');
;;;1587   //	ass=strlen(string);
;;;1588   	for(ass=0;ass<strlen(string);ass++)
001e82  2500              MOVS     r5,#0
001e84  e004              B        |L1.7824|
                  |L1.7814|
;;;1589   	{
;;;1590   		if(string[ass] == ch)
001e86  5d60              LDRB     r0,[r4,r5]
001e88  42b0              CMP      r0,r6
001e8a  d100              BNE      |L1.7822|
;;;1591   		{count++;}
001e8c  1c7f              ADDS     r7,r7,#1
                  |L1.7822|
001e8e  1c6d              ADDS     r5,r5,#1              ;1588
                  |L1.7824|
001e90  4620              MOV      r0,r4                 ;1588
001e92  f7fffffe          BL       strlen
001e96  42a8              CMP      r0,r5                 ;1588
001e98  d8f5              BHI      |L1.7814|
;;;1592   		
;;;1593   	}
;;;1594   return count;
001e9a  4638              MOV      r0,r7
;;;1595   }
001e9c  bdf8              POP      {r3-r7,pc}
;;;1596   
                          ENDP

                  send_chunk PROC
;;;1619   
;;;1620   void send_chunk(){
001e9e  b5f0              PUSH     {r4-r7,lr}
001ea0  b08d              SUB      sp,sp,#0x34
;;;1621   float fsz;
;;;1622   int times,qwe,timeout,k5,enters,cursorvaluepr=0,cursorvaluene=0;
001ea2  2000              MOVS     r0,#0
001ea4  900a              STR      r0,[sp,#0x28]
001ea6  9009              STR      r0,[sp,#0x24]
;;;1623   char cond;char*q1;char* q2;char* q3;char *q4;
;;;1624   int notsentflag=0,cntendl=0;
001ea8  9004              STR      r0,[sp,#0x10]
001eaa  9003              STR      r0,[sp,#0xc]
;;;1625   times=-2;	
001eac  1e80              SUBS     r0,r0,#2
001eae  900b              STR      r0,[sp,#0x2c]
;;;1626   	
;;;1627   memset(at_,0,100);
001eb0  2164              MOVS     r1,#0x64
001eb2  48c2              LDR      r0,|L1.8636|
001eb4  f7fffffe          BL       __aeabi_memclr4
;;;1628   sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
001eb8  4acf              LDR      r2,|L1.8696|
001eba  a1d0              ADR      r1,|L1.8700|
001ebc  48bf              LDR      r0,|L1.8636|
001ebe  f7fffffe          BL       __2sprintf
;;;1629   send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
001ec2  48bf              LDR      r0,|L1.8640|
001ec4  6800              LDR      r0,[r0,#0]  ; tmeout
001ec6  4bbf              LDR      r3,|L1.8644|
001ec8  4abf              LDR      r2,|L1.8648|
001eca  3208              ADDS     r2,r2,#8
001ecc  a1d2              ADR      r1,|L1.8728|
001ece  9000              STR      r0,[sp,#0]
001ed0  48ba              LDR      r0,|L1.8636|
001ed2  f7fffffe          BL       send_GSM
;;;1630   parse_g(uart_string_gsm, 1,3, ' ', '\r', fsize);
001ed6  48d1              LDR      r0,|L1.8732|
001ed8  210d              MOVS     r1,#0xd
001eda  2320              MOVS     r3,#0x20
001edc  2203              MOVS     r2,#3
001ede  9100              STR      r1,[sp,#0]
001ee0  9001              STR      r0,[sp,#4]
001ee2  2101              MOVS     r1,#1
001ee4  48ce              LDR      r0,|L1.8736|
001ee6  f7fffffe          BL       parse_g
;;;1631   fsz=stof(fsize);//7523.7412	              //1400 is the maximum imit  //200 is the maximum size of 1 data	
001eea  48cc              LDR      r0,|L1.8732|
001eec  f7fffffe          BL       stof
001ef0  900c              STR      r0,[sp,#0x30]
;;;1632   //reading buffer of SD data = 1400 // need to concatinate maximum amount of data in it and a 200 character data
;;;1633   if(fsz==0)k5=9999999;
001ef2  2100              MOVS     r1,#0
001ef4  980c              LDR      r0,[sp,#0x30]
001ef6  f7fffffe          BL       __aeabi_cfcmpeq
001efa  d101              BNE      |L1.7936|
001efc  4cc9              LDR      r4,|L1.8740|
001efe  e000              B        |L1.7938|
                  |L1.7936|
;;;1634   else k5=0;	
001f00  2400              MOVS     r4,#0
                  |L1.7938|
;;;1635   times =	(fsz/1100) + 1;
001f02  49c9              LDR      r1,|L1.8744|
001f04  980c              LDR      r0,[sp,#0x30]
001f06  f7fffffe          BL       __aeabi_fdiv
001f0a  217f              MOVS     r1,#0x7f
001f0c  05c9              LSLS     r1,r1,#23
001f0e  9001              STR      r0,[sp,#4]
001f10  f7fffffe          BL       __aeabi_fadd
001f14  9002              STR      r0,[sp,#8]
001f16  f7fffffe          BL       __aeabi_f2iz
001f1a  900b              STR      r0,[sp,#0x2c]
;;;1636   cursorvaluepr=0;
001f1c  2000              MOVS     r0,#0
001f1e  900a              STR      r0,[sp,#0x28]
;;;1637   	
;;;1638   for(k5;k5<=(times);){
001f20  e29d              B        |L1.9310|
                  |L1.7970|
;;;1639   	
;;;1640   	get_imei();
001f22  f7fffffe          BL       get_imei
;;;1641   memset(data,0,strlen(data));	
001f26  4895              LDR      r0,|L1.8572|
001f28  f7fffffe          BL       strlen
001f2c  4601              MOV      r1,r0
001f2e  9002              STR      r0,[sp,#8]
001f30  4892              LDR      r0,|L1.8572|
001f32  f7fffffe          BL       __aeabi_memclr4
;;;1642   GPS_COLLECT();
001f36  f7fffffe          BL       GPS_COLLECT
;;;1643   strcat(data,"\n");	
001f3a  a1b6              ADR      r1,|L1.8724|
001f3c  488f              LDR      r0,|L1.8572|
001f3e  f7fffffe          BL       strcat
;;;1644   	
;;;1645   	
;;;1646   	memset(at_,0,100);
001f42  2164              MOVS     r1,#0x64
001f44  489d              LDR      r0,|L1.8636|
001f46  f7fffffe          BL       __aeabi_memclr4
;;;1647   	sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
001f4a  4aab              LDR      r2,|L1.8696|
001f4c  a1ab              ADR      r1,|L1.8700|
001f4e  489b              LDR      r0,|L1.8636|
001f50  f7fffffe          BL       __2sprintf
;;;1648   	send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
001f54  489a              LDR      r0,|L1.8640|
001f56  6800              LDR      r0,[r0,#0]  ; tmeout
001f58  4b9a              LDR      r3,|L1.8644|
001f5a  4a9b              LDR      r2,|L1.8648|
001f5c  3208              ADDS     r2,r2,#8
001f5e  a1ae              ADR      r1,|L1.8728|
001f60  9000              STR      r0,[sp,#0]
001f62  4896              LDR      r0,|L1.8636|
001f64  f7fffffe          BL       send_GSM
;;;1649   	parse_g(uart_string_gsm, 1,3, ' ', '\r', fsize);
001f68  48ac              LDR      r0,|L1.8732|
001f6a  210d              MOVS     r1,#0xd
001f6c  2320              MOVS     r3,#0x20
001f6e  2203              MOVS     r2,#3
001f70  9100              STR      r1,[sp,#0]
001f72  9001              STR      r0,[sp,#4]
001f74  2101              MOVS     r1,#1
001f76  48aa              LDR      r0,|L1.8736|
001f78  f7fffffe          BL       parse_g
;;;1650   	fsz=stof(fsize);//7523.7412	              //1400 is the maximum imit  //200 is the maximum size of 1 data	
001f7c  48a7              LDR      r0,|L1.8732|
001f7e  f7fffffe          BL       stof
001f82  900c              STR      r0,[sp,#0x30]
;;;1651   	//reading buffer of SD data = 1400 // need to concatinate maximum amount of data in it and a 200 character data
;;;1652   	times =	(fsz/1100) + 2;	
001f84  49a8              LDR      r1,|L1.8744|
001f86  980c              LDR      r0,[sp,#0x30]
001f88  f7fffffe          BL       __aeabi_fdiv
001f8c  2101              MOVS     r1,#1
001f8e  0789              LSLS     r1,r1,#30
001f90  9001              STR      r0,[sp,#4]
001f92  f7fffffe          BL       __aeabi_fadd
001f96  9002              STR      r0,[sp,#8]
001f98  f7fffffe          BL       __aeabi_f2iz
001f9c  900b              STR      r0,[sp,#0x2c]
;;;1653   	
;;;1654   		sprintf(at_, "\nAT+FSREAD=%s\\LOG.TXT,1,1100,%d\r\n",drive,cursorvaluepr );		//1256
001f9e  4a96              LDR      r2,|L1.8696|
001fa0  a1a2              ADR      r1,|L1.8748|
001fa2  4886              LDR      r0,|L1.8636|
001fa4  9b0a              LDR      r3,[sp,#0x28]
001fa6  f7fffffe          BL       __2sprintf
;;;1655   		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",5);
001faa  2005              MOVS     r0,#5
001fac  4b85              LDR      r3,|L1.8644|
001fae  4a86              LDR      r2,|L1.8648|
001fb0  3208              ADDS     r2,r2,#8
001fb2  a199              ADR      r1,|L1.8728|
001fb4  9000              STR      r0,[sp,#0]
001fb6  4881              LDR      r0,|L1.8636|
001fb8  f7fffffe          BL       send_GSM
;;;1656   		cntendl=count_char('\n',uart_string_gsm);
001fbc  4998              LDR      r1,|L1.8736|
001fbe  200a              MOVS     r0,#0xa
001fc0  f7fffffe          BL       count_char
001fc4  9003              STR      r0,[sp,#0xc]
;;;1657      //if(cntendl!=0)
;;;1658   		enters = cntendl;		
001fc6  9e03              LDR      r6,[sp,#0xc]
;;;1659   		memset(sd_data,0,1400);
001fc8  21af              MOVS     r1,#0xaf
001fca  00c9              LSLS     r1,r1,#3
001fcc  48a0              LDR      r0,|L1.8784|
001fce  f7fffffe          BL       __aeabi_memclr4
;;;1660   		parse_g(uart_string_gsm, 1,enters-2, '\n', '\n' ,sd_data);	
001fd2  489f              LDR      r0,|L1.8784|
001fd4  210a              MOVS     r1,#0xa
001fd6  1eb2              SUBS     r2,r6,#2
001fd8  460b              MOV      r3,r1
001fda  9100              STR      r1,[sp,#0]
001fdc  9001              STR      r0,[sp,#4]
001fde  2101              MOVS     r1,#1
001fe0  488f              LDR      r0,|L1.8736|
001fe2  f7fffffe          BL       parse_g
;;;1661   		strcat(sd_data,"\n");
001fe6  a18b              ADR      r1,|L1.8724|
001fe8  4899              LDR      r0,|L1.8784|
001fea  f7fffffe          BL       strcat
;;;1662   		strcat(sd_data,data);
001fee  4963              LDR      r1,|L1.8572|
001ff0  4897              LDR      r0,|L1.8784|
001ff2  f7fffffe          BL       strcat
;;;1663   //		memset(at_,0,100);	
;;;1664   
;;;1665   		
;;;1666   
;;;1667   //		memset(at_,0,100);
;;;1668   //		sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
;;;1669   //		send_GSM(at_, "OK", "ERROR" , "ERROR:",tmeout);
;;;1670   //		parse_g(uart_string_gsm, 1,6, ' ', '\r', fsize);
;;;1671   //		fsz=stof(fsize);//7523.7412
;;;1672   //		times=(fsz/1256)+1;  //1256 //1400
;;;1673   //		if(fsz == 0)times=0;				
;;;1674   		qwe=strlen(uart_string_gsm);
001ff6  488a              LDR      r0,|L1.8736|
001ff8  f7fffffe          BL       strlen
001ffc  4605              MOV      r5,r0
;;;1675   		memset(uart_string_gsm,0,qwe);
001ffe  4629              MOV      r1,r5
002000  4887              LDR      r0,|L1.8736|
002002  f7fffffe          BL       __aeabi_memclr4
;;;1676   		
;;;1677   							send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT",tmeout);	
002006  486e              LDR      r0,|L1.8640|
002008  6800              LDR      r0,[r0,#0]  ; tmeout
00200a  a370              ADR      r3,|L1.8652|
00200c  4a6e              LDR      r2,|L1.8648|
00200e  a175              ADR      r1,|L1.8676|
002010  9000              STR      r0,[sp,#0]
002012  a075              ADR      r0,|L1.8680|
002014  f7fffffe          BL       send_GSM
;;;1678   								cond =mystrstr(uart_string_gsm,'>');
002018  213e              MOVS     r1,#0x3e
00201a  4881              LDR      r0,|L1.8736|
00201c  f7fffffe          BL       mystrstr
002020  9008              STR      r0,[sp,#0x20]
;;;1679   									if(cond)	
002022  9808              LDR      r0,[sp,#0x20]
002024  2800              CMP      r0,#0
002026  d079              BEQ      |L1.8476|
;;;1680   									{	
;;;1681   									clear();
002028  f7fffffe          BL       clear
;;;1682   									memset(uart_string_gsm,0,5000);
00202c  4989              LDR      r1,|L1.8788|
00202e  487c              LDR      r0,|L1.8736|
002030  f7fffffe          BL       __aeabi_memclr4
;;;1683   									qwe=strlen(sd_data);
002034  4886              LDR      r0,|L1.8784|
002036  f7fffffe          BL       strlen
00203a  4605              MOV      r5,r0
;;;1684   									tout=0;
00203c  2000              MOVS     r0,#0
00203e  4986              LDR      r1,|L1.8792|
002040  6008              STR      r0,[r1,#0]  ; tout
;;;1685   									k2=0;
002042  4986              LDR      r1,|L1.8796|
002044  6008              STR      r0,[r1,#0]  ; k2
;;;1686   									for(k=0;k<(qwe);k++)
002046  4986              LDR      r1,|L1.8800|
002048  6008              STR      r0,[r1,#0]  ; k
00204a  e00b              B        |L1.8292|
                  |L1.8268|
;;;1687   									{
;;;1688   										uart_putchar(UART1_BASE_PTR, sd_data[k]);
00204c  4880              LDR      r0,|L1.8784|
00204e  4a84              LDR      r2,|L1.8800|
002050  6812              LDR      r2,[r2,#0]  ; k
002052  5c81              LDRB     r1,[r0,r2]
002054  4883              LDR      r0,|L1.8804|
002056  f7fffffe          BL       uart_putchar
00205a  4881              LDR      r0,|L1.8800|
00205c  6800              LDR      r0,[r0,#0]            ;1686  ; k
00205e  1c40              ADDS     r0,r0,#1              ;1686
002060  497f              LDR      r1,|L1.8800|
002062  6008              STR      r0,[r1,#0]            ;1686  ; k
                  |L1.8292|
002064  487e              LDR      r0,|L1.8800|
002066  6800              LDR      r0,[r0,#0]            ;1686  ; k
002068  42a8              CMP      r0,r5                 ;1686
00206a  dbef              BLT      |L1.8268|
;;;1689   									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
00206c  211a              MOVS     r1,#0x1a
00206e  487d              LDR      r0,|L1.8804|
002070  f7fffffe          BL       uart_putchar
002074  211a              MOVS     r1,#0x1a
002076  487b              LDR      r0,|L1.8804|
002078  f7fffffe          BL       uart_putchar
;;;1690   									do
00207c  bf00              NOP      
                  |L1.8318|
;;;1691   																{q1=strstr(uart_string_gsm,"SEND OK");
00207e  a17a              ADR      r1,|L1.8808|
002080  4867              LDR      r0,|L1.8736|
002082  f7fffffe          BL       strstr
002086  4607              MOV      r7,r0
;;;1692   																	q2=strstr(uart_string_gsm, "ERROR");
002088  494f              LDR      r1,|L1.8648|
00208a  4865              LDR      r0,|L1.8736|
00208c  f7fffffe          BL       strstr
002090  9007              STR      r0,[sp,#0x1c]
;;;1693   																		q3=strstr(uart_string_gsm, "FAIL");	
002092  a152              ADR      r1,|L1.8668|
002094  4862              LDR      r0,|L1.8736|
002096  f7fffffe          BL       strstr
00209a  9006              STR      r0,[sp,#0x18]
;;;1694   																			q4=strstr(uart_string_gsm, "DEACT");	
00209c  4974              LDR      r1,|L1.8816|
00209e  4860              LDR      r0,|L1.8736|
0020a0  f7fffffe          BL       strstr
0020a4  9005              STR      r0,[sp,#0x14]
;;;1695   																	
;;;1696   																}while(!(q1 || q2 || q3 || q4 || (tout > 5) ) ); //|| (timeout < 1)   
0020a6  2f00              CMP      r7,#0
0020a8  d10c              BNE      |L1.8388|
0020aa  9807              LDR      r0,[sp,#0x1c]
0020ac  2800              CMP      r0,#0
0020ae  d109              BNE      |L1.8388|
0020b0  9806              LDR      r0,[sp,#0x18]
0020b2  2800              CMP      r0,#0
0020b4  d106              BNE      |L1.8388|
0020b6  9805              LDR      r0,[sp,#0x14]
0020b8  2800              CMP      r0,#0
0020ba  d103              BNE      |L1.8388|
0020bc  4866              LDR      r0,|L1.8792|
0020be  6800              LDR      r0,[r0,#0]  ; tout
0020c0  2805              CMP      r0,#5
0020c2  dddc              BLE      |L1.8318|
                  |L1.8388|
;;;1697   																delay(10);clear();
0020c4  200a              MOVS     r0,#0xa
0020c6  f7fffffe          BL       delay
0020ca  f7fffffe          BL       clear
;;;1698   														uart_putchar(UART1_BASE_PTR,0x1A);
0020ce  211a              MOVS     r1,#0x1a
0020d0  4864              LDR      r0,|L1.8804|
0020d2  f7fffffe          BL       uart_putchar
;;;1699   												delay(10);
0020d6  200a              MOVS     r0,#0xa
0020d8  f7fffffe          BL       delay
;;;1700   										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
0020dc  211a              MOVS     r1,#0x1a
0020de  4861              LDR      r0,|L1.8804|
0020e0  f7fffffe          BL       uart_putchar
0020e4  211a              MOVS     r1,#0x1a
0020e6  485f              LDR      r0,|L1.8804|
0020e8  f7fffffe          BL       uart_putchar
0020ec  211a              MOVS     r1,#0x1a
0020ee  485d              LDR      r0,|L1.8804|
0020f0  f7fffffe          BL       uart_putchar
;;;1701   delay(50);
0020f4  2032              MOVS     r0,#0x32
0020f6  f7fffffe          BL       delay
;;;1702   if(strstr(uart_string_gsm,"SEND OK"))
0020fa  a15b              ADR      r1,|L1.8808|
0020fc  4848              LDR      r0,|L1.8736|
0020fe  f7fffffe          BL       strstr
002102  2800              CMP      r0,#0
002104  d00b              BEQ      |L1.8478|
;;;1703   {
;;;1704   cursorvaluene=cursor_val(sd_data,enters-3);
002106  1ef1              SUBS     r1,r6,#3
002108  4851              LDR      r0,|L1.8784|
00210a  f7fffffe          BL       cursor_val
00210e  9009              STR      r0,[sp,#0x24]
;;;1705   cursorvaluepr+=cursorvaluene;
002110  9909              LDR      r1,[sp,#0x24]
002112  980a              LDR      r0,[sp,#0x28]
002114  1840              ADDS     r0,r0,r1
002116  900a              STR      r0,[sp,#0x28]
;;;1706   k5++;
002118  1c64              ADDS     r4,r4,#1
00211a  e1a0              B        |L1.9310|
                  |L1.8476|
00211c  e10e              B        |L1.9020|
                  |L1.8478|
;;;1707   }
;;;1708   else{remove_all_chars(data, '\n', '\n');
00211e  220a              MOVS     r2,#0xa
002120  4611              MOV      r1,r2
002122  4816              LDR      r0,|L1.8572|
002124  f7fffffe          BL       remove_all_chars
;;;1709   			strcat(data,"CH\n");	log_it();
002128  4915              LDR      r1,|L1.8576|
00212a  4814              LDR      r0,|L1.8572|
00212c  f7fffffe          BL       strcat
002130  f7fffffe          BL       log_it
;;;1710   
;;;1711   			memset(data,0,strlen(data));
002134  4811              LDR      r0,|L1.8572|
002136  f7fffffe          BL       strlen
00213a  4601              MOV      r1,r0
00213c  9002              STR      r0,[sp,#8]
00213e  480f              LDR      r0,|L1.8572|
002140  f7fffffe          BL       __aeabi_memclr4
;;;1712   			tcp_initialization();
002144  f7fffffe          BL       tcp_initialization
;;;1713   			if(mystrstr(uart_string_gsm,'>')){
002148  213e              MOVS     r1,#0x3e
00214a  4835              LDR      r0,|L1.8736|
00214c  f7fffffe          BL       mystrstr
002150  2800              CMP      r0,#0
002152  d011              BEQ      |L1.8568|
;;;1714   									clear();
002154  f7fffffe          BL       clear
;;;1715   									memset(uart_string_gsm,0,5000);
002158  493e              LDR      r1,|L1.8788|
00215a  4831              LDR      r0,|L1.8736|
00215c  f7fffffe          BL       __aeabi_memclr4
;;;1716   									qwe=strlen(data);
002160  4806              LDR      r0,|L1.8572|
002162  f7fffffe          BL       strlen
002166  4605              MOV      r5,r0
;;;1717   									tout=0;
002168  2000              MOVS     r0,#0
00216a  493b              LDR      r1,|L1.8792|
00216c  6008              STR      r0,[r1,#0]  ; tout
;;;1718   									k2=0;
00216e  493b              LDR      r1,|L1.8796|
002170  6008              STR      r0,[r1,#0]  ; k2
;;;1719   									for(k=0;k<(qwe);k++)
002172  493b              LDR      r1,|L1.8800|
002174  6008              STR      r0,[r1,#0]  ; k
002176  e089              B        |L1.8844|
                  |L1.8568|
002178  e0dd              B        |L1.9014|
00217a  0000              DCW      0x0000
                  |L1.8572|
                          DCD      data
                  |L1.8576|
                          DCD      ||.text||+0x1c8c
                  |L1.8580|
002184  0a41542b          DCB      "\nAT+CIFSR\r\r\n",0
002188  43494653
00218c  520d0d0a
002190  00      
002191  00                DCB      0
002192  00                DCB      0
002193  00                DCB      0
                  |L1.8596|
                          DCD      port
                  |L1.8600|
                          DCD      ||ip||
                  |L1.8604|
00219c  0d0a4154          DCB      "\r\nAT+CIPSTART=""TCP"",""%s"",""%s""\r\n",0
0021a0  2b434950
0021a4  53544152
0021a8  543d2254
0021ac  4350222c
0021b0  22257322
0021b4  2c222573
0021b8  220d0a00
                  |L1.8636|
                          DCD      at_
                  |L1.8640|
                          DCD      tmeout
                  |L1.8644|
                          DCD      ||.text||+0x880
                  |L1.8648|
                          DCD      ||.text||+0x448
                  |L1.8652|
0021cc  434f4e4e          DCB      "CONNECT",0
0021d0  45435400
                  |L1.8660|
0021d4  434f4e4e          DCB      "CONNECT "
0021d8  45435420
                  |L1.8668|
0021dc  4641494c          DCB      "FAIL",0
0021e0  00      
0021e1  00                DCB      0
0021e2  00                DCB      0
0021e3  00                DCB      0
                  |L1.8676|
0021e4  3e00              DCB      ">",0
0021e6  00                DCB      0
0021e7  00                DCB      0
                  |L1.8680|
0021e8  0d0a4154          DCB      "\r\nAT+CIPSEND\r\n",0
0021ec  2b434950
0021f0  53454e44
0021f4  0d0a00  
0021f7  00                DCB      0
                  |L1.8696|
                          DCD      drive
                  |L1.8700|
0021fc  0a41542b          DCB      "\nAT+FSFLSIZE=%s\\LOG.TXT\r"
002200  4653464c
002204  53495a45
002208  3d25735c
00220c  4c4f472e
002210  5458540d
                  |L1.8724|
002214  0a00              DCB      "\n",0
002216  00                DCB      0
002217  00                DCB      0
                  |L1.8728|
002218  4f4b00            DCB      "OK",0
00221b  00                DCB      0
                  |L1.8732|
                          DCD      fsize
                  |L1.8736|
                          DCD      uart_string_gsm
                  |L1.8740|
                          DCD      0x0098967f
                  |L1.8744|
                          DCD      0x44898000
                  |L1.8748|
00222c  0a41542b          DCB      "\nAT+FSREAD=%s\\LOG.TXT,1,1100,%d\r\n",0
002230  46535245
002234  41443d25
002238  735c4c4f
00223c  472e5458
002240  542c312c
002244  31313030
002248  2c25640d
00224c  0a00    
00224e  00                DCB      0
00224f  00                DCB      0
                  |L1.8784|
                          DCD      sd_data
                  |L1.8788|
                          DCD      0x00001388
                  |L1.8792|
                          DCD      tout
                  |L1.8796|
                          DCD      ||k2||
                  |L1.8800|
                          DCD      k
                  |L1.8804|
                          DCD      0x4006b000
                  |L1.8808|
002268  53454e44          DCB      "SEND OK",0
00226c  204f4b00
                  |L1.8816|
                          DCD      ||.text||+0x1d90
                  |L1.8820|
;;;1720   									{
;;;1721   										uart_putchar(UART1_BASE_PTR, data[k]);
002274  48fd              LDR      r0,|L1.9836|
002276  4afe              LDR      r2,|L1.9840|
002278  6812              LDR      r2,[r2,#0]  ; k
00227a  5c81              LDRB     r1,[r0,r2]
00227c  48fd              LDR      r0,|L1.9844|
00227e  f7fffffe          BL       uart_putchar
002282  48fb              LDR      r0,|L1.9840|
002284  6800              LDR      r0,[r0,#0]            ;1719  ; k
002286  1c40              ADDS     r0,r0,#1              ;1719
002288  49f9              LDR      r1,|L1.9840|
00228a  6008              STR      r0,[r1,#0]            ;1719  ; k
                  |L1.8844|
00228c  48f8              LDR      r0,|L1.9840|
00228e  6800              LDR      r0,[r0,#0]            ;1719  ; k
002290  42a8              CMP      r0,r5                 ;1719
002292  dbef              BLT      |L1.8820|
;;;1722   									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);	
002294  211a              MOVS     r1,#0x1a
002296  48f7              LDR      r0,|L1.9844|
002298  f7fffffe          BL       uart_putchar
00229c  211a              MOVS     r1,#0x1a
00229e  48f5              LDR      r0,|L1.9844|
0022a0  f7fffffe          BL       uart_putchar
;;;1723   															do
0022a4  bf00              NOP      
                  |L1.8870|
;;;1724   																{q1=strstr(uart_string_gsm,"SEND OK");
0022a6  49f4              LDR      r1,|L1.9848|
0022a8  48f4              LDR      r0,|L1.9852|
0022aa  f7fffffe          BL       strstr
0022ae  4607              MOV      r7,r0
;;;1725   																	q2=strstr(uart_string_gsm, "ERROR");
0022b0  49f3              LDR      r1,|L1.9856|
0022b2  48f2              LDR      r0,|L1.9852|
0022b4  f7fffffe          BL       strstr
0022b8  9007              STR      r0,[sp,#0x1c]
;;;1726   																		q3=strstr(uart_string_gsm, "FAIL");	
0022ba  49ef              LDR      r1,|L1.9848|
0022bc  398c              SUBS     r1,r1,#0x8c
0022be  48ef              LDR      r0,|L1.9852|
0022c0  f7fffffe          BL       strstr
0022c4  9006              STR      r0,[sp,#0x18]
;;;1727   																			q4=strstr(uart_string_gsm, "DEACT");	
0022c6  49ef              LDR      r1,|L1.9860|
0022c8  48ec              LDR      r0,|L1.9852|
0022ca  f7fffffe          BL       strstr
0022ce  9005              STR      r0,[sp,#0x14]
;;;1728   																	
;;;1729   																}while(!(q1 || q2 || q3 || q4 || (tout > 5) ) );
0022d0  2f00              CMP      r7,#0
0022d2  d10c              BNE      |L1.8942|
0022d4  9807              LDR      r0,[sp,#0x1c]
0022d6  2800              CMP      r0,#0
0022d8  d109              BNE      |L1.8942|
0022da  9806              LDR      r0,[sp,#0x18]
0022dc  2800              CMP      r0,#0
0022de  d106              BNE      |L1.8942|
0022e0  9805              LDR      r0,[sp,#0x14]
0022e2  2800              CMP      r0,#0
0022e4  d103              BNE      |L1.8942|
0022e6  48e8              LDR      r0,|L1.9864|
0022e8  6800              LDR      r0,[r0,#0]  ; tout
0022ea  2805              CMP      r0,#5
0022ec  dddb              BLE      |L1.8870|
                  |L1.8942|
;;;1730   															
;;;1731   																			delay(10);clear();
0022ee  200a              MOVS     r0,#0xa
0022f0  f7fffffe          BL       delay
0022f4  f7fffffe          BL       clear
;;;1732   														uart_putchar(UART1_BASE_PTR,0x1A);
0022f8  211a              MOVS     r1,#0x1a
0022fa  48de              LDR      r0,|L1.9844|
0022fc  f7fffffe          BL       uart_putchar
;;;1733   												delay(10);
002300  200a              MOVS     r0,#0xa
002302  f7fffffe          BL       delay
;;;1734   										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002306  211a              MOVS     r1,#0x1a
002308  48da              LDR      r0,|L1.9844|
00230a  f7fffffe          BL       uart_putchar
00230e  211a              MOVS     r1,#0x1a
002310  48d8              LDR      r0,|L1.9844|
002312  f7fffffe          BL       uart_putchar
002316  211a              MOVS     r1,#0x1a
002318  48d6              LDR      r0,|L1.9844|
00231a  f7fffffe          BL       uart_putchar
;;;1735   delay(20);
00231e  2014              MOVS     r0,#0x14
002320  f7fffffe          BL       delay
;;;1736   if(!strstr(uart_string_gsm,"SEND OK")){log_it();}
002324  49d4              LDR      r1,|L1.9848|
002326  48d5              LDR      r0,|L1.9852|
002328  f7fffffe          BL       strstr
00232c  2800              CMP      r0,#0
00232e  d101              BNE      |L1.9012|
002330  f7fffffe          BL       log_it
                  |L1.9012|
002334  e093              B        |L1.9310|
                  |L1.9014|
;;;1737   			
;;;1738   			
;;;1739   			
;;;1740   			
;;;1741   			
;;;1742   			}
;;;1743   			else
;;;1744   			{log_it();}
002336  f7fffffe          BL       log_it
00233a  e090              B        |L1.9310|
                  |L1.9020|
;;;1745   
;;;1746   
;;;1747   }
;;;1748   
;;;1749   //if(notsentflag==0){cursorvaluene=cursor_val(sd_data);cursorvaluepr+=cursorvaluene;}
;;;1750   
;;;1751   
;;;1752   }
;;;1753   else{
;;;1754   	remove_all_chars(data, '\n', '\n');
00233c  220a              MOVS     r2,#0xa
00233e  4611              MOV      r1,r2
002340  48ca              LDR      r0,|L1.9836|
002342  f7fffffe          BL       remove_all_chars
;;;1755   			strcat(data,"CH\n");	
002346  49d1              LDR      r1,|L1.9868|
002348  48c8              LDR      r0,|L1.9836|
00234a  f7fffffe          BL       strcat
;;;1756   			log_it();
00234e  f7fffffe          BL       log_it
;;;1757   			memset(data,0,strlen(data));
002352  48c6              LDR      r0,|L1.9836|
002354  f7fffffe          BL       strlen
002358  4601              MOV      r1,r0
00235a  9002              STR      r0,[sp,#8]
00235c  48c3              LDR      r0,|L1.9836|
00235e  f7fffffe          BL       __aeabi_memclr4
;;;1758   			tcp_initialization();
002362  f7fffffe          BL       tcp_initialization
;;;1759   			if(mystrstr(uart_string_gsm,'>')){
002366  213e              MOVS     r1,#0x3e
002368  48c4              LDR      r0,|L1.9852|
00236a  f7fffffe          BL       mystrstr
00236e  2800              CMP      r0,#0
002370  d073              BEQ      |L1.9306|
;;;1760   									clear();
002372  f7fffffe          BL       clear
;;;1761   									memset(uart_string_gsm,0,5000);
002376  49c6              LDR      r1,|L1.9872|
002378  48c0              LDR      r0,|L1.9852|
00237a  f7fffffe          BL       __aeabi_memclr4
;;;1762   									qwe=strlen(data);
00237e  48bb              LDR      r0,|L1.9836|
002380  f7fffffe          BL       strlen
002384  4605              MOV      r5,r0
;;;1763   									tout=0;
002386  2000              MOVS     r0,#0
002388  49bf              LDR      r1,|L1.9864|
00238a  6008              STR      r0,[r1,#0]  ; tout
;;;1764   									k2=0;
00238c  49c1              LDR      r1,|L1.9876|
00238e  6008              STR      r0,[r1,#0]  ; k2
;;;1765   									for(k=0;k<(qwe);k++)
002390  49b7              LDR      r1,|L1.9840|
002392  6008              STR      r0,[r1,#0]  ; k
002394  e00b              B        |L1.9134|
                  |L1.9110|
;;;1766   									{
;;;1767   										uart_putchar(UART1_BASE_PTR, data[k]);
002396  48b5              LDR      r0,|L1.9836|
002398  4ab5              LDR      r2,|L1.9840|
00239a  6812              LDR      r2,[r2,#0]  ; k
00239c  5c81              LDRB     r1,[r0,r2]
00239e  48b5              LDR      r0,|L1.9844|
0023a0  f7fffffe          BL       uart_putchar
0023a4  48b2              LDR      r0,|L1.9840|
0023a6  6800              LDR      r0,[r0,#0]            ;1765  ; k
0023a8  1c40              ADDS     r0,r0,#1              ;1765
0023aa  49b1              LDR      r1,|L1.9840|
0023ac  6008              STR      r0,[r1,#0]            ;1765  ; k
                  |L1.9134|
0023ae  48b0              LDR      r0,|L1.9840|
0023b0  6800              LDR      r0,[r0,#0]            ;1765  ; k
0023b2  42a8              CMP      r0,r5                 ;1765
0023b4  dbef              BLT      |L1.9110|
;;;1768   									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);	
0023b6  211a              MOVS     r1,#0x1a
0023b8  48ae              LDR      r0,|L1.9844|
0023ba  f7fffffe          BL       uart_putchar
0023be  211a              MOVS     r1,#0x1a
0023c0  48ac              LDR      r0,|L1.9844|
0023c2  f7fffffe          BL       uart_putchar
;;;1769   															do
0023c6  bf00              NOP      
                  |L1.9160|
;;;1770   																{q1=strstr(uart_string_gsm,"SEND OK");
0023c8  49ab              LDR      r1,|L1.9848|
0023ca  48ac              LDR      r0,|L1.9852|
0023cc  f7fffffe          BL       strstr
0023d0  4607              MOV      r7,r0
;;;1771   																	q2=strstr(uart_string_gsm, "ERROR");
0023d2  49ab              LDR      r1,|L1.9856|
0023d4  48a9              LDR      r0,|L1.9852|
0023d6  f7fffffe          BL       strstr
0023da  9007              STR      r0,[sp,#0x1c]
;;;1772   																		q3=strstr(uart_string_gsm, "FAIL");	
0023dc  49a6              LDR      r1,|L1.9848|
0023de  398c              SUBS     r1,r1,#0x8c
0023e0  48a6              LDR      r0,|L1.9852|
0023e2  f7fffffe          BL       strstr
0023e6  9006              STR      r0,[sp,#0x18]
;;;1773   																			q4=strstr(uart_string_gsm, "DEACT");	
0023e8  49a6              LDR      r1,|L1.9860|
0023ea  48a4              LDR      r0,|L1.9852|
0023ec  f7fffffe          BL       strstr
0023f0  9005              STR      r0,[sp,#0x14]
;;;1774   																	
;;;1775   																}while(!(q1 || q2 || q3 || q4 || (tout > 5) ) );
0023f2  2f00              CMP      r7,#0
0023f4  d10c              BNE      |L1.9232|
0023f6  9807              LDR      r0,[sp,#0x1c]
0023f8  2800              CMP      r0,#0
0023fa  d109              BNE      |L1.9232|
0023fc  9806              LDR      r0,[sp,#0x18]
0023fe  2800              CMP      r0,#0
002400  d106              BNE      |L1.9232|
002402  9805              LDR      r0,[sp,#0x14]
002404  2800              CMP      r0,#0
002406  d103              BNE      |L1.9232|
002408  489f              LDR      r0,|L1.9864|
00240a  6800              LDR      r0,[r0,#0]  ; tout
00240c  2805              CMP      r0,#5
00240e  dddb              BLE      |L1.9160|
                  |L1.9232|
;;;1776   															
;;;1777   																			delay(10);clear();
002410  200a              MOVS     r0,#0xa
002412  f7fffffe          BL       delay
002416  f7fffffe          BL       clear
;;;1778   														uart_putchar(UART1_BASE_PTR,0x1A);
00241a  211a              MOVS     r1,#0x1a
00241c  4895              LDR      r0,|L1.9844|
00241e  f7fffffe          BL       uart_putchar
;;;1779   												delay(10);
002422  200a              MOVS     r0,#0xa
002424  f7fffffe          BL       delay
;;;1780   										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002428  211a              MOVS     r1,#0x1a
00242a  4892              LDR      r0,|L1.9844|
00242c  f7fffffe          BL       uart_putchar
002430  211a              MOVS     r1,#0x1a
002432  4890              LDR      r0,|L1.9844|
002434  f7fffffe          BL       uart_putchar
002438  211a              MOVS     r1,#0x1a
00243a  488e              LDR      r0,|L1.9844|
00243c  f7fffffe          BL       uart_putchar
;;;1781   delay(20);
002440  2014              MOVS     r0,#0x14
002442  f7fffffe          BL       delay
;;;1782   if(!strstr(uart_string_gsm,"SEND OK")){log_it();}
002446  498c              LDR      r1,|L1.9848|
002448  488c              LDR      r0,|L1.9852|
00244a  f7fffffe          BL       strstr
00244e  2800              CMP      r0,#0
002450  d105              BNE      |L1.9310|
002452  f7fffffe          BL       log_it
002456  e002              B        |L1.9310|
002458  e7ff              B        |L1.9306|
                  |L1.9306|
;;;1783   			
;;;1784   			
;;;1785   			
;;;1786   			
;;;1787   			
;;;1788   			}
;;;1789   			else
;;;1790   			{log_it();}
00245a  f7fffffe          BL       log_it
                  |L1.9310|
00245e  980b              LDR      r0,[sp,#0x2c]         ;1638
002460  4284              CMP      r4,r0                 ;1638
002462  dc00              BGT      |L1.9318|
002464  e55d              B        |L1.7970|
                  |L1.9318|
;;;1791   //			memset(at_,0,100);
;;;1792   //			sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
;;;1793   //			send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;1794   //			parse_g(uart_string_gsm, 1, 2, ' ', '\n', fsize);
;;;1795   //			fsz=stof(fsize);//7523.7412
;;;1796   //			times=(fsz/1256)+1;
;;;1797   		}	
;;;1798   	
;;;1799   //		
;;;1800   }
;;;1801   if((times != 0      && k5!=9999999)){
002466  980b              LDR      r0,[sp,#0x2c]
002468  2800              CMP      r0,#0
00246a  d015              BEQ      |L1.9368|
00246c  488a              LDR      r0,|L1.9880|
00246e  4284              CMP      r4,r0
002470  d012              BEQ      |L1.9368|
;;;1802   	memset(at_,0,100);
002472  2164              MOVS     r1,#0x64
002474  4889              LDR      r0,|L1.9884|
002476  f7fffffe          BL       __aeabi_memclr4
;;;1803   	sprintf(at_,"\nAT+FSCREATE=%s\\LOG.TXT\r\n",drive);
00247a  4a89              LDR      r2,|L1.9888|
00247c  a189              ADR      r1,|L1.9892|
00247e  4887              LDR      r0,|L1.9884|
002480  f7fffffe          BL       __2sprintf
;;;1804   	send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
002484  488e              LDR      r0,|L1.9920|
002486  6800              LDR      r0,[r0,#0]  ; tmeout
002488  4b8e              LDR      r3,|L1.9924|
00248a  4a7d              LDR      r2,|L1.9856|
00248c  3208              ADDS     r2,r2,#8
00248e  a18e              ADR      r1,|L1.9928|
002490  9000              STR      r0,[sp,#0]
002492  4882              LDR      r0,|L1.9884|
002494  f7fffffe          BL       send_GSM
                  |L1.9368|
;;;1805   
;;;1806   }		
;;;1807   
;;;1808   
;;;1809   }
002498  b00d              ADD      sp,sp,#0x34
00249a  bdf0              POP      {r4-r7,pc}
;;;1810   
                          ENDP

                  send_tcp PROC
;;;82     
;;;83     void send_tcp()
00249c  b5f0              PUSH     {r4-r7,lr}
;;;84     {	int qwe,len;long timeout;
00249e  b085              SUB      sp,sp,#0x14
;;;85     	char cond;
;;;86     	char* con1d;
;;;87     	char* stcond1;char * stcond2;char * stcond3;char * stcond4;char * stcond5;
;;;88     memset(stcond1,0,strlen(stcond1));	
0024a0  4620              MOV      r0,r4
0024a2  f7fffffe          BL       strlen
0024a6  4601              MOV      r1,r0
0024a8  9000              STR      r0,[sp,#0]
0024aa  4620              MOV      r0,r4
0024ac  f7fffffe          BL       __aeabi_memclr
;;;89     memset(con1d,0,strlen(con1d));	
0024b0  4638              MOV      r0,r7
0024b2  f7fffffe          BL       strlen
0024b6  4601              MOV      r1,r0
0024b8  9000              STR      r0,[sp,#0]
0024ba  4638              MOV      r0,r7
0024bc  f7fffffe          BL       __aeabi_memclr
;;;90     	
;;;91     								//sprintf(data_2,"Latitude->%s,Longitude->%s,Velocity->%skmph\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);			
;;;92     
;;;93     								cond=mystrstr(uart_string_gsm,'>');
0024c0  213e              MOVS     r1,#0x3e
0024c2  486e              LDR      r0,|L1.9852|
0024c4  f7fffffe          BL       mystrstr
0024c8  9003              STR      r0,[sp,#0xc]
;;;94     								if(cond)	
0024ca  9803              LDR      r0,[sp,#0xc]
0024cc  2800              CMP      r0,#0
0024ce  d074              BEQ      |L1.9658|
;;;95     								{
;;;96     									
;;;97     									clear();
0024d0  f7fffffe          BL       clear
;;;98     									memset(uart_string_gsm,0,5000);
0024d4  496e              LDR      r1,|L1.9872|
0024d6  4869              LDR      r0,|L1.9852|
0024d8  f7fffffe          BL       __aeabi_memclr4
;;;99     									strcat(data,"\n\n");
0024dc  a17b              ADR      r1,|L1.9932|
0024de  4863              LDR      r0,|L1.9836|
0024e0  f7fffffe          BL       strcat
;;;100    									len=strlen(data);
0024e4  4861              LDR      r0,|L1.9836|
0024e6  f7fffffe          BL       strlen
0024ea  4605              MOV      r5,r0
;;;101    									tout=0;
0024ec  2000              MOVS     r0,#0
0024ee  4966              LDR      r1,|L1.9864|
0024f0  6008              STR      r0,[r1,#0]  ; tout
;;;102    									k2=0;
0024f2  4968              LDR      r1,|L1.9876|
0024f4  6008              STR      r0,[r1,#0]  ; k2
;;;103    									for(k=0;k<len;k++)
0024f6  495e              LDR      r1,|L1.9840|
0024f8  6008              STR      r0,[r1,#0]  ; k
0024fa  e00b              B        |L1.9492|
                  |L1.9468|
;;;104    									{
;;;105    										uart_putchar(UART1_BASE_PTR, data[k]);
0024fc  485b              LDR      r0,|L1.9836|
0024fe  4a5c              LDR      r2,|L1.9840|
002500  6812              LDR      r2,[r2,#0]  ; k
002502  5c81              LDRB     r1,[r0,r2]
002504  485b              LDR      r0,|L1.9844|
002506  f7fffffe          BL       uart_putchar
00250a  4859              LDR      r0,|L1.9840|
00250c  6800              LDR      r0,[r0,#0]            ;103  ; k
00250e  1c40              ADDS     r0,r0,#1              ;103
002510  4957              LDR      r1,|L1.9840|
002512  6008              STR      r0,[r1,#0]            ;103  ; k
                  |L1.9492|
002514  4856              LDR      r0,|L1.9840|
002516  6800              LDR      r0,[r0,#0]            ;103  ; k
002518  42a8              CMP      r0,r5                 ;103
00251a  dbef              BLT      |L1.9468|
;;;106    									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
00251c  211a              MOVS     r1,#0x1a
00251e  4855              LDR      r0,|L1.9844|
002520  f7fffffe          BL       uart_putchar
002524  211a              MOVS     r1,#0x1a
002526  4853              LDR      r0,|L1.9844|
002528  f7fffffe          BL       uart_putchar
;;;107    									do
00252c  bf00              NOP      
                  |L1.9518|
;;;108    																{stcond1=strstr(uart_string_gsm,"SEND OK");
00252e  4952              LDR      r1,|L1.9848|
002530  4852              LDR      r0,|L1.9852|
002532  f7fffffe          BL       strstr
002536  4604              MOV      r4,r0
;;;109    																	stcond2=strstr(uart_string_gsm, "ERROR");
002538  4951              LDR      r1,|L1.9856|
00253a  4850              LDR      r0,|L1.9852|
00253c  f7fffffe          BL       strstr
002540  9002              STR      r0,[sp,#8]
;;;110    																		stcond3=strstr(uart_string_gsm, "FAIL");	
002542  494d              LDR      r1,|L1.9848|
002544  398c              SUBS     r1,r1,#0x8c
002546  484d              LDR      r0,|L1.9852|
002548  f7fffffe          BL       strstr
00254c  9001              STR      r0,[sp,#4]
;;;111    																			stcond4=strstr(uart_string_gsm, "DEACT");	
00254e  494d              LDR      r1,|L1.9860|
002550  484a              LDR      r0,|L1.9852|
002552  f7fffffe          BL       strstr
002556  4606              MOV      r6,r0
;;;112    																	
;;;113    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 5) ) ); //|| (timeout < 1)   
002558  9802              LDR      r0,[sp,#8]
00255a  2800              CMP      r0,#0
00255c  d10a              BNE      |L1.9588|
00255e  9801              LDR      r0,[sp,#4]
002560  2800              CMP      r0,#0
002562  d107              BNE      |L1.9588|
002564  2e00              CMP      r6,#0
002566  d105              BNE      |L1.9588|
002568  2c00              CMP      r4,#0
00256a  d103              BNE      |L1.9588|
00256c  4846              LDR      r0,|L1.9864|
00256e  6800              LDR      r0,[r0,#0]  ; tout
002570  2805              CMP      r0,#5
002572  dddc              BLE      |L1.9518|
                  |L1.9588|
;;;114    																//delay(10);clear();
;;;115    														uart_putchar(UART1_BASE_PTR,0x1A);
002574  211a              MOVS     r1,#0x1a
002576  483f              LDR      r0,|L1.9844|
002578  f7fffffe          BL       uart_putchar
;;;116    												//delay(10);
;;;117    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
00257c  211a              MOVS     r1,#0x1a
00257e  483d              LDR      r0,|L1.9844|
002580  f7fffffe          BL       uart_putchar
002584  211a              MOVS     r1,#0x1a
002586  483b              LDR      r0,|L1.9844|
002588  f7fffffe          BL       uart_putchar
00258c  211a              MOVS     r1,#0x1a
00258e  4839              LDR      r0,|L1.9844|
002590  f7fffffe          BL       uart_putchar
;;;118    						
;;;119    									
;;;120    									
;;;121    									
;;;122    									if(flagch==1){		int_erval=temp;flagch=0;	}
002594  484e              LDR      r0,|L1.9936|
002596  6800              LDR      r0,[r0,#0]  ; flagch
002598  2801              CMP      r0,#1
00259a  d106              BNE      |L1.9642|
00259c  484d              LDR      r0,|L1.9940|
00259e  6800              LDR      r0,[r0,#0]  ; temp
0025a0  494d              LDR      r1,|L1.9944|
0025a2  6008              STR      r0,[r1,#0]  ; int_erval
0025a4  2000              MOVS     r0,#0
0025a6  494a              LDR      r1,|L1.9936|
0025a8  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.9642|
;;;123    									
;;;124    									
;;;125    									
;;;126    
;;;127    //									for(k=0;k<len;k++)
;;;128    //									{
;;;129    //										uart_putchar(UART1_BASE_PTR, data[k]);//clear();// uart0_putchar(UART0_BASE_PTR, data[k]);
;;;130    //									}
;;;131    //  								uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);
;;;132    
;;;133    //									
;;;134    //													k2=0;									//string array counter for uart 1
;;;135    //													 timeout=99001;						//timer counts to wait for characters in uart 1 									
;;;136    //													while(!(  strstr(uart_string_gsm,"OK")  || strstr(uart_string_gsm,"FAIL")  || strstr(uart_string_gsm,"ERROR") || strstr(uart_string_gsm,"DEACT") ||  (timeout <= 1)))       
;;;137    //																{
;;;138    //																	timeout--;
;;;139    //																//	if(timeout%10000 == 0){uart_putchar(UART1_BASE_PTR,0x1A);delay(10);}
;;;140    //
;;;141    									delay(20);															
0025aa  2014              MOVS     r0,#0x14
0025ac  f7fffffe          BL       delay
;;;142    stcond1=strstr(uart_string_gsm,"SEND OK"); 
0025b0  4931              LDR      r1,|L1.9848|
0025b2  4832              LDR      r0,|L1.9852|
0025b4  f7fffffe          BL       strstr
0025b8  4604              MOV      r4,r0
                  |L1.9658|
;;;143    
;;;144    								}
;;;145    
;;;146      //checks for send ok
;;;147    if(!stcond1) // if not send ok  ;;;;;;;;;;;;  if no gsm connection is there ,,,... this segment reinitializes GSM, collects GPS data in RAM and attempts to send it
0025ba  2c00              CMP      r4,#0
0025bc  d154              BNE      |L1.9832|
;;;148    {									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
0025be  211a              MOVS     r1,#0x1a
0025c0  482c              LDR      r0,|L1.9844|
0025c2  f7fffffe          BL       uart_putchar
0025c6  f7fffffe          BL       clear
0025ca  200a              MOVS     r0,#0xa
0025cc  f7fffffe          BL       delay
;;;149    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
0025d0  211a              MOVS     r1,#0x1a
0025d2  4828              LDR      r0,|L1.9844|
0025d4  f7fffffe          BL       uart_putchar
0025d8  f7fffffe          BL       clear
0025dc  200a              MOVS     r0,#0xa
0025de  f7fffffe          BL       delay
;;;150    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
0025e2  211a              MOVS     r1,#0x1a
0025e4  4823              LDR      r0,|L1.9844|
0025e6  f7fffffe          BL       uart_putchar
0025ea  f7fffffe          BL       clear
0025ee  200a              MOVS     r0,#0xa
0025f0  f7fffffe          BL       delay
;;;151    							remove_all_chars(data, '\n', '\n');
0025f4  220a              MOVS     r2,#0xa
0025f6  4611              MOV      r1,r2
0025f8  481c              LDR      r0,|L1.9836|
0025fa  f7fffffe          BL       remove_all_chars
;;;152    	
;;;153    		strcat(data,"CH\n");	
0025fe  4923              LDR      r1,|L1.9868|
002600  481a              LDR      r0,|L1.9836|
002602  f7fffffe          BL       strcat
;;;154    		log_it();		                         //logging
002606  f7fffffe          BL       log_it
;;;155    		memset(data,0,strlen(data));	
00260a  4818              LDR      r0,|L1.9836|
00260c  f7fffffe          BL       strlen
002610  4601              MOV      r1,r0
002612  9000              STR      r0,[sp,#0]
002614  4815              LDR      r0,|L1.9836|
002616  f7fffffe          BL       __aeabi_memclr4
;;;156    
;;;157    					   	if(flagch!=1){
00261a  482d              LDR      r0,|L1.9936|
00261c  6800              LDR      r0,[r0,#0]  ; flagch
00261e  2801              CMP      r0,#1
002620  d009              BEQ      |L1.9782|
;;;158    							temp=int_erval;				
002622  482d              LDR      r0,|L1.9944|
002624  6800              LDR      r0,[r0,#0]  ; int_erval
002626  492b              LDR      r1,|L1.9940|
002628  6008              STR      r0,[r1,#0]  ; temp
;;;159    							int_erval=4;
00262a  2004              MOVS     r0,#4
00262c  492a              LDR      r1,|L1.9944|
00262e  6008              STR      r0,[r1,#0]  ; int_erval
;;;160    							flagch=1;}
002630  2001              MOVS     r0,#1
002632  4927              LDR      r1,|L1.9936|
002634  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.9782|
;;;161    							get_imei();
002636  f7fffffe          BL       get_imei
;;;162    							clear();	
00263a  f7fffffe          BL       clear
;;;163    									GPS_COLLECT();
00263e  f7fffffe          BL       GPS_COLLECT
;;;164    									strcat(data,"CH\n");	
002642  4912              LDR      r1,|L1.9868|
002644  4809              LDR      r0,|L1.9836|
002646  f7fffffe          BL       strcat
;;;165    
;;;166    									tcp_initialization();           //reinitialization                   
00264a  f7fffffe          BL       tcp_initialization
;;;167    									
;;;168    						clear();		
00264e  f7fffffe          BL       clear
;;;169    						cond=mystrstr(uart_string_gsm,'>');    //tries to send if yes sends it;
002652  213e              MOVS     r1,#0x3e
002654  4809              LDR      r0,|L1.9852|
002656  f7fffffe          BL       mystrstr
00265a  9003              STR      r0,[sp,#0xc]
;;;170    								if(cond)	
00265c  9803              LDR      r0,[sp,#0xc]
00265e  2800              CMP      r0,#0
002660  d07e              BEQ      |L1.10080|
;;;171    								{	
;;;172    
;;;173    									clear();
002662  f7fffffe          BL       clear
;;;174    									memset(uart_string_gsm,0,5000);
002666  e039              B        |L1.9948|
                  |L1.9832|
002668  e0ad              B        |L1.10182|
00266a  0000              DCW      0x0000
                  |L1.9836|
                          DCD      data
                  |L1.9840|
                          DCD      k
                  |L1.9844|
                          DCD      0x4006b000
                  |L1.9848|
                          DCD      ||.text||+0x2268
                  |L1.9852|
                          DCD      uart_string_gsm
                  |L1.9856|
                          DCD      ||.text||+0x448
                  |L1.9860|
                          DCD      ||.text||+0x1d90
                  |L1.9864|
                          DCD      tout
                  |L1.9868|
                          DCD      ||.text||+0x1c8c
                  |L1.9872|
                          DCD      0x00001388
                  |L1.9876|
                          DCD      ||k2||
                  |L1.9880|
                          DCD      0x0098967f
                  |L1.9884|
                          DCD      at_
                  |L1.9888|
                          DCD      drive
                  |L1.9892|
0026a4  0a41542b          DCB      "\nAT+FSCREATE=%s\\LOG.TXT\r\n",0
0026a8  46534352
0026ac  45415445
0026b0  3d25735c
0026b4  4c4f472e
0026b8  5458540d
0026bc  0a00    
0026be  00                DCB      0
0026bf  00                DCB      0
                  |L1.9920|
                          DCD      tmeout
                  |L1.9924|
                          DCD      ||.text||+0x880
                  |L1.9928|
0026c8  4f4b00            DCB      "OK",0
0026cb  00                DCB      0
                  |L1.9932|
0026cc  0a0a00            DCB      "\n\n",0
0026cf  00                DCB      0
                  |L1.9936|
                          DCD      flagch
                  |L1.9940|
                          DCD      temp
                  |L1.9944|
                          DCD      int_erval
                  |L1.9948|
0026dc  49fd              LDR      r1,|L1.10964|
0026de  48fe              LDR      r0,|L1.10968|
0026e0  f7fffffe          BL       __aeabi_memclr4
;;;175    									strcat(data,"\n");
0026e4  a1fd              ADR      r1,|L1.10972|
0026e6  48fe              LDR      r0,|L1.10976|
0026e8  f7fffffe          BL       strcat
;;;176    									len=strlen(data);
0026ec  48fc              LDR      r0,|L1.10976|
0026ee  f7fffffe          BL       strlen
0026f2  4605              MOV      r5,r0
;;;177    									tout=0;
0026f4  2000              MOVS     r0,#0
0026f6  49fb              LDR      r1,|L1.10980|
0026f8  6008              STR      r0,[r1,#0]  ; tout
;;;178    									k2=0;
0026fa  49fb              LDR      r1,|L1.10984|
0026fc  6008              STR      r0,[r1,#0]  ; k2
;;;179    									for(k=0;k<len;k++)
0026fe  49fb              LDR      r1,|L1.10988|
002700  6008              STR      r0,[r1,#0]  ; k
002702  e00b              B        |L1.10012|
                  |L1.9988|
;;;180    									{
;;;181    										uart_putchar(UART1_BASE_PTR, data[k]);
002704  48f6              LDR      r0,|L1.10976|
002706  4af9              LDR      r2,|L1.10988|
002708  6812              LDR      r2,[r2,#0]  ; k
00270a  5c81              LDRB     r1,[r0,r2]
00270c  48f8              LDR      r0,|L1.10992|
00270e  f7fffffe          BL       uart_putchar
002712  48f6              LDR      r0,|L1.10988|
002714  6800              LDR      r0,[r0,#0]            ;179  ; k
002716  1c40              ADDS     r0,r0,#1              ;179
002718  49f4              LDR      r1,|L1.10988|
00271a  6008              STR      r0,[r1,#0]            ;179  ; k
                  |L1.10012|
00271c  48f3              LDR      r0,|L1.10988|
00271e  6800              LDR      r0,[r0,#0]            ;179  ; k
002720  42a8              CMP      r0,r5                 ;179
002722  dbef              BLT      |L1.9988|
;;;182    									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002724  211a              MOVS     r1,#0x1a
002726  48f2              LDR      r0,|L1.10992|
002728  f7fffffe          BL       uart_putchar
00272c  211a              MOVS     r1,#0x1a
00272e  48f0              LDR      r0,|L1.10992|
002730  f7fffffe          BL       uart_putchar
;;;183    									do
002734  bf00              NOP      
                  |L1.10038|
;;;184    																{stcond1=strstr(uart_string_gsm,"SEND OK");
002736  49ef              LDR      r1,|L1.10996|
002738  48e7              LDR      r0,|L1.10968|
00273a  f7fffffe          BL       strstr
00273e  4604              MOV      r4,r0
;;;185    																	stcond2=strstr(uart_string_gsm, "ERROR");
002740  49ed              LDR      r1,|L1.11000|
002742  48e5              LDR      r0,|L1.10968|
002744  f7fffffe          BL       strstr
002748  9002              STR      r0,[sp,#8]
;;;186    																		stcond3=strstr(uart_string_gsm, "FAIL");	
00274a  49ea              LDR      r1,|L1.10996|
00274c  398c              SUBS     r1,r1,#0x8c
00274e  48e2              LDR      r0,|L1.10968|
002750  f7fffffe          BL       strstr
002754  9001              STR      r0,[sp,#4]
;;;187    																			stcond4=strstr(uart_string_gsm, "DEACT");	
002756  49e9              LDR      r1,|L1.11004|
002758  48df              LDR      r0,|L1.10968|
00275a  f7fffffe          BL       strstr
00275e  e000              B        |L1.10082|
                  |L1.10080|
002760  e02e              B        |L1.10176|
                  |L1.10082|
002762  4606              MOV      r6,r0
;;;188    																	
;;;189    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 5) ) ); //|| (timeout < 1)   
002764  9802              LDR      r0,[sp,#8]
002766  2800              CMP      r0,#0
002768  d10a              BNE      |L1.10112|
00276a  9801              LDR      r0,[sp,#4]
00276c  2800              CMP      r0,#0
00276e  d107              BNE      |L1.10112|
002770  2e00              CMP      r6,#0
002772  d105              BNE      |L1.10112|
002774  2c00              CMP      r4,#0
002776  d103              BNE      |L1.10112|
002778  48da              LDR      r0,|L1.10980|
00277a  6800              LDR      r0,[r0,#0]  ; tout
00277c  2805              CMP      r0,#5
00277e  ddda              BLE      |L1.10038|
                  |L1.10112|
;;;190    															//	delay(10);clear();
;;;191    														uart_putchar(UART1_BASE_PTR,0x1A);
002780  211a              MOVS     r1,#0x1a
002782  48db              LDR      r0,|L1.10992|
002784  f7fffffe          BL       uart_putchar
;;;192    											//	delay(10);
;;;193    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002788  211a              MOVS     r1,#0x1a
00278a  48d9              LDR      r0,|L1.10992|
00278c  f7fffffe          BL       uart_putchar
002790  211a              MOVS     r1,#0x1a
002792  48d7              LDR      r0,|L1.10992|
002794  f7fffffe          BL       uart_putchar
002798  211a              MOVS     r1,#0x1a
00279a  48d5              LDR      r0,|L1.10992|
00279c  f7fffffe          BL       uart_putchar
;;;194    						
;;;195    
;;;196    
;;;197    									
;;;198    															
;;;199    															
;;;200    //															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;201    //															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;202    															
;;;203    														//qwe=strlen(uart_string_gsm);
;;;204    													//	uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;205    															delay(20);
0027a0  2014              MOVS     r0,#0x14
0027a2  f7fffffe          BL       delay
;;;206    															con1d=	(strstr(uart_string_gsm,"SEND OK"));
0027a6  49d3              LDR      r1,|L1.10996|
0027a8  48cb              LDR      r0,|L1.10968|
0027aa  f7fffffe          BL       strstr
0027ae  4607              MOV      r7,r0
;;;207    																if(!con1d)
0027b0  2f00              CMP      r7,#0
0027b2  d102              BNE      |L1.10170|
;;;208    																{
;;;209    																log_it();								
0027b4  f7fffffe          BL       log_it
0027b8  e007              B        |L1.10186|
                  |L1.10170|
;;;210    																}else{send_chunk();}													
0027ba  f7fffffe          BL       send_chunk
0027be  e004              B        |L1.10186|
                  |L1.10176|
;;;211    								//checks for the sd_data available
;;;212    								}
;;;213    								//con1d=strstr(uart_string_gsm,"OK");
;;;214    								else
;;;215    								{
;;;216    									log_it();			//otherwize log it					
0027c0  f7fffffe          BL       log_it
0027c4  e001              B        |L1.10186|
                  |L1.10182|
;;;217    								}
;;;218    
;;;219    																
;;;220    //delay(50);
;;;221    
;;;222    //else{
;;;223    //log_it();}
;;;224    								
;;;225    								
;;;226    	} // if there is a gsm connect available this segment checks for the log available and send it in chunks,..
;;;227    	else
;;;228    	{
;;;229    		send_chunk();
0027c6  f7fffffe          BL       send_chunk
                  |L1.10186|
;;;230    	}		
;;;231    								
;;;232    								
;;;233    								
;;;234    	memset(data,0,strlen(data));	
0027ca  48c5              LDR      r0,|L1.10976|
0027cc  f7fffffe          BL       strlen
0027d0  4601              MOV      r1,r0
0027d2  9000              STR      r0,[sp,#0]
0027d4  48c2              LDR      r0,|L1.10976|
0027d6  f7fffffe          BL       __aeabi_memclr4
;;;235    	uart_putchar(UART1_BASE_PTR, 0x1A);
0027da  211a              MOVS     r1,#0x1a
0027dc  48c4              LDR      r0,|L1.10992|
0027de  f7fffffe          BL       uart_putchar
;;;236    	
;;;237    }
0027e2  b005              ADD      sp,sp,#0x14
0027e4  bdf0              POP      {r4-r7,pc}
;;;238    	
                          ENDP

                  send_tcp_bal PROC
;;;250    
;;;251    void send_tcp_bal()
0027e6  b5f0              PUSH     {r4-r7,lr}
;;;252    {	int qwe,len;long timeout;
0027e8  b085              SUB      sp,sp,#0x14
;;;253    	char cond;
;;;254    	char* con1d;
;;;255    	char* stcond1;char * stcond2;char * stcond3;char * stcond4;char * stcond5;
;;;256    memset(stcond1,0,strlen(stcond1));	
0027ea  4620              MOV      r0,r4
0027ec  f7fffffe          BL       strlen
0027f0  4601              MOV      r1,r0
0027f2  9000              STR      r0,[sp,#0]
0027f4  4620              MOV      r0,r4
0027f6  f7fffffe          BL       __aeabi_memclr
;;;257    memset(con1d,0,strlen(con1d));	
0027fa  4638              MOV      r0,r7
0027fc  f7fffffe          BL       strlen
002800  4601              MOV      r1,r0
002802  9000              STR      r0,[sp,#0]
002804  4638              MOV      r0,r7
002806  f7fffffe          BL       __aeabi_memclr
;;;258    	
;;;259    								//sprintf(data_2,"Latitude->%s,Longitude->%s,Velocity->%skmph\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);			
;;;260    
;;;261    								cond=mystrstr(uart_string_gsm,'>');
00280a  213e              MOVS     r1,#0x3e
00280c  48b2              LDR      r0,|L1.10968|
00280e  f7fffffe          BL       mystrstr
002812  9003              STR      r0,[sp,#0xc]
;;;262    								if(cond)	
002814  9803              LDR      r0,[sp,#0xc]
002816  2800              CMP      r0,#0
002818  d074              BEQ      |L1.10500|
;;;263    								{
;;;264    									
;;;265    									clear();
00281a  f7fffffe          BL       clear
;;;266    									memset(uart_string_gsm,0,5000);
00281e  49ad              LDR      r1,|L1.10964|
002820  48ad              LDR      r0,|L1.10968|
002822  f7fffffe          BL       __aeabi_memclr4
;;;267    									strcat(data,"\n\n");
002826  a1b6              ADR      r1,|L1.11008|
002828  48ad              LDR      r0,|L1.10976|
00282a  f7fffffe          BL       strcat
;;;268    									len=strlen(data);
00282e  48ac              LDR      r0,|L1.10976|
002830  f7fffffe          BL       strlen
002834  4605              MOV      r5,r0
;;;269    									tout=0;
002836  2000              MOVS     r0,#0
002838  49aa              LDR      r1,|L1.10980|
00283a  6008              STR      r0,[r1,#0]  ; tout
;;;270    									k2=0;
00283c  49aa              LDR      r1,|L1.10984|
00283e  6008              STR      r0,[r1,#0]  ; k2
;;;271    									for(k=0;k<len;k++)
002840  49aa              LDR      r1,|L1.10988|
002842  6008              STR      r0,[r1,#0]  ; k
002844  e00b              B        |L1.10334|
                  |L1.10310|
;;;272    									{
;;;273    										uart_putchar(UART1_BASE_PTR, data[k]);
002846  48a6              LDR      r0,|L1.10976|
002848  4aa8              LDR      r2,|L1.10988|
00284a  6812              LDR      r2,[r2,#0]  ; k
00284c  5c81              LDRB     r1,[r0,r2]
00284e  48a8              LDR      r0,|L1.10992|
002850  f7fffffe          BL       uart_putchar
002854  48a5              LDR      r0,|L1.10988|
002856  6800              LDR      r0,[r0,#0]            ;271  ; k
002858  1c40              ADDS     r0,r0,#1              ;271
00285a  49a4              LDR      r1,|L1.10988|
00285c  6008              STR      r0,[r1,#0]            ;271  ; k
                  |L1.10334|
00285e  48a3              LDR      r0,|L1.10988|
002860  6800              LDR      r0,[r0,#0]            ;271  ; k
002862  42a8              CMP      r0,r5                 ;271
002864  dbef              BLT      |L1.10310|
;;;274    									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002866  211a              MOVS     r1,#0x1a
002868  48a1              LDR      r0,|L1.10992|
00286a  f7fffffe          BL       uart_putchar
00286e  211a              MOVS     r1,#0x1a
002870  489f              LDR      r0,|L1.10992|
002872  f7fffffe          BL       uart_putchar
;;;275    									do
002876  bf00              NOP      
                  |L1.10360|
;;;276    																{stcond1=strstr(uart_string_gsm,"SEND OK");
002878  499e              LDR      r1,|L1.10996|
00287a  4897              LDR      r0,|L1.10968|
00287c  f7fffffe          BL       strstr
002880  4604              MOV      r4,r0
;;;277    																	stcond2=strstr(uart_string_gsm, "ERROR");
002882  499d              LDR      r1,|L1.11000|
002884  4894              LDR      r0,|L1.10968|
002886  f7fffffe          BL       strstr
00288a  9002              STR      r0,[sp,#8]
;;;278    																		stcond3=strstr(uart_string_gsm, "FAIL");	
00288c  4999              LDR      r1,|L1.10996|
00288e  398c              SUBS     r1,r1,#0x8c
002890  4891              LDR      r0,|L1.10968|
002892  f7fffffe          BL       strstr
002896  9001              STR      r0,[sp,#4]
;;;279    																			stcond4=strstr(uart_string_gsm, "DEACT");	
002898  4998              LDR      r1,|L1.11004|
00289a  488f              LDR      r0,|L1.10968|
00289c  f7fffffe          BL       strstr
0028a0  4606              MOV      r6,r0
;;;280    																	
;;;281    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 5) ) ); //|| (timeout < 1)   
0028a2  9802              LDR      r0,[sp,#8]
0028a4  2800              CMP      r0,#0
0028a6  d10a              BNE      |L1.10430|
0028a8  9801              LDR      r0,[sp,#4]
0028aa  2800              CMP      r0,#0
0028ac  d107              BNE      |L1.10430|
0028ae  2e00              CMP      r6,#0
0028b0  d105              BNE      |L1.10430|
0028b2  2c00              CMP      r4,#0
0028b4  d103              BNE      |L1.10430|
0028b6  488b              LDR      r0,|L1.10980|
0028b8  6800              LDR      r0,[r0,#0]  ; tout
0028ba  2805              CMP      r0,#5
0028bc  dddc              BLE      |L1.10360|
                  |L1.10430|
;;;282    																//delay(10);clear();
;;;283    														uart_putchar(UART1_BASE_PTR,0x1A);
0028be  211a              MOVS     r1,#0x1a
0028c0  488b              LDR      r0,|L1.10992|
0028c2  f7fffffe          BL       uart_putchar
;;;284    												//delay(10);
;;;285    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
0028c6  211a              MOVS     r1,#0x1a
0028c8  4889              LDR      r0,|L1.10992|
0028ca  f7fffffe          BL       uart_putchar
0028ce  211a              MOVS     r1,#0x1a
0028d0  4887              LDR      r0,|L1.10992|
0028d2  f7fffffe          BL       uart_putchar
0028d6  211a              MOVS     r1,#0x1a
0028d8  4885              LDR      r0,|L1.10992|
0028da  f7fffffe          BL       uart_putchar
;;;286    						
;;;287    									
;;;288    									
;;;289    									
;;;290    									if(flagch==1){		int_erval=temp;flagch=0;	}
0028de  4889              LDR      r0,|L1.11012|
0028e0  6800              LDR      r0,[r0,#0]  ; flagch
0028e2  2801              CMP      r0,#1
0028e4  d106              BNE      |L1.10484|
0028e6  4888              LDR      r0,|L1.11016|
0028e8  6800              LDR      r0,[r0,#0]  ; temp
0028ea  4988              LDR      r1,|L1.11020|
0028ec  6008              STR      r0,[r1,#0]  ; int_erval
0028ee  2000              MOVS     r0,#0
0028f0  4984              LDR      r1,|L1.11012|
0028f2  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.10484|
;;;291    									
;;;292    									
;;;293    									
;;;294    
;;;295    //									for(k=0;k<len;k++)
;;;296    //									{
;;;297    //										uart_putchar(UART1_BASE_PTR, data[k]);//clear();// uart0_putchar(UART0_BASE_PTR, data[k]);
;;;298    //									}
;;;299    //  								uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);
;;;300    
;;;301    //									
;;;302    //													k2=0;									//string array counter for uart 1
;;;303    //													 timeout=99001;						//timer counts to wait for characters in uart 1 									
;;;304    //													while(!(  strstr(uart_string_gsm,"OK")  || strstr(uart_string_gsm,"FAIL")  || strstr(uart_string_gsm,"ERROR") || strstr(uart_string_gsm,"DEACT") ||  (timeout <= 1)))       
;;;305    //																{
;;;306    //																	timeout--;
;;;307    //																//	if(timeout%10000 == 0){uart_putchar(UART1_BASE_PTR,0x1A);delay(10);}
;;;308    //
;;;309    									delay(20);															
0028f4  2014              MOVS     r0,#0x14
0028f6  f7fffffe          BL       delay
;;;310    stcond1=strstr(uart_string_gsm,"SEND OK"); 
0028fa  497e              LDR      r1,|L1.10996|
0028fc  4876              LDR      r0,|L1.10968|
0028fe  f7fffffe          BL       strstr
002902  4604              MOV      r4,r0
                  |L1.10500|
;;;311    
;;;312    								}
;;;313    
;;;314      //checks for send ok
;;;315    if(!stcond1) // if not send ok  ;;;;;;;;;;;;  if no gsm connection is there ,,,... this segment reinitializes GSM, collects GPS data in RAM and attempts to send it
002904  2c00              CMP      r4,#0
002906  d17d              BNE      |L1.10756|
;;;316    {									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
002908  211a              MOVS     r1,#0x1a
00290a  4879              LDR      r0,|L1.10992|
00290c  f7fffffe          BL       uart_putchar
002910  f7fffffe          BL       clear
002914  200a              MOVS     r0,#0xa
002916  f7fffffe          BL       delay
;;;317    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
00291a  211a              MOVS     r1,#0x1a
00291c  4874              LDR      r0,|L1.10992|
00291e  f7fffffe          BL       uart_putchar
002922  f7fffffe          BL       clear
002926  200a              MOVS     r0,#0xa
002928  f7fffffe          BL       delay
;;;318    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
00292c  211a              MOVS     r1,#0x1a
00292e  4870              LDR      r0,|L1.10992|
002930  f7fffffe          BL       uart_putchar
002934  f7fffffe          BL       clear
002938  200a              MOVS     r0,#0xa
00293a  f7fffffe          BL       delay
;;;319    							//remove_all_chars(data, '\n', '\n');
;;;320    	
;;;321    		//strcat(data,"CH\n");	
;;;322    		log_it();		                         //logging
00293e  f7fffffe          BL       log_it
;;;323    		memset(data,0,strlen(data));	
002942  4867              LDR      r0,|L1.10976|
002944  f7fffffe          BL       strlen
002948  4601              MOV      r1,r0
00294a  9000              STR      r0,[sp,#0]
00294c  4864              LDR      r0,|L1.10976|
00294e  f7fffffe          BL       __aeabi_memclr4
;;;324    
;;;325    					   	if(flagch!=1){
002952  486c              LDR      r0,|L1.11012|
002954  6800              LDR      r0,[r0,#0]  ; flagch
002956  2801              CMP      r0,#1
002958  d009              BEQ      |L1.10606|
;;;326    							temp=int_erval;				
00295a  486c              LDR      r0,|L1.11020|
00295c  6800              LDR      r0,[r0,#0]  ; int_erval
00295e  496a              LDR      r1,|L1.11016|
002960  6008              STR      r0,[r1,#0]  ; temp
;;;327    							int_erval=4;
002962  2004              MOVS     r0,#4
002964  4969              LDR      r1,|L1.11020|
002966  6008              STR      r0,[r1,#0]  ; int_erval
;;;328    							flagch=1;}
002968  2001              MOVS     r0,#1
00296a  4966              LDR      r1,|L1.11012|
00296c  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.10606|
;;;329    							get_imei();
00296e  f7fffffe          BL       get_imei
;;;330    							clear();	
002972  f7fffffe          BL       clear
;;;331    									GPS_COLLECT();
002976  f7fffffe          BL       GPS_COLLECT
;;;332    									strcat(data,"CH\n");	
00297a  4965              LDR      r1,|L1.11024|
00297c  4858              LDR      r0,|L1.10976|
00297e  f7fffffe          BL       strcat
;;;333    
;;;334    									tcp_initialization();           //reinitialization                   
002982  f7fffffe          BL       tcp_initialization
;;;335    									
;;;336    						clear();		
002986  f7fffffe          BL       clear
;;;337    						cond=mystrstr(uart_string_gsm,'>');    //tries to send if yes sends it;
00298a  213e              MOVS     r1,#0x3e
00298c  4852              LDR      r0,|L1.10968|
00298e  f7fffffe          BL       mystrstr
002992  9003              STR      r0,[sp,#0xc]
;;;338    								if(cond)	
002994  9803              LDR      r0,[sp,#0xc]
002996  2800              CMP      r0,#0
002998  d074              BEQ      |L1.10884|
;;;339    								{	
;;;340    
;;;341    									clear();
00299a  f7fffffe          BL       clear
;;;342    									memset(uart_string_gsm,0,5000);
00299e  494d              LDR      r1,|L1.10964|
0029a0  484d              LDR      r0,|L1.10968|
0029a2  f7fffffe          BL       __aeabi_memclr4
;;;343    									strcat(data,"\n");
0029a6  a14d              ADR      r1,|L1.10972|
0029a8  484d              LDR      r0,|L1.10976|
0029aa  f7fffffe          BL       strcat
;;;344    									len=strlen(data);
0029ae  484c              LDR      r0,|L1.10976|
0029b0  f7fffffe          BL       strlen
0029b4  4605              MOV      r5,r0
;;;345    									tout=0;
0029b6  2000              MOVS     r0,#0
0029b8  494a              LDR      r1,|L1.10980|
0029ba  6008              STR      r0,[r1,#0]  ; tout
;;;346    									k2=0;
0029bc  494a              LDR      r1,|L1.10984|
0029be  6008              STR      r0,[r1,#0]  ; k2
;;;347    									for(k=0;k<len;k++)
0029c0  494a              LDR      r1,|L1.10988|
0029c2  6008              STR      r0,[r1,#0]  ; k
0029c4  e00b              B        |L1.10718|
                  |L1.10694|
;;;348    									{
;;;349    										uart_putchar(UART1_BASE_PTR, data[k]);
0029c6  4846              LDR      r0,|L1.10976|
0029c8  4a48              LDR      r2,|L1.10988|
0029ca  6812              LDR      r2,[r2,#0]  ; k
0029cc  5c81              LDRB     r1,[r0,r2]
0029ce  4848              LDR      r0,|L1.10992|
0029d0  f7fffffe          BL       uart_putchar
0029d4  4845              LDR      r0,|L1.10988|
0029d6  6800              LDR      r0,[r0,#0]            ;347  ; k
0029d8  1c40              ADDS     r0,r0,#1              ;347
0029da  4944              LDR      r1,|L1.10988|
0029dc  6008              STR      r0,[r1,#0]            ;347  ; k
                  |L1.10718|
0029de  4843              LDR      r0,|L1.10988|
0029e0  6800              LDR      r0,[r0,#0]            ;347  ; k
0029e2  42a8              CMP      r0,r5                 ;347
0029e4  dbef              BLT      |L1.10694|
;;;350    									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
0029e6  211a              MOVS     r1,#0x1a
0029e8  4841              LDR      r0,|L1.10992|
0029ea  f7fffffe          BL       uart_putchar
0029ee  211a              MOVS     r1,#0x1a
0029f0  483f              LDR      r0,|L1.10992|
0029f2  f7fffffe          BL       uart_putchar
;;;351    									do
0029f6  bf00              NOP      
                  |L1.10744|
;;;352    																{stcond1=strstr(uart_string_gsm,"SEND OK");
0029f8  493e              LDR      r1,|L1.10996|
0029fa  4837              LDR      r0,|L1.10968|
0029fc  f7fffffe          BL       strstr
002a00  4604              MOV      r4,r0
;;;353    																	stcond2=strstr(uart_string_gsm, "ERROR");
002a02  e000              B        |L1.10758|
                  |L1.10756|
002a04  e041              B        |L1.10890|
                  |L1.10758|
002a06  493c              LDR      r1,|L1.11000|
002a08  4833              LDR      r0,|L1.10968|
002a0a  f7fffffe          BL       strstr
002a0e  9002              STR      r0,[sp,#8]
;;;354    																		stcond3=strstr(uart_string_gsm, "FAIL");	
002a10  4938              LDR      r1,|L1.10996|
002a12  398c              SUBS     r1,r1,#0x8c
002a14  4830              LDR      r0,|L1.10968|
002a16  f7fffffe          BL       strstr
002a1a  9001              STR      r0,[sp,#4]
;;;355    																			stcond4=strstr(uart_string_gsm, "DEACT");	
002a1c  4937              LDR      r1,|L1.11004|
002a1e  482e              LDR      r0,|L1.10968|
002a20  f7fffffe          BL       strstr
002a24  4606              MOV      r6,r0
;;;356    																	
;;;357    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 5) ) ); //|| (timeout < 1)   
002a26  9802              LDR      r0,[sp,#8]
002a28  2800              CMP      r0,#0
002a2a  d10a              BNE      |L1.10818|
002a2c  9801              LDR      r0,[sp,#4]
002a2e  2800              CMP      r0,#0
002a30  d107              BNE      |L1.10818|
002a32  2e00              CMP      r6,#0
002a34  d105              BNE      |L1.10818|
002a36  2c00              CMP      r4,#0
002a38  d103              BNE      |L1.10818|
002a3a  482a              LDR      r0,|L1.10980|
002a3c  6800              LDR      r0,[r0,#0]  ; tout
002a3e  2805              CMP      r0,#5
002a40  ddda              BLE      |L1.10744|
                  |L1.10818|
;;;358    															//	delay(10);clear();
;;;359    														uart_putchar(UART1_BASE_PTR,0x1A);
002a42  211a              MOVS     r1,#0x1a
002a44  482a              LDR      r0,|L1.10992|
002a46  f7fffffe          BL       uart_putchar
;;;360    											//	delay(10);
;;;361    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002a4a  211a              MOVS     r1,#0x1a
002a4c  4828              LDR      r0,|L1.10992|
002a4e  f7fffffe          BL       uart_putchar
002a52  211a              MOVS     r1,#0x1a
002a54  4826              LDR      r0,|L1.10992|
002a56  f7fffffe          BL       uart_putchar
002a5a  211a              MOVS     r1,#0x1a
002a5c  4824              LDR      r0,|L1.10992|
002a5e  f7fffffe          BL       uart_putchar
;;;362    						
;;;363    
;;;364    
;;;365    									
;;;366    															
;;;367    															
;;;368    //															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;369    //															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;370    															
;;;371    														//qwe=strlen(uart_string_gsm);
;;;372    													//	uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
;;;373    															delay(20);
002a62  2014              MOVS     r0,#0x14
002a64  f7fffffe          BL       delay
;;;374    															con1d=	(strstr(uart_string_gsm,"SEND OK"));
002a68  4922              LDR      r1,|L1.10996|
002a6a  481b              LDR      r0,|L1.10968|
002a6c  f7fffffe          BL       strstr
002a70  4607              MOV      r7,r0
;;;375    																if(!con1d)
002a72  2f00              CMP      r7,#0
002a74  d103              BNE      |L1.10878|
;;;376    																{
;;;377    																log_it();								
002a76  f7fffffe          BL       log_it
002a7a  e008              B        |L1.10894|
002a7c  e002              B        |L1.10884|
                  |L1.10878|
;;;378    																}else{send_chunk();}													
002a7e  f7fffffe          BL       send_chunk
002a82  e004              B        |L1.10894|
                  |L1.10884|
;;;379    								//checks for the sd_data available
;;;380    								}
;;;381    								//con1d=strstr(uart_string_gsm,"OK");
;;;382    								else
;;;383    								{
;;;384    									log_it();			//otherwize log it					
002a84  f7fffffe          BL       log_it
002a88  e001              B        |L1.10894|
                  |L1.10890|
;;;385    								}
;;;386    
;;;387    																
;;;388    //delay(50);
;;;389    
;;;390    //else{
;;;391    //log_it();}
;;;392    								
;;;393    								
;;;394    	} // if there is a gsm connect available this segment checks for the log available and send it in chunks,..
;;;395    	else
;;;396    	{
;;;397    		send_chunk();
002a8a  f7fffffe          BL       send_chunk
                  |L1.10894|
;;;398    	}		
;;;399    								
;;;400    								
;;;401    								
;;;402    	memset(data,0,strlen(data));	
002a8e  4814              LDR      r0,|L1.10976|
002a90  f7fffffe          BL       strlen
002a94  4601              MOV      r1,r0
002a96  9000              STR      r0,[sp,#0]
002a98  4811              LDR      r0,|L1.10976|
002a9a  f7fffffe          BL       __aeabi_memclr4
;;;403    	uart_putchar(UART1_BASE_PTR, 0x1A);
002a9e  211a              MOVS     r1,#0x1a
002aa0  4813              LDR      r0,|L1.10992|
002aa2  f7fffffe          BL       uart_putchar
;;;404    	
;;;405    }
002aa6  b005              ADD      sp,sp,#0x14
002aa8  bdf0              POP      {r4-r7,pc}
;;;406    	
                          ENDP

                  send_tcp2 PROC
;;;421    
;;;422    void send_tcp2()
002aaa  b5f0              PUSH     {r4-r7,lr}
;;;423    {	int qwe,len;long timeout;int logged;
002aac  b087              SUB      sp,sp,#0x1c
;;;424    	char cond;
;;;425    	char* con1d;
;;;426    	char* stcond1;char * stcond2;char * stcond3;char * stcond4;char * stcond5;
;;;427    memset(stcond1,0,strlen(stcond1));	
002aae  4620              MOV      r0,r4
002ab0  f7fffffe          BL       strlen
002ab4  4601              MOV      r1,r0
002ab6  9001              STR      r0,[sp,#4]
002ab8  4620              MOV      r0,r4
002aba  f7fffffe          BL       __aeabi_memclr
;;;428    memset(con1d,0,strlen(con1d));	
002abe  4638              MOV      r0,r7
002ac0  f7fffffe          BL       strlen
002ac4  4601              MOV      r1,r0
002ac6  9001              STR      r0,[sp,#4]
002ac8  4638              MOV      r0,r7
002aca  f7fffffe          BL       __aeabi_memclr
;;;429    	
;;;430    								//sprintf(data_2,"Latitude->%s,Longitude->%s,Velocity->%skmph\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);			
;;;431    						
;;;432    								cond=mystrstr(uart_string_gsm,'>');
002ace  213e              MOVS     r1,#0x3e
002ad0  4801              LDR      r0,|L1.10968|
002ad2  e01f              B        |L1.11028|
                  |L1.10964|
                          DCD      0x00001388
                  |L1.10968|
                          DCD      uart_string_gsm
                  |L1.10972|
002adc  0a00              DCB      "\n",0
002ade  00                DCB      0
002adf  00                DCB      0
                  |L1.10976|
                          DCD      data
                  |L1.10980|
                          DCD      tout
                  |L1.10984|
                          DCD      ||k2||
                  |L1.10988|
                          DCD      k
                  |L1.10992|
                          DCD      0x4006b000
                  |L1.10996|
                          DCD      ||.text||+0x2268
                  |L1.11000|
                          DCD      ||.text||+0x448
                  |L1.11004|
                          DCD      ||.text||+0x1d90
                  |L1.11008|
002b00  0a0a00            DCB      "\n\n",0
002b03  00                DCB      0
                  |L1.11012|
                          DCD      flagch
                  |L1.11016|
                          DCD      temp
                  |L1.11020|
                          DCD      int_erval
                  |L1.11024|
                          DCD      ||.text||+0x1c8c
                  |L1.11028|
002b14  f7fffffe          BL       mystrstr
002b18  9004              STR      r0,[sp,#0x10]
;;;433    								if(cond)	
002b1a  9804              LDR      r0,[sp,#0x10]
002b1c  2800              CMP      r0,#0
002b1e  d070              BEQ      |L1.11266|
;;;434    								{
;;;435    									
;;;436    									clear();
002b20  f7fffffe          BL       clear
;;;437    									memset(uart_string_gsm,0,5000);
002b24  49f8              LDR      r1,|L1.12040|
002b26  48f9              LDR      r0,|L1.12044|
002b28  f7fffffe          BL       __aeabi_memclr4
;;;438    									strcat(data,"\n");
002b2c  a1f8              ADR      r1,|L1.12048|
002b2e  48f9              LDR      r0,|L1.12052|
002b30  f7fffffe          BL       strcat
;;;439    									len=strlen(data);
002b34  48f7              LDR      r0,|L1.12052|
002b36  f7fffffe          BL       strlen
002b3a  4605              MOV      r5,r0
;;;440    									tout=0;
002b3c  2000              MOVS     r0,#0
002b3e  49f6              LDR      r1,|L1.12056|
002b40  6008              STR      r0,[r1,#0]  ; tout
;;;441    									k2=0;
002b42  49f6              LDR      r1,|L1.12060|
002b44  6008              STR      r0,[r1,#0]  ; k2
;;;442    									for(k=0;k<len;k++)
002b46  49f6              LDR      r1,|L1.12064|
002b48  6008              STR      r0,[r1,#0]  ; k
002b4a  e00b              B        |L1.11108|
                  |L1.11084|
;;;443    									{
;;;444    										uart_putchar(UART1_BASE_PTR, data[k]);
002b4c  48f1              LDR      r0,|L1.12052|
002b4e  4af4              LDR      r2,|L1.12064|
002b50  6812              LDR      r2,[r2,#0]  ; k
002b52  5c81              LDRB     r1,[r0,r2]
002b54  48f3              LDR      r0,|L1.12068|
002b56  f7fffffe          BL       uart_putchar
002b5a  48f1              LDR      r0,|L1.12064|
002b5c  6800              LDR      r0,[r0,#0]            ;442  ; k
002b5e  1c40              ADDS     r0,r0,#1              ;442
002b60  49ef              LDR      r1,|L1.12064|
002b62  6008              STR      r0,[r1,#0]            ;442  ; k
                  |L1.11108|
002b64  48ee              LDR      r0,|L1.12064|
002b66  6800              LDR      r0,[r0,#0]            ;442  ; k
002b68  42a8              CMP      r0,r5                 ;442
002b6a  dbef              BLT      |L1.11084|
;;;445    									}uart_putchar(UART1_BASE_PTR, 0x1A);
002b6c  211a              MOVS     r1,#0x1a
002b6e  48ed              LDR      r0,|L1.12068|
002b70  f7fffffe          BL       uart_putchar
;;;446    									do
002b74  bf00              NOP      
                  |L1.11126|
;;;447    																{stcond1=strstr(uart_string_gsm,"SEND OK");
002b76  49ec              LDR      r1,|L1.12072|
002b78  48e4              LDR      r0,|L1.12044|
002b7a  f7fffffe          BL       strstr
002b7e  4604              MOV      r4,r0
;;;448    																	stcond2=strstr(uart_string_gsm, "ERROR");
002b80  49ea              LDR      r1,|L1.12076|
002b82  48e2              LDR      r0,|L1.12044|
002b84  f7fffffe          BL       strstr
002b88  9003              STR      r0,[sp,#0xc]
;;;449    																		stcond3=strstr(uart_string_gsm, "FAIL");	
002b8a  49e7              LDR      r1,|L1.12072|
002b8c  398c              SUBS     r1,r1,#0x8c
002b8e  48df              LDR      r0,|L1.12044|
002b90  f7fffffe          BL       strstr
002b94  9002              STR      r0,[sp,#8]
;;;450    																			stcond4=strstr(uart_string_gsm, "DEACT");	
002b96  49e6              LDR      r1,|L1.12080|
002b98  48dc              LDR      r0,|L1.12044|
002b9a  f7fffffe          BL       strstr
002b9e  4606              MOV      r6,r0
;;;451    																	
;;;452    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 4) ) ); //|| (timeout < 1)   
002ba0  9803              LDR      r0,[sp,#0xc]
002ba2  2800              CMP      r0,#0
002ba4  d10a              BNE      |L1.11196|
002ba6  9802              LDR      r0,[sp,#8]
002ba8  2800              CMP      r0,#0
002baa  d107              BNE      |L1.11196|
002bac  2e00              CMP      r6,#0
002bae  d105              BNE      |L1.11196|
002bb0  2c00              CMP      r4,#0
002bb2  d103              BNE      |L1.11196|
002bb4  48d8              LDR      r0,|L1.12056|
002bb6  6800              LDR      r0,[r0,#0]  ; tout
002bb8  2804              CMP      r0,#4
002bba  dddc              BLE      |L1.11126|
                  |L1.11196|
;;;453    																//delay(10);clear();
;;;454    														uart_putchar(UART1_BASE_PTR,0x1A);
002bbc  211a              MOVS     r1,#0x1a
002bbe  48d9              LDR      r0,|L1.12068|
002bc0  f7fffffe          BL       uart_putchar
;;;455    												//delay(10);
;;;456    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002bc4  211a              MOVS     r1,#0x1a
002bc6  48d7              LDR      r0,|L1.12068|
002bc8  f7fffffe          BL       uart_putchar
002bcc  211a              MOVS     r1,#0x1a
002bce  48d5              LDR      r0,|L1.12068|
002bd0  f7fffffe          BL       uart_putchar
002bd4  211a              MOVS     r1,#0x1a
002bd6  48d3              LDR      r0,|L1.12068|
002bd8  f7fffffe          BL       uart_putchar
;;;457    						
;;;458    									
;;;459    									
;;;460    									
;;;461    									
;;;462    									
;;;463    									
;;;464    									
;;;465    
;;;466    //									for(k=0;k<len;k++)
;;;467    //									{
;;;468    //										uart_putchar(UART1_BASE_PTR, data[k]);//clear();// uart0_putchar(UART0_BASE_PTR, data[k]);
;;;469    //									}
;;;470    //  								uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);
;;;471    
;;;472    //									
;;;473    //													k2=0;									//string array counter for uart 1
;;;474    //													 timeout=99001;						//timer counts to wait for characters in uart 1 									
;;;475    //													while(!(  strstr(uart_string_gsm,"OK")  || strstr(uart_string_gsm,"FAIL")  || strstr(uart_string_gsm,"ERROR") || strstr(uart_string_gsm,"DEACT") ||  (timeout <= 1)))       
;;;476    //																{
;;;477    //																	timeout--;
;;;478    //																//	if(timeout%10000 == 0){uart_putchar(UART1_BASE_PTR,0x1A);delay(10);}
;;;479    //																}
;;;480    																if(flagch==1){		int_erval=temp;flagch=0;	}
002bdc  48d5              LDR      r0,|L1.12084|
002bde  6800              LDR      r0,[r0,#0]  ; flagch
002be0  2801              CMP      r0,#1
002be2  d106              BNE      |L1.11250|
002be4  48d4              LDR      r0,|L1.12088|
002be6  6800              LDR      r0,[r0,#0]  ; temp
002be8  49d4              LDR      r1,|L1.12092|
002bea  6008              STR      r0,[r1,#0]  ; int_erval
002bec  2000              MOVS     r0,#0
002bee  49d1              LDR      r1,|L1.12084|
002bf0  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.11250|
;;;481    delay(50);
002bf2  2032              MOVS     r0,#0x32
002bf4  f7fffffe          BL       delay
;;;482    stcond1=strstr(uart_string_gsm,"SEND OK");								
002bf8  49cb              LDR      r1,|L1.12072|
002bfa  48c4              LDR      r0,|L1.12044|
002bfc  f7fffffe          BL       strstr
002c00  4604              MOV      r4,r0
                  |L1.11266|
;;;483    								}
;;;484    //else{
;;;485    //log_it();
;;;486    //}
;;;487    
;;;488    
;;;489    if(!stcond1) // if no gsm connection is there ,,,... this segment reinitializes GSM, collects GPS data in RAM and attempts to send it
002c02  2c00              CMP      r4,#0
002c04  d17e              BNE      |L1.11524|
;;;490    {									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
002c06  211a              MOVS     r1,#0x1a
002c08  48c6              LDR      r0,|L1.12068|
002c0a  f7fffffe          BL       uart_putchar
002c0e  f7fffffe          BL       clear
002c12  200a              MOVS     r0,#0xa
002c14  f7fffffe          BL       delay
;;;491    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
002c18  211a              MOVS     r1,#0x1a
002c1a  48c2              LDR      r0,|L1.12068|
002c1c  f7fffffe          BL       uart_putchar
002c20  f7fffffe          BL       clear
002c24  200a              MOVS     r0,#0xa
002c26  f7fffffe          BL       delay
;;;492    									uart_putchar(UART1_BASE_PTR, 0x1A);clear();delay(10);
002c2a  211a              MOVS     r1,#0x1a
002c2c  48bd              LDR      r0,|L1.12068|
002c2e  f7fffffe          BL       uart_putchar
002c32  f7fffffe          BL       clear
002c36  200a              MOVS     r0,#0xa
002c38  f7fffffe          BL       delay
;;;493    						//	remove_all_chars(data, '\n', '\n');
;;;494    	
;;;495    	//	strcat(data,"CH\n");	
;;;496    		log_it();		
002c3c  f7fffffe          BL       log_it
;;;497    		memset(data,0,strlen(data));	
002c40  48b4              LDR      r0,|L1.12052|
002c42  f7fffffe          BL       strlen
002c46  4601              MOV      r1,r0
002c48  9001              STR      r0,[sp,#4]
002c4a  48b2              LDR      r0,|L1.12052|
002c4c  f7fffffe          BL       __aeabi_memclr4
;;;498    									GPS_COLLECT();
002c50  f7fffffe          BL       GPS_COLLECT
;;;499    									strcat(data,"CH\n");	
002c54  49ba              LDR      r1,|L1.12096|
002c56  48af              LDR      r0,|L1.12052|
002c58  f7fffffe          BL       strcat
;;;500    				
;;;501    					   	if(flagch!=1){
002c5c  48b5              LDR      r0,|L1.12084|
002c5e  6800              LDR      r0,[r0,#0]  ; flagch
002c60  2801              CMP      r0,#1
002c62  d009              BEQ      |L1.11384|
;;;502    							temp=int_erval;				
002c64  48b5              LDR      r0,|L1.12092|
002c66  6800              LDR      r0,[r0,#0]  ; int_erval
002c68  49b3              LDR      r1,|L1.12088|
002c6a  6008              STR      r0,[r1,#0]  ; temp
;;;503    							int_erval=4;
002c6c  2004              MOVS     r0,#4
002c6e  49b3              LDR      r1,|L1.12092|
002c70  6008              STR      r0,[r1,#0]  ; int_erval
;;;504    							flagch=1;}
002c72  2001              MOVS     r0,#1
002c74  49af              LDR      r1,|L1.12084|
002c76  6008              STR      r0,[r1,#0]  ; flagch
                  |L1.11384|
;;;505    							get_imei();
002c78  f7fffffe          BL       get_imei
;;;506    							clear();	
002c7c  f7fffffe          BL       clear
;;;507    
;;;508    
;;;509    									tcp_initialization();
002c80  f7fffffe          BL       tcp_initialization
;;;510    									
;;;511    						clear();		
002c84  f7fffffe          BL       clear
;;;512    						cond=mystrstr(uart_string_gsm,'>');
002c88  213e              MOVS     r1,#0x3e
002c8a  48a0              LDR      r0,|L1.12044|
002c8c  f7fffffe          BL       mystrstr
002c90  9004              STR      r0,[sp,#0x10]
;;;513    								if(cond)	
002c92  9804              LDR      r0,[sp,#0x10]
002c94  2800              CMP      r0,#0
002c96  d07d              BEQ      |L1.11668|
;;;514    								{	
;;;515    
;;;516    									clear();
002c98  f7fffffe          BL       clear
;;;517    									memset(uart_string_gsm,0,5000);
002c9c  499a              LDR      r1,|L1.12040|
002c9e  489b              LDR      r0,|L1.12044|
002ca0  f7fffffe          BL       __aeabi_memclr4
;;;518    									strcat(data,"\n");
002ca4  a19a              ADR      r1,|L1.12048|
002ca6  489b              LDR      r0,|L1.12052|
002ca8  f7fffffe          BL       strcat
;;;519    									len=strlen(data);
002cac  4899              LDR      r0,|L1.12052|
002cae  f7fffffe          BL       strlen
002cb2  4605              MOV      r5,r0
;;;520    									tout=0;
002cb4  2000              MOVS     r0,#0
002cb6  4998              LDR      r1,|L1.12056|
002cb8  6008              STR      r0,[r1,#0]  ; tout
;;;521    									k2=0;
002cba  4998              LDR      r1,|L1.12060|
002cbc  6008              STR      r0,[r1,#0]  ; k2
;;;522    									for(k=0;k<len;k++)
002cbe  4998              LDR      r1,|L1.12064|
002cc0  6008              STR      r0,[r1,#0]  ; k
002cc2  e00b              B        |L1.11484|
                  |L1.11460|
;;;523    									{
;;;524    										uart_putchar(UART1_BASE_PTR, data[k]);
002cc4  4893              LDR      r0,|L1.12052|
002cc6  4a96              LDR      r2,|L1.12064|
002cc8  6812              LDR      r2,[r2,#0]  ; k
002cca  5c81              LDRB     r1,[r0,r2]
002ccc  4895              LDR      r0,|L1.12068|
002cce  f7fffffe          BL       uart_putchar
002cd2  4893              LDR      r0,|L1.12064|
002cd4  6800              LDR      r0,[r0,#0]            ;522  ; k
002cd6  1c40              ADDS     r0,r0,#1              ;522
002cd8  4991              LDR      r1,|L1.12064|
002cda  6008              STR      r0,[r1,#0]            ;522  ; k
                  |L1.11484|
002cdc  4890              LDR      r0,|L1.12064|
002cde  6800              LDR      r0,[r0,#0]            ;522  ; k
002ce0  42a8              CMP      r0,r5                 ;522
002ce2  dbef              BLT      |L1.11460|
;;;525    									}uart_putchar(UART1_BASE_PTR, 0x1A);
002ce4  211a              MOVS     r1,#0x1a
002ce6  488f              LDR      r0,|L1.12068|
002ce8  f7fffffe          BL       uart_putchar
;;;526    									do
002cec  bf00              NOP      
                  |L1.11502|
;;;527    																{stcond1=strstr(uart_string_gsm,"SEND OK");
002cee  498e              LDR      r1,|L1.12072|
002cf0  4886              LDR      r0,|L1.12044|
002cf2  f7fffffe          BL       strstr
002cf6  4604              MOV      r4,r0
;;;528    																	stcond2=strstr(uart_string_gsm, "ERROR");
002cf8  498c              LDR      r1,|L1.12076|
002cfa  4884              LDR      r0,|L1.12044|
002cfc  f7fffffe          BL       strstr
002d00  9003              STR      r0,[sp,#0xc]
;;;529    																		stcond3=strstr(uart_string_gsm, "FAIL");	
002d02  e000              B        |L1.11526|
                  |L1.11524|
002d04  e066              B        |L1.11732|
                  |L1.11526|
002d06  4988              LDR      r1,|L1.12072|
002d08  398c              SUBS     r1,r1,#0x8c
002d0a  4880              LDR      r0,|L1.12044|
002d0c  f7fffffe          BL       strstr
002d10  9002              STR      r0,[sp,#8]
;;;530    																			stcond4=strstr(uart_string_gsm, "DEACT");	
002d12  4987              LDR      r1,|L1.12080|
002d14  487d              LDR      r0,|L1.12044|
002d16  f7fffffe          BL       strstr
002d1a  4606              MOV      r6,r0
;;;531    																	
;;;532    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 4) ) ); //|| (timeout < 1)   
002d1c  9803              LDR      r0,[sp,#0xc]
002d1e  2800              CMP      r0,#0
002d20  d10a              BNE      |L1.11576|
002d22  9802              LDR      r0,[sp,#8]
002d24  2800              CMP      r0,#0
002d26  d107              BNE      |L1.11576|
002d28  2e00              CMP      r6,#0
002d2a  d105              BNE      |L1.11576|
002d2c  2c00              CMP      r4,#0
002d2e  d103              BNE      |L1.11576|
002d30  4879              LDR      r0,|L1.12056|
002d32  6800              LDR      r0,[r0,#0]  ; tout
002d34  2804              CMP      r0,#4
002d36  ddda              BLE      |L1.11502|
                  |L1.11576|
;;;533    																delay(10);clear();
002d38  200a              MOVS     r0,#0xa
002d3a  f7fffffe          BL       delay
002d3e  f7fffffe          BL       clear
;;;534    														uart_putchar(UART1_BASE_PTR,0x1A);
002d42  211a              MOVS     r1,#0x1a
002d44  4877              LDR      r0,|L1.12068|
002d46  f7fffffe          BL       uart_putchar
;;;535    												delay(10);
002d4a  200a              MOVS     r0,#0xa
002d4c  f7fffffe          BL       delay
;;;536    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
002d50  211a              MOVS     r1,#0x1a
002d52  4874              LDR      r0,|L1.12068|
002d54  f7fffffe          BL       uart_putchar
002d58  211a              MOVS     r1,#0x1a
002d5a  4872              LDR      r0,|L1.12068|
002d5c  f7fffffe          BL       uart_putchar
002d60  211a              MOVS     r1,#0x1a
002d62  4870              LDR      r0,|L1.12068|
002d64  f7fffffe          BL       uart_putchar
;;;537    						
;;;538    
;;;539    
;;;540    									
;;;541    															
;;;542    															
;;;543    															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
002d68  211a              MOVS     r1,#0x1a
002d6a  486e              LDR      r0,|L1.12068|
002d6c  f7fffffe          BL       uart_putchar
002d70  f7fffffe          BL       clear
002d74  200a              MOVS     r0,#0xa
002d76  f7fffffe          BL       delay
;;;544    															uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
002d7a  211a              MOVS     r1,#0x1a
002d7c  4869              LDR      r0,|L1.12068|
002d7e  f7fffffe          BL       uart_putchar
002d82  f7fffffe          BL       clear
002d86  200a              MOVS     r0,#0xa
002d88  f7fffffe          BL       delay
;;;545    															
;;;546    														qwe=strlen(uart_string_gsm);
002d8c  485f              LDR      r0,|L1.12044|
002d8e  f7fffffe          BL       strlen
002d92  e000              B        |L1.11670|
                  |L1.11668|
002d94  e019              B        |L1.11722|
                  |L1.11670|
002d96  9006              STR      r0,[sp,#0x18]
;;;547    														uart_putchar(UART1_BASE_PTR,0x1A);clear();delay(10);
002d98  211a              MOVS     r1,#0x1a
002d9a  4862              LDR      r0,|L1.12068|
002d9c  f7fffffe          BL       uart_putchar
002da0  f7fffffe          BL       clear
002da4  200a              MOVS     r0,#0xa
002da6  f7fffffe          BL       delay
;;;548    								delay(50);
002daa  2032              MOVS     r0,#0x32
002dac  f7fffffe          BL       delay
;;;549    								con1d=strstr(uart_string_gsm,"SEND OK");
002db0  495d              LDR      r1,|L1.12072|
002db2  4856              LDR      r0,|L1.12044|
002db4  f7fffffe          BL       strstr
002db8  4607              MOV      r7,r0
;;;550    								if(!con1d)
002dba  2f00              CMP      r7,#0
002dbc  d102              BNE      |L1.11716|
;;;551    								{
;;;552    									log_it();								
002dbe  f7fffffe          BL       log_it
002dc2  e009              B        |L1.11736|
                  |L1.11716|
;;;553    								}else{send_chunk();}	
002dc4  f7fffffe          BL       send_chunk
002dc8  e006              B        |L1.11736|
                  |L1.11722|
;;;554    
;;;555    																
;;;556    								}else{log_it();logged=1;}			//
002dca  f7fffffe          BL       log_it
002dce  2001              MOVS     r0,#1
002dd0  9005              STR      r0,[sp,#0x14]
002dd2  e001              B        |L1.11736|
                  |L1.11732|
;;;557    
;;;558    							
;;;559    
;;;560    	} // if there is a gsm connect available this segment checks for the log available and send it in chunks,..
;;;561    	else
;;;562    	{
;;;563    		send_chunk();
002dd4  f7fffffe          BL       send_chunk
                  |L1.11736|
;;;564    	}		
;;;565    								
;;;566    								
;;;567    								
;;;568    	memset(data,0,strlen(data));	
002dd8  484e              LDR      r0,|L1.12052|
002dda  f7fffffe          BL       strlen
002dde  4601              MOV      r1,r0
002de0  9001              STR      r0,[sp,#4]
002de2  484c              LDR      r0,|L1.12052|
002de4  f7fffffe          BL       __aeabi_memclr4
;;;569    	uart_putchar(UART1_BASE_PTR, 0x1A);
002de8  211a              MOVS     r1,#0x1a
002dea  484e              LDR      r0,|L1.12068|
002dec  f7fffffe          BL       uart_putchar
;;;570    	
;;;571    }
002df0  b007              ADD      sp,sp,#0x1c
002df2  bdf0              POP      {r4-r7,pc}
;;;572    
                          ENDP

                  saveapn PROC
;;;633    
;;;634    void saveapn(){
002df4  b538              PUSH     {r3-r5,lr}
;;;635    	
;;;636    send_GSM("\nAT+FSCREATE=C:\\APN.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
002df6  4853              LDR      r0,|L1.12100|
002df8  6800              LDR      r0,[r0,#0]  ; tmeout
002dfa  4b53              LDR      r3,|L1.12104|
002dfc  4a4b              LDR      r2,|L1.12076|
002dfe  3208              ADDS     r2,r2,#8
002e00  a152              ADR      r1,|L1.12108|
002e02  9000              STR      r0,[sp,#0]
002e04  a052              ADR      r0,|L1.12112|
002e06  f7fffffe          BL       send_GSM
;;;637    
;;;638    	memset(at_,0,100);
002e0a  2164              MOVS     r1,#0x64
002e0c  4857              LDR      r0,|L1.12140|
002e0e  f7fffffe          BL       __aeabi_memclr4
;;;639    	sprintf(at_,"\r\nAT+FSWRITE=C:\\APN.TXT,0,%d,10\r\n",strlen(apn)+3);	
002e12  4857              LDR      r0,|L1.12144|
002e14  6800              LDR      r0,[r0,#0]  ; apn
002e16  f7fffffe          BL       strlen
002e1a  1cc4              ADDS     r4,r0,#3
002e1c  4622              MOV      r2,r4
002e1e  a155              ADR      r1,|L1.12148|
002e20  4852              LDR      r0,|L1.12140|
002e22  f7fffffe          BL       __2sprintf
;;;640    	send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",10);	
002e26  200a              MOVS     r0,#0xa
002e28  4b47              LDR      r3,|L1.12104|
002e2a  4a40              LDR      r2,|L1.12076|
002e2c  3208              ADDS     r2,r2,#8
002e2e  a15a              ADR      r1,|L1.12184|
002e30  9000              STR      r0,[sp,#0]
002e32  484e              LDR      r0,|L1.12140|
002e34  f7fffffe          BL       send_GSM
;;;641    	//clear();
;;;642    
;;;643    	
;;;644    	send_modem("|");
002e38  a058              ADR      r0,|L1.12188|
002e3a  f7fffffe          BL       send_modem
;;;645    		for(k=0;k<strlen(apn);k++)
002e3e  2000              MOVS     r0,#0
002e40  4937              LDR      r1,|L1.12064|
002e42  6008              STR      r0,[r1,#0]  ; k
002e44  e00c              B        |L1.11872|
                  |L1.11846|
;;;646    		{
;;;647    			uart_putchar(UART1_BASE_PTR, apn[k]);// uart0_putchar(UART0_BASE_PTR, interval[k]);//clear();
002e46  484a              LDR      r0,|L1.12144|
002e48  6800              LDR      r0,[r0,#0]  ; apn
002e4a  4a35              LDR      r2,|L1.12064|
002e4c  6812              LDR      r2,[r2,#0]  ; k
002e4e  5c81              LDRB     r1,[r0,r2]
002e50  4834              LDR      r0,|L1.12068|
002e52  f7fffffe          BL       uart_putchar
002e56  4832              LDR      r0,|L1.12064|
002e58  6800              LDR      r0,[r0,#0]            ;645  ; k
002e5a  1c40              ADDS     r0,r0,#1              ;645
002e5c  4930              LDR      r1,|L1.12064|
002e5e  6008              STR      r0,[r1,#0]            ;645  ; k
                  |L1.11872|
002e60  4843              LDR      r0,|L1.12144|
002e62  6800              LDR      r0,[r0,#0]            ;645  ; apn
002e64  f7fffffe          BL       strlen
002e68  492d              LDR      r1,|L1.12064|
002e6a  6809              LDR      r1,[r1,#0]            ;645  ; k
002e6c  4288              CMP      r0,r1                 ;645
002e6e  d8ea              BHI      |L1.11846|
;;;648    		}	
;;;649    			send_modem("|");			
002e70  a04a              ADR      r0,|L1.12188|
002e72  f7fffffe          BL       send_modem
;;;650     
;;;651    									k2=0;									//string array counter for uart 1
002e76  2000              MOVS     r0,#0
002e78  4928              LDR      r1,|L1.12060|
002e7a  6008              STR      r0,[r1,#0]  ; k2
;;;652    									time=19999;						//timer counts to wait for characters in uart 1 									
002e7c  4848              LDR      r0,|L1.12192|
002e7e  4949              LDR      r1,|L1.12196|
002e80  6008              STR      r0,[r1,#0]  ; time
;;;653    									while(!(strstr(uart_string_gsm,"OK\r\n")  ||  (time < 1)  ||(strstr(uart_string_gsm, "ERROR"))))
002e82  e010              B        |L1.11942|
                  |L1.11908|
;;;654    									{
;;;655    									time--;
002e84  4847              LDR      r0,|L1.12196|
002e86  6800              LDR      r0,[r0,#0]  ; time
002e88  1e40              SUBS     r0,r0,#1
002e8a  4946              LDR      r1,|L1.12196|
002e8c  6008              STR      r0,[r1,#0]  ; time
;;;656    									if(time % 2000 == 0)
002e8e  217d              MOVS     r1,#0x7d
002e90  0109              LSLS     r1,r1,#4
002e92  4844              LDR      r0,|L1.12196|
002e94  6800              LDR      r0,[r0,#0]  ; time
002e96  f7fffffe          BL       __aeabi_idivmod
002e9a  2900              CMP      r1,#0
002e9c  d103              BNE      |L1.11942|
;;;657    										{
;;;658    											//uart0_putchar(UART0_BASE_PTR,'1');
;;;659    											uart_putchar(UART1_BASE_PTR,'\n');
002e9e  210a              MOVS     r1,#0xa
002ea0  4820              LDR      r0,|L1.12068|
002ea2  f7fffffe          BL       uart_putchar
                  |L1.11942|
002ea6  4928              LDR      r1,|L1.12104|
002ea8  391c              SUBS     r1,r1,#0x1c           ;653
002eaa  4818              LDR      r0,|L1.12044|
002eac  f7fffffe          BL       strstr
002eb0  2800              CMP      r0,#0                 ;653
002eb2  d109              BNE      |L1.11976|
002eb4  483b              LDR      r0,|L1.12196|
002eb6  6800              LDR      r0,[r0,#0]            ;653  ; time
002eb8  2801              CMP      r0,#1                 ;653
002eba  db05              BLT      |L1.11976|
002ebc  491b              LDR      r1,|L1.12076|
002ebe  4813              LDR      r0,|L1.12044|
002ec0  f7fffffe          BL       strstr
002ec4  2800              CMP      r0,#0                 ;653
002ec6  d0dd              BEQ      |L1.11908|
                  |L1.11976|
;;;660    										}
;;;661    	
;;;662    									}
;;;663    
;;;664    
;;;665    	
;;;666    }
002ec8  bd38              POP      {r3-r5,pc}
;;;667    
                          ENDP

                  readapn PROC
;;;668    void readapn()
002eca  b51c              PUSH     {r2-r4,lr}
;;;669    {
;;;670    	memset(at_,0,100);
002ecc  2164              MOVS     r1,#0x64
002ece  4827              LDR      r0,|L1.12140|
002ed0  f7fffffe          BL       __aeabi_memclr4
;;;671    		sprintf(at_, "\nAT+FSREAD=C:\\APN.TXT,0,100,1\r\n");		
002ed4  a134              ADR      r1,|L1.12200|
002ed6  4825              LDR      r0,|L1.12140|
002ed8  f7fffffe          BL       __2sprintf
;;;672    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
002edc  200a              MOVS     r0,#0xa
002ede  4b1a              LDR      r3,|L1.12104|
002ee0  4a12              LDR      r2,|L1.12076|
002ee2  3208              ADDS     r2,r2,#8
002ee4  a119              ADR      r1,|L1.12108|
002ee6  9000              STR      r0,[sp,#0]
002ee8  4820              LDR      r0,|L1.12140|
002eea  f7fffffe          BL       send_GSM
;;;673    	
;;;674    		parse_g(uart_string_gsm, 1,2, '|', '|',apn);
002eee  4820              LDR      r0,|L1.12144|
002ef0  6800              LDR      r0,[r0,#0]  ; apn
002ef2  217c              MOVS     r1,#0x7c
002ef4  460b              MOV      r3,r1
002ef6  2202              MOVS     r2,#2
002ef8  9100              STR      r1,[sp,#0]
002efa  9001              STR      r0,[sp,#4]
002efc  2101              MOVS     r1,#1
002efe  4803              LDR      r0,|L1.12044|
002f00  f7fffffe          BL       parse_g
;;;675    	
;;;676    	
;;;677    }
002f04  bd1c              POP      {r2-r4,pc}
002f06  0000              DCW      0x0000
                  |L1.12040|
                          DCD      0x00001388
                  |L1.12044|
                          DCD      uart_string_gsm
                  |L1.12048|
002f10  0a00              DCB      "\n",0
002f12  00                DCB      0
002f13  00                DCB      0
                  |L1.12052|
                          DCD      data
                  |L1.12056|
                          DCD      tout
                  |L1.12060|
                          DCD      ||k2||
                  |L1.12064|
                          DCD      k
                  |L1.12068|
                          DCD      0x4006b000
                  |L1.12072|
                          DCD      ||.text||+0x2268
                  |L1.12076|
                          DCD      ||.text||+0x448
                  |L1.12080|
                          DCD      ||.text||+0x1d90
                  |L1.12084|
                          DCD      flagch
                  |L1.12088|
                          DCD      temp
                  |L1.12092|
                          DCD      int_erval
                  |L1.12096|
                          DCD      ||.text||+0x1c8c
                  |L1.12100|
                          DCD      tmeout
                  |L1.12104|
                          DCD      ||.text||+0x880
                  |L1.12108|
002f4c  4f4b00            DCB      "OK",0
002f4f  00                DCB      0
                  |L1.12112|
002f50  0a41542b          DCB      "\nAT+FSCREATE=C:\\APN.TXT\r\n",0
002f54  46534352
002f58  45415445
002f5c  3d433a5c
002f60  41504e2e
002f64  5458540d
002f68  0a00    
002f6a  00                DCB      0
002f6b  00                DCB      0
                  |L1.12140|
                          DCD      at_
                  |L1.12144|
                          DCD      apn
                  |L1.12148|
002f74  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\APN.TXT,0,%d,10\r\n",0
002f78  2b465357
002f7c  52495445
002f80  3d433a5c
002f84  41504e2e
002f88  5458542c
002f8c  302c2564
002f90  2c31300d
002f94  0a00    
002f96  00                DCB      0
002f97  00                DCB      0
                  |L1.12184|
002f98  3e00              DCB      ">",0
002f9a  00                DCB      0
002f9b  00                DCB      0
                  |L1.12188|
002f9c  7c00              DCB      "|",0
002f9e  00                DCB      0
002f9f  00                DCB      0
                  |L1.12192|
                          DCD      0x00004e1f
                  |L1.12196|
                          DCD      time
                  |L1.12200|
002fa8  0a41542b          DCB      "\nAT+FSREAD=C:\\APN.TXT,0,100,1\r\n",0
002fac  46535245
002fb0  41443d43
002fb4  3a5c4150
002fb8  4e2e5458
002fbc  542c302c
002fc0  3130302c
002fc4  310d0a00
                          ENDP

                  read_ip_port PROC
;;;759    	
;;;760    void read_ip_port()
002fc8  b51c              PUSH     {r2-r4,lr}
;;;761    {
;;;762    		memset(at_,0,100);
002fca  2164              MOVS     r1,#0x64
002fcc  48f5              LDR      r0,|L1.13220|
002fce  f7fffffe          BL       __aeabi_memclr4
;;;763    		sprintf(at_, "\nAT+FSREAD=C:\\IP_PORT.TXT,0,100,1\r\n");		
002fd2  a1f5              ADR      r1,|L1.13224|
002fd4  48f3              LDR      r0,|L1.13220|
002fd6  f7fffffe          BL       __2sprintf
;;;764    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
002fda  200a              MOVS     r0,#0xa
002fdc  4bfb              LDR      r3,|L1.13260|
002fde  4afc              LDR      r2,|L1.13264|
002fe0  a1fc              ADR      r1,|L1.13268|
002fe2  9000              STR      r0,[sp,#0]
002fe4  48ef              LDR      r0,|L1.13220|
002fe6  f7fffffe          BL       send_GSM
;;;765    		parse_g(uart_string_gsm, 2,3, '|', '|',ip);
002fea  48fb              LDR      r0,|L1.13272|
002fec  217c              MOVS     r1,#0x7c
002fee  460b              MOV      r3,r1
002ff0  2203              MOVS     r2,#3
002ff2  9100              STR      r1,[sp,#0]
002ff4  9001              STR      r0,[sp,#4]
002ff6  2102              MOVS     r1,#2
002ff8  48f8              LDR      r0,|L1.13276|
002ffa  f7fffffe          BL       parse_g
;;;766    		parse_g(uart_string_gsm, 4,5, '|', '|',port);
002ffe  48f8              LDR      r0,|L1.13280|
003000  217c              MOVS     r1,#0x7c
003002  460b              MOV      r3,r1
003004  2205              MOVS     r2,#5
003006  9100              STR      r1,[sp,#0]
003008  9001              STR      r0,[sp,#4]
00300a  2104              MOVS     r1,#4
00300c  48f3              LDR      r0,|L1.13276|
00300e  f7fffffe          BL       parse_g
;;;767    	
;;;768    	
;;;769    	
;;;770    	
;;;771    	
;;;772    	
;;;773    	
;;;774    	
;;;775    	
;;;776    	
;;;777    	
;;;778    	
;;;779    	
;;;780    	
;;;781    	
;;;782    	
;;;783    	
;;;784    	
;;;785    	
;;;786    	
;;;787    	
;;;788    	
;;;789    	
;;;790    	
;;;791    	
;;;792    	
;;;793    	
;;;794    	
;;;795    	
;;;796    	
;;;797    	
;;;798    	
;;;799    	
;;;800    	
;;;801    	
;;;802    	
;;;803    	
;;;804    	
;;;805    	
;;;806    	
;;;807    	
;;;808    	
;;;809    	
;;;810    	
;;;811    	
;;;812    	
;;;813    	
;;;814    	
;;;815    	
;;;816    	
;;;817    	
;;;818    	
;;;819    	
;;;820    	
;;;821    	
;;;822    	
;;;823    	
;;;824    	
;;;825    	
;;;826    	
;;;827    	
;;;828    	
;;;829    	
;;;830    	
;;;831    	
;;;832    	
;;;833    	
;;;834    	
;;;835    	
;;;836    	
;;;837    	
;;;838    	
;;;839    	
;;;840    	
;;;841    	
;;;842    	
;;;843    	
;;;844    	
;;;845    	
;;;846    	
;;;847    	
;;;848    	
;;;849    	
;;;850    	
;;;851    	
;;;852    	
;;;853    	
;;;854    	
;;;855    	
;;;856    	
;;;857    	
;;;858    	
;;;859    	
;;;860    	
;;;861    	
;;;862    	
;;;863    	
;;;864    	
;;;865    	
;;;866    	
;;;867    	
;;;868    	
;;;869    	
;;;870    	
;;;871    		
;;;872    
;;;873    
;;;874    }		
003012  bd1c              POP      {r2-r4,pc}
;;;875    	
                          ENDP

                  read_interval PROC
;;;876    void read_interval()
003014  b51c              PUSH     {r2-r4,lr}
;;;877    {
;;;878    		memset(at_,0,100);
003016  2164              MOVS     r1,#0x64
003018  48e2              LDR      r0,|L1.13220|
00301a  f7fffffe          BL       __aeabi_memclr4
;;;879    		sprintf(at_, "\nAT+FSREAD=C:\\INTERVAL.TXT,0,100,1\r\n");		
00301e  a1f1              ADR      r1,|L1.13284|
003020  48e0              LDR      r0,|L1.13220|
003022  f7fffffe          BL       __2sprintf
;;;880    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
003026  200a              MOVS     r0,#0xa
003028  4be8              LDR      r3,|L1.13260|
00302a  4ae9              LDR      r2,|L1.13264|
00302c  a1e9              ADR      r1,|L1.13268|
00302e  9000              STR      r0,[sp,#0]
003030  48dc              LDR      r0,|L1.13220|
003032  f7fffffe          BL       send_GSM
;;;881    		parse_g(uart_string_gsm, 2,3, '|', '|',interval);
003036  48f5              LDR      r0,|L1.13324|
003038  217c              MOVS     r1,#0x7c
00303a  460b              MOV      r3,r1
00303c  2203              MOVS     r2,#3
00303e  9100              STR      r1,[sp,#0]
003040  9001              STR      r0,[sp,#4]
003042  2102              MOVS     r1,#2
003044  48e5              LDR      r0,|L1.13276|
003046  f7fffffe          BL       parse_g
;;;882    		int_erval=myAtoi(interval);		
00304a  48f0              LDR      r0,|L1.13324|
00304c  f7fffffe          BL       myAtoi
003050  49ef              LDR      r1,|L1.13328|
003052  6008              STR      r0,[r1,#0]  ; int_erval
;;;883    
;;;884    
;;;885    }		
003054  bd1c              POP      {r2-r4,pc}
;;;886    	
                          ENDP

                  send_bal PROC
;;;887    		
;;;888    	void send_bal(){
003056  b5fe              PUSH     {r1-r7,lr}
;;;889    	int qwe,len;long timeout;
;;;890    	char cond;
;;;891    	char* con1d;
;;;892    	char* stcond1;char * stcond2;char * stcond3;char * stcond4;char * stcond5;
;;;893    	
;;;894    								//sprintf(data_2,"Latitude->%s,Longitude->%s,Velocity->%skmph\nhttps://www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",lati,longi,velocity,lati,'%',longi);			
;;;895    						
;;;896    								cond=mystrstr(uart_string_gsm,'>');
003058  213e              MOVS     r1,#0x3e
00305a  48e0              LDR      r0,|L1.13276|
00305c  f7fffffe          BL       mystrstr
003060  9002              STR      r0,[sp,#8]
;;;897    								if(cond)	
003062  9802              LDR      r0,[sp,#8]
003064  2800              CMP      r0,#0
003066  d070              BEQ      |L1.12618|
;;;898    								{
;;;899    									
;;;900    									clear();
003068  f7fffffe          BL       clear
;;;901    									memset(uart_string_gsm,0,5000);
00306c  49e9              LDR      r1,|L1.13332|
00306e  48db              LDR      r0,|L1.13276|
003070  f7fffffe          BL       __aeabi_memclr4
;;;902    									strcat(data,"\n");
003074  a1e8              ADR      r1,|L1.13336|
003076  48e9              LDR      r0,|L1.13340|
003078  f7fffffe          BL       strcat
;;;903    									len=strlen(data);
00307c  48e7              LDR      r0,|L1.13340|
00307e  f7fffffe          BL       strlen
003082  4604              MOV      r4,r0
;;;904    									tout=0;
003084  2000              MOVS     r0,#0
003086  49e6              LDR      r1,|L1.13344|
003088  6008              STR      r0,[r1,#0]  ; tout
;;;905    									k2=0;
00308a  49e6              LDR      r1,|L1.13348|
00308c  6008              STR      r0,[r1,#0]  ; k2
;;;906    									for(k=0;k<len;k++)
00308e  49e6              LDR      r1,|L1.13352|
003090  6008              STR      r0,[r1,#0]  ; k
003092  e00b              B        |L1.12460|
                  |L1.12436|
;;;907    									{
;;;908    										uart_putchar(UART1_BASE_PTR, data[k]);
003094  48e1              LDR      r0,|L1.13340|
003096  4ae4              LDR      r2,|L1.13352|
003098  6812              LDR      r2,[r2,#0]  ; k
00309a  5c81              LDRB     r1,[r0,r2]
00309c  48e3              LDR      r0,|L1.13356|
00309e  f7fffffe          BL       uart_putchar
0030a2  48e1              LDR      r0,|L1.13352|
0030a4  6800              LDR      r0,[r0,#0]            ;906  ; k
0030a6  1c40              ADDS     r0,r0,#1              ;906
0030a8  49df              LDR      r1,|L1.13352|
0030aa  6008              STR      r0,[r1,#0]            ;906  ; k
                  |L1.12460|
0030ac  48de              LDR      r0,|L1.13352|
0030ae  6800              LDR      r0,[r0,#0]            ;906  ; k
0030b0  42a0              CMP      r0,r4                 ;906
0030b2  dbef              BLT      |L1.12436|
;;;909    									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
0030b4  211a              MOVS     r1,#0x1a
0030b6  48dd              LDR      r0,|L1.13356|
0030b8  f7fffffe          BL       uart_putchar
0030bc  211a              MOVS     r1,#0x1a
0030be  48db              LDR      r0,|L1.13356|
0030c0  f7fffffe          BL       uart_putchar
0030c4  211a              MOVS     r1,#0x1a
0030c6  48d9              LDR      r0,|L1.13356|
0030c8  f7fffffe          BL       uart_putchar
;;;910    									do
0030cc  bf00              NOP      
                  |L1.12494|
;;;911    																{stcond1=strstr(uart_string_gsm,"OK\r\n");
0030ce  49bf              LDR      r1,|L1.13260|
0030d0  391c              SUBS     r1,r1,#0x1c
0030d2  48c2              LDR      r0,|L1.13276|
0030d4  f7fffffe          BL       strstr
0030d8  4607              MOV      r7,r0
;;;912    																	stcond2=strstr(uart_string_gsm, "ERROR");
0030da  49bd              LDR      r1,|L1.13264|
0030dc  3908              SUBS     r1,r1,#8
0030de  48bf              LDR      r0,|L1.13276|
0030e0  f7fffffe          BL       strstr
0030e4  9001              STR      r0,[sp,#4]
;;;913    																		stcond3=strstr(uart_string_gsm, "FAIL");	
0030e6  49d2              LDR      r1,|L1.13360|
0030e8  48bc              LDR      r0,|L1.13276|
0030ea  f7fffffe          BL       strstr
0030ee  9000              STR      r0,[sp,#0]
;;;914    																			stcond4=strstr(uart_string_gsm, "DEACT");	
0030f0  49d0              LDR      r1,|L1.13364|
0030f2  48ba              LDR      r0,|L1.13276|
0030f4  f7fffffe          BL       strstr
0030f8  4606              MOV      r6,r0
;;;915    																	
;;;916    																}while(!(stcond2 || stcond3 || stcond4 || stcond1 || (tout > 10) ) ); //|| (timeout < 1)   
0030fa  9801              LDR      r0,[sp,#4]
0030fc  2800              CMP      r0,#0
0030fe  d10a              BNE      |L1.12566|
003100  9800              LDR      r0,[sp,#0]
003102  2800              CMP      r0,#0
003104  d107              BNE      |L1.12566|
003106  2e00              CMP      r6,#0
003108  d105              BNE      |L1.12566|
00310a  2f00              CMP      r7,#0
00310c  d103              BNE      |L1.12566|
00310e  48c4              LDR      r0,|L1.13344|
003110  6800              LDR      r0,[r0,#0]  ; tout
003112  280a              CMP      r0,#0xa
003114  dddb              BLE      |L1.12494|
                  |L1.12566|
;;;917    																delay(10);clear();
003116  200a              MOVS     r0,#0xa
003118  f7fffffe          BL       delay
00311c  f7fffffe          BL       clear
;;;918    														uart_putchar(UART1_BASE_PTR,0x1A);
003120  211a              MOVS     r1,#0x1a
003122  48c2              LDR      r0,|L1.13356|
003124  f7fffffe          BL       uart_putchar
;;;919    												delay(10);
003128  200a              MOVS     r0,#0xa
00312a  f7fffffe          BL       delay
;;;920    										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
00312e  211a              MOVS     r1,#0x1a
003130  48be              LDR      r0,|L1.13356|
003132  f7fffffe          BL       uart_putchar
003136  211a              MOVS     r1,#0x1a
003138  48bc              LDR      r0,|L1.13356|
00313a  f7fffffe          BL       uart_putchar
00313e  211a              MOVS     r1,#0x1a
003140  48ba              LDR      r0,|L1.13356|
003142  f7fffffe          BL       uart_putchar
003146  e001              B        |L1.12620|
003148  e7ff              B        |L1.12618|
                  |L1.12618|
;;;921    				
;;;922    								}
;;;923    								else{log_it;}
00314a  bf00              NOP      
                  |L1.12620|
;;;924    con1d=strstr(uart_string_gsm,"OK");		
00314c  a1a1              ADR      r1,|L1.13268|
00314e  48a3              LDR      r0,|L1.13276|
003150  f7fffffe          BL       strstr
003154  4605              MOV      r5,r0
;;;925    								if(!con1d)log_it();
003156  2d00              CMP      r5,#0
003158  d101              BNE      |L1.12638|
00315a  f7fffffe          BL       log_it
                  |L1.12638|
;;;926    		
;;;927    	}
00315e  bdfe              POP      {r1-r7,pc}
;;;928    	
                          ENDP

                  read PROC
;;;935    
;;;936    void read(char * A,char * B,char * C)
003160  b570              PUSH     {r4-r6,lr}
;;;937    {k=0;l=time;
003162  4604              MOV      r4,r0
003164  460d              MOV      r5,r1
003166  4616              MOV      r6,r2
003168  2000              MOVS     r0,#0
00316a  49af              LDR      r1,|L1.13352|
00316c  6008              STR      r0,[r1,#0]  ; k
00316e  48b2              LDR      r0,|L1.13368|
003170  6800              LDR      r0,[r0,#0]  ; time
003172  49b2              LDR      r1,|L1.13372|
003174  6008              STR      r0,[r1,#0]  ; l
;;;938    			do{
003176  bf00              NOP      
                  |L1.12664|
;;;939    			if( uart_getchar_present (UART1_BASE_PTR))	
003178  48ac              LDR      r0,|L1.13356|
00317a  f7fffffe          BL       uart_getchar_present
00317e  2800              CMP      r0,#0
003180  d018              BEQ      |L1.12724|
;;;940    			{uart_string_gps[k]=UART_D_REG(UART1_BASE_PTR);k++;l=time;if(k>298){k=0;}}
003182  48aa              LDR      r0,|L1.13356|
003184  79c0              LDRB     r0,[r0,#7]
003186  49ae              LDR      r1,|L1.13376|
003188  4aa7              LDR      r2,|L1.13352|
00318a  6812              LDR      r2,[r2,#0]  ; k
00318c  5488              STRB     r0,[r1,r2]
00318e  48a6              LDR      r0,|L1.13352|
003190  6800              LDR      r0,[r0,#0]  ; k
003192  1c40              ADDS     r0,r0,#1
003194  49a4              LDR      r1,|L1.13352|
003196  6008              STR      r0,[r1,#0]  ; k
003198  48a7              LDR      r0,|L1.13368|
00319a  6800              LDR      r0,[r0,#0]  ; time
00319c  49a7              LDR      r1,|L1.13372|
00319e  6008              STR      r0,[r1,#0]  ; l
0031a0  48a1              LDR      r0,|L1.13352|
0031a2  6800              LDR      r0,[r0,#0]  ; k
0031a4  21ff              MOVS     r1,#0xff
0031a6  312b              ADDS     r1,r1,#0x2b
0031a8  4288              CMP      r0,r1
0031aa  dd09              BLE      |L1.12736|
0031ac  2000              MOVS     r0,#0
0031ae  499e              LDR      r1,|L1.13352|
0031b0  6008              STR      r0,[r1,#0]  ; k
0031b2  e005              B        |L1.12736|
                  |L1.12724|
;;;941    				else{
;;;942    							l--;if(l==10){}
0031b4  48a1              LDR      r0,|L1.13372|
0031b6  6800              LDR      r0,[r0,#0]  ; l
0031b8  1e40              SUBS     r0,r0,#1
0031ba  49a0              LDR      r1,|L1.13372|
0031bc  6008              STR      r0,[r1,#0]  ; l
0031be  bf00              NOP      
                  |L1.12736|
;;;943    						}
;;;944    			}while(!((strstr(uart_string_gps, "OK\r\n"))
0031c0  4982              LDR      r1,|L1.13260|
0031c2  391c              SUBS     r1,r1,#0x1c
0031c4  489e              LDR      r0,|L1.13376|
0031c6  f7fffffe          BL       strstr
0031ca  2800              CMP      r0,#0
0031cc  d10f              BNE      |L1.12782|
0031ce  4980              LDR      r1,|L1.13264|
0031d0  489b              LDR      r0,|L1.13376|
0031d2  f7fffffe          BL       strstr
0031d6  2800              CMP      r0,#0
0031d8  d109              BNE      |L1.12782|
0031da  4898              LDR      r0,|L1.13372|
0031dc  6800              LDR      r0,[r0,#0]  ; l
0031de  2800              CMP      r0,#0
0031e0  dd05              BLE      |L1.12782|
0031e2  497a              LDR      r1,|L1.13260|
0031e4  4896              LDR      r0,|L1.13376|
0031e6  f7fffffe          BL       strstr
0031ea  2800              CMP      r0,#0
0031ec  d0c4              BEQ      |L1.12664|
                  |L1.12782|
;;;945    							||(strstr(uart_string_gps, "ERROR\r\n"))  || (l<=0)
;;;946    				        	||(strstr(uart_string_gps, "ERROR:"))
;;;947    							));
;;;948    //		clear();
;;;949    }	
0031ee  bd70              POP      {r4-r6,pc}
;;;950    void read2(char * respA,char * respB,char * respC, int timeout)
                          ENDP

                  read2 PROC
0031f0  b5f8              PUSH     {r3-r7,lr}
;;;951    {int cntr;k=0;l=time;
0031f2  4604              MOV      r4,r0
0031f4  460e              MOV      r6,r1
0031f6  4615              MOV      r5,r2
0031f8  461f              MOV      r7,r3
0031fa  2000              MOVS     r0,#0
0031fc  498a              LDR      r1,|L1.13352|
0031fe  6008              STR      r0,[r1,#0]  ; k
003200  488d              LDR      r0,|L1.13368|
003202  6800              LDR      r0,[r0,#0]  ; time
003204  498d              LDR      r1,|L1.13372|
003206  6008              STR      r0,[r1,#0]  ; l
;;;952    			do{
003208  bf00              NOP      
                  |L1.12810|
;;;953    			if( uart_getchar_present (UART2_BASE_PTR))	
00320a  488e              LDR      r0,|L1.13380|
00320c  f7fffffe          BL       uart_getchar_present
003210  2800              CMP      r0,#0
003212  d018              BEQ      |L1.12870|
;;;954    			{uart_string_gps[k]=UART_D_REG(UART2_BASE_PTR);k++;l=time;if(k>298){k=0;}}
003214  488b              LDR      r0,|L1.13380|
003216  79c0              LDRB     r0,[r0,#7]
003218  4989              LDR      r1,|L1.13376|
00321a  4a83              LDR      r2,|L1.13352|
00321c  6812              LDR      r2,[r2,#0]  ; k
00321e  5488              STRB     r0,[r1,r2]
003220  4881              LDR      r0,|L1.13352|
003222  6800              LDR      r0,[r0,#0]  ; k
003224  1c40              ADDS     r0,r0,#1
003226  4980              LDR      r1,|L1.13352|
003228  6008              STR      r0,[r1,#0]  ; k
00322a  4883              LDR      r0,|L1.13368|
00322c  6800              LDR      r0,[r0,#0]  ; time
00322e  4983              LDR      r1,|L1.13372|
003230  6008              STR      r0,[r1,#0]  ; l
003232  487d              LDR      r0,|L1.13352|
003234  6800              LDR      r0,[r0,#0]  ; k
003236  21ff              MOVS     r1,#0xff
003238  312b              ADDS     r1,r1,#0x2b
00323a  4288              CMP      r0,r1
00323c  dd08              BLE      |L1.12880|
00323e  2000              MOVS     r0,#0
003240  4979              LDR      r1,|L1.13352|
003242  6008              STR      r0,[r1,#0]  ; k
003244  e004              B        |L1.12880|
                  |L1.12870|
;;;955    				else{				
;;;956    								l--;
003246  487d              LDR      r0,|L1.13372|
003248  6800              LDR      r0,[r0,#0]  ; l
00324a  1e40              SUBS     r0,r0,#1
00324c  497b              LDR      r1,|L1.13372|
00324e  6008              STR      r0,[r1,#0]  ; l
                  |L1.12880|
;;;957    						}
;;;958    			}while(!((strstr(uart_string_gps, respA))
003250  4621              MOV      r1,r4
003252  487b              LDR      r0,|L1.13376|
003254  f7fffffe          BL       strstr
003258  2800              CMP      r0,#0
00325a  d10f              BNE      |L1.12924|
00325c  4631              MOV      r1,r6
00325e  4878              LDR      r0,|L1.13376|
003260  f7fffffe          BL       strstr
003264  2800              CMP      r0,#0
003266  d109              BNE      |L1.12924|
003268  4874              LDR      r0,|L1.13372|
00326a  6800              LDR      r0,[r0,#0]  ; l
00326c  2800              CMP      r0,#0
00326e  dd05              BLE      |L1.12924|
003270  4629              MOV      r1,r5
003272  4873              LDR      r0,|L1.13376|
003274  f7fffffe          BL       strstr
003278  2800              CMP      r0,#0
00327a  d0c6              BEQ      |L1.12810|
                  |L1.12924|
;;;959    							||(strstr(uart_string_gps, respB))  || (l<=0) 
;;;960    				        	||(strstr(uart_string_gps, respC))
;;;961    							));
;;;962    //		clear();
;;;963    }	
00327c  bdf8              POP      {r3-r7,pc}
;;;964    
                          ENDP

                  send_modem2 PROC
;;;975    	
;;;976    void send_modem2(char ch[])
00327e  b570              PUSH     {r4-r6,lr}
;;;977    	{	
003280  4604              MOV      r4,r0
;;;978    						unsigned char i;
;;;979    						i=0;
003282  2500              MOVS     r5,#0
;;;980    						while ((*(ch+i)) != '\0') // NULL
003284  e005              B        |L1.12946|
                  |L1.12934|
;;;981    						{	
;;;982    						// delay(1);
;;;983    						 uart_putchar(UART2_BASE_PTR, (*(ch+i)));
003286  5d61              LDRB     r1,[r4,r5]
003288  486e              LDR      r0,|L1.13380|
00328a  f7fffffe          BL       uart_putchar
;;;984    						 i++;
00328e  1c68              ADDS     r0,r5,#1
003290  b2c5              UXTB     r5,r0
                  |L1.12946|
003292  5d60              LDRB     r0,[r4,r5]            ;980
003294  2800              CMP      r0,#0                 ;980
003296  d1f6              BNE      |L1.12934|
;;;985    						}
;;;986    		
;;;987    	}	
003298  bd70              POP      {r4-r6,pc}
;;;988    	
                          ENDP

                  send_GPS PROC
;;;1104   	
;;;1105   char * send_GPS(char * string, char* responseA, char* responseB, char* responseC, int timeout)
00329a  b5f8              PUSH     {r3-r7,lr}
;;;1106   {
00329c  4607              MOV      r7,r0
00329e  460c              MOV      r4,r1
0032a0  4615              MOV      r5,r2
0032a2  461e              MOV      r6,r3
;;;1107   int qweq = strlen(uart_string_gps);
0032a4  4866              LDR      r0,|L1.13376|
0032a6  f7fffffe          BL       strlen
0032aa  9000              STR      r0,[sp,#0]
;;;1108   	
;;;1109   	memset(uart_string_gps,0,qweq);
0032ac  4864              LDR      r0,|L1.13376|
0032ae  9900              LDR      r1,[sp,#0]
0032b0  f7fffffe          BL       __aeabi_memclr4
;;;1110   	clear2();
0032b4  f7fffffe          BL       clear2
;;;1111   	send_modem2(string);
0032b8  4638              MOV      r0,r7
0032ba  f7fffffe          BL       send_modem2
;;;1112   	read2(responseA,responseB,responseC,timeout);
0032be  4632              MOV      r2,r6
0032c0  4629              MOV      r1,r5
0032c2  4620              MOV      r0,r4
0032c4  9b06              LDR      r3,[sp,#0x18]
0032c6  f7fffffe          BL       read2
;;;1113   	clear2();
0032ca  f7fffffe          BL       clear2
;;;1114   	return uart_string_gps;
0032ce  485c              LDR      r0,|L1.13376|
;;;1115   }
0032d0  bdf8              POP      {r3-r7,pc}
;;;1116   	
                          ENDP

                  parse PROC
;;;1121   
;;;1122   void parse(char* str, int first, int sec, char *string)
0032d2  b5ff              PUSH     {r0-r7,lr}
;;;1123   {int i=0,j=0,temp=0;
0032d4  b081              SUB      sp,sp,#4
0032d6  4605              MOV      r5,r0
0032d8  461f              MOV      r7,r3
0032da  2400              MOVS     r4,#0
0032dc  2000              MOVS     r0,#0
0032de  9000              STR      r0,[sp,#0]
0032e0  2600              MOVS     r6,#0
;;;1124   
;;;1125   		delay(10);		
0032e2  200a              MOVS     r0,#0xa
0032e4  f7fffffe          BL       delay
;;;1126   		memset(string,0,15);
0032e8  210f              MOVS     r1,#0xf
0032ea  4638              MOV      r0,r7
0032ec  f7fffffe          BL       __aeabi_memclr
;;;1127   		for(i=0,temp=0;i<100;i++)
0032f0  bf00              NOP      
0032f2  bf00              NOP      
0032f4  e00a              B        |L1.13068|
                  |L1.13046|
;;;1128   		{
;;;1129   		if(str[i]==',')
0032f6  5d28              LDRB     r0,[r5,r4]
0032f8  282c              CMP      r0,#0x2c
0032fa  d101              BNE      |L1.13056|
;;;1130   			{temp++;j=i;}
0032fc  1c76              ADDS     r6,r6,#1
0032fe  9400              STR      r4,[sp,#0]
                  |L1.13056|
;;;1131   		else{}
;;;1132   			
;;;1133   		if(temp>=sec){i=900;}
003300  9803              LDR      r0,[sp,#0xc]
003302  4286              CMP      r6,r0
003304  db01              BLT      |L1.13066|
003306  24e1              MOVS     r4,#0xe1
003308  00a4              LSLS     r4,r4,#2
                  |L1.13066|
00330a  1c64              ADDS     r4,r4,#1              ;1127
                  |L1.13068|
00330c  2c64              CMP      r4,#0x64              ;1127
00330e  dbf2              BLT      |L1.13046|
;;;1134   		else{}	
;;;1135   		
;;;1136   		}	
;;;1137   		
;;;1138   		for(i=0,temp=0;i<100;i++)
003310  2400              MOVS     r4,#0
003312  2600              MOVS     r6,#0
003314  e00b              B        |L1.13102|
                  |L1.13078|
;;;1139   		{
;;;1140   		if(str[i]==',')
003316  5d28              LDRB     r0,[r5,r4]
003318  282c              CMP      r0,#0x2c
00331a  d102              BNE      |L1.13090|
;;;1141   			{temp++;l=i;}										
00331c  1c76              ADDS     r6,r6,#1
00331e  4847              LDR      r0,|L1.13372|
003320  6004              STR      r4,[r0,#0]  ; l
                  |L1.13090|
;;;1142   		else{}
;;;1143   		if(temp>=first){i=900;}else{}
003322  9802              LDR      r0,[sp,#8]
003324  4286              CMP      r6,r0
003326  db01              BLT      |L1.13100|
003328  24e1              MOVS     r4,#0xe1
00332a  00a4              LSLS     r4,r4,#2
                  |L1.13100|
00332c  1c64              ADDS     r4,r4,#1              ;1138
                  |L1.13102|
00332e  2c64              CMP      r4,#0x64              ;1138
003330  dbf1              BLT      |L1.13078|
;;;1144   		}	
;;;1145   		for(i=0;i<(j-l-1);i++)
003332  2400              MOVS     r4,#0
003334  e006              B        |L1.13124|
                  |L1.13110|
;;;1146   		{
;;;1147   		string[i] = str[l+i+1];
003336  4841              LDR      r0,|L1.13372|
003338  6800              LDR      r0,[r0,#0]  ; l
00333a  1900              ADDS     r0,r0,r4
00333c  1c40              ADDS     r0,r0,#1
00333e  5c28              LDRB     r0,[r5,r0]
003340  5538              STRB     r0,[r7,r4]
003342  1c64              ADDS     r4,r4,#1              ;1145
                  |L1.13124|
003344  493d              LDR      r1,|L1.13372|
003346  9800              LDR      r0,[sp,#0]            ;1145
003348  6809              LDR      r1,[r1,#0]            ;1145  ; l
00334a  1a40              SUBS     r0,r0,r1              ;1145
00334c  1e40              SUBS     r0,r0,#1              ;1145
00334e  42a0              CMP      r0,r4                 ;1145
003350  dcf1              BGT      |L1.13110|
;;;1148   		}			
;;;1149   	
;;;1150   
;;;1151   }
003352  b005              ADD      sp,sp,#0x14
003354  bdf0              POP      {r4-r7,pc}
;;;1152   
                          ENDP

                  gsm_gps_sleep PROC
;;;1221   
;;;1222   void gsm_gps_sleep()
003356  b508              PUSH     {r3,lr}
;;;1223   {
;;;1224   	
;;;1225   sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
003358  4b21              LDR      r3,|L1.13280|
00335a  4a1f              LDR      r2,|L1.13272|
00335c  4934              LDR      r1,|L1.13360|
00335e  3940              SUBS     r1,r1,#0x40
003360  4810              LDR      r0,|L1.13220|
003362  f7fffffe          BL       __2sprintf
;;;1226   send_GSM( at_ , "CONNECT", "ERROR" , "CONNECT",tmeout);										
003366  4838              LDR      r0,|L1.13384|
003368  6800              LDR      r0,[r0,#0]  ; tmeout
00336a  4b31              LDR      r3,|L1.13360|
00336c  3b10              SUBS     r3,r3,#0x10
00336e  4a18              LDR      r2,|L1.13264|
003370  3a08              SUBS     r2,r2,#8
003372  4619              MOV      r1,r3
003374  9000              STR      r0,[sp,#0]
003376  480b              LDR      r0,|L1.13220|
003378  f7fffffe          BL       send_GSM
;;;1227   send_chunk();
00337c  f7fffffe          BL       send_chunk
;;;1228   	//sleep modules;
;;;1229   //	do{
;;;1230   //				accel_read();
;;;1231   //				motion_samples = 0;
;;;1232   //				detect_motion();
;;;1233   //				
;;;1234   //	}while(motion != 1);
;;;1235   //	motion_samples = 0;
;;;1236   //wakeup modules;
;;;1237   }
003380  bd08              POP      {r3,pc}
;;;9      #include "accelerometer.c"
                          ENDP

                  hal_i2c_init PROC
;;;72     // -------------------------------------------------
;;;73     void hal_i2c_init(I2C_MemMapPtr p)
003382  4932              LDR      r1,|L1.13388|
;;;74     {
;;;75        // SIM_SCGC4 |= SIM_SCGC4_I2C1_MASK;
;;;76     
;;;77     		SIM_SCGC4 |= SIM_SCGC4_I2C0_MASK;
003384  6b49              LDR      r1,[r1,#0x34]
003386  2240              MOVS     r2,#0x40
003388  4311              ORRS     r1,r1,r2
00338a  4a30              LDR      r2,|L1.13388|
00338c  6351              STR      r1,[r2,#0x34]
;;;78         
;;;79           // configure GPIO for I2C function
;;;80         PORTE_PCR24 = PORT_PCR_MUX(5);
00338e  2105              MOVS     r1,#5
003390  0209              LSLS     r1,r1,#8
003392  4a2f              LDR      r2,|L1.13392|
003394  6211              STR      r1,[r2,#0x20]
;;;81         PORTE_PCR25 = PORT_PCR_MUX(5);
003396  6251              STR      r1,[r2,#0x24]
;;;82     
;;;83     
;;;84         
;;;85         p->F  = 0x14; // baudrate
003398  2114              MOVS     r1,#0x14
00339a  7041              STRB     r1,[r0,#1]
;;;86         p->C1 = 0x80; // enable IIC
00339c  2180              MOVS     r1,#0x80
00339e  7081              STRB     r1,[r0,#2]
;;;87     }
0033a0  4770              BX       lr
0033a2  0000              DCW      0x0000
                  |L1.13220|
                          DCD      at_
                  |L1.13224|
0033a8  0a41542b          DCB      "\nAT+FSREAD=C:\\IP_PORT.TXT,0,100,1\r\n",0
0033ac  46535245
0033b0  41443d43
0033b4  3a5c4950
0033b8  5f504f52
0033bc  542e5458
0033c0  542c302c
0033c4  3130302c
0033c8  310d0a00
                  |L1.13260|
                          DCD      ||.text||+0x880
                  |L1.13264|
                          DCD      ||.text||+0x450
                  |L1.13268|
0033d4  4f4b00            DCB      "OK",0
0033d7  00                DCB      0
                  |L1.13272|
                          DCD      ||ip||
                  |L1.13276|
                          DCD      uart_string_gsm
                  |L1.13280|
                          DCD      port
                  |L1.13284|
0033e4  0a41542b          DCB      "\nAT+FSREAD=C:\\INTERVAL.TXT,0,100,1\r\n",0
0033e8  46535245
0033ec  41443d43
0033f0  3a5c494e
0033f4  54455256
0033f8  414c2e54
0033fc  58542c30
003400  2c313030
003404  2c310d0a
003408  00      
003409  00                DCB      0
00340a  00                DCB      0
00340b  00                DCB      0
                  |L1.13324|
                          DCD      interval
                  |L1.13328|
                          DCD      int_erval
                  |L1.13332|
                          DCD      0x00001388
                  |L1.13336|
003418  0a00              DCB      "\n",0
00341a  00                DCB      0
00341b  00                DCB      0
                  |L1.13340|
                          DCD      data
                  |L1.13344|
                          DCD      tout
                  |L1.13348|
                          DCD      ||k2||
                  |L1.13352|
                          DCD      k
                  |L1.13356|
                          DCD      0x4006b000
                  |L1.13360|
                          DCD      ||.text||+0x21dc
                  |L1.13364|
                          DCD      ||.text||+0x1d90
                  |L1.13368|
                          DCD      time
                  |L1.13372|
                          DCD      l
                  |L1.13376|
                          DCD      uart_string_gps
                  |L1.13380|
                          DCD      0x4006c000
                  |L1.13384|
                          DCD      tmeout
                  |L1.13388|
                          DCD      0x40048000
                  |L1.13392|
                          DCD      0x4004d040
                          ENDP

                  hal_dev_mma8451_init PROC
;;;10     
;;;11     void hal_dev_mma8451_init(void)
003454  b500              PUSH     {lr}
;;;12     {
;;;13       hal_i2c_init(I2C0_B);
003456  48fe              LDR      r0,|L1.14416|
003458  f7fffffe          BL       hal_i2c_init
;;;14     }
00345c  bd00              POP      {pc}
;;;15     
                          ENDP

                  pause PROC
;;;19     // this delay is very important, it may cause w-r operation failure.
;;;20     static void pause(void)
00345e  2000              MOVS     r0,#0
;;;21     {
;;;22         int n;
;;;23         for(n=0; n<40; n++){}
003460  e000              B        |L1.13412|
                  |L1.13410|
003462  1c40              ADDS     r0,r0,#1
                  |L1.13412|
003464  2828              CMP      r0,#0x28
003466  dbfc              BLT      |L1.13410|
;;;24            // asm("nop");
;;;25     }
003468  4770              BX       lr
;;;26     uint32 hal_dev_mma8451_read_reg(uint8 addr)
                          ENDP

                  i2c_read_byte PROC
;;;41     }
;;;42     uint8 i2c_read_byte(I2C_MemMapPtr p)
00346a  4601              MOV      r1,r0
;;;43     {
;;;44         return p->D;
00346c  7908              LDRB     r0,[r1,#4]
;;;45     }
00346e  4770              BX       lr
;;;46     void i2c_start(I2C_MemMapPtr p)
                          ENDP

                  i2c_set_rx_mode PROC
;;;9      }
;;;10     void i2c_set_rx_mode(I2C_MemMapPtr p)
003470  7881              LDRB     r1,[r0,#2]
;;;11     {
;;;12         p->C1 &= ~I2C_C1_TX_MASK;
003472  2210              MOVS     r2,#0x10
003474  4391              BICS     r1,r1,r2
003476  7081              STRB     r1,[r0,#2]
;;;13     }
003478  4770              BX       lr
;;;14     
                          ENDP

                  i2c_set_slave_mode PROC
;;;15     void i2c_set_slave_mode(I2C_MemMapPtr p)
00347a  7881              LDRB     r1,[r0,#2]
;;;16     {
;;;17         p->C1  &= ~I2C_C1_MST_MASK;
00347c  2220              MOVS     r2,#0x20
00347e  4391              BICS     r1,r1,r2
003480  7081              STRB     r1,[r0,#2]
;;;18     }
003482  4770              BX       lr
;;;19     void i2c_set_master_mode(I2C_MemMapPtr p)
                          ENDP

                  i2c_stop PROC
;;;50     }
;;;51     void i2c_stop(I2C_MemMapPtr p)
003484  b500              PUSH     {lr}
;;;52     {
003486  4603              MOV      r3,r0
;;;53         i2c_set_slave_mode(p);
003488  4618              MOV      r0,r3
00348a  f7fffffe          BL       i2c_set_slave_mode
;;;54         i2c_set_rx_mode(p);
00348e  4618              MOV      r0,r3
003490  f7fffffe          BL       i2c_set_rx_mode
;;;55     }
003494  bd00              POP      {pc}
;;;56     void i2c_wait(I2C_MemMapPtr p)
                          ENDP

                  i2c_wait PROC
003496  49ef              LDR      r1,|L1.14420|
;;;57     {long time1out=9999;
;;;58     	
;;;59         // wait flag
;;;60         while((p->S & I2C_S_IICIF_MASK)==0    &&  (time1out >   1)){time1out--;}
003498  e000              B        |L1.13468|
                  |L1.13466|
00349a  1e49              SUBS     r1,r1,#1
                  |L1.13468|
00349c  78c2              LDRB     r2,[r0,#3]
00349e  2302              MOVS     r3,#2
0034a0  401a              ANDS     r2,r2,r3
0034a2  2a00              CMP      r2,#0
0034a4  d101              BNE      |L1.13482|
0034a6  2901              CMP      r1,#1
0034a8  dcf7              BGT      |L1.13466|
                  |L1.13482|
;;;61         // clear flag
;;;62         p->S |= I2C_S_IICIF_MASK;
0034aa  78c2              LDRB     r2,[r0,#3]
0034ac  2302              MOVS     r3,#2
0034ae  431a              ORRS     r2,r2,r3
0034b0  70c2              STRB     r2,[r0,#3]
;;;63     }
0034b2  4770              BX       lr
;;;64     uint16 i2c_get_ack(I2C_MemMapPtr p)
                          ENDP

                  i2c_give_nack PROC
;;;25     
;;;26     void i2c_give_nack(I2C_MemMapPtr p)
0034b4  7881              LDRB     r1,[r0,#2]
;;;27     {
;;;28         p->C1 |= I2C_C1_TXAK_MASK;
0034b6  2208              MOVS     r2,#8
0034b8  4311              ORRS     r1,r1,r2
0034ba  7081              STRB     r1,[r0,#2]
;;;29     }
0034bc  4770              BX       lr
;;;30     void i2c_give_ack(I2C_MemMapPtr p)
                          ENDP

                  i2c_get_ack PROC
;;;63     }
;;;64     uint16 i2c_get_ack(I2C_MemMapPtr p)
0034be  4601              MOV      r1,r0
;;;65     {
;;;66         if((p->S & I2C_S_RXAK_MASK) == 0)
0034c0  78c8              LDRB     r0,[r1,#3]
0034c2  07c0              LSLS     r0,r0,#31
0034c4  0fc0              LSRS     r0,r0,#31
0034c6  2800              CMP      r0,#0
0034c8  d101              BNE      |L1.13518|
;;;67             return TRUE;
0034ca  2001              MOVS     r0,#1
                  |L1.13516|
;;;68         else
;;;69             return FALSE;
;;;70     }
0034cc  4770              BX       lr
                  |L1.13518|
0034ce  2000              MOVS     r0,#0                 ;69
0034d0  e7fc              B        |L1.13516|
;;;71     
                          ENDP

                  i2c_write_byte PROC
;;;37     }
;;;38     void i2c_write_byte(I2C_MemMapPtr p, uint8 dat11a)
0034d2  7101              STRB     r1,[r0,#4]
;;;39     {
;;;40         p->D = dat11a;
;;;41     }
0034d4  4770              BX       lr
;;;42     uint8 i2c_read_byte(I2C_MemMapPtr p)
                          ENDP

                  i2c_repeated_start PROC
;;;33     }
;;;34     void i2c_repeated_start(I2C_MemMapPtr p)
0034d6  7881              LDRB     r1,[r0,#2]
;;;35     {
;;;36         p->C1     |= 0x04;
0034d8  2204              MOVS     r2,#4
0034da  4311              ORRS     r1,r1,r2
0034dc  7081              STRB     r1,[r0,#2]
;;;37     }
0034de  4770              BX       lr
;;;38     void i2c_write_byte(I2C_MemMapPtr p, uint8 dat11a)
                          ENDP

                  i2c_set_tx_mode PROC
;;;4      
;;;5      void i2c_set_tx_mode(I2C_MemMapPtr p)
0034e0  7881              LDRB     r1,[r0,#2]
;;;6      {
;;;7          p->C1 |= I2C_C1_TX_MASK;
0034e2  2210              MOVS     r2,#0x10
0034e4  4311              ORRS     r1,r1,r2
0034e6  7081              STRB     r1,[r0,#2]
;;;8      
;;;9      }
0034e8  4770              BX       lr
;;;10     void i2c_set_rx_mode(I2C_MemMapPtr p)
                          ENDP

                  i2c_set_master_mode PROC
;;;18     }
;;;19     void i2c_set_master_mode(I2C_MemMapPtr p)
0034ea  7881              LDRB     r1,[r0,#2]
;;;20     {
;;;21         p->C1  |=  I2C_C1_MST_MASK;
0034ec  2220              MOVS     r2,#0x20
0034ee  4311              ORRS     r1,r1,r2
0034f0  7081              STRB     r1,[r0,#2]
;;;22     }
0034f2  4770              BX       lr
;;;23     
                          ENDP

                  i2c_start PROC
;;;45     }
;;;46     void i2c_start(I2C_MemMapPtr p)
0034f4  b500              PUSH     {lr}
;;;47     {
0034f6  4603              MOV      r3,r0
;;;48         i2c_set_master_mode(p);
0034f8  4618              MOV      r0,r3
0034fa  f7fffffe          BL       i2c_set_master_mode
;;;49         i2c_set_tx_mode(p);
0034fe  4618              MOV      r0,r3
003500  f7fffffe          BL       i2c_set_tx_mode
;;;50     }
003504  bd00              POP      {pc}
;;;51     void i2c_stop(I2C_MemMapPtr p)
                          ENDP

                  hal_dev_mma8451_read_reg PROC
;;;25     }
;;;26     uint32 hal_dev_mma8451_read_reg(uint8 addr)
003506  b570              PUSH     {r4-r6,lr}
;;;27     {
003508  4604              MOV      r4,r0
;;;28         uint8 result;
;;;29     
;;;30         i2c_start(I2C0_B);
00350a  48d1              LDR      r0,|L1.14416|
00350c  f7fffffe          BL       i2c_start
;;;31         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS | I2C_WRITE);
003510  213a              MOVS     r1,#0x3a
003512  48cf              LDR      r0,|L1.14416|
003514  f7fffffe          BL       i2c_write_byte
;;;32         
;;;33         i2c_wait(I2C0_B);
003518  48cd              LDR      r0,|L1.14416|
00351a  f7fffffe          BL       i2c_wait
;;;34         i2c_get_ack(I2C0_B);
00351e  48cc              LDR      r0,|L1.14416|
003520  f7fffffe          BL       i2c_get_ack
;;;35     
;;;36         i2c_write_byte(I2C0_B, addr);
003524  4621              MOV      r1,r4
003526  48ca              LDR      r0,|L1.14416|
003528  f7fffffe          BL       i2c_write_byte
;;;37         i2c_wait(I2C0_B);
00352c  48c8              LDR      r0,|L1.14416|
00352e  f7fffffe          BL       i2c_wait
;;;38         i2c_get_ack(I2C0_B);
003532  48c7              LDR      r0,|L1.14416|
003534  f7fffffe          BL       i2c_get_ack
;;;39     
;;;40         i2c_repeated_start(I2C0_B);
003538  48c5              LDR      r0,|L1.14416|
00353a  f7fffffe          BL       i2c_repeated_start
;;;41         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS | I2C_READ);
00353e  213b              MOVS     r1,#0x3b
003540  48c3              LDR      r0,|L1.14416|
003542  f7fffffe          BL       i2c_write_byte
;;;42         i2c_wait(I2C0_B);
003546  48c2              LDR      r0,|L1.14416|
003548  f7fffffe          BL       i2c_wait
;;;43         i2c_get_ack(I2C0_B);
00354c  48c0              LDR      r0,|L1.14416|
00354e  f7fffffe          BL       i2c_get_ack
;;;44     
;;;45         i2c_set_rx_mode(I2C0_B);
003552  48bf              LDR      r0,|L1.14416|
003554  f7fffffe          BL       i2c_set_rx_mode
;;;46     
;;;47         i2c_give_nack(I2C0_B);
003558  48bd              LDR      r0,|L1.14416|
00355a  f7fffffe          BL       i2c_give_nack
;;;48         result = i2c_read_byte(I2C0_B);
00355e  48bc              LDR      r0,|L1.14416|
003560  f7fffffe          BL       i2c_read_byte
003564  4605              MOV      r5,r0
;;;49         i2c_wait(I2C0_B);
003566  48ba              LDR      r0,|L1.14416|
003568  f7fffffe          BL       i2c_wait
;;;50     
;;;51         i2c_stop(I2C0_B);
00356c  48b8              LDR      r0,|L1.14416|
00356e  f7fffffe          BL       i2c_stop
;;;52         result = i2c_read_byte(I2C0_B);
003572  48b7              LDR      r0,|L1.14416|
003574  f7fffffe          BL       i2c_read_byte
003578  4605              MOV      r5,r0
;;;53         pause();
00357a  f7fffffe          BL       pause
;;;54         return result;
00357e  4628              MOV      r0,r5
;;;55     }
003580  bd70              POP      {r4-r6,pc}
;;;56     void hal_dev_mma8451_write_reg(uint8 addr, uint8 d11ata)
                          ENDP

                  hal_dev_mma8451_write_reg PROC
003582  b570              PUSH     {r4-r6,lr}
;;;57     {
003584  4604              MOV      r4,r0
003586  460d              MOV      r5,r1
;;;58         i2c_start(I2C0_B);
003588  48b1              LDR      r0,|L1.14416|
00358a  f7fffffe          BL       i2c_start
;;;59     
;;;60         i2c_write_byte(I2C0_B, MMA8451_I2C_ADDRESS|I2C_WRITE);
00358e  213a              MOVS     r1,#0x3a
003590  48af              LDR      r0,|L1.14416|
003592  f7fffffe          BL       i2c_write_byte
;;;61         i2c_wait(I2C0_B);
003596  48ae              LDR      r0,|L1.14416|
003598  f7fffffe          BL       i2c_wait
;;;62         i2c_get_ack(I2C0_B);
00359c  48ac              LDR      r0,|L1.14416|
00359e  f7fffffe          BL       i2c_get_ack
;;;63     
;;;64         i2c_write_byte(I2C0_B, addr);
0035a2  4621              MOV      r1,r4
0035a4  48aa              LDR      r0,|L1.14416|
0035a6  f7fffffe          BL       i2c_write_byte
;;;65         i2c_wait(I2C0_B);
0035aa  48a9              LDR      r0,|L1.14416|
0035ac  f7fffffe          BL       i2c_wait
;;;66         i2c_get_ack(I2C0_B);
0035b0  48a7              LDR      r0,|L1.14416|
0035b2  f7fffffe          BL       i2c_get_ack
;;;67     
;;;68         i2c_write_byte(I2C0_B, d11ata);
0035b6  4629              MOV      r1,r5
0035b8  48a5              LDR      r0,|L1.14416|
0035ba  f7fffffe          BL       i2c_write_byte
;;;69         i2c_wait(I2C0_B);
0035be  48a4              LDR      r0,|L1.14416|
0035c0  f7fffffe          BL       i2c_wait
;;;70         i2c_get_ack(I2C0_B);
0035c4  48a2              LDR      r0,|L1.14416|
0035c6  f7fffffe          BL       i2c_get_ack
;;;71     
;;;72         i2c_stop(I2C0_B);
0035ca  48a1              LDR      r0,|L1.14416|
0035cc  f7fffffe          BL       i2c_stop
;;;73         pause();
0035d0  f7fffffe          BL       pause
;;;74     }
0035d4  bd70              POP      {r4-r6,pc}
;;;75     
                          ENDP

                  i2c_give_ack PROC
;;;29     }
;;;30     void i2c_give_ack(I2C_MemMapPtr p)
0035d6  7881              LDRB     r1,[r0,#2]
;;;31     {
;;;32         p->C1 &= ~I2C_C1_TXAK_MASK;
0035d8  2208              MOVS     r2,#8
0035da  4391              BICS     r1,r1,r2
0035dc  7081              STRB     r1,[r0,#2]
;;;33     }
0035de  4770              BX       lr
;;;34     void i2c_repeated_start(I2C_MemMapPtr p)
                          ENDP

                  hal_i2c_deinit PROC
;;;88     
;;;89     void hal_i2c_deinit(I2C_MemMapPtr p)
0035e0  2100              MOVS     r1,#0
;;;90     {
;;;91         p->C1 = 0x00;
0035e2  7081              STRB     r1,[r0,#2]
;;;92         
;;;93         SIM_SCGC4 &= ~SIM_SCGC4_I2C1_MASK;
0035e4  499c              LDR      r1,|L1.14424|
0035e6  6b49              LDR      r1,[r1,#0x34]
0035e8  2280              MOVS     r2,#0x80
0035ea  4391              BICS     r1,r1,r2
0035ec  4a9a              LDR      r2,|L1.14424|
0035ee  6351              STR      r1,[r2,#0x34]
;;;94     }
0035f0  4770              BX       lr
;;;95     
                          ENDP

                  angle_calculation PROC
;;;73     
;;;74     void angle_calculation(void)
0035f2  b5f8              PUSH     {r3-r7,lr}
;;;75      {
;;;76        signed int nv, x2, y2, z2;
;;;77     
;;;78      /*  if (accel_count != 0) return;
;;;79        accel_count = 60; //60 msec
;;;80        */
;;;81        
;;;82        nv = (signed char)(resultx);
0035f4  4899              LDR      r0,|L1.14428|
0035f6  7800              LDRB     r0,[r0,#0]  ; resultx
0035f8  b247              SXTB     r7,r0
;;;83        X_acc = median(nv, &arr_medianas[0]);
0035fa  4999              LDR      r1,|L1.14432|
0035fc  4638              MOV      r0,r7
0035fe  f7fffffe          BL       median
003602  4998              LDR      r1,|L1.14436|
003604  6008              STR      r0,[r1,#0]  ; X_acc
;;;84        
;;;85        
;;;86        nv = (signed char)(resulty);
003606  4898              LDR      r0,|L1.14440|
003608  7800              LDRB     r0,[r0,#0]  ; resulty
00360a  b247              SXTB     r7,r0
;;;87        Y_acc = median(nv, &arr_medianas[1]);
00360c  4994              LDR      r1,|L1.14432|
00360e  3124              ADDS     r1,r1,#0x24
003610  4638              MOV      r0,r7
003612  f7fffffe          BL       median
003616  4995              LDR      r1,|L1.14444|
003618  6008              STR      r0,[r1,#0]  ; Y_acc
;;;88        
;;;89        nv = (signed char)(resultz);  
00361a  4895              LDR      r0,|L1.14448|
00361c  7800              LDRB     r0,[r0,#0]  ; resultz
00361e  b247              SXTB     r7,r0
;;;90        Z_acc = median(nv, &arr_medianas[2]);
003620  498f              LDR      r1,|L1.14432|
003622  3148              ADDS     r1,r1,#0x48
003624  4638              MOV      r0,r7
003626  f7fffffe          BL       median
00362a  4992              LDR      r1,|L1.14452|
00362c  6008              STR      r0,[r1,#0]  ; Z_acc
;;;91     
;;;92        x2        = X_acc*X_acc;
00362e  488d              LDR      r0,|L1.14436|
003630  6800              LDR      r0,[r0,#0]  ; X_acc
003632  4340              MULS     r0,r0,r0
003634  4605              MOV      r5,r0
;;;93        y2        = Y_acc*Y_acc;
003636  488d              LDR      r0,|L1.14444|
003638  6800              LDR      r0,[r0,#0]  ; Y_acc
00363a  4340              MULS     r0,r0,r0
00363c  4606              MOV      r6,r0
;;;94     
;;;95        xy_mag   = sqrt_16(x2 + y2);
00363e  19a8              ADDS     r0,r5,r6
003640  f7fffffe          BL       sqrt_16
003644  498c              LDR      r1,|L1.14456|
003646  6008              STR      r0,[r1,#0]  ; xy_mag
;;;96       
;;;97        if (Y_acc<0) cat = -Y_acc; else cat = Y_acc;
003648  4888              LDR      r0,|L1.14444|
00364a  6800              LDR      r0,[r0,#0]  ; Y_acc
00364c  2800              CMP      r0,#0
00364e  da05              BGE      |L1.13916|
003650  4886              LDR      r0,|L1.14444|
003652  6800              LDR      r0,[r0,#0]  ; Y_acc
003654  4240              RSBS     r0,r0,#0
003656  4989              LDR      r1,|L1.14460|
003658  6008              STR      r0,[r1,#0]  ; cat
00365a  e003              B        |L1.13924|
                  |L1.13916|
00365c  4883              LDR      r0,|L1.14444|
00365e  6800              LDR      r0,[r0,#0]  ; Y_acc
003660  4986              LDR      r1,|L1.14460|
003662  6008              STR      r0,[r1,#0]  ; cat
                  |L1.13924|
;;;98        
;;;99        offset = (unsigned int)(cat<<7)/(unsigned int)xy_mag;
003664  4985              LDR      r1,|L1.14460|
003666  6809              LDR      r1,[r1,#0]  ; cat
003668  01c8              LSLS     r0,r1,#7
00366a  4983              LDR      r1,|L1.14456|
00366c  6809              LDR      r1,[r1,#0]  ; xy_mag
00366e  f7fffffe          BL       __aeabi_uidivmod
003672  4983              LDR      r1,|L1.14464|
003674  6008              STR      r0,[r1,#0]  ; offset
;;;100       if (offset>127) offset = 127;    
003676  4608              MOV      r0,r1
003678  6800              LDR      r0,[r0,#0]  ; offset
00367a  287f              CMP      r0,#0x7f
00367c  d901              BLS      |L1.13954|
00367e  207f              MOVS     r0,#0x7f
003680  6008              STR      r0,[r1,#0]  ; offset
                  |L1.13954|
;;;101       xy_angle = asin[offset];
003682  487f              LDR      r0,|L1.14464|
003684  6800              LDR      r0,[r0,#0]  ; offset
003686  0080              LSLS     r0,r0,#2
003688  497e              LDR      r1,|L1.14468|
00368a  5808              LDR      r0,[r1,r0]
00368c  497e              LDR      r1,|L1.14472|
00368e  6008              STR      r0,[r1,#0]  ; xy_angle
;;;102       
;;;103       if (Y_acc>0)  xy_angle = -xy_angle;
003690  4876              LDR      r0,|L1.14444|
003692  6800              LDR      r0,[r0,#0]  ; Y_acc
003694  2800              CMP      r0,#0
003696  dd03              BLE      |L1.13984|
003698  4608              MOV      r0,r1
00369a  6800              LDR      r0,[r0,#0]  ; xy_angle
00369c  4240              RSBS     r0,r0,#0
00369e  6008              STR      r0,[r1,#0]  ; xy_angle
                  |L1.13984|
;;;104       
;;;105     
;;;106       /////////   
;;;107       
;;;108       z2        = Z_acc*Z_acc;   
0036a0  4874              LDR      r0,|L1.14452|
0036a2  6800              LDR      r0,[r0,#0]  ; Z_acc
0036a4  4604              MOV      r4,r0
0036a6  4344              MULS     r4,r0,r4
;;;109       xz_mag    = sqrt_16(x2 + z2);
0036a8  1928              ADDS     r0,r5,r4
0036aa  f7fffffe          BL       sqrt_16
0036ae  4977              LDR      r1,|L1.14476|
0036b0  6008              STR      r0,[r1,#0]  ; xz_mag
;;;110       if (X_acc<0) cat = -X_acc; else cat = X_acc;
0036b2  486c              LDR      r0,|L1.14436|
0036b4  6800              LDR      r0,[r0,#0]  ; X_acc
0036b6  2800              CMP      r0,#0
0036b8  da05              BGE      |L1.14022|
0036ba  486a              LDR      r0,|L1.14436|
0036bc  6800              LDR      r0,[r0,#0]  ; X_acc
0036be  4240              RSBS     r0,r0,#0
0036c0  496e              LDR      r1,|L1.14460|
0036c2  6008              STR      r0,[r1,#0]  ; cat
0036c4  e003              B        |L1.14030|
                  |L1.14022|
0036c6  4867              LDR      r0,|L1.14436|
0036c8  6800              LDR      r0,[r0,#0]  ; X_acc
0036ca  496c              LDR      r1,|L1.14460|
0036cc  6008              STR      r0,[r1,#0]  ; cat
                  |L1.14030|
;;;111       offset = (unsigned int)(cat<<7)/(unsigned int)xz_mag;
0036ce  496b              LDR      r1,|L1.14460|
0036d0  6809              LDR      r1,[r1,#0]  ; cat
0036d2  01c8              LSLS     r0,r1,#7
0036d4  496d              LDR      r1,|L1.14476|
0036d6  6809              LDR      r1,[r1,#0]  ; xz_mag
0036d8  f7fffffe          BL       __aeabi_uidivmod
0036dc  4968              LDR      r1,|L1.14464|
0036de  6008              STR      r0,[r1,#0]  ; offset
;;;112       if (offset>127) offset = 127;    
0036e0  4608              MOV      r0,r1
0036e2  6800              LDR      r0,[r0,#0]  ; offset
0036e4  287f              CMP      r0,#0x7f
0036e6  d901              BLS      |L1.14060|
0036e8  207f              MOVS     r0,#0x7f
0036ea  6008              STR      r0,[r1,#0]  ; offset
                  |L1.14060|
;;;113       xz_angle = asin[offset];
0036ec  4864              LDR      r0,|L1.14464|
0036ee  6800              LDR      r0,[r0,#0]  ; offset
0036f0  0080              LSLS     r0,r0,#2
0036f2  4964              LDR      r1,|L1.14468|
0036f4  5808              LDR      r0,[r1,r0]
0036f6  4966              LDR      r1,|L1.14480|
0036f8  6008              STR      r0,[r1,#0]  ; xz_angle
;;;114       
;;;115       if (X_acc>0)  xz_angle = -xz_angle;
0036fa  485a              LDR      r0,|L1.14436|
0036fc  6800              LDR      r0,[r0,#0]  ; X_acc
0036fe  2800              CMP      r0,#0
003700  dd03              BLE      |L1.14090|
003702  4608              MOV      r0,r1
003704  6800              LDR      r0,[r0,#0]  ; xz_angle
003706  4240              RSBS     r0,r0,#0
003708  6008              STR      r0,[r1,#0]  ; xz_angle
                  |L1.14090|
;;;116       
;;;117    
;;;118       yz_mag    = sqrt_16(y2 + z2);
00370a  1930              ADDS     r0,r6,r4
00370c  f7fffffe          BL       sqrt_16
003710  4960              LDR      r1,|L1.14484|
003712  6008              STR      r0,[r1,#0]  ; yz_mag
;;;119       if (Y_acc<0) cat = -Y_acc; else cat = Y_acc;
003714  4855              LDR      r0,|L1.14444|
003716  6800              LDR      r0,[r0,#0]  ; Y_acc
003718  2800              CMP      r0,#0
00371a  da05              BGE      |L1.14120|
00371c  4853              LDR      r0,|L1.14444|
00371e  6800              LDR      r0,[r0,#0]  ; Y_acc
003720  4240              RSBS     r0,r0,#0
003722  4956              LDR      r1,|L1.14460|
003724  6008              STR      r0,[r1,#0]  ; cat
003726  e003              B        |L1.14128|
                  |L1.14120|
003728  4850              LDR      r0,|L1.14444|
00372a  6800              LDR      r0,[r0,#0]  ; Y_acc
00372c  4953              LDR      r1,|L1.14460|
00372e  6008              STR      r0,[r1,#0]  ; cat
                  |L1.14128|
;;;120       offset = (unsigned int)(cat<<7)/(unsigned int)yz_mag;
003730  4952              LDR      r1,|L1.14460|
003732  6809              LDR      r1,[r1,#0]  ; cat
003734  01c8              LSLS     r0,r1,#7
003736  4957              LDR      r1,|L1.14484|
003738  6809              LDR      r1,[r1,#0]  ; yz_mag
00373a  f7fffffe          BL       __aeabi_uidivmod
00373e  4950              LDR      r1,|L1.14464|
003740  6008              STR      r0,[r1,#0]  ; offset
;;;121       if (offset>127) offset = 127;    
003742  4608              MOV      r0,r1
003744  6800              LDR      r0,[r0,#0]  ; offset
003746  287f              CMP      r0,#0x7f
003748  d901              BLS      |L1.14158|
00374a  207f              MOVS     r0,#0x7f
00374c  6008              STR      r0,[r1,#0]  ; offset
                  |L1.14158|
;;;122       yz_angle = asin[offset];
00374e  484c              LDR      r0,|L1.14464|
003750  6800              LDR      r0,[r0,#0]  ; offset
003752  0080              LSLS     r0,r0,#2
003754  494b              LDR      r1,|L1.14468|
003756  5808              LDR      r0,[r1,r0]
003758  494f              LDR      r1,|L1.14488|
00375a  6008              STR      r0,[r1,#0]  ; yz_angle
;;;123       if (Y_acc>0)  yz_angle = -yz_angle;
00375c  4843              LDR      r0,|L1.14444|
00375e  6800              LDR      r0,[r0,#0]  ; Y_acc
003760  2800              CMP      r0,#0
003762  dd03              BLE      |L1.14188|
003764  4608              MOV      r0,r1
003766  6800              LDR      r0,[r0,#0]  ; yz_angle
003768  4240              RSBS     r0,r0,#0
00376a  6008              STR      r0,[r1,#0]  ; yz_angle
                  |L1.14188|
;;;124        
;;;125     }
00376c  bdf8              POP      {r3-r7,pc}
;;;126    
                          ENDP

                  detect_fall_detection PROC
;;;129    #define FALL_LIMIT  45//50
;;;130    void detect_fall_detection(void)
00376e  4842              LDR      r0,|L1.14456|
;;;131    {
;;;132       if (xy_mag<FALL_LIMIT && xz_mag < FALL_LIMIT && yz_mag < FALL_LIMIT  && !ti_fall) 
003770  6800              LDR      r0,[r0,#0]  ; xy_mag
003772  282d              CMP      r0,#0x2d
003774  d20f              BCS      |L1.14230|
003776  4845              LDR      r0,|L1.14476|
003778  6800              LDR      r0,[r0,#0]  ; xz_mag
00377a  282d              CMP      r0,#0x2d
00377c  d20b              BCS      |L1.14230|
00377e  4845              LDR      r0,|L1.14484|
003780  6800              LDR      r0,[r0,#0]  ; yz_mag
003782  282d              CMP      r0,#0x2d
003784  d207              BCS      |L1.14230|
003786  4845              LDR      r0,|L1.14492|
003788  8800              LDRH     r0,[r0,#0]  ; ti_fall
00378a  2800              CMP      r0,#0
00378c  d103              BNE      |L1.14230|
;;;133        fall_input=1;
00378e  2001              MOVS     r0,#1
003790  4943              LDR      r1,|L1.14496|
003792  7008              STRB     r0,[r1,#0]
003794  e005              B        |L1.14242|
                  |L1.14230|
;;;134       else 
;;;135       {
;;;136         fall_input = 0;
003796  2000              MOVS     r0,#0
003798  4941              LDR      r1,|L1.14496|
00379a  7008              STRB     r0,[r1,#0]
;;;137         ti_fall = 10;
00379c  200a              MOVS     r0,#0xa
00379e  493f              LDR      r1,|L1.14492|
0037a0  8008              STRH     r0,[r1,#0]
                  |L1.14242|
;;;138        }
;;;139       
;;;140    }
0037a2  4770              BX       lr
;;;141    
                          ENDP

                  accel_init PROC
;;;29     
;;;30     void accel_init(void)
0037a4  b510              PUSH     {r4,lr}
;;;31     {
;;;32         unsigned char tmp;
;;;33         //printf("****Accelerometor init ****\n");
;;;34         //Configure MMA8451 sensor //MMA8451Q
;;;35         hal_dev_mma8451_init();      //Initialize I2C modules
0037a6  f7fffffe          BL       hal_dev_mma8451_init
;;;36         tmp = hal_dev_mma8451_read_reg(FXOS8700CQ_CTRL_REG1);
0037aa  202a              MOVS     r0,#0x2a
0037ac  f7fffffe          BL       hal_dev_mma8451_read_reg
0037b0  b2c4              UXTB     r4,r0
;;;37         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp&0xFE);
0037b2  20fe              MOVS     r0,#0xfe
0037b4  4020              ANDS     r0,r0,r4
0037b6  4601              MOV      r1,r0
0037b8  202a              MOVS     r0,#0x2a
0037ba  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;38         tmp &= ~0xFE;
0037be  21fe              MOVS     r1,#0xfe
0037c0  4620              MOV      r0,r4
0037c2  4388              BICS     r0,r0,r1
0037c4  4604              MOV      r4,r0
;;;39         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp|0x02);
0037c6  2002              MOVS     r0,#2
0037c8  4320              ORRS     r0,r0,r4
0037ca  4601              MOV      r1,r0
0037cc  202a              MOVS     r0,#0x2a
0037ce  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;40         tmp |= 0x02;
0037d2  2002              MOVS     r0,#2
0037d4  4304              ORRS     r4,r4,r0
;;;41         hal_dev_mma8451_write_reg(FXOS8700CQ_CTRL_REG1,tmp|0x01);
0037d6  2001              MOVS     r0,#1
0037d8  4320              ORRS     r0,r0,r4
0037da  4601              MOV      r1,r0
0037dc  202a              MOVS     r0,#0x2a
0037de  f7fffffe          BL       hal_dev_mma8451_write_reg
;;;42     //		tmp = hal_dev_mma8451_read_reg(A_FFMT_CFG);
;;;43     //		hal_dev_mma8451_write_reg(A_FFMT_CFG,hal_dev_mma8451_read_reg(A_FFMT_CFG)|0x40);
;;;44     }
0037e2  bd10              POP      {r4,pc}
;;;45     
                          ENDP

                  accel_read PROC
;;;47     /******************************************************************************/
;;;48     void accel_read(void)
0037e4  b570              PUSH     {r4-r6,lr}
;;;49     {
0037e6  b086              SUB      sp,sp,#0x18
;;;50         if((hal_dev_mma8451_read_reg(0x00)&0xf) != 0)
0037e8  2000              MOVS     r0,#0
0037ea  f7fffffe          BL       hal_dev_mma8451_read_reg
0037ee  0700              LSLS     r0,r0,#28
0037f0  0f00              LSRS     r0,r0,#28
0037f2  2800              CMP      r0,#0
0037f4  d07e              BEQ      |L1.14580|
;;;51         {
;;;52     accel_x = (int16_t)(((hal_dev_mma8451_read_reg(0x01) << 8) | hal_dev_mma8451_read_reg(0x02)))>> 2;		
0037f6  2001              MOVS     r0,#1
0037f8  f7fffffe          BL       hal_dev_mma8451_read_reg
0037fc  0204              LSLS     r4,r0,#8
0037fe  2002              MOVS     r0,#2
003800  f7fffffe          BL       hal_dev_mma8451_read_reg
003804  4304              ORRS     r4,r4,r0
003806  b220              SXTH     r0,r4
003808  1080              ASRS     r0,r0,#2
00380a  4926              LDR      r1,|L1.14500|
00380c  8008              STRH     r0,[r1,#0]
;;;53     accel_y = (int16_t)(((hal_dev_mma8451_read_reg(0x03) << 8) | hal_dev_mma8451_read_reg(0x04)))>> 2;		
00380e  2003              MOVS     r0,#3
003810  f7fffffe          BL       hal_dev_mma8451_read_reg
003814  0204              LSLS     r4,r0,#8
003816  2004              MOVS     r0,#4
003818  f7fffffe          BL       hal_dev_mma8451_read_reg
00381c  4304              ORRS     r4,r4,r0
00381e  b220              SXTH     r0,r4
003820  1080              ASRS     r0,r0,#2
003822  4921              LDR      r1,|L1.14504|
003824  8008              STRH     r0,[r1,#0]
;;;54     accel_z = (int16_t)(((hal_dev_mma8451_read_reg(0x05) << 8) | hal_dev_mma8451_read_reg(0x06)))>> 2;					
003826  2005              MOVS     r0,#5
003828  f7fffffe          BL       hal_dev_mma8451_read_reg
00382c  0204              LSLS     r4,r0,#8
00382e  2006              MOVS     r0,#6
003830  f7fffffe          BL       hal_dev_mma8451_read_reg
003834  4304              ORRS     r4,r4,r0
003836  b220              SXTH     r0,r4
003838  1080              ASRS     r0,r0,#2
00383a  491c              LDR      r1,|L1.14508|
00383c  8008              STRH     r0,[r1,#0]
;;;55     magx = (hal_dev_mma8451_read_reg(0x07) << 8) | hal_dev_mma8451_read_reg(0x08);
00383e  2007              MOVS     r0,#7
003840  f7fffffe          BL       hal_dev_mma8451_read_reg
003844  0204              LSLS     r4,r0,#8
003846  2008              MOVS     r0,#8
003848  f7fffffe          BL       hal_dev_mma8451_read_reg
00384c  4304              ORRS     r4,r4,r0
00384e  e02f              B        |L1.14512|
                  |L1.14416|
                          DCD      0x40066000
                  |L1.14420|
                          DCD      0x0000270f
                  |L1.14424|
                          DCD      0x40048000
                  |L1.14428|
                          DCD      resultx
                  |L1.14432|
                          DCD      arr_medianas
                  |L1.14436|
                          DCD      X_acc
                  |L1.14440|
                          DCD      resulty
                  |L1.14444|
                          DCD      Y_acc
                  |L1.14448|
                          DCD      resultz
                  |L1.14452|
                          DCD      Z_acc
                  |L1.14456|
                          DCD      xy_mag
                  |L1.14460|
                          DCD      ||cat||
                  |L1.14464|
                          DCD      offset
                  |L1.14468|
                          DCD      asin
                  |L1.14472|
                          DCD      xy_angle
                  |L1.14476|
                          DCD      xz_mag
                  |L1.14480|
                          DCD      xz_angle
                  |L1.14484|
                          DCD      yz_mag
                  |L1.14488|
                          DCD      yz_angle
                  |L1.14492|
                          DCD      ti_fall
                  |L1.14496|
                          DCD      fall_input
                  |L1.14500|
                          DCD      accel_x
                  |L1.14504|
                          DCD      accel_y
                  |L1.14508|
                          DCD      accel_z
                  |L1.14512|
0038b0  48fc              LDR      r0,|L1.15524|
0038b2  6004              STR      r4,[r0,#0]  ; magx
;;;56     magy = (hal_dev_mma8451_read_reg(0x09) << 8) | hal_dev_mma8451_read_reg(0x0A);
0038b4  2009              MOVS     r0,#9
0038b6  f7fffffe          BL       hal_dev_mma8451_read_reg
0038ba  0204              LSLS     r4,r0,#8
0038bc  200a              MOVS     r0,#0xa
0038be  f7fffffe          BL       hal_dev_mma8451_read_reg
0038c2  4304              ORRS     r4,r4,r0
0038c4  48f8              LDR      r0,|L1.15528|
0038c6  6004              STR      r4,[r0,#0]  ; magy
;;;57     magz = (hal_dev_mma8451_read_reg(0x0B) << 8) | hal_dev_mma8451_read_reg(0x0C);
0038c8  200b              MOVS     r0,#0xb
0038ca  f7fffffe          BL       hal_dev_mma8451_read_reg
0038ce  0204              LSLS     r4,r0,#8
0038d0  200c              MOVS     r0,#0xc
0038d2  f7fffffe          BL       hal_dev_mma8451_read_reg
0038d6  4304              ORRS     r4,r4,r0
0038d8  48f4              LDR      r0,|L1.15532|
0038da  6004              STR      r4,[r0,#0]  ; magz
;;;58     temp = hal_dev_mma8451_read_reg(0x51);
0038dc  2051              MOVS     r0,#0x51
0038de  f7fffffe          BL       hal_dev_mma8451_read_reg
0038e2  49f3              LDR      r1,|L1.15536|
0038e4  6008              STR      r0,[r1,#0]  ; temp
;;;59     
;;;60             resultx   = hal_dev_mma8451_read_reg(0x01)<<8;
0038e6  2001              MOVS     r0,#1
0038e8  f7fffffe          BL       hal_dev_mma8451_read_reg
0038ec  0200              LSLS     r0,r0,#8
0038ee  b200              SXTH     r0,r0
0038f0  49f0              LDR      r1,|L1.15540|
0038f2  e000              B        |L1.14582|
                  |L1.14580|
0038f4  e070              B        |L1.14808|
                  |L1.14582|
0038f6  8008              STRH     r0,[r1,#0]
;;;61             resultx  |= hal_dev_mma8451_read_reg(0x02);
0038f8  2002              MOVS     r0,#2
0038fa  f7fffffe          BL       hal_dev_mma8451_read_reg
0038fe  49ed              LDR      r1,|L1.15540|
003900  8809              LDRH     r1,[r1,#0]  ; resultx
003902  4308              ORRS     r0,r0,r1
003904  b200              SXTH     r0,r0
003906  49eb              LDR      r1,|L1.15540|
003908  8008              STRH     r0,[r1,#0]
;;;62             resultx >>= 8;
00390a  4608              MOV      r0,r1
00390c  2100              MOVS     r1,#0
00390e  5e41              LDRSH    r1,[r0,r1]  ; resultx
003910  1208              ASRS     r0,r1,#8
003912  49e8              LDR      r1,|L1.15540|
003914  8008              STRH     r0,[r1,#0]
;;;63     
;;;64             resulty   = hal_dev_mma8451_read_reg(0x03)<<8;
003916  2003              MOVS     r0,#3
003918  f7fffffe          BL       hal_dev_mma8451_read_reg
00391c  0200              LSLS     r0,r0,#8
00391e  b200              SXTH     r0,r0
003920  49e5              LDR      r1,|L1.15544|
003922  8008              STRH     r0,[r1,#0]
;;;65             resulty  |= hal_dev_mma8451_read_reg(0x04);
003924  2004              MOVS     r0,#4
003926  f7fffffe          BL       hal_dev_mma8451_read_reg
00392a  49e3              LDR      r1,|L1.15544|
00392c  8809              LDRH     r1,[r1,#0]  ; resulty
00392e  4308              ORRS     r0,r0,r1
003930  b200              SXTH     r0,r0
003932  49e1              LDR      r1,|L1.15544|
003934  8008              STRH     r0,[r1,#0]
;;;66             resulty >>= 8;
003936  4608              MOV      r0,r1
003938  2100              MOVS     r1,#0
00393a  5e41              LDRSH    r1,[r0,r1]  ; resulty
00393c  1208              ASRS     r0,r1,#8
00393e  49de              LDR      r1,|L1.15544|
003940  8008              STRH     r0,[r1,#0]
;;;67     
;;;68             resultz   = hal_dev_mma8451_read_reg(0x05)<<8;
003942  2005              MOVS     r0,#5
003944  f7fffffe          BL       hal_dev_mma8451_read_reg
003948  0200              LSLS     r0,r0,#8
00394a  b200              SXTH     r0,r0
00394c  49db              LDR      r1,|L1.15548|
00394e  8008              STRH     r0,[r1,#0]
;;;69             resultz  |= hal_dev_mma8451_read_reg(0x06);
003950  2006              MOVS     r0,#6
003952  f7fffffe          BL       hal_dev_mma8451_read_reg
003956  49d9              LDR      r1,|L1.15548|
003958  8809              LDRH     r1,[r1,#0]  ; resultz
00395a  4308              ORRS     r0,r0,r1
00395c  b200              SXTH     r0,r0
00395e  49d7              LDR      r1,|L1.15548|
003960  8008              STRH     r0,[r1,#0]
;;;70             resultz >>= 8;
003962  4608              MOV      r0,r1
003964  2100              MOVS     r1,#0
003966  5e41              LDRSH    r1,[r0,r1]  ; resultz
003968  1208              ASRS     r0,r1,#8
00396a  49d4              LDR      r1,|L1.15548|
00396c  8008              STRH     r0,[r1,#0]
;;;71     
;;;72             angle_calculation(); //-900  to  900
00396e  f7fffffe          BL       angle_calculation
;;;73             detect_fall_detection();
003972  f7fffffe          BL       detect_fall_detection
;;;74     
;;;75     	//		hal_dev_mma8451_write_reg(A_FFMT_CFG,0xFF);		
;;;76     	//		hal_dev_mma8451_write_reg(A_FFMT_SRC,0xFF);					
;;;77     	printf("\n\t\t******************\n\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t,\t%d,\t%x,\t%x\n\t\t*******************\n",xy_angle+offxy,xz_angle+offxz,yz_angle+offyz,resultx+offx,resulty+offy,resultz+offz,hal_dev_mma8451_read_reg(A_FFMT_CFG),hal_dev_mma8451_read_reg(A_FFMT_SRC));			
003976  2016              MOVS     r0,#0x16
003978  f7fffffe          BL       hal_dev_mma8451_read_reg
00397c  4604              MOV      r4,r0
00397e  2015              MOVS     r0,#0x15
003980  f7fffffe          BL       hal_dev_mma8451_read_reg
003984  4605              MOV      r5,r0
003986  49cd              LDR      r1,|L1.15548|
003988  2000              MOVS     r0,#0
00398a  5e08              LDRSH    r0,[r1,r0]  ; resultz
00398c  49cc              LDR      r1,|L1.15552|
00398e  6809              LDR      r1,[r1,#0]  ; offz
003990  1840              ADDS     r0,r0,r1
003992  4ac9              LDR      r2,|L1.15544|
003994  2100              MOVS     r1,#0
003996  5e51              LDRSH    r1,[r2,r1]  ; resulty
003998  4aca              LDR      r2,|L1.15556|
00399a  6812              LDR      r2,[r2,#0]  ; offy
00399c  1889              ADDS     r1,r1,r2
00399e  9503              STR      r5,[sp,#0xc]
0039a0  9404              STR      r4,[sp,#0x10]
0039a2  9101              STR      r1,[sp,#4]
0039a4  9002              STR      r0,[sp,#8]
0039a6  49c3              LDR      r1,|L1.15540|
0039a8  2000              MOVS     r0,#0
0039aa  5e08              LDRSH    r0,[r1,r0]  ; resultx
0039ac  49c6              LDR      r1,|L1.15560|
0039ae  6809              LDR      r1,[r1,#0]  ; offx
0039b0  1840              ADDS     r0,r0,r1
0039b2  9000              STR      r0,[sp,#0]
0039b4  48c5              LDR      r0,|L1.15564|
0039b6  6800              LDR      r0,[r0,#0]  ; yz_angle
0039b8  4ec5              LDR      r6,|L1.15568|
0039ba  6836              LDR      r6,[r6,#0]  ; offyz
0039bc  1983              ADDS     r3,r0,r6
0039be  48c5              LDR      r0,|L1.15572|
0039c0  6800              LDR      r0,[r0,#0]  ; xz_angle
0039c2  4ec5              LDR      r6,|L1.15576|
0039c4  6836              LDR      r6,[r6,#0]  ; offxz
0039c6  1982              ADDS     r2,r0,r6
0039c8  48c4              LDR      r0,|L1.15580|
0039ca  6800              LDR      r0,[r0,#0]  ; xy_angle
0039cc  4ec4              LDR      r6,|L1.15584|
0039ce  6836              LDR      r6,[r6,#0]  ; offxy
0039d0  1981              ADDS     r1,r0,r6
0039d2  48c4              LDR      r0,|L1.15588|
0039d4  f7fffffe          BL       __2printf
                  |L1.14808|
;;;78     
;;;79     
;;;80     		}
;;;81     }
0039d8  b006              ADD      sp,sp,#0x18
0039da  bd70              POP      {r4-r6,pc}
;;;82     /******************************************************************************/
                          ENDP

                  detect_motion PROC
;;;85     
;;;86     void detect_motion()
0039dc  b510              PUSH     {r4,lr}
;;;87     {speed=0;
0039de  2000              MOVS     r0,#0
0039e0  49c1              LDR      r1,|L1.15592|
0039e2  6008              STR      r0,[r1,#0]  ; speed
;;;88     	
;;;89     			//if accelerometer works do this
;;;90     	//current status : not working under test
;;;91     //						if(	(resultx+offx>temp1x+2) || (resultx+offx<temp1x-2) ||  (resulty+offy>temp1y+2) || (resulty+offy<temp1y-2)||(resultz+offz>temp1z+2)||(resultz+offz<temp1z-2)	)
;;;92     //						{motion = 1;}
;;;93     //						else
;;;94     //						{motion = 0;}
;;;95     
;;;96     //						temp1x=resultx+offx;
;;;97     //						temp1y=resulty+offy;
;;;98     //						temp1z=resultz+offz;  
;;;99     
;;;100    			//else do this
;;;101    if(speed <  5)
0039e4  49c1              LDR      r1,|L1.15596|
0039e6  48c0              LDR      r0,|L1.15592|
0039e8  6800              LDR      r0,[r0,#0]  ; speed
0039ea  f7fffffe          BL       __aeabi_cfcmple
0039ee  d203              BCS      |L1.14840|
;;;102    {motion = 0;}
0039f0  2000              MOVS     r0,#0
0039f2  49bf              LDR      r1,|L1.15600|
0039f4  6008              STR      r0,[r1,#0]  ; motion
0039f6  e002              B        |L1.14846|
                  |L1.14840|
;;;103    else 
;;;104    {motion = 1;}
0039f8  2001              MOVS     r0,#1
0039fa  49bd              LDR      r1,|L1.15600|
0039fc  6008              STR      r0,[r1,#0]  ; motion
                  |L1.14846|
;;;105        //
;;;106    
;;;107    if(motion == 0)
0039fe  48bc              LDR      r0,|L1.15600|
003a00  6800              LDR      r0,[r0,#0]  ; motion
003a02  2800              CMP      r0,#0
003a04  d105              BNE      |L1.14866|
;;;108    	motion_samples++;
003a06  48bb              LDR      r0,|L1.15604|
003a08  6800              LDR      r0,[r0,#0]  ; motion_samples
003a0a  1c40              ADDS     r0,r0,#1
003a0c  49b9              LDR      r1,|L1.15604|
003a0e  6008              STR      r0,[r1,#0]  ; motion_samples
003a10  e002              B        |L1.14872|
                  |L1.14866|
;;;109    else
;;;110    	motion_samples = 0;
003a12  2000              MOVS     r0,#0
003a14  49b7              LDR      r1,|L1.15604|
003a16  6008              STR      r0,[r1,#0]  ; motion_samples
                  |L1.14872|
;;;111    
;;;112    
;;;113    
;;;114    
;;;115    }
003a18  bd10              POP      {r4,pc}
;;;10     #include "gps.c"
                          ENDP

                  RELAY_init PROC
;;;9      
;;;10     void RELAY_init(void)
003a1a  48b7              LDR      r0,|L1.15608|
;;;11     {
;;;12     
;;;13         SIM_SCGC5 |= SIM_SCGC5_PORTA_MASK ;      //Turn on clock to PORTE & D module
003a1c  6b80              LDR      r0,[r0,#0x38]
003a1e  2101              MOVS     r1,#1
003a20  0249              LSLS     r1,r1,#9
003a22  4308              ORRS     r0,r0,r1
003a24  49b4              LDR      r1,|L1.15608|
003a26  6388              STR      r0,[r1,#0x38]
;;;14         PORTA_PCR1 = PORT_PCR_MUX(0x1);            //Set the PTA1 pin multiplexer to GPIO mode
003a28  1588              ASRS     r0,r1,#22
003a2a  49b4              LDR      r1,|L1.15612|
003a2c  6048              STR      r0,[r1,#4]
;;;15         PORTA_PCR2 = PORT_PCR_MUX(0x1);            //Set the PTA1 pin multiplexer to GPIO mode
003a2e  6088              STR      r0,[r1,#8]
;;;16     	
;;;17         GPIOA_PSOR |= IGNITION_SHIFT | FUEL_SHIFT;      //Set the initial output state to high	
003a30  48b3              LDR      r0,|L1.15616|
003a32  6840              LDR      r0,[r0,#4]
003a34  2106              MOVS     r1,#6
003a36  4308              ORRS     r0,r0,r1
003a38  49b1              LDR      r1,|L1.15616|
003a3a  6048              STR      r0,[r1,#4]
;;;18         GPIOA_PDDR |= IGNITION_SHIFT | FUEL_SHIFT;  //Set the pin's direction to output	
003a3c  4608              MOV      r0,r1
003a3e  6940              LDR      r0,[r0,#0x14]
003a40  2106              MOVS     r1,#6
003a42  4308              ORRS     r0,r0,r1
003a44  49ae              LDR      r1,|L1.15616|
003a46  6148              STR      r0,[r1,#0x14]
;;;19     	
;;;20     IGNITION_ON;
003a48  2002              MOVS     r0,#2
003a4a  6088              STR      r0,[r1,#8]
;;;21     FUEL_ON;
003a4c  2004              MOVS     r0,#4
003a4e  6088              STR      r0,[r1,#8]
;;;22     	
;;;23     }
003a50  4770              BX       lr
;;;24     
                          ENDP

                  LED_init PROC
;;;25     
;;;26     void LED_init(void){
003a52  48a9              LDR      r0,|L1.15608|
;;;27       
;;;28         SIM_SCGC5 |= SIM_SCGC5_PORTE_MASK | SIM_SCGC5_PORTB_MASK | SIM_SCGC5_PORTD_MASK | SIM_SCGC5_PORTC_MASK ;      //Turn on clock to PORTE & D module
003a54  6b80              LDR      r0,[r0,#0x38]
003a56  210f              MOVS     r1,#0xf
003a58  0289              LSLS     r1,r1,#10
003a5a  4308              ORRS     r0,r0,r1
003a5c  49a6              LDR      r1,|L1.15608|
003a5e  6388              STR      r0,[r1,#0x38]
;;;29     
;;;30     		 
;;;31     
;;;32     		PORTE_PCR29 = PORT_PCR_MUX(0x1);            //Set the PTE29 pin multiplexer to GPIO mode
003a60  1588              ASRS     r0,r1,#22
003a62  49a8              LDR      r1,|L1.15620|
003a64  6348              STR      r0,[r1,#0x34]
;;;33       	PORTD_PCR7 = PORT_PCR_MUX(0x1);            //Set the PTE29 pin multiplexer to GPIO mode
003a66  49a8              LDR      r1,|L1.15624|
003a68  61c8              STR      r0,[r1,#0x1c]
;;;34         PORTE_PCR31 = PORT_PCR_MUX(0x1);	        //Set the PTE31 pin multiplexer to GPIO mode
003a6a  49a6              LDR      r1,|L1.15620|
003a6c  63c8              STR      r0,[r1,#0x3c]
;;;35         PORTD_PCR5 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode
003a6e  49a6              LDR      r1,|L1.15624|
003a70  6148              STR      r0,[r1,#0x14]
;;;36     	
;;;37         PORTC_PCR5 = PORT_PCR_MUX(0x1);            //Set the PTE29 pin multiplexer to GPIO mode
003a72  49a6              LDR      r1,|L1.15628|
003a74  6148              STR      r0,[r1,#0x14]
;;;38         PORTC_PCR6 = PORT_PCR_MUX(0x1);	        //Set the PTE31 pin multiplexer to GPIO mode
003a76  6188              STR      r0,[r1,#0x18]
;;;39         PORTC_PCR7 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode	
003a78  61c8              STR      r0,[r1,#0x1c]
;;;40         PORTC_PCR8 = PORT_PCR_MUX(0x1);             //Set the PTD5 pin multiplexer to GPIO mode	    
003a7a  6208              STR      r0,[r1,#0x20]
;;;41     		
;;;42     	PORTB_PCR1 = PORT_PCR_MUX(0x1)| PORT_PCR_PE_MASK | PORT_PCR_PS_SHIFT; //		GPIOB_PDDR = 0;
003a7c  1c80              ADDS     r0,r0,#2
003a7e  49a4              LDR      r1,|L1.15632|
003a80  6048              STR      r0,[r1,#4]
;;;43     //		GPIOB_PCOR |= ADCIGN_SHIFT 	;			//set initial input stage 0;
;;;44     	PTB->PDDR &= ~MASK(ADCIGN);
003a82  489f              LDR      r0,|L1.15616|
003a84  3040              ADDS     r0,r0,#0x40
003a86  6940              LDR      r0,[r0,#0x14]
003a88  2102              MOVS     r1,#2
003a8a  4388              BICS     r0,r0,r1
003a8c  499c              LDR      r1,|L1.15616|
003a8e  3140              ADDS     r1,r1,#0x40
003a90  6148              STR      r0,[r1,#0x14]
;;;45     	
;;;46     	GPIOD_PDDR |= (1<<7);
003a92  489b              LDR      r0,|L1.15616|
003a94  30c0              ADDS     r0,r0,#0xc0
003a96  6940              LDR      r0,[r0,#0x14]
003a98  2180              MOVS     r1,#0x80
003a9a  4308              ORRS     r0,r0,r1
003a9c  4998              LDR      r1,|L1.15616|
003a9e  31c0              ADDS     r1,r1,#0xc0
003aa0  6148              STR      r0,[r1,#0x14]
;;;47     	
;;;48     	  
;;;49         GPIOE_PSOR |= RED_SHIFT | GREEN_SHIFT;      //Set the initial output state to high
003aa2  489c              LDR      r0,|L1.15636|
003aa4  6840              LDR      r0,[r0,#4]
003aa6  2105              MOVS     r1,#5
003aa8  0749              LSLS     r1,r1,#29
003aaa  4308              ORRS     r0,r0,r1
003aac  4999              LDR      r1,|L1.15636|
003aae  6048              STR      r0,[r1,#4]
;;;50         GPIOD_PSOR |= BLUE_SHIFT;               	//Set the inital output state to high
003ab0  4898              LDR      r0,|L1.15636|
003ab2  3840              SUBS     r0,r0,#0x40
003ab4  6840              LDR      r0,[r0,#4]
003ab6  2120              MOVS     r1,#0x20
003ab8  4308              ORRS     r0,r0,r1
003aba  4996              LDR      r1,|L1.15636|
003abc  3940              SUBS     r1,r1,#0x40
003abe  6048              STR      r0,[r1,#4]
;;;51     		GPIOC_PSOR |= REDBAT_SHIFT | BLUEBAT_SHIFT | GREENBAT_SHIFT; 
003ac0  488f              LDR      r0,|L1.15616|
003ac2  3080              ADDS     r0,r0,#0x80
003ac4  6840              LDR      r0,[r0,#4]
003ac6  21ff              MOVS     r1,#0xff
003ac8  31c1              ADDS     r1,r1,#0xc1
003aca  4308              ORRS     r0,r0,r1
003acc  498c              LDR      r1,|L1.15616|
003ace  3180              ADDS     r1,r1,#0x80
003ad0  6048              STR      r0,[r1,#4]
;;;52     		GPIOC_PSOR |= RESET_SHIFT;
003ad2  4608              MOV      r0,r1
003ad4  6840              LDR      r0,[r0,#4]
003ad6  2120              MOVS     r1,#0x20
003ad8  4308              ORRS     r0,r0,r1
003ada  4989              LDR      r1,|L1.15616|
003adc  3180              ADDS     r1,r1,#0x80
003ade  6048              STR      r0,[r1,#4]
;;;53         
;;;54         GPIOE_PDDR |= RED_SHIFT | GREEN_SHIFT;  //Set the pin's direction to output
003ae0  488c              LDR      r0,|L1.15636|
003ae2  6940              LDR      r0,[r0,#0x14]
003ae4  2105              MOVS     r1,#5
003ae6  0749              LSLS     r1,r1,#29
003ae8  4308              ORRS     r0,r0,r1
003aea  498a              LDR      r1,|L1.15636|
003aec  6148              STR      r0,[r1,#0x14]
;;;55         GPIOD_PDDR |= BLUE_SHIFT;               //Set the pin's direction to output
003aee  4889              LDR      r0,|L1.15636|
003af0  3840              SUBS     r0,r0,#0x40
003af2  6940              LDR      r0,[r0,#0x14]
003af4  2120              MOVS     r1,#0x20
003af6  4308              ORRS     r0,r0,r1
003af8  4986              LDR      r1,|L1.15636|
003afa  3940              SUBS     r1,r1,#0x40
003afc  6148              STR      r0,[r1,#0x14]
;;;56     		GPIOC_PDDR |= REDBAT_SHIFT | BLUEBAT_SHIFT | GREENBAT_SHIFT | RESET_SHIFT; 
003afe  4880              LDR      r0,|L1.15616|
003b00  3080              ADDS     r0,r0,#0x80
003b02  6940              LDR      r0,[r0,#0x14]
003b04  21ff              MOVS     r1,#0xff
003b06  31e1              ADDS     r1,r1,#0xe1
003b08  4308              ORRS     r0,r0,r1
003b0a  497d              LDR      r1,|L1.15616|
003b0c  3180              ADDS     r1,r1,#0x80
003b0e  6148              STR      r0,[r1,#0x14]
;;;57         
;;;58         RED_ON;		//Turn off RED LED
003b10  0588              LSLS     r0,r1,#22
003b12  4980              LDR      r1,|L1.15636|
003b14  6088              STR      r0,[r1,#8]
;;;59         GREEN_ON;	//Turn off GREEN LED
003b16  0080              LSLS     r0,r0,#2
003b18  6088              STR      r0,[r1,#8]
;;;60         BLUE_ON;		//Turn off BLUE LED
003b1a  2020              MOVS     r0,#0x20
003b1c  497d              LDR      r1,|L1.15636|
003b1e  3940              SUBS     r1,r1,#0x40
003b20  6088              STR      r0,[r1,#8]
;;;61     		REDBAT_ON;
003b22  2040              MOVS     r0,#0x40
003b24  4976              LDR      r1,|L1.15616|
003b26  3180              ADDS     r1,r1,#0x80
003b28  6088              STR      r0,[r1,#8]
;;;62     		GREENBAT_ON;
003b2a  2080              MOVS     r0,#0x80
003b2c  6088              STR      r0,[r1,#8]
;;;63     		BLUEBAT_ON;
003b2e  0040              LSLS     r0,r0,#1
003b30  6088              STR      r0,[r1,#8]
;;;64     		RESET_ON;
003b32  2020              MOVS     r0,#0x20
003b34  6048              STR      r0,[r1,#4]
;;;65     		
;;;66     	
;;;67     }
003b36  4770              BX       lr
;;;68     
                          ENDP

                  SW1_init PROC
;;;74     
;;;75     void SW1_init(void){
003b38  486f              LDR      r0,|L1.15608|
;;;76     
;;;77     #ifdef CMSIS
;;;78     	SIM_SCGC5 |= SIM_SCGC5_PORTC_MASK;	//Turn on clock to PORTC module
003b3a  6b80              LDR      r0,[r0,#0x38]
003b3c  2101              MOVS     r1,#1
003b3e  02c9              LSLS     r1,r1,#11
003b40  4308              ORRS     r0,r0,r1
003b42  496d              LDR      r1,|L1.15608|
003b44  6388              STR      r0,[r1,#0x38]
;;;79     	
;;;80     	PORTC_PCR3 = PORT_PCR_IRQC(10)|PORT_PCR_PE_MASK|PORT_PCR_PS_MASK|PORT_PCR_MUX(0x1);	//Configure SW1 for GPIO w/interrupt
003b46  4874              LDR      r0,|L1.15640|
003b48  4970              LDR      r1,|L1.15628|
003b4a  60c8              STR      r0,[r1,#0xc]
;;;81     	
;;;82     	SIM_SCGC5 |= SIM_SCGC5_PORTD_MASK;	//Turn on clock to PORTD module
003b4c  486a              LDR      r0,|L1.15608|
003b4e  6b80              LDR      r0,[r0,#0x38]
003b50  2101              MOVS     r1,#1
003b52  0309              LSLS     r1,r1,#12
003b54  4308              ORRS     r0,r0,r1
003b56  4968              LDR      r1,|L1.15608|
003b58  6388              STR      r0,[r1,#0x38]
;;;83     	
;;;84     	PORTD_PCR6 = PORT_PCR_IRQC(10)|PORT_PCR_PE_MASK|PORT_PCR_PS_MASK|PORT_PCR_MUX(0x1);	//Configure SW1 for GPIO w/interrupt
003b5a  486f              LDR      r0,|L1.15640|
003b5c  496a              LDR      r1,|L1.15624|
003b5e  6188              STR      r0,[r1,#0x18]
;;;85     	
;;;86     	
;;;87     	
;;;88     	enable_irq(PORTD_IRQn);		//PORTD & PORTC share interrupt vector
003b60  201f              MOVS     r0,#0x1f
003b62  2800              CMP      r0,#0
003b64  db05              BLT      |L1.15218|
003b66  06c2              LSLS     r2,r0,#27
003b68  0ed2              LSRS     r2,r2,#27
003b6a  2101              MOVS     r1,#1
003b6c  4091              LSLS     r1,r1,r2
003b6e  4a6b              LDR      r2,|L1.15644|
003b70  6011              STR      r1,[r2,#0]
                  |L1.15218|
003b72  bf00              NOP      
;;;89     #else
;;;90                
;;;91             enable_irq(31);
;;;92             set_irq_priority(31, 1);
;;;93             
;;;94             SIM_SCGC5 |= SIM_SCGC5_PORTC_MASK;	//Turn on clock to PORTC module
;;;95             
;;;96             PORTC_PCR3 = PORT_PCR_ISF_MASK |PORT_PCR_MUX(0x1)| PORT_PCR_PS_MASK| PORT_PCR_PE_MASK| PORT_PCR_PFE_MASK| PORT_PCR_IRQC(10);
;;;97             
;;;98     #endif
;;;99     }
003b74  4770              BX       lr
;;;100    
                          ENDP

                  PORTD_IRQHandler PROC
;;;101    #ifdef CMSIS
;;;102    void PORTD_IRQHandler(void){
003b76  b500              PUSH     {lr}
;;;103      
;;;104    	if(PORTC_ISFR & (1 << SW_PIN))		//Check for interrupt on PORTC Pin 3
003b78  4864              LDR      r0,|L1.15628|
003b7a  3080              ADDS     r0,r0,#0x80
003b7c  6a00              LDR      r0,[r0,#0x20]
003b7e  2108              MOVS     r1,#8
003b80  4008              ANDS     r0,r0,r1
003b82  2800              CMP      r0,#0
003b84  d011              BEQ      |L1.15274|
;;;105    	{
;;;106    		PORTC_ISFR |= (1 << SW_PIN);
003b86  4861              LDR      r0,|L1.15628|
003b88  3080              ADDS     r0,r0,#0x80
003b8a  6a00              LDR      r0,[r0,#0x20]
003b8c  4308              ORRS     r0,r0,r1
003b8e  495f              LDR      r1,|L1.15628|
003b90  3180              ADDS     r1,r1,#0x80
003b92  6208              STR      r0,[r1,#0x20]
;;;107    		gu32PortStatus |= (1 << PORTC_EVENT);	//Update port status variable
003b94  4862              LDR      r0,|L1.15648|
003b96  6800              LDR      r0,[r0,#0]  ; gu32PortStatus
003b98  2101              MOVS     r1,#1
003b9a  4308              ORRS     r0,r0,r1
003b9c  4960              LDR      r1,|L1.15648|
003b9e  6008              STR      r0,[r1,#0]  ; gu32PortStatus
;;;108    	
;;;109    /**************ISR follows******/	
;;;110     stateCount++;
003ba0  4860              LDR      r0,|L1.15652|
003ba2  7800              LDRB     r0,[r0,#0]  ; stateCount
003ba4  1c40              ADDS     r0,r0,#1
003ba6  495f              LDR      r1,|L1.15652|
003ba8  7008              STRB     r0,[r1,#0]
                  |L1.15274|
;;;111    	}
;;;112    	
;;;113    	if(PORTD_ISFR & (1 << 6))		//Check for interrupt on PORTD Pin 6
003baa  4857              LDR      r0,|L1.15624|
003bac  3080              ADDS     r0,r0,#0x80
003bae  6a00              LDR      r0,[r0,#0x20]
003bb0  2140              MOVS     r1,#0x40
003bb2  4008              ANDS     r0,r0,r1
003bb4  2800              CMP      r0,#0
003bb6  d011              BEQ      |L1.15324|
;;;114    	{
;;;115    		PORTD_ISFR |= (1 << 6);
003bb8  4853              LDR      r0,|L1.15624|
003bba  3080              ADDS     r0,r0,#0x80
003bbc  6a00              LDR      r0,[r0,#0x20]
003bbe  4308              ORRS     r0,r0,r1
003bc0  4951              LDR      r1,|L1.15624|
003bc2  3180              ADDS     r1,r1,#0x80
003bc4  6208              STR      r0,[r1,#0x20]
;;;116    		gu32PortStatus |= (1 << PORTD_EVENT);	//Update port status variable
003bc6  4856              LDR      r0,|L1.15648|
003bc8  6800              LDR      r0,[r0,#0]  ; gu32PortStatus
003bca  2101              MOVS     r1,#1
003bcc  4308              ORRS     r0,r0,r1
003bce  4954              LDR      r1,|L1.15648|
003bd0  6008              STR      r0,[r1,#0]  ; gu32PortStatus
;;;117    	
;;;118    /**************ISR follows******/	
;;;119    // stateCount++;
;;;120    		
;;;121    ringflag=1;
003bd2  2001              MOVS     r0,#1
003bd4  4954              LDR      r1,|L1.15656|
003bd6  7008              STRB     r0,[r1,#0]
;;;122    	// wakeup and reset
;;;123    	
;;;124    clear();	
003bd8  f7fffffe          BL       clear
                  |L1.15324|
;;;125    	}
;;;126    	
;;;127    	LED_state();
003bdc  f7fffffe          BL       LED_state
;;;128    }
003be0  bd00              POP      {pc}
;;;129    
                          ENDP

                  PORTC_action PROC
;;;130    void PORTC_action(void){
003be2  4770              BX       lr
;;;131    }
;;;132    
                          ENDP

                  process0 PROC
;;;275    
;;;276      int process0(void)
003be4  2001              MOVS     r0,#1
;;;277    	{
;;;278    										 RED_ON;
003be6  0740              LSLS     r0,r0,#29
003be8  494a              LDR      r1,|L1.15636|
003bea  6088              STR      r0,[r1,#8]
;;;279    										 GREEN_OFF;
003bec  0080              LSLS     r0,r0,#2
003bee  6048              STR      r0,[r1,#4]
;;;280    										 BLUE_OFF;
003bf0  2020              MOVS     r0,#0x20
003bf2  4948              LDR      r1,|L1.15636|
003bf4  3940              SUBS     r1,r1,#0x40
003bf6  6048              STR      r0,[r1,#4]
;;;281    	}
003bf8  4770              BX       lr
;;;282    	int process1(void)
                          ENDP

                  process1 PROC
003bfa  2001              MOVS     r0,#1
;;;283    	{
;;;284    										 RED_ON;
003bfc  0740              LSLS     r0,r0,#29
003bfe  4945              LDR      r1,|L1.15636|
003c00  6088              STR      r0,[r1,#8]
;;;285    										 GREEN_ON;
003c02  0080              LSLS     r0,r0,#2
003c04  6088              STR      r0,[r1,#8]
;;;286    										 BLUE_OFF;
003c06  2020              MOVS     r0,#0x20
003c08  4942              LDR      r1,|L1.15636|
003c0a  3940              SUBS     r1,r1,#0x40
003c0c  6048              STR      r0,[r1,#4]
;;;287    	}
003c0e  4770              BX       lr
;;;288    	int process2(void)
                          ENDP

                  process2 PROC
003c10  2001              MOVS     r0,#1
;;;289    	{
;;;290    										 RED_OFF;
003c12  0740              LSLS     r0,r0,#29
003c14  493f              LDR      r1,|L1.15636|
003c16  6048              STR      r0,[r1,#4]
;;;291    										 GREEN_ON;
003c18  0080              LSLS     r0,r0,#2
003c1a  6088              STR      r0,[r1,#8]
;;;292    										 BLUE_OFF;
003c1c  2020              MOVS     r0,#0x20
003c1e  493d              LDR      r1,|L1.15636|
003c20  3940              SUBS     r1,r1,#0x40
003c22  6048              STR      r0,[r1,#4]
;;;293    	}
003c24  4770              BX       lr
;;;294    	int process3(void)
                          ENDP

                  process3 PROC
003c26  2001              MOVS     r0,#1
;;;295    	{
;;;296    										 RED_OFF;
003c28  0740              LSLS     r0,r0,#29
003c2a  493a              LDR      r1,|L1.15636|
003c2c  6048              STR      r0,[r1,#4]
;;;297    										 GREEN_OFF;
003c2e  0080              LSLS     r0,r0,#2
003c30  6048              STR      r0,[r1,#4]
;;;298    										 BLUE_ON;
003c32  2020              MOVS     r0,#0x20
003c34  4937              LDR      r1,|L1.15636|
003c36  3940              SUBS     r1,r1,#0x40
003c38  6088              STR      r0,[r1,#8]
;;;299    	}
003c3a  4770              BX       lr
;;;300    	int process4(void)
                          ENDP

                  process4 PROC
003c3c  2001              MOVS     r0,#1
;;;301    	{
;;;302    										 RED_ON;
003c3e  0740              LSLS     r0,r0,#29
003c40  4934              LDR      r1,|L1.15636|
003c42  6088              STR      r0,[r1,#8]
;;;303    										 GREEN_OFF;
003c44  0080              LSLS     r0,r0,#2
003c46  6048              STR      r0,[r1,#4]
;;;304    										 BLUE_ON;
003c48  2020              MOVS     r0,#0x20
003c4a  4932              LDR      r1,|L1.15636|
003c4c  3940              SUBS     r1,r1,#0x40
003c4e  6088              STR      r0,[r1,#8]
;;;305    	}
003c50  4770              BX       lr
;;;306    	int process5(void)
                          ENDP

                  process5 PROC
003c52  2001              MOVS     r0,#1
;;;307    	{
;;;308    										RED_ON;
003c54  0740              LSLS     r0,r0,#29
003c56  492f              LDR      r1,|L1.15636|
003c58  6088              STR      r0,[r1,#8]
;;;309    										GREEN_ON;
003c5a  0080              LSLS     r0,r0,#2
003c5c  6088              STR      r0,[r1,#8]
;;;310    										BLUE_ON;
003c5e  2020              MOVS     r0,#0x20
003c60  492c              LDR      r1,|L1.15636|
003c62  3940              SUBS     r1,r1,#0x40
003c64  6088              STR      r0,[r1,#8]
;;;311    	}
003c66  4770              BX       lr
;;;312    	int processdef(void)
                          ENDP

                  processdef PROC
003c68  2001              MOVS     r0,#1
;;;313    	{
;;;314    										RED_ON;
003c6a  0740              LSLS     r0,r0,#29
003c6c  4929              LDR      r1,|L1.15636|
003c6e  6088              STR      r0,[r1,#8]
;;;315    										GREEN_OFF;
003c70  0080              LSLS     r0,r0,#2
003c72  6048              STR      r0,[r1,#4]
;;;316    										BLUE_OFF;
003c74  2020              MOVS     r0,#0x20
003c76  4927              LDR      r1,|L1.15636|
003c78  3940              SUBS     r1,r1,#0x40
003c7a  6048              STR      r0,[r1,#4]
;;;317    										stateCount = -1;
003c7c  20ff              MOVS     r0,#0xff
003c7e  4929              LDR      r1,|L1.15652|
003c80  7008              STRB     r0,[r1,#0]
;;;318    	}  
003c82  4770              BX       lr
;;;319    
                          ENDP

                  test12 PROC
;;;320    	void test12()
003c84  b510              PUSH     {r4,lr}
;;;321    	{int status;
003c86  b088              SUB      sp,sp,#0x20
;;;322    	int (* processfunc[])	() = {process0,process1,process2,process3,process4,process5,processdef};
003c88  221c              MOVS     r2,#0x1c
003c8a  4928              LDR      r1,|L1.15660|
003c8c  a801              ADD      r0,sp,#4
003c8e  f7fffffe          BL       __aeabi_memcpy4
;;;323    	status = processfunc[stateCount]();
003c92  4924              LDR      r1,|L1.15652|
003c94  7809              LDRB     r1,[r1,#0]  ; stateCount
003c96  0089              LSLS     r1,r1,#2
003c98  aa01              ADD      r2,sp,#4
003c9a  5850              LDR      r0,[r2,r1]
003c9c  4780              BLX      r0
003c9e  4604              MOV      r4,r0
;;;324    	}
003ca0  b008              ADD      sp,sp,#0x20
003ca2  bd10              POP      {r4,pc}
                  |L1.15524|
                          DCD      magx
                  |L1.15528|
                          DCD      magy
                  |L1.15532|
                          DCD      magz
                  |L1.15536|
                          DCD      temp
                  |L1.15540|
                          DCD      resultx
                  |L1.15544|
                          DCD      resulty
                  |L1.15548|
                          DCD      resultz
                  |L1.15552|
                          DCD      offz
                  |L1.15556|
                          DCD      offy
                  |L1.15560|
                          DCD      offx
                  |L1.15564|
                          DCD      yz_angle
                  |L1.15568|
                          DCD      offyz
                  |L1.15572|
                          DCD      xz_angle
                  |L1.15576|
                          DCD      offxz
                  |L1.15580|
                          DCD      xy_angle
                  |L1.15584|
                          DCD      offxy
                  |L1.15588|
                          DCD      ||.conststring||+0x70
                  |L1.15592|
                          DCD      speed
                  |L1.15596|
                          DCD      0x40a00000
                  |L1.15600|
                          DCD      motion
                  |L1.15604|
                          DCD      motion_samples
                  |L1.15608|
                          DCD      0x40048000
                  |L1.15612|
                          DCD      0x40049000
                  |L1.15616|
                          DCD      0x400ff000
                  |L1.15620|
                          DCD      0x4004d040
                  |L1.15624|
                          DCD      0x4004c000
                  |L1.15628|
                          DCD      0x4004b000
                  |L1.15632|
                          DCD      0x4004a000
                  |L1.15636|
                          DCD      0x400ff100
                  |L1.15640|
                          DCD      0x000a0103
                  |L1.15644|
                          DCD      0xe000e100
                  |L1.15648|
                          DCD      gu32PortStatus
                  |L1.15652|
                          DCD      stateCount
                  |L1.15656|
                          DCD      ringflag
                  |L1.15660|
                          DCD      ||.constdata||
                          ENDP

                  systick_init PROC
;;;7      
;;;8      void systick_init(void)
003d30  2000              MOVS     r0,#0
;;;9      {
;;;10     		SYST_CVR = 0x0;	//clear current timer value
003d32  49f4              LDR      r1,|L1.16644|
003d34  6188              STR      r0,[r1,#0x18]
;;;11         SYST_RVR = (8000000/200)-1;
003d36  48f4              LDR      r0,|L1.16648|
003d38  6148              STR      r0,[r1,#0x14]
;;;12         SYST_CSR = SysTick_CSR_CLKSOURCE_MASK | SysTick_CSR_ENABLE_MASK;   
003d3a  2005              MOVS     r0,#5
003d3c  6108              STR      r0,[r1,#0x10]
;;;13     	
;;;14     }
003d3e  4770              BX       lr
;;;15     
                          ENDP

                  systick_disable PROC
;;;16     void systick_disable(void)
003d40  48f0              LDR      r0,|L1.16644|
;;;17     {
;;;18         SYST_CSR &= ~SysTick_CSR_ENABLE_MASK;
003d42  6900              LDR      r0,[r0,#0x10]
003d44  0840              LSRS     r0,r0,#1
003d46  0040              LSLS     r0,r0,#1
003d48  49ee              LDR      r1,|L1.16644|
003d4a  6108              STR      r0,[r1,#0x10]
;;;19     }
003d4c  4770              BX       lr
;;;20     
                          ENDP

                  cal_systick_read_overhead PROC
;;;21     void cal_systick_read_overhead(void)
003d4e  b570              PUSH     {r4-r6,lr}
;;;22     {
;;;23       	uint32_t cnt_start_value;
;;;24         uint32_t cnt_end_value;
;;;25     	
;;;26     	cnt_start_value = SYST_CVR;
003d50  48ec              LDR      r0,|L1.16644|
003d52  6985              LDR      r5,[r0,#0x18]
;;;27       
;;;28         cnt_end_value = SYST_CVR;
003d54  6984              LDR      r4,[r0,#0x18]
;;;29     	
;;;30     	overhead = cnt_start_value - cnt_end_value;
003d56  1b28              SUBS     r0,r5,r4
003d58  49ec              LDR      r1,|L1.16652|
003d5a  6008              STR      r0,[r1,#0]  ; overhead
;;;31     	
;;;32     #ifdef DEBUG_PRINT
;;;33     	printf("systick start value: 0x%x\n\r", cnt_start_value);
003d5c  4629              MOV      r1,r5
003d5e  a0ec              ADR      r0,|L1.16656|
003d60  f7fffffe          BL       __2printf
;;;34     	printf("systick end value: 0x%x\n\r", cnt_end_value);
003d64  4621              MOV      r1,r4
003d66  a0f1              ADR      r0,|L1.16684|
003d68  f7fffffe          BL       __2printf
;;;35     	printf("systick current value read overhead: 0x%x\n\r", overhead);
003d6c  48e7              LDR      r0,|L1.16652|
003d6e  6801              LDR      r1,[r0,#0]  ; overhead
003d70  a0f5              ADR      r0,|L1.16712|
003d72  f7fffffe          BL       __2printf
;;;36     #endif
;;;37     
;;;38     }
003d76  bd70              POP      {r4-r6,pc}
;;;13     #include "stdlib.h"
                          ENDP

                  delay2 PROC
;;;119    }
;;;120     void delay2(int delaytime)
003d78  e00c              B        |L1.15764|
                  |L1.15738|
;;;121    {
;;;122     while(delaytime--)
;;;123        {for(i=5000;i>0;i--);  // about 1 ms
003d7a  49fe              LDR      r1,|L1.16756|
003d7c  4afe              LDR      r2,|L1.16760|
003d7e  6011              STR      r1,[r2,#0]  ; i
003d80  e004              B        |L1.15756|
                  |L1.15746|
003d82  49fd              LDR      r1,|L1.16760|
003d84  6809              LDR      r1,[r1,#0]  ; i
003d86  1e49              SUBS     r1,r1,#1
003d88  4afb              LDR      r2,|L1.16760|
003d8a  6011              STR      r1,[r2,#0]  ; i
                  |L1.15756|
003d8c  49fa              LDR      r1,|L1.16760|
003d8e  6809              LDR      r1,[r1,#0]  ; i
003d90  2900              CMP      r1,#0
003d92  dcf6              BGT      |L1.15746|
                  |L1.15764|
003d94  4601              MOV      r1,r0                 ;122
003d96  1e40              SUBS     r0,r0,#1              ;122
003d98  2900              CMP      r1,#0                 ;122
003d9a  d1ee              BNE      |L1.15738|
;;;124        }
;;;125    }
003d9c  4770              BX       lr
;;;126            
                          ENDP

                  ADC_Init PROC
;;;129    /*********************************************************************/
;;;130    void ADC_Init(void)
003d9e  48f7              LDR      r0,|L1.16764|
;;;131    {
;;;132    //Turn on ADC
;;;133    SIM->SCGC6 |= SIM_SCGC6_ADC0_MASK;
003da0  6bc0              LDR      r0,[r0,#0x3c]
003da2  2101              MOVS     r1,#1
003da4  06c9              LSLS     r1,r1,#27
003da6  4308              ORRS     r0,r0,r1
003da8  49f4              LDR      r1,|L1.16764|
003daa  63c8              STR      r0,[r1,#0x3c]
;;;134    //bus clock/2 & singled-ended 16bit mode & div by 4
;;;135    ADC0->CFG1 = ADC_CFG1_ADICLK(1) | ADC_CFG1_MODE(3) | ADC_CFG1_ADIV(1);
003dac  202d              MOVS     r0,#0x2d
003dae  49f4              LDR      r1,|L1.16768|
003db0  6088              STR      r0,[r1,#8]
;;;136    //select channel A & high speed mode
;;;137    ADC0->CFG2 = !ADC_CFG2_MUXSEL_MASK;// | ADC_CFG2_ADHSC_MASK;
003db2  2000              MOVS     r0,#0
003db4  60c8              STR      r0,[r1,#0xc]
;;;138    //hardware trigger & VREFH/VREFL
;;;139    ADC0->SC2 = ADC_SC2_REFSEL(0);
003db6  6208              STR      r0,[r1,#0x20]
;;;140    //single shot mode
;;;141    ADC0->SC3 &= ~ADC_SC3_ADCO_MASK;
003db8  4608              MOV      r0,r1
003dba  6a40              LDR      r0,[r0,#0x24]
003dbc  2108              MOVS     r1,#8
003dbe  4388              BICS     r0,r0,r1
003dc0  49ef              LDR      r1,|L1.16768|
003dc2  6248              STR      r0,[r1,#0x24]
;;;142    }
003dc4  4770              BX       lr
;;;143    
                          ENDP

                  adc_start_conversion PROC
;;;144    
;;;145    void adc_start_conversion(uint8_t channel)
003dc6  06c1              LSLS     r1,r0,#27
;;;146    {
;;;147    ADC0->SC1[0] = !ADC_SC1_AIEN_MASK | ADC_SC1_DIFF_MASK | ADC_SC1_ADCH(channel);
003dc8  0ec9              LSRS     r1,r1,#27
003dca  2220              MOVS     r2,#0x20
003dcc  4311              ORRS     r1,r1,r2
003dce  4aec              LDR      r2,|L1.16768|
003dd0  6011              STR      r1,[r2,#0]
;;;148    }
003dd2  4770              BX       lr
;;;149    
                          ENDP

                  adc_read PROC
;;;150    uint16_t adc_read(uint8_t channel)
003dd4  4601              MOV      r1,r0
;;;151    {
;;;152    	
;;;153    //ADC0_SC1A = 26 & ADC_SC1_ADCH_MASK; //Write to SC1A to start conversion
;;;154    	ADC0->SC1[0] = !ADC_SC1_AIEN_MASK | ADC_SC1_DIFF_MASK | ADC_SC1_ADCH(channel) ;
003dd6  06c8              LSLS     r0,r1,#27
003dd8  0ec0              LSRS     r0,r0,#27
003dda  2220              MOVS     r2,#0x20
003ddc  4310              ORRS     r0,r0,r2
003dde  4ae8              LDR      r2,|L1.16768|
003de0  6010              STR      r0,[r2,#0]
;;;155    while(ADC0_SC2 & ADC_SC2_ADACT_MASK); //Conversion in progress
003de2  bf00              NOP      
                  |L1.15844|
003de4  48e6              LDR      r0,|L1.16768|
003de6  6a00              LDR      r0,[r0,#0x20]
003de8  2280              MOVS     r2,#0x80
003dea  4010              ANDS     r0,r0,r2
003dec  2800              CMP      r0,#0
003dee  d1f9              BNE      |L1.15844|
;;;156    while(!(ADC0_SC1A & ADC_SC1_COCO_MASK)); //Wait until conversion complete
003df0  bf00              NOP      
                  |L1.15858|
003df2  48e3              LDR      r0,|L1.16768|
003df4  6800              LDR      r0,[r0,#0]
003df6  2280              MOVS     r2,#0x80
003df8  4010              ANDS     r0,r0,r2
003dfa  2800              CMP      r0,#0
003dfc  d0f9              BEQ      |L1.15858|
;;;157    return ADC0_RA;
003dfe  48e0              LDR      r0,|L1.16768|
003e00  6900              LDR      r0,[r0,#0x10]
003e02  b280              UXTH     r0,r0
;;;158    
;;;159    	
;;;160    	
;;;161    //ADC0->SC1[0] = !ADC_SC1_AIEN_MASK | ADC_SC1_DIFF_MASK | ADC_SC1_ADCH(channel) ; // start conversion while((ADC0->SC1[0] & ADC_SC1_COCO_MASK)!= 0){}; return ADC0->R[0];
;;;162    }
003e04  4770              BX       lr
;;;163    
                          ENDP

                  dtr_sleep PROC
;;;843    
;;;844    void dtr_sleep()
003e06  b508              PUSH     {r3,lr}
;;;845    {int32 test2;
;;;846    
;;;847    	;
;;;848    	if(GPIOB_PDIR & 0x00000002){		send_modem("Ignition senses 1\r\n");
003e08  48de              LDR      r0,|L1.16772|
003e0a  6900              LDR      r0,[r0,#0x10]
003e0c  2102              MOVS     r1,#2
003e0e  4008              ANDS     r0,r0,r1
003e10  2800              CMP      r0,#0
003e12  d003              BEQ      |L1.15900|
003e14  a0dc              ADR      r0,|L1.16776|
003e16  f7fffffe          BL       send_modem
003e1a  e002              B        |L1.15906|
                  |L1.15900|
;;;849    }else {send_modem("Ignition senses 0\r\n");}
003e1c  a0df              ADR      r0,|L1.16796|
003e1e  f7fffffe          BL       send_modem
                  |L1.15906|
;;;850    	
;;;851    if( test2 == 0 )	
003e22  2c00              CMP      r4,#0
003e24  d107              BNE      |L1.15926|
;;;852    {
;;;853    	//send_GSM("\r\nAT+CFUN=0\r\n", "OK\r\n", "ERROR\r\n" , "ERROR:",7);	
;;;854    
;;;855    	sleep_flag=1;	
003e26  2001              MOVS     r0,#1
003e28  49e1              LDR      r1,|L1.16816|
003e2a  6008              STR      r0,[r1,#0]  ; sleep_flag
;;;856    	DTR_ON;   //sleep
003e2c  2080              MOVS     r0,#0x80
003e2e  49d5              LDR      r1,|L1.16772|
003e30  3180              ADDS     r1,r1,#0x80
003e32  6048              STR      r0,[r1,#4]
003e34  e02d              B        |L1.16018|
                  |L1.15926|
;;;857    
;;;858    }
;;;859    else
;;;860    {DTR_OFF;
003e36  2080              MOVS     r0,#0x80
003e38  49d2              LDR      r1,|L1.16772|
003e3a  3180              ADDS     r1,r1,#0x80
003e3c  6088              STR      r0,[r1,#8]
;;;861    	if (sleep_flag == 1  )
003e3e  48dc              LDR      r0,|L1.16816|
003e40  6800              LDR      r0,[r0,#0]  ; sleep_flag
003e42  2801              CMP      r0,#1
003e44  d121              BNE      |L1.16010|
;;;862    	{
;;;863    	// wakeup and reset
;;;864    		sleep_flag=0;
003e46  2000              MOVS     r0,#0
003e48  49d9              LDR      r1,|L1.16816|
003e4a  6008              STR      r0,[r1,#0]  ; sleep_flag
;;;865        		// not sleep	
;;;866    //	  HardFault_Handler();
;;;867    delay(1000);
003e4c  207d              MOVS     r0,#0x7d
003e4e  00c0              LSLS     r0,r0,#3
003e50  f7fffffe          BL       delay
;;;868    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    
003e54  48d7              LDR      r0,|L1.16820|
003e56  6800              LDR      r0,[r0,#0]  ; tmeout
003e58  4bd7              LDR      r3,|L1.16824|
003e5a  4ad8              LDR      r2,|L1.16828|
003e5c  4619              MOV      r1,r3
003e5e  391c              SUBS     r1,r1,#0x1c
003e60  9000              STR      r0,[sp,#0]
003e62  48d7              LDR      r0,|L1.16832|
003e64  f7fffffe          BL       send_GSM
;;;869    		
;;;870    send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
003e68  48d2              LDR      r0,|L1.16820|
003e6a  6800              LDR      r0,[r0,#0]  ; tmeout
003e6c  4bd2              LDR      r3,|L1.16824|
003e6e  4ad3              LDR      r2,|L1.16828|
003e70  4619              MOV      r1,r3
003e72  391c              SUBS     r1,r1,#0x1c
003e74  9000              STR      r0,[sp,#0]
003e76  48d2              LDR      r0,|L1.16832|
003e78  3008              ADDS     r0,r0,#8
003e7a  f7fffffe          BL       send_GSM
;;;871    
;;;872    //send_GSM("\n\nAT+CFUN=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;873    		
;;;874    delay(1000);	
003e7e  207d              MOVS     r0,#0x7d
003e80  00c0              LSLS     r0,r0,#3
003e82  f7fffffe          BL       delay
;;;875    clear();	
003e86  f7fffffe          BL       clear
                  |L1.16010|
;;;876    	}  
;;;877    	DTR_OFF;		// not sleep	
003e8a  2080              MOVS     r0,#0x80
003e8c  49bd              LDR      r1,|L1.16772|
003e8e  3180              ADDS     r1,r1,#0x80
003e90  6088              STR      r0,[r1,#8]
                  |L1.16018|
;;;878    
;;;879    
;;;880    
;;;881    }
;;;882    
;;;883    LED_state();LED_state2();
003e92  f7fffffe          BL       LED_state
003e96  f7fffffe          BL       LED_state2
;;;884    }
003e9a  bd08              POP      {r3,pc}
;;;885    
                          ENDP

                  tcp_initialization2 PROC
;;;1183   
;;;1184   void tcp_initialization2()
003e9c  b508              PUSH     {r3,lr}
;;;1185   {
;;;1186   get_imei();
003e9e  f7fffffe          BL       get_imei
;;;1187   msg_sim800(); 
003ea2  f7fffffe          BL       msg_sim800
;;;1188   
;;;1189   								//GPS_COLLECT();
;;;1190   								send_GSM("\r\nAT+CIPSHUT\r\n", "OK", "ERROR\r\n" , "ERROR:",5);	
003ea6  2005              MOVS     r0,#5
003ea8  4bc3              LDR      r3,|L1.16824|
003eaa  4ac4              LDR      r2,|L1.16828|
003eac  a1c5              ADR      r1,|L1.16836|
003eae  9000              STR      r0,[sp,#0]
003eb0  48c5              LDR      r0,|L1.16840|
003eb2  f7fffffe          BL       send_GSM
;;;1191   								//delay(20);		
;;;1192   								GPS_COLLECT();
003eb6  f7fffffe          BL       GPS_COLLECT
;;;1193   								strcat(data,"CH\n");	
003eba  49c3              LDR      r1,|L1.16840|
003ebc  39e0              SUBS     r1,r1,#0xe0
003ebe  48c3              LDR      r0,|L1.16844|
003ec0  f7fffffe          BL       strcat
;;;1194   
;;;1195   
;;;1196   msg_sim800(); 
003ec4  f7fffffe          BL       msg_sim800
;;;1197   
;;;1198   
;;;1199   								send_GSM("\r\nAT+CSTT=\"www\"\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);	
003ec8  48ba              LDR      r0,|L1.16820|
003eca  6800              LDR      r0,[r0,#0]  ; tmeout
003ecc  4bba              LDR      r3,|L1.16824|
003ece  4abb              LDR      r2,|L1.16828|
003ed0  a1bc              ADR      r1,|L1.16836|
003ed2  9000              STR      r0,[sp,#0]
003ed4  48bc              LDR      r0,|L1.16840|
003ed6  3010              ADDS     r0,r0,#0x10
003ed8  f7fffffe          BL       send_GSM
;;;1200   								//delay(20);
;;;1201   			//					GPS_COLLECT();
;;;1202   
;;;1203   msg_sim800(); 
003edc  f7fffffe          BL       msg_sim800
;;;1204   
;;;1205   	
;;;1206   								send_GSM("\r\nAT+CIICR\r\r\n", "OK", "ERROR\r\n" , "DEACT",5);		
003ee0  2005              MOVS     r0,#5
003ee2  4bb9              LDR      r3,|L1.16840|
003ee4  3324              ADDS     r3,r3,#0x24
003ee6  4ab5              LDR      r2,|L1.16828|
003ee8  a1b6              ADR      r1,|L1.16836|
003eea  9000              STR      r0,[sp,#0]
003eec  4618              MOV      r0,r3
003eee  3008              ADDS     r0,r0,#8
003ef0  f7fffffe          BL       send_GSM
;;;1207   								//delay(20);
;;;1208   								GPS_COLLECT();
003ef4  f7fffffe          BL       GPS_COLLECT
;;;1209   								strcat(data,"CH\n");	
003ef8  49b3              LDR      r1,|L1.16840|
003efa  39e0              SUBS     r1,r1,#0xe0
003efc  48b3              LDR      r0,|L1.16844|
003efe  f7fffffe          BL       strcat
;;;1210   
;;;1211   
;;;1212   msg_sim800(); 
003f02  f7fffffe          BL       msg_sim800
;;;1213   
;;;1214   								
;;;1215   								clear();send_modem("\nAT+CIFSR\r\r\n");clear();
003f06  f7fffffe          BL       clear
003f0a  48b1              LDR      r0,|L1.16848|
003f0c  f7fffffe          BL       send_modem
003f10  f7fffffe          BL       clear
;;;1216   								delay(20);
003f14  2014              MOVS     r0,#0x14
003f16  f7fffffe          BL       delay
;;;1217   	
;;;1218   
;;;1219   msg_sim800(); 
003f1a  f7fffffe          BL       msg_sim800
;;;1220   
;;;1221   		
;;;1222   								sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
003f1e  4bad              LDR      r3,|L1.16852|
003f20  4aad              LDR      r2,|L1.16856|
003f22  49ab              LDR      r1,|L1.16848|
003f24  3118              ADDS     r1,r1,#0x18
003f26  48ad              LDR      r0,|L1.16860|
003f28  f7fffffe          BL       __2sprintf
;;;1223   								send_GSM( at_ , "CONNECT", "ERROR\r\n" , "ERROR",tmeout);	
003f2c  48a1              LDR      r0,|L1.16820|
003f2e  6800              LDR      r0,[r0,#0]  ; tmeout
003f30  4ba2              LDR      r3,|L1.16828|
003f32  3b08              SUBS     r3,r3,#8
003f34  4aa1              LDR      r2,|L1.16828|
003f36  49a6              LDR      r1,|L1.16848|
003f38  3148              ADDS     r1,r1,#0x48
003f3a  9000              STR      r0,[sp,#0]
003f3c  48a7              LDR      r0,|L1.16860|
003f3e  f7fffffe          BL       send_GSM
;;;1224   								clear();
003f42  f7fffffe          BL       clear
;;;1225   
;;;1226   								GPS_COLLECT();
003f46  f7fffffe          BL       GPS_COLLECT
;;;1227   								strcat(data,"CH\n");	
003f4a  499f              LDR      r1,|L1.16840|
003f4c  39e0              SUBS     r1,r1,#0xe0
003f4e  489f              LDR      r0,|L1.16844|
003f50  f7fffffe          BL       strcat
;;;1228   
;;;1229   						send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT FAIL",tmeout);		
003f54  4897              LDR      r0,|L1.16820|
003f56  6800              LDR      r0,[r0,#0]  ; tmeout
003f58  4b9d              LDR      r3,|L1.16848|
003f5a  3350              ADDS     r3,r3,#0x50
003f5c  4a97              LDR      r2,|L1.16828|
003f5e  3a08              SUBS     r2,r2,#8
003f60  a19f              ADR      r1,|L1.16864|
003f62  9000              STR      r0,[sp,#0]
003f64  4618              MOV      r0,r3
003f66  3014              ADDS     r0,r0,#0x14
003f68  f7fffffe          BL       send_GSM
;;;1230   
;;;1231   
;;;1232   
;;;1233   
;;;1234   send_tcp2();
003f6c  f7fffffe          BL       send_tcp2
;;;1235   }
003f70  bd08              POP      {r3,pc}
;;;1236   
                          ENDP

                  HardFault_Handler PROC
;;;760    
;;;761    void HardFault_Handler()
003f72  b508              PUSH     {r3,lr}
;;;762    {
;;;763    DTR_OFF;		// not sleep	
003f74  2080              MOVS     r0,#0x80
003f76  4983              LDR      r1,|L1.16772|
003f78  3180              ADDS     r1,r1,#0x80
003f7a  6088              STR      r0,[r1,#8]
;;;764     delay(100);
003f7c  2064              MOVS     r0,#0x64
003f7e  f7fffffe          BL       delay
;;;765    		
;;;766    		
;;;767    		send_modem("HardFault Reset\r\n");
003f82  a098              ADR      r0,|L1.16868|
003f84  f7fffffe          BL       send_modem
;;;768    //		uart_putchar(UART1_BASE_PTR,0xA);
;;;769    		uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0x1A);	
003f88  211a              MOVS     r1,#0x1a
003f8a  489b              LDR      r0,|L1.16888|
003f8c  f7fffffe          BL       uart_putchar
003f90  211a              MOVS     r1,#0x1a
003f92  4899              LDR      r0,|L1.16888|
003f94  f7fffffe          BL       uart_putchar
003f98  211a              MOVS     r1,#0x1a
003f9a  4897              LDR      r0,|L1.16888|
003f9c  f7fffffe          BL       uart_putchar
;;;770    		
;;;771    	log_it();
003fa0  f7fffffe          BL       log_it
;;;772    	
;;;773    		send_GSM("\n\n AT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
003fa4  4883              LDR      r0,|L1.16820|
003fa6  6800              LDR      r0,[r0,#0]  ; tmeout
003fa8  4b83              LDR      r3,|L1.16824|
003faa  4a84              LDR      r2,|L1.16828|
003fac  4619              MOV      r1,r3
003fae  391c              SUBS     r1,r1,#0x1c
003fb0  9000              STR      r0,[sp,#0]
003fb2  a092              ADR      r0,|L1.16892|
003fb4  f7fffffe          BL       send_GSM
;;;774    		
;;;775    
;;;776    		RESET_OFF;
003fb8  2020              MOVS     r0,#0x20
003fba  4972              LDR      r1,|L1.16772|
003fbc  3140              ADDS     r1,r1,#0x40
003fbe  6088              STR      r0,[r1,#8]
;;;777    	delay(50);
003fc0  2032              MOVS     r0,#0x32
003fc2  f7fffffe          BL       delay
;;;778    	
;;;779    		RESET_ON;
003fc6  2020              MOVS     r0,#0x20
003fc8  496e              LDR      r1,|L1.16772|
003fca  3140              ADDS     r1,r1,#0x40
003fcc  6048              STR      r0,[r1,#4]
;;;780    
;;;781    	delay(50);
003fce  2032              MOVS     r0,#0x32
003fd0  f7fffffe          BL       delay
;;;782    
;;;783    	
;;;784    	
;;;785    	
;;;786    		
;;;787    
;;;788    	
;;;789    	
;;;790    	
;;;791    //	while(1){		send_GSM("\n\n AT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	}
;;;792    
;;;793    	
;;;794    //	main();
;;;795    	
;;;796    //	SystemInit();
;;;797    //	main();
;;;798    }
003fd4  bd08              POP      {r3,pc}
;;;799    
                          ENDP

                  main PROC
;;;165    /********************************************************************/
;;;166    int main (void)
003fd6  b508              PUSH     {r3,lr}
;;;167    {int uyi;unsigned int adcin=0;long adcsample; long adcsa;
003fd8  bf00              NOP      
;;;168    char sent=1;
003fda  bf00              NOP      
;;;169    //int_erval=10;
;;;170    								memset(data,0,strlen(data));
003fdc  487b              LDR      r0,|L1.16844|
003fde  f7fffffe          BL       strlen
003fe2  4604              MOV      r4,r0
003fe4  4621              MOV      r1,r4
003fe6  4879              LDR      r0,|L1.16844|
003fe8  f7fffffe          BL       __aeabi_memclr4
;;;171    								memset(data2,0,strlen(data2));
003fec  4888              LDR      r0,|L1.16912|
003fee  f7fffffe          BL       strlen
003ff2  4604              MOV      r4,r0
003ff4  4621              MOV      r1,r4
003ff6  4886              LDR      r0,|L1.16912|
003ff8  f7fffffe          BL       __aeabi_memclr4
;;;172    	
;;;173    start();
003ffc  f7fffffe          BL       start
;;;174    systick_init();	
004000  f7fffffe          BL       systick_init
;;;175    #ifdef CMSIS  // If we are conforming to CMSIS, we need to call start here
;;;176    
;;;177    #endif
;;;178    
;;;179    int_erval=5;
004004  2005              MOVS     r0,#5
004006  4983              LDR      r1,|L1.16916|
004008  6008              STR      r0,[r1,#0]  ; int_erval
;;;180    
;;;181    
;;;182    	LED_init();		//Initialize GPIO for LEDs
00400a  f7fffffe          BL       LED_init
;;;183    	RELAY_init();		//Initialize GPIO for LEDs
00400e  f7fffffe          BL       RELAY_init
;;;184    	SW1_init();		//Initialize GPIO for SW1 w/ interrupt	
004012  f7fffffe          BL       SW1_init
;;;185    	//accel_init();
;;;186    	sleep_flag=0;
004016  2000              MOVS     r0,#0
004018  4965              LDR      r1,|L1.16816|
00401a  6008              STR      r0,[r1,#0]  ; sleep_flag
;;;187    	DTR_OFF;	
00401c  2080              MOVS     r0,#0x80
00401e  4959              LDR      r1,|L1.16772|
004020  3180              ADDS     r1,r1,#0x80
004022  6088              STR      r0,[r1,#8]
;;;188    	ADC_Init();
004024  f7fffffe          BL       ADC_Init
;;;189    	lptmr_init(1000, 1);	
004028  2101              MOVS     r1,#1
00402a  207d              MOVS     r0,#0x7d
00402c  00c0              LSLS     r0,r0,#3
00402e  f7fffffe          BL       lptmr_init
;;;190    
;;;191    IGNITION_OFF;FUEL_OFF;
004032  2002              MOVS     r0,#2
004034  4953              LDR      r1,|L1.16772|
004036  3940              SUBS     r1,r1,#0x40
004038  6048              STR      r0,[r1,#4]
00403a  2004              MOVS     r0,#4
00403c  6048              STR      r0,[r1,#4]
;;;192    //while(1)
;;;193    //{int e;
;;;194    //	for(	e=0;e<500;){
;;;195    //	
;;;196    //adcin= 	adc_read(8);
;;;197    
;;;198    
;;;199    //		if(adcin>40000){}
;;;200    //			else{
;;;201    //				adcsample+=adcin;
;;;202    //			e++;}
;;;203    ////	adc_start_conversion(e);
;;;204    //	}
;;;205    //adcsa=adcsample/500;	
;;;206    //memset(at_,0,100);
;;;207    //sprintf(at_,",ADC%d=%ld, %ld",8,adcsa, adcsample);	
;;;208    //send_modem(at_);	
;;;209    
;;;210    //	send_modem("\n");
;;;211    //delay(250);
;;;212    //	}
;;;213    
;;;214    int_erval=0;
00403e  2000              MOVS     r0,#0
004040  4974              LDR      r1,|L1.16916|
004042  6008              STR      r0,[r1,#0]  ; int_erval
;;;215    ignstaton();
004044  f7fffffe          BL       ignstaton
;;;216    saveapn();								
004048  f7fffffe          BL       saveapn
;;;217    								send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
00404c  4859              LDR      r0,|L1.16820|
00404e  6800              LDR      r0,[r0,#0]  ; tmeout
004050  4b59              LDR      r3,|L1.16824|
004052  4a5a              LDR      r2,|L1.16828|
004054  a15b              ADR      r1,|L1.16836|
004056  9000              STR      r0,[sp,#0]
004058  4618              MOV      r0,r3
00405a  300c              ADDS     r0,r0,#0xc
00405c  f7fffffe          BL       send_GSM
;;;218    								send_GSM("\nAT+FSCREATE=D:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
004060  4854              LDR      r0,|L1.16820|
004062  6800              LDR      r0,[r0,#0]  ; tmeout
004064  4b54              LDR      r3,|L1.16824|
004066  4a55              LDR      r2,|L1.16828|
004068  a156              ADR      r1,|L1.16836|
00406a  9000              STR      r0,[sp,#0]
00406c  486a              LDR      r0,|L1.16920|
00406e  f7fffffe          BL       send_GSM
;;;219    								send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
004072  4850              LDR      r0,|L1.16820|
004074  6800              LDR      r0,[r0,#0]  ; tmeout
004076  4b50              LDR      r3,|L1.16824|
004078  4a50              LDR      r2,|L1.16828|
00407a  a152              ADR      r1,|L1.16836|
00407c  9000              STR      r0,[sp,#0]
00407e  4866              LDR      r0,|L1.16920|
004080  301c              ADDS     r0,r0,#0x1c
004082  f7fffffe          BL       send_GSM
;;;220    								send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
004086  484b              LDR      r0,|L1.16820|
004088  6800              LDR      r0,[r0,#0]  ; tmeout
00408a  4b4b              LDR      r3,|L1.16824|
00408c  4a4b              LDR      r2,|L1.16828|
00408e  a14d              ADR      r1,|L1.16836|
004090  9000              STR      r0,[sp,#0]
004092  484b              LDR      r0,|L1.16832|
004094  3874              SUBS     r0,r0,#0x74
004096  f7fffffe          BL       send_GSM
;;;221    								memcpy (ip, "104.236.203.4", 13);
00409a  220d              MOVS     r2,#0xd
00409c  495e              LDR      r1,|L1.16920|
00409e  313c              ADDS     r1,r1,#0x3c
0040a0  484d              LDR      r0,|L1.16856|
0040a2  f7fffffe          BL       __aeabi_memcpy
;;;222    								memcpy (port, "5555", 4);		
0040a6  484b              LDR      r0,|L1.16852|
0040a8  495b              LDR      r1,|L1.16920|
0040aa  3154              ADDS     r1,r1,#0x54
0040ac  880a              LDRH     r2,[r1,#0]
0040ae  8002              STRH     r2,[r0,#0]
0040b0  8849              LDRH     r1,[r1,#2]
0040b2  8041              STRH     r1,[r0,#2]
;;;223    								memcpy (interval, "5", 1);										
0040b4  4859              LDR      r0,|L1.16924|
0040b6  a15a              ADR      r1,|L1.16928|
0040b8  7809              LDRB     r1,[r1,#0]
0040ba  7001              STRB     r1,[r0,#0]
;;;224    								save_ip_port();
0040bc  f7fffffe          BL       save_ip_port
;;;225    								save_interval();	
0040c0  f7fffffe          BL       save_interval
;;;226    								int_erval=myAtoi(interval);		
0040c4  4855              LDR      r0,|L1.16924|
0040c6  f7fffffe          BL       myAtoi
0040ca  4952              LDR      r1,|L1.16916|
0040cc  6008              STR      r0,[r1,#0]  ; int_erval
;;;227    
;;;228    
;;;229    	send_GSM("\r\nAT+CFUN=0\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	
0040ce  2004              MOVS     r0,#4
0040d0  4b3a              LDR      r3,|L1.16828|
0040d2  3b08              SUBS     r3,r3,#8
0040d4  4a39              LDR      r2,|L1.16828|
0040d6  a13b              ADR      r1,|L1.16836|
0040d8  9000              STR      r0,[sp,#0]
0040da  483b              LDR      r0,|L1.16840|
0040dc  3834              SUBS     r0,r0,#0x34
0040de  f7fffffe          BL       send_GSM
;;;230    clear();	
0040e2  f7fffffe          BL       clear
;;;231    //delay(10);
;;;232    
;;;233    	send_GSM("\r\nAT+CFUN=1\r\n", "Ready", "NOT INSERTED" , "ERROR",7);	
0040e6  2007              MOVS     r0,#7
0040e8  4b34              LDR      r3,|L1.16828|
0040ea  3b08              SUBS     r3,r3,#8
0040ec  a24d              ADR      r2,|L1.16932|
0040ee  a151              ADR      r1,|L1.16948|
0040f0  9000              STR      r0,[sp,#0]
0040f2  4835              LDR      r0,|L1.16840|
0040f4  3810              SUBS     r0,r0,#0x10
0040f6  f7fffffe          BL       send_GSM
;;;234    
;;;235    
;;;236    
;;;237    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",2); 
0040fa  2002              MOVS     r0,#2
0040fc  4b2e              LDR      r3,|L1.16824|
0040fe  4a2f              LDR      r2,|L1.16828|
004100  4619              MOV      r1,r3
004102  e09b              B        |L1.16956|
                  |L1.16644|
                          DCD      0xe000e000
                  |L1.16648|
                          DCD      0x00009c3f
                  |L1.16652|
                          DCD      overhead
                  |L1.16656|
004110  73797374          DCB      "systick start value: 0x%x\n\r",0
004114  69636b20
004118  73746172
00411c  74207661
004120  6c75653a
004124  20307825
004128  780a0d00
                  |L1.16684|
00412c  73797374          DCB      "systick end value: 0x%x\n\r",0
004130  69636b20
004134  656e6420
004138  76616c75
00413c  653a2030
004140  7825780a
004144  0d00    
004146  00                DCB      0
004147  00                DCB      0
                  |L1.16712|
004148  73797374          DCB      "systick current value read overhead: 0x%x\n\r",0
00414c  69636b20
004150  63757272
004154  656e7420
004158  76616c75
00415c  65207265
004160  6164206f
004164  76657268
004168  6561643a
00416c  20307825
004170  780a0d00
                  |L1.16756|
                          DCD      0x00001388
                  |L1.16760|
                          DCD      i
                  |L1.16764|
                          DCD      0x40048000
                  |L1.16768|
                          DCD      0x4003b000
                  |L1.16772|
                          DCD      0x400ff040
                  |L1.16776|
004188  49676e69          DCB      "Ignition senses 1\r\n",0
00418c  74696f6e
004190  2073656e
004194  73657320
004198  310d0a00
                  |L1.16796|
00419c  49676e69          DCB      "Ignition senses 0\r\n",0
0041a0  74696f6e
0041a4  2073656e
0041a8  73657320
0041ac  300d0a00
                  |L1.16816|
                          DCD      sleep_flag
                  |L1.16820|
                          DCD      tmeout
                  |L1.16824|
                          DCD      ||.text||+0x880
                  |L1.16828|
                          DCD      ||.text||+0x450
                  |L1.16832|
                          DCD      ||.text||+0x1294
                  |L1.16836|
0041c4  4f4b00            DCB      "OK",0
0041c7  00                DCB      0
                  |L1.16840|
                          DCD      ||.text||+0x1d6c
                  |L1.16844|
                          DCD      data
                  |L1.16848|
                          DCD      ||.text||+0x2184
                  |L1.16852|
                          DCD      port
                  |L1.16856|
                          DCD      ||ip||
                  |L1.16860|
                          DCD      at_
                  |L1.16864|
0041e0  3e00              DCB      ">",0
0041e2  00                DCB      0
0041e3  00                DCB      0
                  |L1.16868|
0041e4  48617264          DCB      "HardFault Reset\r\n",0
0041e8  4661756c
0041ec  74205265
0041f0  7365740d
0041f4  0a00    
0041f6  00                DCB      0
0041f7  00                DCB      0
                  |L1.16888|
                          DCD      0x4006b000
                  |L1.16892|
0041fc  0a0a2041          DCB      "\n\n AT+CMGD=1,4\r\n",0
004200  542b434d
004204  47443d31
004208  2c340d0a
00420c  00      
00420d  00                DCB      0
00420e  00                DCB      0
00420f  00                DCB      0
                  |L1.16912|
                          DCD      data2
                  |L1.16916|
                          DCD      int_erval
                  |L1.16920|
                          DCD      ||.text||+0x1794
                  |L1.16924|
                          DCD      interval
                  |L1.16928|
004220  3500              DCB      "5",0
004222  00                DCB      0
004223  00                DCB      0
                  |L1.16932|
004224  4e4f5420          DCB      "NOT INSERTED",0
004228  494e5345
00422c  52544544
004230  00      
004231  00                DCB      0
004232  00                DCB      0
004233  00                DCB      0
                  |L1.16948|
004234  52656164          DCB      "Ready",0
004238  7900    
00423a  00                DCB      0
00423b  00                DCB      0
                  |L1.16956|
00423c  391c              SUBS     r1,r1,#0x1c
00423e  9000              STR      r0,[sp,#0]
004240  48fa              LDR      r0,|L1.17964|
004242  f7fffffe          BL       send_GSM
;;;238    if(strlen(uart_string_gsm)>2){RED_ON;}else{RED_OFF;}
004246  48fa              LDR      r0,|L1.17968|
004248  f7fffffe          BL       strlen
00424c  2802              CMP      r0,#2
00424e  d904              BLS      |L1.16986|
004250  2001              MOVS     r0,#1
004252  0740              LSLS     r0,r0,#29
004254  49f7              LDR      r1,|L1.17972|
004256  6088              STR      r0,[r1,#8]
004258  e003              B        |L1.16994|
                  |L1.16986|
00425a  2001              MOVS     r0,#1
00425c  0740              LSLS     r0,r0,#29
00425e  49f5              LDR      r1,|L1.17972|
004260  6048              STR      r0,[r1,#4]
                  |L1.16994|
;;;239    delay(100);
004262  2064              MOVS     r0,#0x64
004264  f7fffffe          BL       delay
;;;240    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",2); 
004268  2002              MOVS     r0,#2
00426a  4bf3              LDR      r3,|L1.17976|
00426c  4af3              LDR      r2,|L1.17980|
00426e  4619              MOV      r1,r3
004270  391c              SUBS     r1,r1,#0x1c
004272  9000              STR      r0,[sp,#0]
004274  48ed              LDR      r0,|L1.17964|
004276  f7fffffe          BL       send_GSM
;;;241    if(strlen(uart_string_gsm)>2){RED_ON;}else{RED_OFF;}
00427a  48ed              LDR      r0,|L1.17968|
00427c  f7fffffe          BL       strlen
004280  2802              CMP      r0,#2
004282  d904              BLS      |L1.17038|
004284  2001              MOVS     r0,#1
004286  0740              LSLS     r0,r0,#29
004288  49ea              LDR      r1,|L1.17972|
00428a  6088              STR      r0,[r1,#8]
00428c  e003              B        |L1.17046|
                  |L1.17038|
00428e  2001              MOVS     r0,#1
004290  0740              LSLS     r0,r0,#29
004292  49e8              LDR      r1,|L1.17972|
004294  6048              STR      r0,[r1,#4]
                  |L1.17046|
;;;242    delay(100);
004296  2064              MOVS     r0,#0x64
004298  f7fffffe          BL       delay
;;;243    
;;;244    
;;;245    send_GSM("\n\nAT+CSCLK=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
00429c  48e8              LDR      r0,|L1.17984|
00429e  6800              LDR      r0,[r0,#0]  ; tmeout
0042a0  4be5              LDR      r3,|L1.17976|
0042a2  4ae6              LDR      r2,|L1.17980|
0042a4  4619              MOV      r1,r3
0042a6  391c              SUBS     r1,r1,#0x1c
0042a8  9000              STR      r0,[sp,#0]
0042aa  a0e6              ADR      r0,|L1.17988|
0042ac  f7fffffe          BL       send_GSM
;;;246    
;;;247    
;;;248    GPS_COLLECT();
0042b0  f7fffffe          BL       GPS_COLLECT
;;;249    
;;;250    		send_modem(data);
0042b4  48e7              LDR      r0,|L1.18004|
0042b6  f7fffffe          BL       send_modem
;;;251    		send_modem("\r\n\r\n");
0042ba  a0e7              ADR      r0,|L1.18008|
0042bc  f7fffffe          BL       send_modem
;;;252    
;;;253    
;;;254    
;;;255    
;;;256    
;;;257    
;;;258    
;;;259    send_GSM("\n\nAT+SD2PCM=0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
0042c0  48df              LDR      r0,|L1.17984|
0042c2  6800              LDR      r0,[r0,#0]  ; tmeout
0042c4  4bdc              LDR      r3,|L1.17976|
0042c6  4add              LDR      r2,|L1.17980|
0042c8  4619              MOV      r1,r3
0042ca  391c              SUBS     r1,r1,#0x1c
0042cc  9000              STR      r0,[sp,#0]
0042ce  a0e4              ADR      r0,|L1.18016|
0042d0  f7fffffe          BL       send_GSM
;;;260    //delay(10);	
;;;261    
;;;262    send_GSM("\n\nAT&W\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
0042d4  48da              LDR      r0,|L1.17984|
0042d6  6800              LDR      r0,[r0,#0]  ; tmeout
0042d8  4bd7              LDR      r3,|L1.17976|
0042da  4ad8              LDR      r2,|L1.17980|
0042dc  4619              MOV      r1,r3
0042de  391c              SUBS     r1,r1,#0x1c
0042e0  9000              STR      r0,[sp,#0]
0042e2  a0e3              ADR      r0,|L1.18032|
0042e4  f7fffffe          BL       send_GSM
;;;263    delay(10);	
0042e8  200a              MOVS     r0,#0xa
0042ea  f7fffffe          BL       delay
;;;264    send_GSM("\n\nAT+FSDRIVE=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
0042ee  48d4              LDR      r0,|L1.17984|
0042f0  6800              LDR      r0,[r0,#0]  ; tmeout
0042f2  4bd1              LDR      r3,|L1.17976|
0042f4  4ad1              LDR      r2,|L1.17980|
0042f6  4619              MOV      r1,r3
0042f8  391c              SUBS     r1,r1,#0x1c
0042fa  9000              STR      r0,[sp,#0]
0042fc  a0df              ADR      r0,|L1.18044|
0042fe  f7fffffe          BL       send_GSM
;;;265    clear();
004302  f7fffffe          BL       clear
;;;266    delay(10);	
004306  200a              MOVS     r0,#0xa
004308  f7fffffe          BL       delay
;;;267    send_GSM("\n\nAT+FSMEM\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
00430c  48cc              LDR      r0,|L1.17984|
00430e  6800              LDR      r0,[r0,#0]  ; tmeout
004310  4bc9              LDR      r3,|L1.17976|
004312  4aca              LDR      r2,|L1.17980|
004314  4619              MOV      r1,r3
004316  391c              SUBS     r1,r1,#0x1c
004318  9000              STR      r0,[sp,#0]
00431a  a0dd              ADR      r0,|L1.18064|
00431c  f7fffffe          BL       send_GSM
;;;268    
;;;269    
;;;270    
;;;271    
;;;272    
;;;273    
;;;274    
;;;275    
;;;276    ignread();
004320  f7fffffe          BL       ignread
;;;277    
;;;278    
;;;279    
;;;280    //send_GSM("\r\nAT+CPBW=0\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;281    //send_GSM("\r\nAT+CPBW=1\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;282    //send_GSM("\r\nAT+CPBW=2\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;283    //send_GSM("\r\nAT+CPBW=3\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;284    //send_GSM("\r\nAT+CPBW=4\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;285    //send_GSM("\r\nAT+CPBW=5\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;286    //send_GSM("\r\nAT+CPBW=6\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;287    //send_GSM("\r\nAT+CPBW=7\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;288    //send_GSM("\r\nAT+CPBW=8\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;289    //send_GSM("\r\nAT+CPBW=9\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;290    //send_GSM("\r\nAT+CPBW=10\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);delay(100);	
;;;291    //send_GSM("\r\nAT+CPBW=11\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);delay(100);	
;;;292    //send_GSM("\r\nAT+CPBW=12\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;293    //send_GSM("\r\nAT+CPBW=13\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);delay(100);	
;;;294    //send_GSM("\r\nAT+CPBW=14\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;295    //send_GSM("\r\nAT+CPBW=15\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;296    //send_GSM("\r\nAT+CPBW=16\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;297    //send_GSM("\r\nAT+CPBW=17\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;298    //send_GSM("\r\nAT+CPBW=18\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;299    //send_GSM("\r\nAT+CPBW=19\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;300    //send_GSM("\r\nAT+CPBW=20\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;301    //send_GSM("\r\nAT+CPBW=21\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;302    //send_GSM("\r\nAT+CPBW=22\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;303    //send_GSM("\r\nAT+CPBW=23\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	delay(100);
;;;304    
;;;305    
;;;306    
;;;307    
;;;308    
;;;309    
;;;310    						msg_sim800(); 	
004324  f7fffffe          BL       msg_sim800
;;;311    
;;;312    dtr_sleep();
004328  f7fffffe          BL       dtr_sleep
;;;313    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",2); 
00432c  2002              MOVS     r0,#2
00432e  4bc2              LDR      r3,|L1.17976|
004330  4ac2              LDR      r2,|L1.17980|
004332  4619              MOV      r1,r3
004334  391c              SUBS     r1,r1,#0x1c
004336  9000              STR      r0,[sp,#0]
004338  48bc              LDR      r0,|L1.17964|
00433a  f7fffffe          BL       send_GSM
;;;314    if(strlen(uart_string_gsm)>2){GREEN_ON;}else{GREEN_OFF;}
00433e  48bc              LDR      r0,|L1.17968|
004340  f7fffffe          BL       strlen
004344  2802              CMP      r0,#2
004346  d904              BLS      |L1.17234|
004348  2001              MOVS     r0,#1
00434a  07c0              LSLS     r0,r0,#31
00434c  49b9              LDR      r1,|L1.17972|
00434e  6088              STR      r0,[r1,#8]
004350  e003              B        |L1.17242|
                  |L1.17234|
004352  2001              MOVS     r0,#1
004354  07c0              LSLS     r0,r0,#31
004356  49b7              LDR      r1,|L1.17972|
004358  6048              STR      r0,[r1,#4]
                  |L1.17242|
;;;315    delay(100);
00435a  2064              MOVS     r0,#0x64
00435c  f7fffffe          BL       delay
;;;316    
;;;317    HardFault_Handler();
004360  f7fffffe          BL       HardFault_Handler
;;;318    
;;;319    
;;;320    
;;;321    
;;;322    
;;;323    
;;;324    
;;;325    
;;;326    
;;;327    
;;;328    
;;;329    
;;;330    
;;;331    
;;;332    
;;;333    
;;;334    
;;;335    
;;;336    
;;;337    
;;;338    
;;;339    
;;;340    
;;;341    
;;;342    
;;;343    
;;;344    
;;;345    
;;;346    
;;;347    
;;;348    
;;;349    
;;;350    
;;;351    
;;;352    
;;;353    
;;;354    
;;;355    
;;;356    
;;;357    
;;;358    
;;;359    
;;;360    
;;;361    
;;;362    
;;;363    
;;;364    
;;;365    
;;;366    
;;;367    
;;;368    
;;;369    
;;;370    
;;;371    
;;;372    
;;;373    
;;;374    
;;;375    
;;;376    
;;;377    do{
004364  bf00              NOP      
                  |L1.17254|
;;;378    	
;;;379    			RESET_ON;
004366  2020              MOVS     r0,#0x20
004368  49b2              LDR      r1,|L1.17972|
00436a  3980              SUBS     r1,r1,#0x80
00436c  6048              STR      r0,[r1,#4]
;;;380    	delay(10);
00436e  200a              MOVS     r0,#0xa
004370  f7fffffe          BL       delay
;;;381    		uart_putchar(UART1_BASE_PTR,0xA);
004374  210a              MOVS     r1,#0xa
004376  48ca              LDR      r0,|L1.18080|
004378  f7fffffe          BL       uart_putchar
;;;382    		uart_putchar(UART1_BASE_PTR,0x1A);			
00437c  211a              MOVS     r1,#0x1a
00437e  48c8              LDR      r0,|L1.18080|
004380  f7fffffe          BL       uart_putchar
;;;383    	
;;;384    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",2);  
004384  2002              MOVS     r0,#2
004386  4bac              LDR      r3,|L1.17976|
004388  4aac              LDR      r2,|L1.17980|
00438a  4619              MOV      r1,r3
00438c  391c              SUBS     r1,r1,#0x1c
00438e  9000              STR      r0,[sp,#0]
004390  48a6              LDR      r0,|L1.17964|
004392  f7fffffe          BL       send_GSM
;;;385     delay(100); 
004396  2064              MOVS     r0,#0x64
004398  f7fffffe          BL       delay
;;;386    }while(1);
00439c  e7e3              B        |L1.17254|
;;;387    clear();delay(100);
;;;388    get_imei();	
;;;389    GPS_COLLECT();
;;;390    strcat(data,"CH\n");	
;;;391    
;;;392    
;;;393    int_erval=5;
;;;394    
;;;395    //if(!(strstr(uart_string_gsm, "OK")|| strstr(uart_string_gsm, "ERROR")))
;;;396    //{HardFault_Handler();}
;;;397    
;;;398    
;;;399    
;;;400    	send_GSM("\r\nAT+CFUN=0\r\r\n\n", "OK", "ERROR\r\n" , "ERROR",4);	
;;;401    clear();	
;;;402    //delay(10);
;;;403    
;;;404    	send_GSM("\r\nAT+CFUN=1\r\n", "Ready", "NOT INSERTED" , "ERROR",7);	
;;;405    
;;;406    	
;;;407    GPS_COLLECT();
;;;408    strcat(data,"CH\n");	
;;;409    
;;;410    //GPS_COLLECT();
;;;411    //  strcat(data,"CH\n");	
;;;412    //	
;;;413    
;;;414    GPS_COLLECT();
;;;415    strcat(data,"CH\n");	
;;;416    
;;;417    
;;;418    //delay(100);
;;;419    //send_modem("Restarting the device\r");	
;;;420    //uart_putchar(UART1_BASE_PTR,'A');
;;;421    //uart_putchar(UART1_BASE_PTR,'B');
;;;422    //uart_putchar(UART1_BASE_PTR,'C');	uart_putchar(UART1_BASE_PTR,0x1A);
;;;423    //uart_putchar(UART1_BASE_PTR,0x1A);		uart_putchar(UART1_BASE_PTR,0x1A);
;;;424    
;;;425    //	send_modem("$PMTK225,0*2B");	send_modem("$PMTK225,0*2B");
;;;426    stateCount=3;
;;;427    LED_state();
;;;428    
;;;429    //do
;;;430    //	{
;;;431    
;;;432    //		uart_putchar(UART1_BASE_PTR,0x1A);
;;;433    //		uart_putchar(UART1_BASE_PTR,0xA);
;;;434    //		uart_putchar(UART1_BASE_PTR,0x1A);
;;;435    
;;;436    	
;;;437    //send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    
;;;438    //		
;;;439    //send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);  	
;;;440    //	cond277=(strstr(uart_string_gsm, "OK"));
;;;441    //	cond20077=(strstr(uart_string_gsm, "ERROR"));
;;;442    //if((!(cond277|| cond20077 ))  && sleep_flag != 1){
;;;443    //	HardFault_Handler();
;;;444    //}
;;;445    		//delay(10);
;;;446    //if(strlen(uart_string_gsm) < 12)
;;;447    
;;;448    //while(1){
;;;449    //HardFault_Handler();
;;;450    ////	RESET_OFF;delay(50);
;;;451    //	
;;;452    ////	main();
;;;453    //}
;;;454    
;;;455    get_imei();	
;;;456    
;;;457    	
;;;458    //send_modem2("$PMTK225,0*2B");
;;;459    //while(!strstr(uart_string_gsm,"OK\r\n"));
;;;460    
;;;461    //bat_cind();
;;;462    //delay(1000);
;;;463    
;;;464    send_GSM("\n\nAT&W\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
;;;465    //delay(10);
;;;466    
;;;467    send_GSM("\n\nATS0=2\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout); 	
;;;468    
;;;469    get_imei();
;;;470    
;;;471    send_GSM("\n\nAT&F\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout); 	
;;;472    
;;;473    
;;;474    send_GSM("\n\nAT&D\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout); 	
;;;475    
;;;476    
;;;477    send_GSM("\n\nAT+IFC=0,0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;478    
;;;479    
;;;480    send_GSM("\n\nAT+CIPQSEND?\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;481    
;;;482    send_GSM("\n\nAT+CIPQSEND=0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;483    
;;;484    
;;;485    //delay(10);
;;;486    
;;;487    
;;;488    //delay(10);
;;;489    
;;;490    send_GSM("\n\nAT+SD2PCM=0\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;491    //delay(10);	
;;;492    
;;;493    send_GSM("\n\nAT&W\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;494    delay(10);	
;;;495    send_GSM("\n\nAT+FSDRIVE=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;496    clear();
;;;497    delay(10);	
;;;498    //;	
;;;499    //send_GSM("\n\nAT+FSCREATE=D:\\LOG.TXT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;500    
;;;501    	GPS_COLLECT();
;;;502      strcat(data,"CH\n");	
;;;503    
;;;504    send_GSM("\n\nAT+FSMEM\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;505    delay(100);	
;;;506    
;;;507    if(strstr(uart_string_gsm,"D:")){
;;;508    send_GSM("\n\nAT+FSCREATE=C:\\LOGGING_DRIVE.TXT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
;;;509    	
;;;510    memset(at_,0,100);
;;;511    sprintf(at_,"\r\nAT+FSWRITE=C:\\LOGGING_DRIVE.TXT,0,%d,10\r\n",2);	
;;;512    send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",10);	
;;;513    	
;;;514    clear();
;;;515    send_modem("D:");	
;;;516    	
;;;517    }
;;;518    else{
;;;519    send_GSM("\n\nAT+FSCREATE=C:\\LOGGING_DRIVE.TXT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
;;;520    	
;;;521    memset(at_,0,100);
;;;522    sprintf(at_,"\r\nAT+FSWRITE=C:\\LOGGING_DRIVE.TXT,0,%d,10\r\n",2);	
;;;523    send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",10);	
;;;524    	
;;;525    clear();
;;;526    send_modem("C:");		
;;;527    	
;;;528    }	
;;;529    
;;;530    delay(100);
;;;531    
;;;532    //delay(10);
;;;533    
;;;534    send_GSM("\n\nATS0=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;535    
;;;536    //delay(10);
;;;537    
;;;538    //delay(10);
;;;539    
;;;540    //printf("%s\n",send_GSM("\n\nAT+CMGD=1,4\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));//del_msg();
;;;541    //delay(10);
;;;542    
;;;543    //printf("%s\n",send_GSM("\n\nAT+CPBW=1,\"100\",129,\"OWNER1\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;544    
;;;545    
;;;546    //printf("%s\n",send_GSM("\n\nAT+CPBW=2,\"100\",129,\"OWNER2\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;547    
;;;548    
;;;549    //printf("%s\n",send_GSM("\n\nAT+CPBW=3,\"100\",129,\"OWNER3\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;550    
;;;551    
;;;552    //printf("%s\n",send_GSM("\n\nAT+CPBW=4,\"100\",129,\"OWNER4\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;553    
;;;554    send_GSM("\n\nAT+CSCLK=1\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;555    
;;;556    
;;;557    send_GSM("\r\n\r\nAT+CMGD=1,4\r\n\n\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
;;;558    
;;;559    
;;;560    send_GSM("\n\nAT+CPBW=5,\"9873999108\",129,\"OWNER5\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;561    
;;;562    
;;;563    send_GSM("\n\nAT+CPBW=6,\"8287324005\",129,\"OWNER6\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;564    
;;;565    //printf("%s\n",send_GSM("\n\nAT+CPBW=4,\"8287324005\",129,\"OWNER2\"\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;566    
;;;567    //		memset(at_,0,100);
;;;568    //		sprintf(at_, "\nAT+FSREAD=C:\\RTC_TICKS.TXT,0,100,1\r\n");		
;;;569    //		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
;;;570    //		parse_g(uart_string_gsm, 1,3, '\n', '\r',_rtcticks);
;;;571    //		rtcticks2=myAtoi(_rtcticks);		
;;;572    
;;;573    
;;;574    
;;;575    read_interval();
;;;576    send_GSM("\n\nAT+CMGF=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;577    //delay(10);	
;;;578    
;;;579    send_GSM("\n\nAT+CSCA?\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    //   uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);uart_putchar(UART1_BASE_PTR,0xA);uart_putchar(UART1_BASE_PTR,0x1A);		
;;;580    							memset(at_,0,100);
;;;581    							memset(num_o,0,15);
;;;582    							parse_g(uart_string_gsm, 1, 2, '\"', '\"', num_o);
;;;583    							sprintf(at_, "\r\nAT+CSCA=\"%s\"\r\n", num_o);
;;;584    							send_GSM(at_,"OK\r\n","ERROR\r\n","ERROR:",tmeout);
;;;585    
;;;586    //delay(10);	
;;;587    
;;;588    								send_GSM("\nAT+FSCREATE=C:\\IP_PORT.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;589    				//				send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;590    								send_GSM("\nAT+FSCREATE=C:\\INTERVAL.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;591    								memcpy (ip, "104.236.203.4", 13);
;;;592    								memcpy (port, "5555", 4);		
;;;593    								memcpy (interval, "5", 1);										
;;;594    								save_ip_port();
;;;595    								save_interval();
;;;596    			//					printf("\n\n\t,%s,%s,%s,\n",ip,port,interval);		
;;;597    
;;;598    //			RESET_OFF;
;;;599    //			delay(20);
;;;600    //			RESET_ON;
;;;601    
;;;602    
;;;603    read_ip_port();
;;;604    		memset(at_,0,100);
;;;605    		memset(drive,0,5);
;;;606    		sprintf(at_, "\nAT+FSREAD=C:\\LOGGING_DRIVE.TXT,0,100,1\r\n");		
;;;607    		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
;;;608    		parse_g(uart_string_gsm, 1,3, '\n', '\r',drive);
;;;609    	
;;;610    
;;;611    tcp_initialization2();
;;;612    
;;;613    //							GPS_COLLECT();		accel_read();detect_motion();
;;;614    
;;;615    //do{
;;;616    //printf("%s\n",send_GPS("\n\nAT+CGPSPWR=1\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;617    //delay(50);
;;;618    //printf("%s\n",send_GPS("\n\nAT+CGPSOUT=255\n\n","OK\r\n","ERROR\r\n","ERROR:",tmeout));
;;;619    //}while(strstr(uart_string_gps,"ERROR"));
;;;620    
;;;621    //delay(50);
;;;622    
;;;623    //auto_caliberate_accelerometer();
;;;624    //tcp_initialization();
;;;625    
;;;626    //phonebook_read("5");parse(1,2);
;;;627    	
;;;628    
;;;629    while(1)
;;;630    {int length_string;
;;;631    	//	accel_read();
;;;632    
;;;633    					
;;;634    					
;;;635    						{ // main tcp GPS_COLLECT
;;;636    
;;;637    					//		bat_cind();
;;;638    
;;;639    							send_GSM("\r\nAT+CIPCLOSE\r\n", "CLOSE OK", "ERROR" , "ERROR:",tmeout);		
;;;640    
;;;641    						msg_sim800(); 	
;;;642    							
;;;643    if(rtcticks2>21600){ //21600
;;;644    	rtcticks2=0;
;;;645    
;;;646    	// wakeup and reset
;;;647    
;;;648        DTR_OFF;		// not sleep	
;;;649    //	  HardFault_Handler();
;;;650    delay(1000);
;;;651    send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    
;;;652    		
;;;653    send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);  		
;;;654    
;;;655    clear();	
;;;656    
;;;657    				memset(data,0,strlen(data));	
;;;658    
;;;659    GPS_COLLECT();
;;;660    strcat(data,"CH\n");
;;;661    	
;;;662    
;;;663    	
;;;664    send_GSM("\n\nAT+CUSD=1,\"*111*6*2#\"\r\n","+CUSD: 4","ERROR",", 15",20); 
;;;665    parse_g(uart_string_gsm, 3, 4, '\"', '\"', data_balance);
;;;666    get_imei();
;;;667    strcat(data,imei);
;;;668    strcat(data,",");	
;;;669    strcat(data,"DATA_BALANCE,");	
;;;670    strcat(data,data_balance);		
;;;671    strcat(data,"\n");	
;;;672    rtcticks=0;
;;;673    send_GSM("\n\nAT+CUSD=1,\"*\"","+CUSD: ","ERROR",", 15",20); 
;;;674    
;;;675    GPS_COLLECT();
;;;676    strcat(data,"CH\n");	
;;;677    memset(at_,0,100);
;;;678    sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
;;;679    send_GSM( at_ , "CONNECT", "ERROR" , "ERROR\r\n",tmeout);	
;;;680    send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT FAIL",tmeout);	
;;;681    send_tcp_bal();
;;;682    send_GSM("\r\nAT+CIPCLOSE\r\n", "CLOSE OK", "ERROR" , "ERROR:",tmeout);		
;;;683    
;;;684    }				
;;;685    
;;;686    //if(save_rtcticks == 1){
;;;687    //	// wakeup and reset
;;;688    
;;;689    //    DTR_OFF;		// not sleep	
;;;690    ////	  HardFault_Handler();
;;;691    //delay(1000);
;;;692    //send_GSM("\n\nAT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);    
;;;693    //		
;;;694    //send_GSM("\n\nAT+GSV\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);  		
;;;695    //clear();	
;;;696    //	send_GSM("\n\nAT+FSCREATE=C:\\RTC_TICKS.TXT\r\n","OK\r\n","ERROR\r\n","ERROR:",tmeout);	
;;;697    
;;;698    //	
;;;699    //	memset(_rtcticks,0,10);
;;;700    //	sprintf(_rtcticks,"%d",rtcticks2);
;;;701    //	
;;;702    //	memset(at_,0,100);
;;;703    //	sprintf(at_,"\r\nAT+FSWRITE=C:\\RTC_TICKS.TXT,0,%d,10\r\n",strlen(_rtcticks));	
;;;704    //	send_GSM(at_, ">", "ERROR\r\n" , "ERROR:",tmeout);	
;;;705    
;;;706    //	clear();
;;;707    //	send_modem(_rtcticks);	
;;;708    //	save_rtcticks=0;
;;;709    //	
;;;710    //}	
;;;711     DTR_OFF;		// not sleep	
;;;712     delay(100);
;;;713    send_GSM("\n\nAT+CBC\r\n","OK","ERROR","ERROR:",tmeout);
;;;714     	// not sleep	
;;;715    memset(num2,0,30);
;;;716    parse_g(uart_string_gsm, 2, 3, ',', '\r' ,num2);
;;;717    voltagecbc=myAtoi(num2);
;;;718    //parse(uart_string_gsm, 2, 4, num2);
;;;719    if(voltagecbc>4000){
;;;720    dtr_sleep();}
;;;721    else{DTR_OFF;sleep_flag=0;}
;;;722    delay(100);
;;;723    
;;;724    
;;;725    if	(sleep_flag != 1)			
;;;726    {
;;;727    							memset(at_,0,100);
;;;728    							sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
;;;729    							memset(data,0,strlen(data));
;;;730    							GPS_COLLECT();
;;;731    							send_GSM( at_ , "CONNECT", "ERROR" , "ERROR\r\n",tmeout);	
;;;732    							send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT FAIL",tmeout);	
;;;733    							send_tcp();
;;;734    }							
;;;735    
;;;736    
;;;737    
;;;738    
;;;739    
;;;740    							
;;;741    }
;;;742    
;;;743    		
;;;744    /******************while end**********************/		
;;;745    	} 
;;;746    /******************main end***********************/
;;;747    }
;;;748    /********************************************************************/
                          ENDP

                  LPTimer_IRQHandler PROC
;;;800    
;;;801    void LPTimer_IRQHandler(void)
00439e  48c1              LDR      r0,|L1.18084|
;;;802    {
;;;803    lpticks+=1;
0043a0  6800              LDR      r0,[r0,#0]  ; lpticks
0043a2  1c40              ADDS     r0,r0,#1
0043a4  49bf              LDR      r1,|L1.18084|
0043a6  6008              STR      r0,[r1,#0]  ; lpticks
;;;804    rtcticks++;
0043a8  48bf              LDR      r0,|L1.18088|
0043aa  6800              LDR      r0,[r0,#0]  ; rtcticks
0043ac  1c40              ADDS     r0,r0,#1
0043ae  49be              LDR      r1,|L1.18088|
0043b0  6008              STR      r0,[r1,#0]  ; rtcticks
;;;805    	tout++;tout2++;
0043b2  48be              LDR      r0,|L1.18092|
0043b4  6800              LDR      r0,[r0,#0]  ; tout
0043b6  1c40              ADDS     r0,r0,#1
0043b8  49bc              LDR      r1,|L1.18092|
0043ba  6008              STR      r0,[r1,#0]  ; tout
0043bc  48bc              LDR      r0,|L1.18096|
0043be  6800              LDR      r0,[r0,#0]  ; tout2
0043c0  1c40              ADDS     r0,r0,#1
0043c2  49bb              LDR      r1,|L1.18096|
0043c4  6008              STR      r0,[r1,#0]  ; tout2
;;;806    	rtcticks2++;
0043c6  48bb              LDR      r0,|L1.18100|
0043c8  6800              LDR      r0,[r0,#0]  ; rtcticks2
0043ca  1c40              ADDS     r0,r0,#1
0043cc  49b9              LDR      r1,|L1.18100|
0043ce  6008              STR      r0,[r1,#0]  ; rtcticks2
;;;807    //	if(rtcticks>=3600){save_rtcticks=1;rtcticks=0;}//3600
;;;808    	
;;;809    	
;;;810    	switch(rtcticks)
0043d0  48b5              LDR      r0,|L1.18088|
0043d2  6800              LDR      r0,[r0,#0]  ; rtcticks
0043d4  2801              CMP      r0,#1
0043d6  d006              BEQ      |L1.17382|
0043d8  2802              CMP      r0,#2
0043da  d008              BEQ      |L1.17390|
0043dc  2803              CMP      r0,#3
0043de  d00a              BEQ      |L1.17398|
0043e0  2804              CMP      r0,#4
0043e2  d113              BNE      |L1.17420|
0043e4  e00b              B        |L1.17406|
                  |L1.17382|
;;;811    	{
;;;812    		case 1:
;;;813    			IGNITION_OFF;
0043e6  2002              MOVS     r0,#2
0043e8  49b3              LDR      r1,|L1.18104|
0043ea  6048              STR      r0,[r1,#4]
;;;814    			break;
0043ec  e00e              B        |L1.17420|
                  |L1.17390|
;;;815    		case 2:
;;;816    			IGNITION_ON;
0043ee  2002              MOVS     r0,#2
0043f0  49b1              LDR      r1,|L1.18104|
0043f2  6088              STR      r0,[r1,#8]
;;;817    			break;
0043f4  e00a              B        |L1.17420|
                  |L1.17398|
;;;818    		case 3:
;;;819    			FUEL_OFF;break;
0043f6  2004              MOVS     r0,#4
0043f8  49af              LDR      r1,|L1.18104|
0043fa  6048              STR      r0,[r1,#4]
0043fc  e006              B        |L1.17420|
                  |L1.17406|
;;;820    		case 4:
;;;821    			FUEL_ON;rtcticks=0;break;
0043fe  2004              MOVS     r0,#4
004400  49ad              LDR      r1,|L1.18104|
004402  6088              STR      r0,[r1,#8]
004404  2000              MOVS     r0,#0
004406  49a8              LDR      r1,|L1.18088|
004408  6008              STR      r0,[r1,#0]  ; rtcticks
00440a  bf00              NOP      
                  |L1.17420|
00440c  bf00              NOP                            ;814
;;;822    	
;;;823    		
;;;824    	
;;;825    		
;;;826    		
;;;827    		
;;;828    		
;;;829    		
;;;830    	}
;;;831    	
;;;832    	
;;;833    	
;;;834    	
;;;835    	
;;;836    
;;;837      LPTMR0_CSR |=  LPTMR_CSR_TCF_MASK;   // write 1 to TCF to clear the LPT timer compare flag
00440e  48ab              LDR      r0,|L1.18108|
004410  6800              LDR      r0,[r0,#0]
004412  2180              MOVS     r1,#0x80
004414  4308              ORRS     r0,r0,r1
004416  49a9              LDR      r1,|L1.18108|
004418  6008              STR      r0,[r1,#0]
;;;838      LPTMR0_CSR = ( LPTMR_CSR_TEN_MASK | LPTMR_CSR_TIE_MASK | LPTMR_CSR_TCF_MASK  );
00441a  20c1              MOVS     r0,#0xc1
00441c  6008              STR      r0,[r1,#0]
;;;839      
;;;840    }
00441e  4770              BX       lr
;;;841    
                          ENDP

                  auto_caliberate_accelerometer PROC
;;;1286   
;;;1287   void auto_caliberate_accelerometer()
004420  b510              PUSH     {r4,lr}
;;;1288   {
;;;1289   accel_read();
004422  f7fffffe          BL       accel_read
;;;1290   offxy= -xy_angle;
004426  48a6              LDR      r0,|L1.18112|
004428  6800              LDR      r0,[r0,#0]  ; xy_angle
00442a  4240              RSBS     r0,r0,#0
00442c  49a5              LDR      r1,|L1.18116|
00442e  6008              STR      r0,[r1,#0]  ; offxy
;;;1291   offxz= -xz_angle;
004430  48a5              LDR      r0,|L1.18120|
004432  6800              LDR      r0,[r0,#0]  ; xz_angle
004434  4240              RSBS     r0,r0,#0
004436  49a5              LDR      r1,|L1.18124|
004438  6008              STR      r0,[r1,#0]  ; offxz
;;;1292   offyz= -yz_angle;
00443a  48a5              LDR      r0,|L1.18128|
00443c  6800              LDR      r0,[r0,#0]  ; yz_angle
00443e  4240              RSBS     r0,r0,#0
004440  49a4              LDR      r1,|L1.18132|
004442  6008              STR      r0,[r1,#0]  ; offyz
;;;1293   offx=  -resultx;
004444  48a4              LDR      r0,|L1.18136|
004446  2100              MOVS     r1,#0
004448  5e41              LDRSH    r1,[r0,r1]  ; resultx
00444a  4248              RSBS     r0,r1,#0
00444c  49a3              LDR      r1,|L1.18140|
00444e  6008              STR      r0,[r1,#0]  ; offx
;;;1294   offy=  -resulty; 
004450  48a3              LDR      r0,|L1.18144|
004452  2100              MOVS     r1,#0
004454  5e41              LDRSH    r1,[r0,r1]  ; resulty
004456  4248              RSBS     r0,r1,#0
004458  49a2              LDR      r1,|L1.18148|
00445a  6008              STR      r0,[r1,#0]  ; offy
;;;1295   offz=  -resultz; 	
00445c  48a2              LDR      r0,|L1.18152|
00445e  2100              MOVS     r1,#0
004460  5e41              LDRSH    r1,[r0,r1]  ; resultz
004462  4248              RSBS     r0,r1,#0
004464  49a1              LDR      r1,|L1.18156|
004466  6008              STR      r0,[r1,#0]  ; offz
;;;1296   	
;;;1297   }
004468  bd10              POP      {r4,pc}
;;;1298   	
                          ENDP

                  send_chunk2 PROC
;;;1829   
;;;1830   void send_chunk2()  //send_chunk
00446a  b5f0              PUSH     {r4-r7,lr}
;;;1831   {float fsz;
00446c  b089              SUB      sp,sp,#0x24
;;;1832    int times,qwe,timeout,k5,enters;
;;;1833   	char cond;char*q1;char* q2;char* q3;char *q4;
;;;1834   memset(at_,0,100);
00446e  2164              MOVS     r1,#0x64
004470  489f              LDR      r0,|L1.18160|
004472  f7fffffe          BL       __aeabi_memclr4
;;;1835   sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
004476  4a9f              LDR      r2,|L1.18164|
004478  499f              LDR      r1,|L1.18168|
00447a  489d              LDR      r0,|L1.18160|
00447c  f7fffffe          BL       __2sprintf
;;;1836   send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
004480  486f              LDR      r0,|L1.17984|
004482  6800              LDR      r0,[r0,#0]  ; tmeout
004484  4b6c              LDR      r3,|L1.17976|
004486  4a6d              LDR      r2,|L1.17980|
004488  a19c              ADR      r1,|L1.18172|
00448a  9000              STR      r0,[sp,#0]
00448c  4898              LDR      r0,|L1.18160|
00448e  f7fffffe          BL       send_GSM
;;;1837   	parse_g(uart_string_gsm, 1,6, ' ', '\r', fsize);
004492  489b              LDR      r0,|L1.18176|
004494  210d              MOVS     r1,#0xd
004496  2320              MOVS     r3,#0x20
004498  2206              MOVS     r2,#6
00449a  9100              STR      r1,[sp,#0]
00449c  9001              STR      r0,[sp,#4]
00449e  2101              MOVS     r1,#1
0044a0  4863              LDR      r0,|L1.17968|
0044a2  f7fffffe          BL       parse_g
;;;1838   	fsz=stof(fsize);//7523.7412
0044a6  4896              LDR      r0,|L1.18176|
0044a8  f7fffffe          BL       stof
0044ac  9008              STR      r0,[sp,#0x20]
;;;1839   	times=(fsz/1256)+1;  //1256 //1400
0044ae  4995              LDR      r1,|L1.18180|
0044b0  9808              LDR      r0,[sp,#0x20]
0044b2  f7fffffe          BL       __aeabi_fdiv
0044b6  217f              MOVS     r1,#0x7f
0044b8  05c9              LSLS     r1,r1,#23
0044ba  9001              STR      r0,[sp,#4]
0044bc  f7fffffe          BL       __aeabi_fadd
0044c0  9002              STR      r0,[sp,#8]
0044c2  f7fffffe          BL       __aeabi_f2iz
0044c6  4605              MOV      r5,r0
;;;1840   		if(fsz == 0)times=0;
0044c8  2100              MOVS     r1,#0
0044ca  9808              LDR      r0,[sp,#0x20]
0044cc  f7fffffe          BL       __aeabi_cfcmpeq
0044d0  d100              BNE      |L1.17620|
0044d2  2500              MOVS     r5,#0
                  |L1.17620|
;;;1841   	for(k5=0;k5<times;)
0044d4  2400              MOVS     r4,#0
0044d6  e1ca              B        |L1.18542|
                  |L1.17624|
;;;1842   	{ memset(uart_string_gsm,0,strlen(uart_string_gsm));
0044d8  4855              LDR      r0,|L1.17968|
0044da  f7fffffe          BL       strlen
0044de  4601              MOV      r1,r0
0044e0  9002              STR      r0,[sp,#8]
0044e2  4853              LDR      r0,|L1.17968|
0044e4  f7fffffe          BL       __aeabi_memclr4
;;;1843   		memset(sd_data,0,1256);
0044e8  219d              MOVS     r1,#0x9d
0044ea  00c9              LSLS     r1,r1,#3
0044ec  4886              LDR      r0,|L1.18184|
0044ee  f7fffffe          BL       __aeabi_memclr4
;;;1844   		memset(at_,0,100);
0044f2  2164              MOVS     r1,#0x64
0044f4  487e              LDR      r0,|L1.18160|
0044f6  f7fffffe          BL       __aeabi_memclr4
;;;1845   		sprintf(at_, "\nAT+FSREAD=%s\\LOG.TXT,1,1256,%d\r\n",drive,(k5*1256) );		//1256
0044fa  209d              MOVS     r0,#0x9d
0044fc  00c0              LSLS     r0,r0,#3
0044fe  4360              MULS     r0,r4,r0
004500  4603              MOV      r3,r0
004502  4a7c              LDR      r2,|L1.18164|
004504  a181              ADR      r1,|L1.18188|
004506  487a              LDR      r0,|L1.18160|
004508  f7fffffe          BL       __2sprintf
;;;1846   		send_GSM(at_, "OK\r\n", "ERROR\r\n" , "ERROR:",10);
00450c  200a              MOVS     r0,#0xa
00450e  4b4a              LDR      r3,|L1.17976|
004510  4a4a              LDR      r2,|L1.17980|
004512  4619              MOV      r1,r3
004514  391c              SUBS     r1,r1,#0x1c
004516  9000              STR      r0,[sp,#0]
004518  4875              LDR      r0,|L1.18160|
00451a  f7fffffe          BL       send_GSM
;;;1847       enters = count_char('\r',uart_string_gsm);		
00451e  4944              LDR      r1,|L1.17968|
004520  200d              MOVS     r0,#0xd
004522  f7fffffe          BL       count_char
004526  9006              STR      r0,[sp,#0x18]
;;;1848   		parse_g(uart_string_gsm, 1,enters-1, '\n', '\r' ,sd_data);
004528  4877              LDR      r0,|L1.18184|
00452a  210d              MOVS     r1,#0xd
00452c  9100              STR      r1,[sp,#0]
00452e  9001              STR      r0,[sp,#4]
004530  9806              LDR      r0,[sp,#0x18]
004532  1e42              SUBS     r2,r0,#1
004534  230a              MOVS     r3,#0xa
004536  2101              MOVS     r1,#1
004538  483d              LDR      r0,|L1.17968|
00453a  f7fffffe          BL       parse_g
;;;1849   //		printf ("\n\n\n\t\t\t****************************\n%s\n\n\n\t\t\t*****************************",sd_data);
;;;1850   
;;;1851   		
;;;1852   get_imei();		
00453e  f7fffffe          BL       get_imei
;;;1853   clear();		
004542  f7fffffe          BL       clear
;;;1854   memset(data,0,strlen(data));
004546  4843              LDR      r0,|L1.18004|
004548  f7fffffe          BL       strlen
00454c  4601              MOV      r1,r0
00454e  9002              STR      r0,[sp,#8]
004550  4840              LDR      r0,|L1.18004|
004552  f7fffffe          BL       __aeabi_memclr4
;;;1855   GPS_COLLECT();
004556  f7fffffe          BL       GPS_COLLECT
;;;1856   strcat(data,"CH\n");	
00455a  4975              LDR      r1,|L1.18224|
00455c  483d              LDR      r0,|L1.18004|
00455e  f7fffffe          BL       strcat
;;;1857   log_it();
004562  f7fffffe          BL       log_it
;;;1858   memset(at_,0,100);
004566  2164              MOVS     r1,#0x64
004568  4861              LDR      r0,|L1.18160|
00456a  f7fffffe          BL       __aeabi_memclr4
;;;1859   sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
00456e  4a61              LDR      r2,|L1.18164|
004570  4961              LDR      r1,|L1.18168|
004572  485f              LDR      r0,|L1.18160|
004574  f7fffffe          BL       __2sprintf
;;;1860   send_GSM(at_, "OK", "ERROR" , "ERROR:",tmeout);
004578  4831              LDR      r0,|L1.17984|
00457a  6800              LDR      r0,[r0,#0]  ; tmeout
00457c  4b2e              LDR      r3,|L1.17976|
00457e  4a2f              LDR      r2,|L1.17980|
004580  3a08              SUBS     r2,r2,#8
004582  a15e              ADR      r1,|L1.18172|
004584  9000              STR      r0,[sp,#0]
004586  485a              LDR      r0,|L1.18160|
004588  f7fffffe          BL       send_GSM
;;;1861   parse_g(uart_string_gsm, 1,6, ' ', '\r', fsize);
00458c  485c              LDR      r0,|L1.18176|
00458e  210d              MOVS     r1,#0xd
004590  2320              MOVS     r3,#0x20
004592  2206              MOVS     r2,#6
004594  9100              STR      r1,[sp,#0]
004596  9001              STR      r0,[sp,#4]
004598  2101              MOVS     r1,#1
00459a  4825              LDR      r0,|L1.17968|
00459c  f7fffffe          BL       parse_g
;;;1862   fsz=stof(fsize);//7523.7412
0045a0  4857              LDR      r0,|L1.18176|
0045a2  f7fffffe          BL       stof
0045a6  9008              STR      r0,[sp,#0x20]
;;;1863   times=(fsz/1256)+1;  //1256 //1400
0045a8  4956              LDR      r1,|L1.18180|
0045aa  9808              LDR      r0,[sp,#0x20]
0045ac  f7fffffe          BL       __aeabi_fdiv
0045b0  217f              MOVS     r1,#0x7f
0045b2  05c9              LSLS     r1,r1,#23
0045b4  9001              STR      r0,[sp,#4]
0045b6  f7fffffe          BL       __aeabi_fadd
0045ba  9002              STR      r0,[sp,#8]
0045bc  f7fffffe          BL       __aeabi_f2iz
0045c0  4605              MOV      r5,r0
;;;1864   if(fsz == 0)times=0;				
0045c2  2100              MOVS     r1,#0
0045c4  9808              LDR      r0,[sp,#0x20]
0045c6  f7fffffe          BL       __aeabi_cfcmpeq
0045ca  d100              BNE      |L1.17870|
0045cc  2500              MOVS     r5,#0
                  |L1.17870|
;;;1865   qwe=strlen(uart_string_gsm);
0045ce  4818              LDR      r0,|L1.17968|
0045d0  f7fffffe          BL       strlen
0045d4  9007              STR      r0,[sp,#0x1c]
;;;1866   memset(uart_string_gsm,0,qwe);
0045d6  4816              LDR      r0,|L1.17968|
0045d8  9907              LDR      r1,[sp,#0x1c]
0045da  f7fffffe          BL       __aeabi_memclr4
;;;1867   		
;;;1868   							send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR" , "CONNECT",tmeout);	
0045de  4818              LDR      r0,|L1.17984|
0045e0  6800              LDR      r0,[r0,#0]  ; tmeout
0045e2  4b45              LDR      r3,|L1.18168|
0045e4  3b30              SUBS     r3,r3,#0x30
0045e6  4a15              LDR      r2,|L1.17980|
0045e8  3a08              SUBS     r2,r2,#8
0045ea  a152              ADR      r1,|L1.18228|
0045ec  9000              STR      r0,[sp,#0]
0045ee  4618              MOV      r0,r3
0045f0  301c              ADDS     r0,r0,#0x1c
0045f2  f7fffffe          BL       send_GSM
;;;1869   								cond =mystrstr(uart_string_gsm,'>');
0045f6  213e              MOVS     r1,#0x3e
0045f8  480d              LDR      r0,|L1.17968|
0045fa  f7fffffe          BL       mystrstr
0045fe  4606              MOV      r6,r0
;;;1870   									if(cond)	
004600  2e00              CMP      r6,#0
004602  d011              BEQ      |L1.17960|
;;;1871   									{
;;;1872   									clear();
004604  f7fffffe          BL       clear
;;;1873   									memset(uart_string_gsm,0,5000);
004608  494b              LDR      r1,|L1.18232|
00460a  4809              LDR      r0,|L1.17968|
00460c  f7fffffe          BL       __aeabi_memclr4
;;;1874   									qwe=strlen(sd_data);
004610  483d              LDR      r0,|L1.18184|
004612  f7fffffe          BL       strlen
004616  9007              STR      r0,[sp,#0x1c]
;;;1875   									tout=0;
004618  2000              MOVS     r0,#0
00461a  4924              LDR      r1,|L1.18092|
00461c  6008              STR      r0,[r1,#0]  ; tout
;;;1876   									k2=0;
00461e  4947              LDR      r1,|L1.18236|
004620  6008              STR      r0,[r1,#0]  ; k2
;;;1877   									for(k=0;k<(qwe-1);k++)
004622  4947              LDR      r1,|L1.18240|
004624  6008              STR      r0,[r1,#0]  ; k
004626  e099              B        |L1.18268|
                  |L1.17960|
004628  e0e4              B        |L1.18420|
00462a  0000              DCW      0x0000
                  |L1.17964|
                          DCD      ||.text||+0x1294
                  |L1.17968|
                          DCD      uart_string_gsm
                  |L1.17972|
                          DCD      0x400ff100
                  |L1.17976|
                          DCD      ||.text||+0x880
                  |L1.17980|
                          DCD      ||.text||+0x450
                  |L1.17984|
                          DCD      tmeout
                  |L1.17988|
004644  0a0a4154          DCB      "\n\nAT+CSCLK=1\r\n",0
004648  2b435343
00464c  4c4b3d31
004650  0d0a00  
004653  00                DCB      0
                  |L1.18004|
                          DCD      data
                  |L1.18008|
004658  0d0a0d0a          DCB      "\r\n\r\n",0
00465c  00      
00465d  00                DCB      0
00465e  00                DCB      0
00465f  00                DCB      0
                  |L1.18016|
004660  0a0a4154          DCB      "\n\nAT+SD2PCM=0\r\n",0
004664  2b534432
004668  50434d3d
00466c  300d0a00
                  |L1.18032|
004670  0a0a4154          DCB      "\n\nAT&W\r\n",0
004674  26570d0a
004678  00      
004679  00                DCB      0
00467a  00                DCB      0
00467b  00                DCB      0
                  |L1.18044|
00467c  0a0a4154          DCB      "\n\nAT+FSDRIVE=1\r\n",0
004680  2b465344
004684  52495645
004688  3d310d0a
00468c  00      
00468d  00                DCB      0
00468e  00                DCB      0
00468f  00                DCB      0
                  |L1.18064|
004690  0a0a4154          DCB      "\n\nAT+FSMEM\r\n",0
004694  2b46534d
004698  454d0d0a
00469c  00      
00469d  00                DCB      0
00469e  00                DCB      0
00469f  00                DCB      0
                  |L1.18080|
                          DCD      0x4006b000
                  |L1.18084|
                          DCD      lpticks
                  |L1.18088|
                          DCD      rtcticks
                  |L1.18092|
                          DCD      tout
                  |L1.18096|
                          DCD      tout2
                  |L1.18100|
                          DCD      rtcticks2
                  |L1.18104|
                          DCD      0x400ff000
                  |L1.18108|
                          DCD      0x40040000
                  |L1.18112|
                          DCD      xy_angle
                  |L1.18116|
                          DCD      offxy
                  |L1.18120|
                          DCD      xz_angle
                  |L1.18124|
                          DCD      offxz
                  |L1.18128|
                          DCD      yz_angle
                  |L1.18132|
                          DCD      offyz
                  |L1.18136|
                          DCD      resultx
                  |L1.18140|
                          DCD      offx
                  |L1.18144|
                          DCD      resulty
                  |L1.18148|
                          DCD      offy
                  |L1.18152|
                          DCD      resultz
                  |L1.18156|
                          DCD      offz
                  |L1.18160|
                          DCD      at_
                  |L1.18164|
                          DCD      drive
                  |L1.18168|
                          DCD      ||.text||+0x21fc
                  |L1.18172|
0046fc  4f4b00            DCB      "OK",0
0046ff  00                DCB      0
                  |L1.18176|
                          DCD      fsize
                  |L1.18180|
                          DCD      0x449d0000
                  |L1.18184|
                          DCD      sd_data
                  |L1.18188|
00470c  0a41542b          DCB      "\nAT+FSREAD=%s\\LOG.TXT,1,1256,%d\r\n",0
004710  46535245
004714  41443d25
004718  735c4c4f
00471c  472e5458
004720  542c312c
004724  31323536
004728  2c25640d
00472c  0a00    
00472e  00                DCB      0
00472f  00                DCB      0
                  |L1.18224|
                          DCD      ||.text||+0x1c8c
                  |L1.18228|
004734  3e00              DCB      ">",0
004736  00                DCB      0
004737  00                DCB      0
                  |L1.18232|
                          DCD      0x00001388
                  |L1.18236|
                          DCD      ||k2||
                  |L1.18240|
                          DCD      k
                  |L1.18244|
;;;1878   									{
;;;1879   										uart_putchar(UART1_BASE_PTR, sd_data[k]);
004744  4891              LDR      r0,|L1.18828|
004746  4a92              LDR      r2,|L1.18832|
004748  6812              LDR      r2,[r2,#0]  ; k
00474a  5c81              LDRB     r1,[r0,r2]
00474c  4891              LDR      r0,|L1.18836|
00474e  f7fffffe          BL       uart_putchar
004752  488f              LDR      r0,|L1.18832|
004754  6800              LDR      r0,[r0,#0]            ;1877  ; k
004756  1c40              ADDS     r0,r0,#1              ;1877
004758  498d              LDR      r1,|L1.18832|
00475a  6008              STR      r0,[r1,#0]            ;1877  ; k
                  |L1.18268|
00475c  9807              LDR      r0,[sp,#0x1c]         ;1877
00475e  1e40              SUBS     r0,r0,#1              ;1877
004760  498b              LDR      r1,|L1.18832|
004762  6809              LDR      r1,[r1,#0]            ;1877  ; k
004764  4288              CMP      r0,r1                 ;1877
004766  dced              BGT      |L1.18244|
;;;1880   									}uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
004768  211a              MOVS     r1,#0x1a
00476a  488a              LDR      r0,|L1.18836|
00476c  f7fffffe          BL       uart_putchar
004770  211a              MOVS     r1,#0x1a
004772  4888              LDR      r0,|L1.18836|
004774  f7fffffe          BL       uart_putchar
;;;1881   									do
004778  bf00              NOP      
                  |L1.18298|
;;;1882   																{q1=strstr(uart_string_gsm,"OK");
00477a  a187              ADR      r1,|L1.18840|
00477c  4887              LDR      r0,|L1.18844|
00477e  f7fffffe          BL       strstr
004782  9005              STR      r0,[sp,#0x14]
;;;1883   																	q2=strstr(uart_string_gsm, "ERROR");
004784  4986              LDR      r1,|L1.18848|
004786  4885              LDR      r0,|L1.18844|
004788  f7fffffe          BL       strstr
00478c  9004              STR      r0,[sp,#0x10]
;;;1884   																		q3=strstr(uart_string_gsm, "FAIL");	
00478e  4985              LDR      r1,|L1.18852|
004790  4882              LDR      r0,|L1.18844|
004792  f7fffffe          BL       strstr
004796  9003              STR      r0,[sp,#0xc]
;;;1885   																			q4=strstr(uart_string_gsm, "DEACT");	
004798  4983              LDR      r1,|L1.18856|
00479a  4880              LDR      r0,|L1.18844|
00479c  f7fffffe          BL       strstr
0047a0  4607              MOV      r7,r0
;;;1886   																	
;;;1887   																}while(!(q1 || q2 || q3 || q4 || (tout > 6) ) ); //|| (timeout < 1)   
0047a2  9805              LDR      r0,[sp,#0x14]
0047a4  2800              CMP      r0,#0
0047a6  d10b              BNE      |L1.18368|
0047a8  9804              LDR      r0,[sp,#0x10]
0047aa  2800              CMP      r0,#0
0047ac  d108              BNE      |L1.18368|
0047ae  9803              LDR      r0,[sp,#0xc]
0047b0  2800              CMP      r0,#0
0047b2  d105              BNE      |L1.18368|
0047b4  2f00              CMP      r7,#0
0047b6  d103              BNE      |L1.18368|
0047b8  487c              LDR      r0,|L1.18860|
0047ba  6800              LDR      r0,[r0,#0]  ; tout
0047bc  2806              CMP      r0,#6
0047be  dddc              BLE      |L1.18298|
                  |L1.18368|
;;;1888   																delay(10);clear();
0047c0  200a              MOVS     r0,#0xa
0047c2  f7fffffe          BL       delay
0047c6  f7fffffe          BL       clear
;;;1889   														uart_putchar(UART1_BASE_PTR,0x1A);
0047ca  211a              MOVS     r1,#0x1a
0047cc  4871              LDR      r0,|L1.18836|
0047ce  f7fffffe          BL       uart_putchar
;;;1890   												delay(10);
0047d2  200a              MOVS     r0,#0xa
0047d4  f7fffffe          BL       delay
;;;1891   										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
0047d8  211a              MOVS     r1,#0x1a
0047da  486e              LDR      r0,|L1.18836|
0047dc  f7fffffe          BL       uart_putchar
0047e0  211a              MOVS     r1,#0x1a
0047e2  486c              LDR      r0,|L1.18836|
0047e4  f7fffffe          BL       uart_putchar
0047e8  211a              MOVS     r1,#0x1a
0047ea  486a              LDR      r0,|L1.18836|
0047ec  f7fffffe          BL       uart_putchar
;;;1892   						k5++;
0047f0  1c64              ADDS     r4,r4,#1
0047f2  e03c              B        |L1.18542|
                  |L1.18420|
;;;1893   
;;;1894   
;;;1895   
;;;1896   
;;;1897   
;;;1898   
;;;1899   
;;;1900   
;;;1901   
;;;1902   //										
;;;1903   //																clear();
;;;1904   
;;;1905   //										qwe=strlen(sd_data);
;;;1906   //										for(k=0;k<(qwe-1);k++)
;;;1907   //										{
;;;1908   //											uart_putchar(UART1_BASE_PTR, sd_data[k]); //clear();
;;;1909   //										}	
;;;1910   
;;;1911   //											uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
;;;1912   //													k2=0;									//string array counter for uart 1
;;;1913   //													timeout=999001;						//timer counts to wait for characters in uart 1 									
;;;1914   //													//send_modem("\r\n");//uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");uart_putchar(UART1_BASE_PTR, 0x1A);send_modem("\r\n");
;;;1915   
;;;1916   //														do
;;;1917   //																{q1=strstr(uart_string_gsm,"OK\r\n");
;;;1918   //																	q2=strstr(uart_string_gsm, "ERROR");																	
;;;1919   //																	timeout--;
;;;1920   
;;;1921   
;;;1922   //																}while(!( q1 || (timeout < 1) || q2) );
;;;1923   //																delay(10);clear();
;;;1924   //														uart_putchar(UART1_BASE_PTR,0x1A);
;;;1925   //												delay(10);
;;;1926   //										uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);uart_putchar(UART1_BASE_PTR, 0x1A);
;;;1927   //														
;;;1928   //										k5++;
;;;1929   								//		memset(data,0,1000);
;;;1930   	//									if(k5 >= times-1){
;;;1931   	//										send_GSM("\nAT+FSCREATE=C:\\LOG.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
;;;1932   	//									}
;;;1933   									}
;;;1934   							else{
;;;1935   										log_it();
0047f4  f7fffffe          BL       log_it
;;;1936   										memset(data,0,strlen(data));
0047f8  486d              LDR      r0,|L1.18864|
0047fa  f7fffffe          BL       strlen
0047fe  4601              MOV      r1,r0
004800  9002              STR      r0,[sp,#8]
004802  486b              LDR      r0,|L1.18864|
004804  f7fffffe          BL       __aeabi_memclr4
;;;1937   										tcp_initialization();
004808  f7fffffe          BL       tcp_initialization
;;;1938   										log_it();
00480c  f7fffffe          BL       log_it
;;;1939   										memset(at_,0,100);
004810  2164              MOVS     r1,#0x64
004812  4868              LDR      r0,|L1.18868|
004814  f7fffffe          BL       __aeabi_memclr4
;;;1940   										sprintf(at_,"\nAT+FSFLSIZE=%s\\LOG.TXT\r\n",drive);	
004818  4a67              LDR      r2,|L1.18872|
00481a  4962              LDR      r1,|L1.18852|
00481c  3120              ADDS     r1,r1,#0x20
00481e  4865              LDR      r0,|L1.18868|
004820  f7fffffe          BL       __2sprintf
;;;1941   										send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
004824  4865              LDR      r0,|L1.18876|
004826  6800              LDR      r0,[r0,#0]  ; tmeout
004828  4b65              LDR      r3,|L1.18880|
00482a  4a5d              LDR      r2,|L1.18848|
00482c  3208              ADDS     r2,r2,#8
00482e  a15a              ADR      r1,|L1.18840|
004830  9000              STR      r0,[sp,#0]
004832  4860              LDR      r0,|L1.18868|
004834  f7fffffe          BL       send_GSM
;;;1942   										parse_g(uart_string_gsm, 1, 2, ' ', '\n', fsize);
004838  4862              LDR      r0,|L1.18884|
00483a  210a              MOVS     r1,#0xa
00483c  2320              MOVS     r3,#0x20
00483e  2202              MOVS     r2,#2
004840  9100              STR      r1,[sp,#0]
004842  9001              STR      r0,[sp,#4]
004844  2101              MOVS     r1,#1
004846  4855              LDR      r0,|L1.18844|
004848  f7fffffe          BL       parse_g
;;;1943   										fsz=stof(fsize);//7523.7412
00484c  485d              LDR      r0,|L1.18884|
00484e  f7fffffe          BL       stof
004852  9008              STR      r0,[sp,#0x20]
;;;1944   										times=(fsz/1256)+1;
004854  495c              LDR      r1,|L1.18888|
004856  9808              LDR      r0,[sp,#0x20]
004858  f7fffffe          BL       __aeabi_fdiv
00485c  217f              MOVS     r1,#0x7f
00485e  05c9              LSLS     r1,r1,#23
004860  9001              STR      r0,[sp,#4]
004862  f7fffffe          BL       __aeabi_fadd
004866  9002              STR      r0,[sp,#8]
004868  f7fffffe          BL       __aeabi_f2iz
00486c  4605              MOV      r5,r0
                  |L1.18542|
00486e  42ac              CMP      r4,r5                 ;1841
004870  da00              BGE      |L1.18548|
004872  e631              B        |L1.17624|
                  |L1.18548|
;;;1945   									}	
;;;1946   	
;;;1947   //		
;;;1948   		}
;;;1949   if((times != 0)){
004874  2d00              CMP      r5,#0
004876  d012              BEQ      |L1.18590|
;;;1950   memset(at_,0,100);
004878  2164              MOVS     r1,#0x64
00487a  484e              LDR      r0,|L1.18868|
00487c  f7fffffe          BL       __aeabi_memclr4
;;;1951   sprintf(at_,"\nAT+FSCREATE=%s\\LOG.TXT\r\n",drive);
004880  4a4d              LDR      r2,|L1.18872|
004882  4952              LDR      r1,|L1.18892|
004884  484b              LDR      r0,|L1.18868|
004886  f7fffffe          BL       __2sprintf
;;;1952   send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",tmeout);
00488a  484c              LDR      r0,|L1.18876|
00488c  6800              LDR      r0,[r0,#0]  ; tmeout
00488e  4b4c              LDR      r3,|L1.18880|
004890  4a43              LDR      r2,|L1.18848|
004892  3208              ADDS     r2,r2,#8
004894  a140              ADR      r1,|L1.18840|
004896  9000              STR      r0,[sp,#0]
004898  4846              LDR      r0,|L1.18868|
00489a  f7fffffe          BL       send_GSM
                  |L1.18590|
;;;1953   }		
;;;1954   
;;;1955   	//	sprintf(at_, "\r\nAT+CIPSTART=\"TCP\",\"%s\",\"%s\"\r\n", ip, port);
;;;1956   	//	printf("\n%s\n",send_GSM( at_ , "CONNECT", "ERROR\r\n" , "CONNECT",tmeout));	
;;;1957   	//	printf("\n%s\n",send_GSM("\r\nAT+CIPSEND\r\n", ">", "ERROR\r\n" , "CONNECT",tmeout));	
;;;1958   
;;;1959   	//		
;;;1960   		
;;;1961   		
;;;1962   	}
00489e  b009              ADD      sp,sp,#0x24
0048a0  bdf0              POP      {r4-r7,pc}
;;;1963   			
                          ENDP

                  bat_cind PROC
;;;1964   	
;;;1965   	void bat_cind()
0048a2  b53e              PUSH     {r1-r5,lr}
;;;1966   	{int netwrk;char netwrk_c[1];
;;;1967   		
;;;1968   				send_GSM("\r\nAT+CIND?\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
0048a4  4845              LDR      r0,|L1.18876|
0048a6  6800              LDR      r0,[r0,#0]  ; tmeout
0048a8  4b45              LDR      r3,|L1.18880|
0048aa  4a3d              LDR      r2,|L1.18848|
0048ac  3208              ADDS     r2,r2,#8
0048ae  a13a              ADR      r1,|L1.18840|
0048b0  9000              STR      r0,[sp,#0]
0048b2  a047              ADR      r0,|L1.18896|
0048b4  f7fffffe          BL       send_GSM
;;;1969   				parse_g(uart_string_gsm, 1, 2, ',', ',', netwrk_c);
0048b8  a802              ADD      r0,sp,#8
0048ba  212c              MOVS     r1,#0x2c
0048bc  460b              MOV      r3,r1
0048be  2202              MOVS     r2,#2
0048c0  9100              STR      r1,[sp,#0]
0048c2  9001              STR      r0,[sp,#4]
0048c4  2101              MOVS     r1,#1
0048c6  4835              LDR      r0,|L1.18844|
0048c8  f7fffffe          BL       parse_g
;;;1970   				netwrk = netwrk_c[0]- '0';
0048cc  4668              MOV      r0,sp
0048ce  7a00              LDRB     r0,[r0,#8]
0048d0  4604              MOV      r4,r0
0048d2  3c30              SUBS     r4,r4,#0x30
;;;1971   				
;;;1972   
;;;1973   		switch(netwrk)
0048d4  0023              MOVS     r3,r4
0048d6  f7fffffe          BL       __ARM_common_switch8
0048da  064b              DCB      0x06,0x4b
0048dc  04122230          DCB      0x04,0x12,0x22,0x30
0048e0  3f4b              DCB      0x3f,0x4b
;;;1974   		{
;;;1975   			case 1:
;;;1976   				
;;;1977       RED_OFF;		//Turn off RED LED
0048e2  2001              MOVS     r0,#1
0048e4  0740              LSLS     r0,r0,#29
0048e6  493e              LDR      r1,|L1.18912|
0048e8  6048              STR      r0,[r1,#4]
;;;1978       GREEN_OFF;	//Turn off GREEN LED
0048ea  0080              LSLS     r0,r0,#2
0048ec  6048              STR      r0,[r1,#4]
;;;1979       BLUE_OFF;		//Turn off BLUE LED			
0048ee  2020              MOVS     r0,#0x20
0048f0  493b              LDR      r1,|L1.18912|
0048f2  3940              SUBS     r1,r1,#0x40
0048f4  6048              STR      r0,[r1,#4]
;;;1980   			
;;;1981   				 RED_ON;		//Turn off RED LED
0048f6  0600              LSLS     r0,r0,#24
0048f8  4939              LDR      r1,|L1.18912|
0048fa  6088              STR      r0,[r1,#8]
;;;1982   					
;;;1983   			break;
0048fc  e043              B        |L1.18822|
;;;1984   			
;;;1985   			case 2:
;;;1986   		
;;;1987       RED_OFF;		//Turn off RED LED
0048fe  2001              MOVS     r0,#1
004900  0740              LSLS     r0,r0,#29
004902  4937              LDR      r1,|L1.18912|
004904  6048              STR      r0,[r1,#4]
;;;1988       GREEN_OFF;	//Turn off GREEN LED
004906  0080              LSLS     r0,r0,#2
004908  6048              STR      r0,[r1,#4]
;;;1989       BLUE_OFF;		//Turn off BLUE LED
00490a  2020              MOVS     r0,#0x20
00490c  4934              LDR      r1,|L1.18912|
00490e  3940              SUBS     r1,r1,#0x40
004910  6048              STR      r0,[r1,#4]
;;;1990   			
;;;1991   				 RED_ON;		//Turn off RED LED
004912  0600              LSLS     r0,r0,#24
004914  4932              LDR      r1,|L1.18912|
004916  6088              STR      r0,[r1,#8]
;;;1992   				 GREEN_ON;
004918  0080              LSLS     r0,r0,#2
00491a  6088              STR      r0,[r1,#8]
;;;1993   			
;;;1994   			break;
00491c  e033              B        |L1.18822|
;;;1995   			
;;;1996   			case 3:
;;;1997   				
;;;1998       RED_OFF;		//Turn off RED LED
00491e  2001              MOVS     r0,#1
004920  0740              LSLS     r0,r0,#29
004922  492f              LDR      r1,|L1.18912|
004924  6048              STR      r0,[r1,#4]
;;;1999       GREEN_OFF;	//Turn off GREEN LED
004926  0080              LSLS     r0,r0,#2
004928  6048              STR      r0,[r1,#4]
;;;2000       BLUE_OFF;		//Turn off BLUE LED
00492a  2020              MOVS     r0,#0x20
00492c  492c              LDR      r1,|L1.18912|
00492e  3940              SUBS     r1,r1,#0x40
004930  6048              STR      r0,[r1,#4]
;;;2001   			
;;;2002   				 GREEN_ON;		//Turn off RED LED
004932  0680              LSLS     r0,r0,#26
004934  492a              LDR      r1,|L1.18912|
004936  6088              STR      r0,[r1,#8]
;;;2003   
;;;2004   			
;;;2005   			break;
004938  e025              B        |L1.18822|
;;;2006   
;;;2007   			case 4:
;;;2008   				
;;;2009       RED_OFF;		//Turn off RED LED
00493a  2001              MOVS     r0,#1
00493c  0740              LSLS     r0,r0,#29
00493e  4928              LDR      r1,|L1.18912|
004940  6048              STR      r0,[r1,#4]
;;;2010       GREEN_OFF;	//Turn off GREEN LED
004942  0080              LSLS     r0,r0,#2
004944  6048              STR      r0,[r1,#4]
;;;2011       BLUE_OFF;		//Turn off BLUE LED
004946  2020              MOVS     r0,#0x20
004948  4925              LDR      r1,|L1.18912|
00494a  3940              SUBS     r1,r1,#0x40
00494c  6048              STR      r0,[r1,#4]
;;;2012   			
;;;2013   				 BLUE_ON;		//Turn off RED LED
00494e  6088              STR      r0,[r1,#8]
;;;2014   				 GREEN_ON;
004950  0680              LSLS     r0,r0,#26
004952  4923              LDR      r1,|L1.18912|
004954  6088              STR      r0,[r1,#8]
;;;2015   			
;;;2016   			break;
004956  e016              B        |L1.18822|
;;;2017   			
;;;2018   			case 5:
;;;2019   				
;;;2020       RED_OFF;		//Turn off RED LED
004958  2001              MOVS     r0,#1
00495a  0740              LSLS     r0,r0,#29
00495c  4920              LDR      r1,|L1.18912|
00495e  6048              STR      r0,[r1,#4]
;;;2021       GREEN_OFF;	//Turn off GREEN LED
004960  0080              LSLS     r0,r0,#2
004962  6048              STR      r0,[r1,#4]
;;;2022       BLUE_OFF;		//Turn off BLUE LED
004964  2020              MOVS     r0,#0x20
004966  491e              LDR      r1,|L1.18912|
004968  3940              SUBS     r1,r1,#0x40
00496a  6048              STR      r0,[r1,#4]
;;;2023   						
;;;2024   				 BLUE_ON;		//Turn off RED LED
00496c  6088              STR      r0,[r1,#8]
;;;2025   				
;;;2026   			break;
00496e  e00a              B        |L1.18822|
;;;2027   			
;;;2028   			default:
;;;2029   			
;;;2030       RED_OFF;		//Turn off RED LED
004970  2001              MOVS     r0,#1
004972  0740              LSLS     r0,r0,#29
004974  491a              LDR      r1,|L1.18912|
004976  6048              STR      r0,[r1,#4]
;;;2031       GREEN_OFF;	//Turn off GREEN LED
004978  0080              LSLS     r0,r0,#2
00497a  6048              STR      r0,[r1,#4]
;;;2032       BLUE_OFF;		//Turn off BLUE LED
00497c  2020              MOVS     r0,#0x20
00497e  4918              LDR      r1,|L1.18912|
004980  3940              SUBS     r1,r1,#0x40
004982  6048              STR      r0,[r1,#4]
;;;2033   			
;;;2034   			break;
004984  bf00              NOP      
                  |L1.18822|
004986  bf00              NOP                            ;1983
;;;2035   			
;;;2036   			
;;;2037   
;;;2038   		}			
;;;2039   		
;;;2040   
;;;2041   
;;;2042   
;;;2043   
;;;2044   		
;;;2045   		
;;;2046   		
;;;2047   	}
004988  bd3e              POP      {r1-r5,pc}
;;;2048   	
                          ENDP

                  send_balance PROC
;;;2049   	
;;;2050   	void send_balance(){}
00498a  4770              BX       lr
;;;2051   	
                          ENDP

                  |L1.18828|
                          DCD      sd_data
                  |L1.18832|
                          DCD      k
                  |L1.18836|
                          DCD      0x4006b000
                  |L1.18840|
004998  4f4b00            DCB      "OK",0
00499b  00                DCB      0
                  |L1.18844|
                          DCD      uart_string_gsm
                  |L1.18848|
                          DCD      ||.text||+0x448
                  |L1.18852|
                          DCD      ||.text||+0x21dc
                  |L1.18856|
                          DCD      ||.text||+0x1d90
                  |L1.18860|
                          DCD      tout
                  |L1.18864|
                          DCD      data
                  |L1.18868|
                          DCD      at_
                  |L1.18872|
                          DCD      drive
                  |L1.18876|
                          DCD      tmeout
                  |L1.18880|
                          DCD      ||.text||+0x880
                  |L1.18884|
                          DCD      fsize
                  |L1.18888|
                          DCD      0x449d0000
                  |L1.18892|
                          DCD      ||.text||+0x26a4
                  |L1.18896|
0049d0  0d0a4154          DCB      "\r\nAT+CIND?\r\n",0
0049d4  2b43494e
0049d8  443f0d0a
0049dc  00      
0049dd  00                DCB      0
0049de  00                DCB      0
0049df  00                DCB      0
                  |L1.18912|
                          DCD      0x400ff100

                          AREA ||.bss||, DATA, NOINIT, ALIGN=2

                  uart_string_gsm
                          %        5000
                  data
                          %        1500
                  num2
                          %        32
                  arr_medianas
                          %        108
                  string_gps
                          %        100
                  gga
                          %        100
                  ||rmc||
                          %        100
                  uart_string_gps
                          %        3000
                  data2
                          %        300
                  at_
                          %        100
                  lati
                          %        20
                  longi
                          %        20
                  fsize
                          %        15
                  num_o
                          %        15
                  _rtcticks
                          %        10
                  imei
                          %        20
                  sd_data
                          %        1400
                  data_balance
                          %        200

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

                          DCD      process0
                          DCD      process1
                          DCD      process2
                          DCD      process3
                          DCD      process4
                          DCD      process5
                          DCD      processdef

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=2

000000  696f742e          DCB      "iot.com",0
000004  636f6d00
000008  0a436f6f          DCB      "\nCoordinates : %s N, %s E\nSpeed : %s kmph\n\nhttps://"
00000c  7264696e
000010  61746573
000014  203a2025
000018  73204e2c
00001c  20257320
000020  450a5370
000024  65656420
000028  3a202573
00002c  206b6d70
000030  680a0a68
000034  74747073
000038  3a2f2f  
00003b  7777772e          DCB      "www.google.com/search?q=%s%c2C%s&ie=utf-8&oe=utf-8\n",0
00003f  676f6f67
000043  6c652e63
000047  6f6d2f73
00004b  65617263
00004f  683f713d
000053  25732563
000057  32432573
00005b  2669653d
00005f  7574662d
000063  38266f65
000067  3d757466
00006b  2d380a00
00006f  00                DCB      0
000070  0a09092a          DCB      "\n\t\t******************\n\t,\t%d\t,\t%d\t,\t%d\t,\t%d\t"
000074  2a2a2a2a
000078  2a2a2a2a
00007c  2a2a2a2a
000080  2a2a2a2a
000084  2a0a092c
000088  09256409
00008c  2c092564
000090  092c0925
000094  64092c09
000098  256409  
00009b  2c092564          DCB      ",\t%d\t,\t%d,\t%x,\t%x\n\t\t*******************\n",0
00009f  092c0925
0000a3  642c0925
0000a7  782c0925
0000ab  780a0909
0000af  2a2a2a2a
0000b3  2a2a2a2a
0000b7  2a2a2a2a
0000bb  2a2a2a2a
0000bf  2a2a2a0a
0000c3  00      
0000c4  0a41542b          DCB      "\nAT+FSREAD=C:\\IGN.TXT,0,100,1\r\n",0
0000c8  46535245
0000cc  41443d43
0000d0  3a5c4947
0000d4  4e2e5458
0000d8  542c302c
0000dc  3130302c
0000e0  310d0a00
0000e4  4552524f          DCB      "ERROR:",0
0000e8  523a00  
0000eb  00                DCB      0
0000ec  4552524f          DCB      "ERROR\r\n",0
0000f0  520d0a00
0000f4  4f4b00            DCB      "OK",0
0000f7  00                DCB      0
0000f8  494f4e00          DCB      "ION",0
0000fc  494f4646          DCB      "IOFF",0
000100  00      
000101  00                DCB      0
000102  00                DCB      0
000103  00                DCB      0
000104  0a41542b          DCB      "\nAT+FSCREATE=C:\\IGN.TXT\r\n",0
000108  46534352
00010c  45415445
000110  3d433a5c
000114  49474e2e
000118  5458540d
00011c  0a00    
00011e  00                DCB      0
00011f  00                DCB      0
000120  3e00              DCB      ">",0
000122  00                DCB      0
000123  00                DCB      0
000124  0d0a4154          DCB      "\r\nAT+FSWRITE=C:\\IGN.TXT,0,6,10\r\n",0
000128  2b465357
00012c  52495445
000130  3d433a5c
000134  49474e2e
000138  5458542c
00013c  302c362c
000140  31300d0a
000144  00      
000145  00                DCB      0
000146  00                DCB      0
000147  00                DCB      0
000148  4f4b0d0a          DCB      "OK\r\n",0
00014c  00      
00014d  00                DCB      0
00014e  00                DCB      0
00014f  00                DCB      0
000150  0a494f4e          DCB      "\nION\n\n\n\n",0
000154  0a0a0a0a
000158  00      

                          AREA ||.data||, DATA, ALIGN=2

                  stateCount
000000  00000000          DCB      0x00,0x00,0x00,0x00
                  k
                          DCD      0x00000000
                  l
                          DCD      0x00000000
                  ||k2||
                          DCD      0x00000000
                  ||l2||
                          DCD      0x00000000
                  tout
                          DCD      0x00000000
                  tout2
                          DCD      0x00000000
                  time
                          DCD      0x000f423f
                  temp
                          DCD      0x00000000
                  flagch
                          DCD      0x00000000
                  pit1_isrv_count
000028  0000              DCB      0x00,0x00
                  base_time125m
00002a  0000              DCB      0x00,0x00
                  ti_task
00002c  0000              DCB      0x00,0x00
                  ti_fall
00002e  0000              DCB      0x00,0x00
                  ti_accel_sampling
000030  0000              DCB      0x00,0x00
                  ti_delay
000032  0000              DCB      0x00,0x00
                  ti_print
000034  0000              DCB      0x00,0x00
                  ti_console
000036  0000              DCB      0x00,0x00
                  ti_led
000038  0000              DCB      0x00,0x00
                  ti_tsi0
00003a  0000              DCB      0x00,0x00
                  ti_tsi1
00003c  0000              DCB      0x00,0x00
                  ti_test_adc
00003e  0000              DCB      0x00,0x00
                  adc_sample
000040  00000000          DCB      0x00,0x00,0x00,0x00
                  X_acc
                          DCD      0x00000000
                  Y_acc
                          DCD      0x00000000
                  Z_acc
                          DCD      0x00000000
                  xy_mag
                          DCD      0x00000000
                  xz_mag
                          DCD      0x00000000
                  yz_mag
                          DCD      0x00000000
                  xy_angle
                          DCD      0x00000000
                  xz_angle
                          DCD      0x00000000
                  yz_angle
                          DCD      0x00000000
                  ||cat||
                          DCD      0x00000000
                  offset
                          DCD      0x00000000
                  fall_input
000070  0000              DCB      0x00,0x00
                  accel_x
000072  0000              DCB      0x00,0x00
                  accel_y
000074  0000              DCB      0x00,0x00
                  accel_z
000076  0000              DCB      0x00,0x00
                  resultx
000078  0000              DCB      0x00,0x00
                  resulty
00007a  0000              DCB      0x00,0x00
                  resultz
00007c  0000              DCB      0x00,0x00
                  aux1
00007e  0000              DCB      0x00,0x00
                  accel_mx
                          DCD      0x00000000
                  accel_my
                          DCD      0x00000000
                  accel_mz
                          DCD      0x00000000
                  magx
                          DCD      0x00000000
                  magy
                          DCD      0x00000000
                  magz
                          DCD      0x00000000
                  offxy
                          DCD      0x00000000
                  offxz
                          DCD      0x00000000
                  offyz
                          DCD      0x00000000
                  offx
                          DCD      0x00000000
                  offy
                          DCD      0x00000000
                  offz
                          DCD      0x00000000
                  temp1xy
                          DCD      0x00000000
                  temp1xz
                          DCD      0x00000000
                  temp1yz
                          DCD      0x00000000
                  temp1x
                          DCD      0x00000000
                  temp1y
                          DCD      0x00000000
                  temp1z
                          DCD      0x00000000
                  temp2xy
                          DCD      0x00000000
                  temp2xz
                          DCD      0x00000000
                  temp2yz
                          DCD      0x00000000
                  temp2x
                          DCD      0x00000000
                  temp2y
                          DCD      0x00000000
                  temp2z
                          DCD      0x00000000
                  motion
                          DCD      0x00000000
                  gu32PortStatus
                          DCD      0x00000000
                  cnt_start_value
                          DCD      0x00000000
                  cnt_end_value
                          DCD      0x00000000
                  overhead
                          DCD      0x00000000
                  sleep_flag
                          DCD      0x00000000
                  tmeout
                          DCD      0x00000004
                  int_erval
                          DCD      0x00000001
                  drive
                          DCD      0x00000000
000104  00000000          DCB      0x00,0x00,0x00,0x00
                  apn
                          DCD      ||.conststring||
                  speed
00010c  00000000          DCFS     0x00000000 ; 0
                  lpticks
                          DCD      0x00000000
                  voltagecbc
                          DCD      0x00000000
                  rtcticks
                          DCD      0x00000000
                  rtcticks2
                          DCD      0x00000000
                  ticks_ch
000120  00                DCB      0x00
                  save_rtcticks
000121  00                DCB      0x00
                  ||ip||
000122  3130              DCB      0x31,0x30
000124  342e3233          DCB      0x34,0x2e,0x32,0x33
000128  362e3230          DCB      0x36,0x2e,0x32,0x30
00012c  332e3400          DCB      0x33,0x2e,0x34,0x00
000130  0000              DCB      0x00,0x00
                  port
000132  3535              DCB      0x35,0x35
000134  35350000          DCB      0x35,0x35,0x00,0x00
                          DCD      0x00000000
                  velocity
                          DCD      0x00000000
000140  00                DCB      0x00
                  interval
000141  000000            DCB      0x00,0x00,0x00
000144  00000000          DCB      0x00,0x00,0x00,0x00
                  timeout
                          DCD      0x00000000
                  ||pr||
00014c  00000000          DCFS     0x00000000 ; 0
                  ||la||
000150  00000000          DCFS     0x00000000 ; 0
                  ggaptr
                          DCD      0x00000000
                  rmcptr
                          DCD      0x00000000
                  i
                          DCD      0x00000000
                  motion_samples
                          DCD      0x00000000
                  notsleep
                          DCD      0x00000000
                  ||ch||
000168  00                DCB      0x00
                  ringflag
000169  00                DCB      0x00
                  lptmr_interrupt
00016a  0000              DCB      0x00,0x00
                  time52
                          DCD      0x0000000f
                  cond277
                          DCD      0x00000000
                  cond20077
                          DCD      0x00000000

                          AREA ||i.ignread||, COMGROUP=ignread, CODE, READONLY, ALIGN=2

                  ignread PROC
;;;81     
;;;82     __inline void ignread(){
000000  b508              PUSH     {r3,lr}
;;;83     memset(at_,0,100);
000002  2164              MOVS     r1,#0x64
000004  4813              LDR      r0,|L19.84|
000006  f7fffffe          BL       __aeabi_memclr4
;;;84     		sprintf(at_, "\nAT+FSREAD=C:\\IGN.TXT,0,100,1\r\n");		
00000a  4913              LDR      r1,|L19.88|
00000c  4811              LDR      r0,|L19.84|
00000e  f7fffffe          BL       __2sprintf
;;;85     		send_GSM(at_, "OK", "ERROR\r\n" , "ERROR:",10);	
000012  200a              MOVS     r0,#0xa
000014  4b11              LDR      r3,|L19.92|
000016  4a12              LDR      r2,|L19.96|
000018  4912              LDR      r1,|L19.100|
00001a  9000              STR      r0,[sp,#0]
00001c  480d              LDR      r0,|L19.84|
00001e  f7fffffe          BL       send_GSM
;;;86     if(strstr(uart_string_gsm,"ION")){IGNITION_ON;FUEL_ON;}
000022  4911              LDR      r1,|L19.104|
000024  4811              LDR      r0,|L19.108|
000026  f7fffffe          BL       strstr
00002a  2800              CMP      r0,#0
00002c  d005              BEQ      |L19.58|
00002e  2002              MOVS     r0,#2
000030  490f              LDR      r1,|L19.112|
000032  6088              STR      r0,[r1,#8]
000034  2004              MOVS     r0,#4
000036  6088              STR      r0,[r1,#8]
000038  e00a              B        |L19.80|
                  |L19.58|
;;;87     else if(strstr(uart_string_gsm,"IOFF")){IGNITION_OFF;FUEL_OFF;}
00003a  490e              LDR      r1,|L19.116|
00003c  480b              LDR      r0,|L19.108|
00003e  f7fffffe          BL       strstr
000042  2800              CMP      r0,#0
000044  d004              BEQ      |L19.80|
000046  2002              MOVS     r0,#2
000048  4909              LDR      r1,|L19.112|
00004a  6048              STR      r0,[r1,#4]
00004c  2004              MOVS     r0,#4
00004e  6048              STR      r0,[r1,#4]
                  |L19.80|
;;;88     
;;;89     }	
000050  bd08              POP      {r3,pc}
;;;90     	
                          ENDP

000052  0000              DCW      0x0000
                  |L19.84|
                          DCD      at_
                  |L19.88|
                          DCD      ||.conststring||+0xc4
                  |L19.92|
                          DCD      ||.conststring||+0xe4
                  |L19.96|
                          DCD      ||.conststring||+0xec
                  |L19.100|
                          DCD      ||.conststring||+0xf4
                  |L19.104|
                          DCD      ||.conststring||+0xf8
                  |L19.108|
                          DCD      uart_string_gsm
                  |L19.112|
                          DCD      0x400ff000
                  |L19.116|
                          DCD      ||.conststring||+0xfc

                          AREA ||i.ignstaton||, COMGROUP=ignstaton, CODE, READONLY, ALIGN=2

                  ignstaton PROC
;;;90     	
;;;91     __inline void ignstaton(){
000000  b508              PUSH     {r3,lr}
;;;92     send_GSM("\nAT+FSCREATE=C:\\IGN.TXT\r\n", "OK", "ERROR\r\n" , "ERROR:",tmeout);
000002  480e              LDR      r0,|L25.60|
000004  6800              LDR      r0,[r0,#0]  ; tmeout
000006  4b0e              LDR      r3,|L25.64|
000008  4a0e              LDR      r2,|L25.68|
00000a  490f              LDR      r1,|L25.72|
00000c  9000              STR      r0,[sp,#0]
00000e  480f              LDR      r0,|L25.76|
000010  f7fffffe          BL       send_GSM
;;;93     send_GSM("\r\nAT+FSWRITE=C:\\IGN.TXT,0,6,10\r\n", ">", "ERROR\r\n" , "ERROR:",5);
000014  2005              MOVS     r0,#5
000016  4b0a              LDR      r3,|L25.64|
000018  4a0a              LDR      r2,|L25.68|
00001a  490d              LDR      r1,|L25.80|
00001c  9000              STR      r0,[sp,#0]
00001e  480d              LDR      r0,|L25.84|
000020  f7fffffe          BL       send_GSM
;;;94     	delay(10);
000024  200a              MOVS     r0,#0xa
000026  f7fffffe          BL       delay
;;;95     send_GSM("\nION\n\n\n\n", "OK\r\n", "ERROR\r\n" , "ERROR:",10);
00002a  200a              MOVS     r0,#0xa
00002c  4b04              LDR      r3,|L25.64|
00002e  4a05              LDR      r2,|L25.68|
000030  4909              LDR      r1,|L25.88|
000032  9000              STR      r0,[sp,#0]
000034  4809              LDR      r0,|L25.92|
000036  f7fffffe          BL       send_GSM
;;;96     
;;;97     
;;;98     }	
00003a  bd08              POP      {r3,pc}
;;;99     	
                          ENDP

                  |L25.60|
                          DCD      tmeout
                  |L25.64|
                          DCD      ||.conststring||+0xe4
                  |L25.68|
                          DCD      ||.conststring||+0xec
                  |L25.72|
                          DCD      ||.conststring||+0xf4
                  |L25.76|
                          DCD      ||.conststring||+0x104
                  |L25.80|
                          DCD      ||.conststring||+0x120
                  |L25.84|
                          DCD      ||.conststring||+0x124
                  |L25.88|
                          DCD      ||.conststring||+0x148
                  |L25.92|
                          DCD      ||.conststring||+0x150

                          AREA ||i.__ARM_common_switch8||, COMGROUP=__ARM_common_switch8, CODE, READONLY, ALIGN=1

                  __ARM_common_switch8 PROC
000000  b430              PUSH     {r4,r5}
000002  4674              MOV      r4,lr
000004  1e64              SUBS     r4,r4,#1
000006  7825              LDRB     r5,[r4,#0]
000008  1c64              ADDS     r4,r4,#1
00000a  42ab              CMP      r3,r5
00000c  d304              BCC      |L31.24|
                  |L31.14|
00000e  5d63              LDRB     r3,[r4,r5]
000010  005b              LSLS     r3,r3,#1
000012  18e3              ADDS     r3,r4,r3
000014  bc30              POP      {r4,r5}
000016  4718              BX       r3
                  |L31.24|
000018  461d              MOV      r5,r3
00001a  e7f8              B        |L31.14|
                          ENDP


;*** Start embedded assembler ***

#line 1 "..\\..\\..\\src\\projects\\KEIL_MAG\\vts_ver2.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___10_vts_ver2_c_8dde92bb____REV16|
#line 383 "C:\\Keil_v5\\ARM\\PACK\\ARM\\CMSIS\\5.0.0-Beta4\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___10_vts_ver2_c_8dde92bb____REV16| PROC
#line 384

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___10_vts_ver2_c_8dde92bb____REVSH|
#line 397
|__asm___10_vts_ver2_c_8dde92bb____REVSH| PROC
#line 398

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***

                  __ARM_use_no_argv EQU 0
